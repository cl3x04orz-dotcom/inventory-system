(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))d(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const x of f.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&d(x)}).observe(document,{childList:!0,subtree:!0});function c(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function d(u){if(u.ep)return;u.ep=!0;const f=c(u);fetch(u.href,f)}})();function dh(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var dd={exports:{}},zs={};var ip;function Ig(){if(ip)return zs;ip=1;var l=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function c(d,u,f){var x=null;if(f!==void 0&&(x=""+f),u.key!==void 0&&(x=""+u.key),"key"in u){f={};for(var b in u)b!=="key"&&(f[b]=u[b])}else f=u;return u=f.ref,{$$typeof:l,type:d,key:x,ref:u!==void 0?u:null,props:f}}return zs.Fragment=r,zs.jsx=c,zs.jsxs=c,zs}var cp;function Vg(){return cp||(cp=1,dd.exports=Ig()),dd.exports}var a=Vg(),ud={exports:{}},Oe={};var op;function Yg(){if(op)return Oe;op=1;var l=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function S(_){return _===null||typeof _!="object"?null:(_=y&&_[y]||_["@@iterator"],typeof _=="function"?_:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,N={};function w(_,Q,J){this.props=_,this.context=Q,this.refs=N,this.updater=J||A}w.prototype.isReactComponent={},w.prototype.setState=function(_,Q){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,Q,"setState")},w.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function L(){}L.prototype=w.prototype;function C(_,Q,J){this.props=_,this.context=Q,this.refs=N,this.updater=J||A}var M=C.prototype=new L;M.constructor=C,R(M,w.prototype),M.isPureReactComponent=!0;var O=Array.isArray;function v(){}var B={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function ae(_,Q,J){var le=J.ref;return{$$typeof:l,type:_,key:Q,ref:le!==void 0?le:null,props:J}}function oe(_,Q){return ae(_.type,Q,_.props)}function De(_){return typeof _=="object"&&_!==null&&_.$$typeof===l}function W(_){var Q={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(J){return Q[J]})}var ue=/\/+/g;function he(_,Q){return typeof _=="object"&&_!==null&&_.key!=null?W(""+_.key):Q.toString(36)}function de(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(v,v):(_.status="pending",_.then(function(Q){_.status==="pending"&&(_.status="fulfilled",_.value=Q)},function(Q){_.status==="pending"&&(_.status="rejected",_.reason=Q)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function G(_,Q,J,le,ve){var je=typeof _;(je==="undefined"||je==="boolean")&&(_=null);var se=!1;if(_===null)se=!0;else switch(je){case"bigint":case"string":case"number":se=!0;break;case"object":switch(_.$$typeof){case l:case r:se=!0;break;case j:return se=_._init,G(se(_._payload),Q,J,le,ve)}}if(se)return ve=ve(_),se=le===""?"."+he(_,0):le,O(ve)?(J="",se!=null&&(J=se.replace(ue,"$&/")+"/"),G(ve,Q,J,"",function(Ee){return Ee})):ve!=null&&(De(ve)&&(ve=oe(ve,J+(ve.key==null||_&&_.key===ve.key?"":(""+ve.key).replace(ue,"$&/")+"/")+se)),Q.push(ve)),1;se=0;var ie=le===""?".":le+":";if(O(_))for(var be=0;be<_.length;be++)le=_[be],je=ie+he(le,be),se+=G(le,Q,J,je,ve);else if(be=S(_),typeof be=="function")for(_=be.call(_),be=0;!(le=_.next()).done;)le=le.value,je=ie+he(le,be++),se+=G(le,Q,J,je,ve);else if(je==="object"){if(typeof _.then=="function")return G(de(_),Q,J,le,ve);throw Q=String(_),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return se}function k(_,Q,J){if(_==null)return _;var le=[],ve=0;return G(_,le,"","",function(je){return Q.call(J,je,ve++)}),le}function Z(_){if(_._status===-1){var Q=_._result;Q=Q(),Q.then(function(J){(_._status===0||_._status===-1)&&(_._status=1,_._result=J)},function(J){(_._status===0||_._status===-1)&&(_._status=2,_._result=J)}),_._status===-1&&(_._status=0,_._result=Q)}if(_._status===1)return _._result.default;throw _._result}var ne=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},xe={map:k,forEach:function(_,Q,J){k(_,function(){Q.apply(this,arguments)},J)},count:function(_){var Q=0;return k(_,function(){Q++}),Q},toArray:function(_){return k(_,function(Q){return Q})||[]},only:function(_){if(!De(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return Oe.Activity=g,Oe.Children=xe,Oe.Component=w,Oe.Fragment=c,Oe.Profiler=u,Oe.PureComponent=C,Oe.StrictMode=d,Oe.Suspense=h,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(_){return B.H.useMemoCache(_)}},Oe.cache=function(_){return function(){return _.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(_,Q,J){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var le=R({},_.props),ve=_.key;if(Q!=null)for(je in Q.key!==void 0&&(ve=""+Q.key),Q)!q.call(Q,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&Q.ref===void 0||(le[je]=Q[je]);var je=arguments.length-2;if(je===1)le.children=J;else if(1<je){for(var se=Array(je),ie=0;ie<je;ie++)se[ie]=arguments[ie+2];le.children=se}return ae(_.type,ve,le)},Oe.createContext=function(_){return _={$$typeof:x,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:f,_context:_},_},Oe.createElement=function(_,Q,J){var le,ve={},je=null;if(Q!=null)for(le in Q.key!==void 0&&(je=""+Q.key),Q)q.call(Q,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ve[le]=Q[le]);var se=arguments.length-2;if(se===1)ve.children=J;else if(1<se){for(var ie=Array(se),be=0;be<se;be++)ie[be]=arguments[be+2];ve.children=ie}if(_&&_.defaultProps)for(le in se=_.defaultProps,se)ve[le]===void 0&&(ve[le]=se[le]);return ae(_,je,ve)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(_){return{$$typeof:b,render:_}},Oe.isValidElement=De,Oe.lazy=function(_){return{$$typeof:j,_payload:{_status:-1,_result:_},_init:Z}},Oe.memo=function(_,Q){return{$$typeof:p,type:_,compare:Q===void 0?null:Q}},Oe.startTransition=function(_){var Q=B.T,J={};B.T=J;try{var le=_(),ve=B.S;ve!==null&&ve(J,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(v,ne)}catch(je){ne(je)}finally{Q!==null&&J.types!==null&&(Q.types=J.types),B.T=Q}},Oe.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Oe.use=function(_){return B.H.use(_)},Oe.useActionState=function(_,Q,J){return B.H.useActionState(_,Q,J)},Oe.useCallback=function(_,Q){return B.H.useCallback(_,Q)},Oe.useContext=function(_){return B.H.useContext(_)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(_,Q){return B.H.useDeferredValue(_,Q)},Oe.useEffect=function(_,Q){return B.H.useEffect(_,Q)},Oe.useEffectEvent=function(_){return B.H.useEffectEvent(_)},Oe.useId=function(){return B.H.useId()},Oe.useImperativeHandle=function(_,Q,J){return B.H.useImperativeHandle(_,Q,J)},Oe.useInsertionEffect=function(_,Q){return B.H.useInsertionEffect(_,Q)},Oe.useLayoutEffect=function(_,Q){return B.H.useLayoutEffect(_,Q)},Oe.useMemo=function(_,Q){return B.H.useMemo(_,Q)},Oe.useOptimistic=function(_,Q){return B.H.useOptimistic(_,Q)},Oe.useReducer=function(_,Q,J){return B.H.useReducer(_,Q,J)},Oe.useRef=function(_){return B.H.useRef(_)},Oe.useState=function(_){return B.H.useState(_)},Oe.useSyncExternalStore=function(_,Q,J){return B.H.useSyncExternalStore(_,Q,J)},Oe.useTransition=function(){return B.H.useTransition()},Oe.version="19.2.3",Oe}var dp;function Gi(){return dp||(dp=1,ud.exports=Yg()),ud.exports}var E=Gi();const Qe=dh(E);var fd={exports:{}},Ls={},xd={exports:{}},md={};var up;function Qg(){return up||(up=1,(function(l){function r(G,k){var Z=G.length;G.push(k);e:for(;0<Z;){var ne=Z-1>>>1,xe=G[ne];if(0<u(xe,k))G[ne]=k,G[Z]=xe,Z=ne;else break e}}function c(G){return G.length===0?null:G[0]}function d(G){if(G.length===0)return null;var k=G[0],Z=G.pop();if(Z!==k){G[0]=Z;e:for(var ne=0,xe=G.length,_=xe>>>1;ne<_;){var Q=2*(ne+1)-1,J=G[Q],le=Q+1,ve=G[le];if(0>u(J,Z))le<xe&&0>u(ve,J)?(G[ne]=ve,G[le]=Z,ne=le):(G[ne]=J,G[Q]=Z,ne=Q);else if(le<xe&&0>u(ve,Z))G[ne]=ve,G[le]=Z,ne=le;else break e}}return k}function u(G,k){var Z=G.sortIndex-k.sortIndex;return Z!==0?Z:G.id-k.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;l.unstable_now=function(){return f.now()}}else{var x=Date,b=x.now();l.unstable_now=function(){return x.now()-b}}var h=[],p=[],j=1,g=null,y=3,S=!1,A=!1,R=!1,N=!1,w=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function M(G){for(var k=c(p);k!==null;){if(k.callback===null)d(p);else if(k.startTime<=G)d(p),k.sortIndex=k.expirationTime,r(h,k);else break;k=c(p)}}function O(G){if(R=!1,M(G),!A)if(c(h)!==null)A=!0,v||(v=!0,W());else{var k=c(p);k!==null&&de(O,k.startTime-G)}}var v=!1,B=-1,q=5,ae=-1;function oe(){return N?!0:!(l.unstable_now()-ae<q)}function De(){if(N=!1,v){var G=l.unstable_now();ae=G;var k=!0;try{e:{A=!1,R&&(R=!1,L(B),B=-1),S=!0;var Z=y;try{t:{for(M(G),g=c(h);g!==null&&!(g.expirationTime>G&&oe());){var ne=g.callback;if(typeof ne=="function"){g.callback=null,y=g.priorityLevel;var xe=ne(g.expirationTime<=G);if(G=l.unstable_now(),typeof xe=="function"){g.callback=xe,M(G),k=!0;break t}g===c(h)&&d(h),M(G)}else d(h);g=c(h)}if(g!==null)k=!0;else{var _=c(p);_!==null&&de(O,_.startTime-G),k=!1}}break e}finally{g=null,y=Z,S=!1}k=void 0}}finally{k?W():v=!1}}}var W;if(typeof C=="function")W=function(){C(De)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,he=ue.port2;ue.port1.onmessage=De,W=function(){he.postMessage(null)}}else W=function(){w(De,0)};function de(G,k){B=w(function(){G(l.unstable_now())},k)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(G){G.callback=null},l.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<G?Math.floor(1e3/G):5},l.unstable_getCurrentPriorityLevel=function(){return y},l.unstable_next=function(G){switch(y){case 1:case 2:case 3:var k=3;break;default:k=y}var Z=y;y=k;try{return G()}finally{y=Z}},l.unstable_requestPaint=function(){N=!0},l.unstable_runWithPriority=function(G,k){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Z=y;y=G;try{return k()}finally{y=Z}},l.unstable_scheduleCallback=function(G,k,Z){var ne=l.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ne+Z:ne):Z=ne,G){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=Z+xe,G={id:j++,callback:k,priorityLevel:G,startTime:Z,expirationTime:xe,sortIndex:-1},Z>ne?(G.sortIndex=Z,r(p,G),c(h)===null&&G===c(p)&&(R?(L(B),B=-1):R=!0,de(O,Z-ne))):(G.sortIndex=xe,r(h,G),A||S||(A=!0,v||(v=!0,W()))),G},l.unstable_shouldYield=oe,l.unstable_wrapCallback=function(G){var k=y;return function(){var Z=y;y=k;try{return G.apply(this,arguments)}finally{y=Z}}}})(md)),md}var fp;function Kg(){return fp||(fp=1,xd.exports=Qg()),xd.exports}var pd={exports:{}},kt={};var xp;function Xg(){if(xp)return kt;xp=1;var l=Gi();function r(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)p+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var d={d:{f:c,r:function(){throw Error(r(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},u=Symbol.for("react.portal");function f(h,p,j){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:g==null?null:""+g,children:h,containerInfo:p,implementation:j}}var x=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,kt.createPortal=function(h,p){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(r(299));return f(h,p,null,j)},kt.flushSync=function(h){var p=x.T,j=d.p;try{if(x.T=null,d.p=2,h)return h()}finally{x.T=p,d.p=j,d.d.f()}},kt.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,d.d.C(h,p))},kt.prefetchDNS=function(h){typeof h=="string"&&d.d.D(h)},kt.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var j=p.as,g=b(j,p.crossOrigin),y=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;j==="style"?d.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:S}):j==="script"&&d.d.X(h,{crossOrigin:g,integrity:y,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},kt.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var j=b(p.as,p.crossOrigin);d.d.M(h,{crossOrigin:j,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&d.d.M(h)},kt.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var j=p.as,g=b(j,p.crossOrigin);d.d.L(h,j,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},kt.preloadModule=function(h,p){if(typeof h=="string")if(p){var j=b(p.as,p.crossOrigin);d.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:j,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else d.d.m(h)},kt.requestFormReset=function(h){d.d.r(h)},kt.unstable_batchedUpdates=function(h,p){return h(p)},kt.useFormState=function(h,p,j){return x.H.useFormState(h,p,j)},kt.useFormStatus=function(){return x.H.useHostTransitionStatus()},kt.version="19.2.3",kt}var mp;function uh(){if(mp)return pd.exports;mp=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(r){console.error(r)}}return l(),pd.exports=Xg(),pd.exports}var pp;function Zg(){if(pp)return Ls;pp=1;var l=Kg(),r=Gi(),c=uh();function d(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function x(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(f(e)!==e)throw Error(d(188))}function p(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(d(188));return t!==e?null:e}for(var n=e,s=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return h(i),e;if(o===s)return h(i),t;o=o.sibling}throw Error(d(188))}if(n.return!==s.return)n=i,s=o;else{for(var m=!1,D=i.child;D;){if(D===n){m=!0,n=i,s=o;break}if(D===s){m=!0,s=i,n=o;break}D=D.sibling}if(!m){for(D=o.child;D;){if(D===n){m=!0,n=o,s=i;break}if(D===s){m=!0,s=o,n=i;break}D=D.sibling}if(!m)throw Error(d(189))}}if(n.alternate!==s)throw Error(d(190))}if(n.tag!==3)throw Error(d(188));return n.stateNode.current===n?e:t}function j(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=j(e),t!==null)return t;e=e.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),C=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),De=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=De&&e[De]||e["@@iterator"],typeof e=="function"?e:null)}var ue=Symbol.for("react.client.reference");function he(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ue?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case w:return"Profiler";case N:return"StrictMode";case O:return"Suspense";case v:return"SuspenseList";case ae:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case C:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case M:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B:return t=e.displayName||null,t!==null?t:he(e.type)||"Memo";case q:t=e._payload,e=e._init;try{return he(e(t))}catch{}}return null}var de=Array.isArray,G=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ne=[],xe=-1;function _(e){return{current:e}}function Q(e){0>xe||(e.current=ne[xe],ne[xe]=null,xe--)}function J(e,t){xe++,ne[xe]=e.current,e.current=t}var le=_(null),ve=_(null),je=_(null),se=_(null);function ie(e,t){switch(J(je,t),J(ve,e),J(le,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?km(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=km(t),e=Om(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Q(le),J(le,e)}function be(){Q(le),Q(ve),Q(je)}function Ee(e){e.memoizedState!==null&&J(se,e);var t=le.current,n=Om(t,e.type);t!==n&&(J(ve,e),J(le,n))}function K(e){ve.current===e&&(Q(le),Q(ve)),se.current===e&&(Q(se),Os._currentValue=Z)}var H,te;function me(e){if(H===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||"",te=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+H+e+te}var pe=!1;function T(e,t){if(!e||pe)return"";pe=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(X){var Y=X}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(X){Y=X}e.call(ee.prototype)}}else{try{throw Error()}catch(X){Y=X}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(X){if(X&&Y&&typeof X.stack=="string")return[X.stack,Y.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=s.DetermineComponentFrameRoot(),m=o[0],D=o[1];if(m&&D){var z=m.split(`
`),V=D.split(`
`);for(i=s=0;s<z.length&&!z[s].includes("DetermineComponentFrameRoot");)s++;for(;i<V.length&&!V[i].includes("DetermineComponentFrameRoot");)i++;if(s===z.length||i===V.length)for(s=z.length-1,i=V.length-1;1<=s&&0<=i&&z[s]!==V[i];)i--;for(;1<=s&&0<=i;s--,i--)if(z[s]!==V[i]){if(s!==1||i!==1)do if(s--,i--,0>i||z[s]!==V[i]){var P=`
`+z[s].replace(" at new "," at ");return e.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",e.displayName)),P}while(1<=s&&0<=i);break}}}finally{pe=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?me(n):""}function re(e,t){switch(e.tag){case 26:case 27:case 5:return me(e.type);case 16:return me("Lazy");case 13:return e.child!==t&&t!==null?me("Suspense Fallback"):me("Suspense");case 19:return me("SuspenseList");case 0:case 15:return T(e.type,!1);case 11:return T(e.type.render,!1);case 1:return T(e.type,!0);case 31:return me("Activity");default:return""}}function fe(e){try{var t="",n=null;do t+=re(e,n),n=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var ge=Object.prototype.hasOwnProperty,Me=l.unstable_scheduleCallback,Se=l.unstable_cancelCallback,Xe=l.unstable_shouldYield,ft=l.unstable_requestPaint,Ze=l.unstable_now,ea=l.unstable_getCurrentPriorityLevel,$l=l.unstable_ImmediatePriority,ql=l.unstable_UserBlockingPriority,vn=l.unstable_NormalPriority,Gl=l.unstable_LowPriority,ou=l.unstable_IdlePriority,Dy=l.log,Cy=l.unstable_setDisableYieldValue,Il=null,Gt=null;function Ga(e){if(typeof Dy=="function"&&Cy(e),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(Il,e)}catch{}}var It=Math.clz32?Math.clz32:Ty,Ey=Math.log,Ay=Math.LN2;function Ty(e){return e>>>=0,e===0?32:31-(Ey(e)/Ay|0)|0}var sr=256,rr=262144,ir=4194304;function Nn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function cr(e,t,n){var s=e.pendingLanes;if(s===0)return 0;var i=0,o=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var D=s&134217727;return D!==0?(s=D&~o,s!==0?i=Nn(s):(m&=D,m!==0?i=Nn(m):n||(n=D&~e,n!==0&&(i=Nn(n))))):(D=s&~o,D!==0?i=Nn(D):m!==0?i=Nn(m):n||(n=s&~e,n!==0&&(i=Nn(n)))),i===0?0:t!==0&&t!==i&&(t&o)===0&&(o=i&-i,n=t&-t,o>=n||o===32&&(n&4194048)!==0)?t:i}function Vl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ky(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function du(){var e=ir;return ir<<=1,(ir&62914560)===0&&(ir=4194304),e}function Ji(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Yl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Oy(e,t,n,s,i,o){var m=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var D=e.entanglements,z=e.expirationTimes,V=e.hiddenUpdates;for(n=m&~n;0<n;){var P=31-It(n),ee=1<<P;D[P]=0,z[P]=-1;var Y=V[P];if(Y!==null)for(V[P]=null,P=0;P<Y.length;P++){var X=Y[P];X!==null&&(X.lane&=-536870913)}n&=~ee}s!==0&&uu(e,s,0),o!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=o&~(m&~t))}function uu(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-It(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|n&261930}function fu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-It(n),i=1<<s;i&t|e[s]&t&&(e[s]|=t),n&=~i}}function xu(e,t){var n=t&-t;return n=(n&42)!==0?1:Fi(n),(n&(e.suspendedLanes|t))!==0?0:n}function Fi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Wi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function mu(){var e=k.p;return e!==0?e:(e=window.event,e===void 0?32:ep(e.type))}function pu(e,t){var n=k.p;try{return k.p=e,t()}finally{k.p=n}}var Ia=Math.random().toString(36).slice(2),wt="__reactFiber$"+Ia,zt="__reactProps$"+Ia,Qn="__reactContainer$"+Ia,ec="__reactEvents$"+Ia,My="__reactListeners$"+Ia,_y="__reactHandles$"+Ia,hu="__reactResources$"+Ia,Ql="__reactMarker$"+Ia;function tc(e){delete e[wt],delete e[zt],delete e[ec],delete e[My],delete e[_y]}function Kn(e){var t=e[wt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qn]||n[wt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Um(e);e!==null;){if(n=e[wt])return n;e=Um(e)}return t}e=n,n=e.parentNode}return null}function Xn(e){if(e=e[wt]||e[Qn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Kl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(d(33))}function Zn(e){var t=e[hu];return t||(t=e[hu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function gt(e){e[Ql]=!0}var yu=new Set,bu={};function jn(e,t){Pn(e,t),Pn(e+"Capture",t)}function Pn(e,t){for(bu[e]=t,e=0;e<t.length;e++)yu.add(t[e])}var Ry=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gu={},vu={};function zy(e){return ge.call(vu,e)?!0:ge.call(gu,e)?!1:Ry.test(e)?vu[e]=!0:(gu[e]=!0,!1)}function or(e,t,n){if(zy(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function dr(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function wa(e,t,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+s)}}function ta(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Nu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ly(e,t,n){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,o=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(m){n=""+m,o.call(this,m)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(m){n=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ac(e){if(!e._valueTracker){var t=Nu(e)?"checked":"value";e._valueTracker=Ly(e,t,""+e[t])}}function ju(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Nu(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function ur(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var By=/[\n"\\]/g;function aa(e){return e.replace(By,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function nc(e,t,n,s,i,o,m,D){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ta(t)):e.value!==""+ta(t)&&(e.value=""+ta(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?lc(e,m,ta(t)):n!=null?lc(e,m,ta(n)):s!=null&&e.removeAttribute("value"),i==null&&o!=null&&(e.defaultChecked=!!o),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?e.name=""+ta(D):e.removeAttribute("name")}function Su(e,t,n,s,i,o,m,D){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){ac(e);return}n=n!=null?""+ta(n):"",t=t!=null?""+ta(t):n,D||t===e.value||(e.value=t),e.defaultValue=t}s=s??i,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=D?e.checked:!!s,e.defaultChecked=!!s,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),ac(e)}function lc(e,t,n){t==="number"&&ur(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Jn(e,t,n,s){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&s&&(e[n].defaultSelected=!0)}else{for(n=""+ta(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function wu(e,t,n){if(t!=null&&(t=""+ta(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+ta(n):""}function Du(e,t,n,s){if(t==null){if(s!=null){if(n!=null)throw Error(d(92));if(de(s)){if(1<s.length)throw Error(d(93));s=s[0]}n=s}n==null&&(n=""),t=n}n=ta(t),e.defaultValue=n,s=e.textContent,s===n&&s!==""&&s!==null&&(e.value=s),ac(e)}function Fn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Uy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cu(e,t,n){var s=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,n):typeof n!="number"||n===0||Uy.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Eu(e,t,n){if(t!=null&&typeof t!="object")throw Error(d(62));if(e=e.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var i in t)s=t[i],t.hasOwnProperty(i)&&n[i]!==s&&Cu(e,i,s)}else for(var o in t)t.hasOwnProperty(o)&&Cu(e,o,t[o])}function sc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$y=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fr(e){return $y.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Da(){}var rc=null;function ic(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wn=null,el=null;function Au(e){var t=Xn(e);if(t&&(e=t.stateNode)){var n=e[zt]||null;e:switch(e=t.stateNode,t.type){case"input":if(nc(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+aa(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var i=s[zt]||null;if(!i)throw Error(d(90));nc(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)s=n[t],s.form===e.form&&ju(s)}break e;case"textarea":wu(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Jn(e,!!n.multiple,t,!1)}}}var cc=!1;function Tu(e,t,n){if(cc)return e(t,n);cc=!0;try{var s=e(t);return s}finally{if(cc=!1,(Wn!==null||el!==null)&&(Wr(),Wn&&(t=Wn,e=el,el=Wn=null,Au(t),e)))for(t=0;t<e.length;t++)Au(e[t])}}function Xl(e,t){var n=e.stateNode;if(n===null)return null;var s=n[zt]||null;if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(d(231,t,typeof n));return n}var Ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oc=!1;if(Ca)try{var Zl={};Object.defineProperty(Zl,"passive",{get:function(){oc=!0}}),window.addEventListener("test",Zl,Zl),window.removeEventListener("test",Zl,Zl)}catch{oc=!1}var Va=null,dc=null,xr=null;function ku(){if(xr)return xr;var e,t=dc,n=t.length,s,i="value"in Va?Va.value:Va.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var m=n-e;for(s=1;s<=m&&t[n-s]===i[o-s];s++);return xr=i.slice(e,1<s?1-s:void 0)}function mr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function pr(){return!0}function Ou(){return!1}function Lt(e){function t(n,s,i,o,m){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=o,this.target=m,this.currentTarget=null;for(var D in e)e.hasOwnProperty(D)&&(n=e[D],this[D]=n?n(o):o[D]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?pr:Ou,this.isPropagationStopped=Ou,this}return g(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pr)},persist:function(){},isPersistent:pr}),t}var Sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hr=Lt(Sn),Pl=g({},Sn,{view:0,detail:0}),qy=Lt(Pl),uc,fc,Jl,yr=g({},Pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jl&&(Jl&&e.type==="mousemove"?(uc=e.screenX-Jl.screenX,fc=e.screenY-Jl.screenY):fc=uc=0,Jl=e),uc)},movementY:function(e){return"movementY"in e?e.movementY:fc}}),Mu=Lt(yr),Gy=g({},yr,{dataTransfer:0}),Iy=Lt(Gy),Vy=g({},Pl,{relatedTarget:0}),xc=Lt(Vy),Yy=g({},Sn,{animationName:0,elapsedTime:0,pseudoElement:0}),Qy=Lt(Yy),Ky=g({},Sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xy=Lt(Ky),Zy=g({},Sn,{data:0}),_u=Lt(Zy),Py={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Fy[e])?!!t[e]:!1}function mc(){return Wy}var eb=g({},Pl,{key:function(e){if(e.key){var t=Py[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mc,charCode:function(e){return e.type==="keypress"?mr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tb=Lt(eb),ab=g({},yr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ru=Lt(ab),nb=g({},Pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mc}),lb=Lt(nb),sb=g({},Sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),rb=Lt(sb),ib=g({},yr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cb=Lt(ib),ob=g({},Sn,{newState:0,oldState:0}),db=Lt(ob),ub=[9,13,27,32],pc=Ca&&"CompositionEvent"in window,Fl=null;Ca&&"documentMode"in document&&(Fl=document.documentMode);var fb=Ca&&"TextEvent"in window&&!Fl,zu=Ca&&(!pc||Fl&&8<Fl&&11>=Fl),Lu=" ",Bu=!1;function Uu(e,t){switch(e){case"keyup":return ub.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var tl=!1;function xb(e,t){switch(e){case"compositionend":return Hu(t);case"keypress":return t.which!==32?null:(Bu=!0,Lu);case"textInput":return e=t.data,e===Lu&&Bu?null:e;default:return null}}function mb(e,t){if(tl)return e==="compositionend"||!pc&&Uu(e,t)?(e=ku(),xr=dc=Va=null,tl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zu&&t.locale!=="ko"?null:t.data;default:return null}}var pb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $u(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pb[e.type]:t==="textarea"}function qu(e,t,n,s){Wn?el?el.push(s):el=[s]:Wn=s,t=ri(t,"onChange"),0<t.length&&(n=new hr("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Wl=null,es=null;function hb(e){wm(e,0)}function br(e){var t=Kl(e);if(ju(t))return e}function Gu(e,t){if(e==="change")return t}var Iu=!1;if(Ca){var hc;if(Ca){var yc="oninput"in document;if(!yc){var Vu=document.createElement("div");Vu.setAttribute("oninput","return;"),yc=typeof Vu.oninput=="function"}hc=yc}else hc=!1;Iu=hc&&(!document.documentMode||9<document.documentMode)}function Yu(){Wl&&(Wl.detachEvent("onpropertychange",Qu),es=Wl=null)}function Qu(e){if(e.propertyName==="value"&&br(es)){var t=[];qu(t,es,e,ic(e)),Tu(hb,t)}}function yb(e,t,n){e==="focusin"?(Yu(),Wl=t,es=n,Wl.attachEvent("onpropertychange",Qu)):e==="focusout"&&Yu()}function bb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return br(es)}function gb(e,t){if(e==="click")return br(t)}function vb(e,t){if(e==="input"||e==="change")return br(t)}function Nb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vt=typeof Object.is=="function"?Object.is:Nb;function ts(e,t){if(Vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!ge.call(t,i)||!Vt(e[i],t[i]))return!1}return!0}function Ku(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xu(e,t){var n=Ku(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ku(n)}}function Zu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ur(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ur(e.document)}return t}function bc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var jb=Ca&&"documentMode"in document&&11>=document.documentMode,al=null,gc=null,as=null,vc=!1;function Ju(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vc||al==null||al!==ur(s)||(s=al,"selectionStart"in s&&bc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),as&&ts(as,s)||(as=s,s=ri(gc,"onSelect"),0<s.length&&(t=new hr("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=al)))}function wn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var nl={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionrun:wn("Transition","TransitionRun"),transitionstart:wn("Transition","TransitionStart"),transitioncancel:wn("Transition","TransitionCancel"),transitionend:wn("Transition","TransitionEnd")},Nc={},Fu={};Ca&&(Fu=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function Dn(e){if(Nc[e])return Nc[e];if(!nl[e])return e;var t=nl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Fu)return Nc[e]=t[n];return e}var Wu=Dn("animationend"),ef=Dn("animationiteration"),tf=Dn("animationstart"),Sb=Dn("transitionrun"),wb=Dn("transitionstart"),Db=Dn("transitioncancel"),af=Dn("transitionend"),nf=new Map,jc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jc.push("scrollEnd");function ma(e,t){nf.set(e,t),jn(t,[e])}var gr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},na=[],ll=0,Sc=0;function vr(){for(var e=ll,t=Sc=ll=0;t<e;){var n=na[t];na[t++]=null;var s=na[t];na[t++]=null;var i=na[t];na[t++]=null;var o=na[t];if(na[t++]=null,s!==null&&i!==null){var m=s.pending;m===null?i.next=i:(i.next=m.next,m.next=i),s.pending=i}o!==0&&lf(n,i,o)}}function Nr(e,t,n,s){na[ll++]=e,na[ll++]=t,na[ll++]=n,na[ll++]=s,Sc|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function wc(e,t,n,s){return Nr(e,t,n,s),jr(e)}function Cn(e,t){return Nr(e,null,null,t),jr(e)}function lf(e,t,n){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n);for(var i=!1,o=e.return;o!==null;)o.childLanes|=n,s=o.alternate,s!==null&&(s.childLanes|=n),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(i=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,i&&t!==null&&(i=31-It(n),e=o.hiddenUpdates,s=e[i],s===null?e[i]=[t]:s.push(t),t.lane=n|536870912),o):null}function jr(e){if(50<ws)throw ws=0,Ro=null,Error(d(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var sl={};function Cb(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(e,t,n,s){return new Cb(e,t,n,s)}function Dc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ea(e,t){var n=e.alternate;return n===null?(n=Yt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function sf(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Sr(e,t,n,s,i,o){var m=0;if(s=e,typeof e=="function")Dc(e)&&(m=1);else if(typeof e=="string")m=Og(e,n,le.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ae:return e=Yt(31,n,t,i),e.elementType=ae,e.lanes=o,e;case R:return En(n.children,i,o,t);case N:m=8,i|=24;break;case w:return e=Yt(12,n,t,i|2),e.elementType=w,e.lanes=o,e;case O:return e=Yt(13,n,t,i),e.elementType=O,e.lanes=o,e;case v:return e=Yt(19,n,t,i),e.elementType=v,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:m=10;break e;case L:m=9;break e;case M:m=11;break e;case B:m=14;break e;case q:m=16,s=null;break e}m=29,n=Error(d(130,e===null?"null":typeof e,"")),s=null}return t=Yt(m,n,t,i),t.elementType=e,t.type=s,t.lanes=o,t}function En(e,t,n,s){return e=Yt(7,e,s,t),e.lanes=n,e}function Cc(e,t,n){return e=Yt(6,e,null,t),e.lanes=n,e}function rf(e){var t=Yt(18,null,null,0);return t.stateNode=e,t}function Ec(e,t,n){return t=Yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var cf=new WeakMap;function la(e,t){if(typeof e=="object"&&e!==null){var n=cf.get(e);return n!==void 0?n:(t={value:e,source:t,stack:fe(t)},cf.set(e,t),t)}return{value:e,source:t,stack:fe(t)}}var rl=[],il=0,wr=null,ns=0,sa=[],ra=0,Ya=null,ba=1,ga="";function Aa(e,t){rl[il++]=ns,rl[il++]=wr,wr=e,ns=t}function of(e,t,n){sa[ra++]=ba,sa[ra++]=ga,sa[ra++]=Ya,Ya=e;var s=ba;e=ga;var i=32-It(s)-1;s&=~(1<<i),n+=1;var o=32-It(t)+i;if(30<o){var m=i-i%5;o=(s&(1<<m)-1).toString(32),s>>=m,i-=m,ba=1<<32-It(t)+i|n<<i|s,ga=o+e}else ba=1<<o|n<<i|s,ga=e}function Ac(e){e.return!==null&&(Aa(e,1),of(e,1,0))}function Tc(e){for(;e===wr;)wr=rl[--il],rl[il]=null,ns=rl[--il],rl[il]=null;for(;e===Ya;)Ya=sa[--ra],sa[ra]=null,ga=sa[--ra],sa[ra]=null,ba=sa[--ra],sa[ra]=null}function df(e,t){sa[ra++]=ba,sa[ra++]=ga,sa[ra++]=Ya,ba=t.id,ga=t.overflow,Ya=e}var Dt=null,lt=null,$e=!1,Qa=null,ia=!1,kc=Error(d(519));function Ka(e){var t=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ls(la(t,e)),kc}function uf(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[wt]=e,t[zt]=s,n){case"dialog":Be("cancel",t),Be("close",t);break;case"iframe":case"object":case"embed":Be("load",t);break;case"video":case"audio":for(n=0;n<Cs.length;n++)Be(Cs[n],t);break;case"source":Be("error",t);break;case"img":case"image":case"link":Be("error",t),Be("load",t);break;case"details":Be("toggle",t);break;case"input":Be("invalid",t),Su(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Be("invalid",t);break;case"textarea":Be("invalid",t),Du(t,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||s.suppressHydrationWarning===!0||Am(t.textContent,n)?(s.popover!=null&&(Be("beforetoggle",t),Be("toggle",t)),s.onScroll!=null&&Be("scroll",t),s.onScrollEnd!=null&&Be("scrollend",t),s.onClick!=null&&(t.onclick=Da),t=!0):t=!1,t||Ka(e,!0)}function ff(e){for(Dt=e.return;Dt;)switch(Dt.tag){case 5:case 31:case 13:ia=!1;return;case 27:case 3:ia=!0;return;default:Dt=Dt.return}}function cl(e){if(e!==Dt)return!1;if(!$e)return ff(e),$e=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Zo(e.type,e.memoizedProps)),n=!n),n&&lt&&Ka(e),ff(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));lt=Bm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));lt=Bm(e)}else t===27?(t=lt,cn(e.type)?(e=ed,ed=null,lt=e):lt=t):lt=Dt?oa(e.stateNode.nextSibling):null;return!0}function An(){lt=Dt=null,$e=!1}function Oc(){var e=Qa;return e!==null&&($t===null?$t=e:$t.push.apply($t,e),Qa=null),e}function ls(e){Qa===null?Qa=[e]:Qa.push(e)}var Mc=_(null),Tn=null,Ta=null;function Xa(e,t,n){J(Mc,t._currentValue),t._currentValue=n}function ka(e){e._currentValue=Mc.current,Q(Mc)}function _c(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Rc(e,t,n,s){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){var m=i.child;o=o.firstContext;e:for(;o!==null;){var D=o;o=i;for(var z=0;z<t.length;z++)if(D.context===t[z]){o.lanes|=n,D=o.alternate,D!==null&&(D.lanes|=n),_c(o.return,n,e),s||(m=null);break e}o=D.next}}else if(i.tag===18){if(m=i.return,m===null)throw Error(d(341));m.lanes|=n,o=m.alternate,o!==null&&(o.lanes|=n),_c(m,n,e),m=null}else m=i.child;if(m!==null)m.return=i;else for(m=i;m!==null;){if(m===e){m=null;break}if(i=m.sibling,i!==null){i.return=m.return,m=i;break}m=m.return}i=m}}function ol(e,t,n,s){e=null;for(var i=t,o=!1;i!==null;){if(!o){if((i.flags&524288)!==0)o=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var m=i.alternate;if(m===null)throw Error(d(387));if(m=m.memoizedProps,m!==null){var D=i.type;Vt(i.pendingProps.value,m.value)||(e!==null?e.push(D):e=[D])}}else if(i===se.current){if(m=i.alternate,m===null)throw Error(d(387));m.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(Os):e=[Os])}i=i.return}e!==null&&Rc(t,e,n,s),t.flags|=262144}function Dr(e){for(e=e.firstContext;e!==null;){if(!Vt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function kn(e){Tn=e,Ta=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ct(e){return xf(Tn,e)}function Cr(e,t){return Tn===null&&kn(e),xf(e,t)}function xf(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ta===null){if(e===null)throw Error(d(308));Ta=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ta=Ta.next=t;return n}var Eb=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Ab=l.unstable_scheduleCallback,Tb=l.unstable_NormalPriority,xt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zc(){return{controller:new Eb,data:new Map,refCount:0}}function ss(e){e.refCount--,e.refCount===0&&Ab(Tb,function(){e.controller.abort()})}var rs=null,Lc=0,dl=0,ul=null;function kb(e,t){if(rs===null){var n=rs=[];Lc=0,dl=$o(),ul={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Lc++,t.then(mf,mf),t}function mf(){if(--Lc===0&&rs!==null){ul!==null&&(ul.status="fulfilled");var e=rs;rs=null,dl=0,ul=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ob(e,t){var n=[],s={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var i=0;i<n.length;i++)(0,n[i])(t)},function(i){for(s.status="rejected",s.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),s}var pf=G.S;G.S=function(e,t){Fx=Ze(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&kb(e,t),pf!==null&&pf(e,t)};var On=_(null);function Bc(){var e=On.current;return e!==null?e:at.pooledCache}function Er(e,t){t===null?J(On,On.current):J(On,t.pool)}function hf(){var e=Bc();return e===null?null:{parent:xt._currentValue,pool:e}}var fl=Error(d(460)),Uc=Error(d(474)),Ar=Error(d(542)),Tr={then:function(){}};function yf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function bf(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Da,Da),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,vf(e),e;default:if(typeof t.status=="string")t.then(Da,Da);else{if(e=at,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=s}},function(s){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,vf(e),e}throw _n=t,fl}}function Mn(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(_n=n,fl):n}}var _n=null;function gf(){if(_n===null)throw Error(d(459));var e=_n;return _n=null,e}function vf(e){if(e===fl||e===Ar)throw Error(d(483))}var xl=null,is=0;function kr(e){var t=is;return is+=1,xl===null&&(xl=[]),bf(xl,e,t)}function cs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Or(e,t){throw t.$$typeof===y?Error(d(525)):(e=Object.prototype.toString.call(t),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Nf(e){function t($,U){if(e){var I=$.deletions;I===null?($.deletions=[U],$.flags|=16):I.push(U)}}function n($,U){if(!e)return null;for(;U!==null;)t($,U),U=U.sibling;return null}function s($){for(var U=new Map;$!==null;)$.key!==null?U.set($.key,$):U.set($.index,$),$=$.sibling;return U}function i($,U){return $=Ea($,U),$.index=0,$.sibling=null,$}function o($,U,I){return $.index=I,e?(I=$.alternate,I!==null?(I=I.index,I<U?($.flags|=67108866,U):I):($.flags|=67108866,U)):($.flags|=1048576,U)}function m($){return e&&$.alternate===null&&($.flags|=67108866),$}function D($,U,I,F){return U===null||U.tag!==6?(U=Cc(I,$.mode,F),U.return=$,U):(U=i(U,I),U.return=$,U)}function z($,U,I,F){var Ce=I.type;return Ce===R?P($,U,I.props.children,F,I.key):U!==null&&(U.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===q&&Mn(Ce)===U.type)?(U=i(U,I.props),cs(U,I),U.return=$,U):(U=Sr(I.type,I.key,I.props,null,$.mode,F),cs(U,I),U.return=$,U)}function V($,U,I,F){return U===null||U.tag!==4||U.stateNode.containerInfo!==I.containerInfo||U.stateNode.implementation!==I.implementation?(U=Ec(I,$.mode,F),U.return=$,U):(U=i(U,I.children||[]),U.return=$,U)}function P($,U,I,F,Ce){return U===null||U.tag!==7?(U=En(I,$.mode,F,Ce),U.return=$,U):(U=i(U,I),U.return=$,U)}function ee($,U,I){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Cc(""+U,$.mode,I),U.return=$,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case S:return I=Sr(U.type,U.key,U.props,null,$.mode,I),cs(I,U),I.return=$,I;case A:return U=Ec(U,$.mode,I),U.return=$,U;case q:return U=Mn(U),ee($,U,I)}if(de(U)||W(U))return U=En(U,$.mode,I,null),U.return=$,U;if(typeof U.then=="function")return ee($,kr(U),I);if(U.$$typeof===C)return ee($,Cr($,U),I);Or($,U)}return null}function Y($,U,I,F){var Ce=U!==null?U.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return Ce!==null?null:D($,U,""+I,F);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case S:return I.key===Ce?z($,U,I,F):null;case A:return I.key===Ce?V($,U,I,F):null;case q:return I=Mn(I),Y($,U,I,F)}if(de(I)||W(I))return Ce!==null?null:P($,U,I,F,null);if(typeof I.then=="function")return Y($,U,kr(I),F);if(I.$$typeof===C)return Y($,U,Cr($,I),F);Or($,I)}return null}function X($,U,I,F,Ce){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return $=$.get(I)||null,D(U,$,""+F,Ce);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case S:return $=$.get(F.key===null?I:F.key)||null,z(U,$,F,Ce);case A:return $=$.get(F.key===null?I:F.key)||null,V(U,$,F,Ce);case q:return F=Mn(F),X($,U,I,F,Ce)}if(de(F)||W(F))return $=$.get(I)||null,P(U,$,F,Ce,null);if(typeof F.then=="function")return X($,U,I,kr(F),Ce);if(F.$$typeof===C)return X($,U,I,Cr(U,F),Ce);Or(U,F)}return null}function ye($,U,I,F){for(var Ce=null,Ie=null,Ne=U,ze=U=0,He=null;Ne!==null&&ze<I.length;ze++){Ne.index>ze?(He=Ne,Ne=null):He=Ne.sibling;var Ve=Y($,Ne,I[ze],F);if(Ve===null){Ne===null&&(Ne=He);break}e&&Ne&&Ve.alternate===null&&t($,Ne),U=o(Ve,U,ze),Ie===null?Ce=Ve:Ie.sibling=Ve,Ie=Ve,Ne=He}if(ze===I.length)return n($,Ne),$e&&Aa($,ze),Ce;if(Ne===null){for(;ze<I.length;ze++)Ne=ee($,I[ze],F),Ne!==null&&(U=o(Ne,U,ze),Ie===null?Ce=Ne:Ie.sibling=Ne,Ie=Ne);return $e&&Aa($,ze),Ce}for(Ne=s(Ne);ze<I.length;ze++)He=X(Ne,$,ze,I[ze],F),He!==null&&(e&&He.alternate!==null&&Ne.delete(He.key===null?ze:He.key),U=o(He,U,ze),Ie===null?Ce=He:Ie.sibling=He,Ie=He);return e&&Ne.forEach(function(xn){return t($,xn)}),$e&&Aa($,ze),Ce}function Ae($,U,I,F){if(I==null)throw Error(d(151));for(var Ce=null,Ie=null,Ne=U,ze=U=0,He=null,Ve=I.next();Ne!==null&&!Ve.done;ze++,Ve=I.next()){Ne.index>ze?(He=Ne,Ne=null):He=Ne.sibling;var xn=Y($,Ne,Ve.value,F);if(xn===null){Ne===null&&(Ne=He);break}e&&Ne&&xn.alternate===null&&t($,Ne),U=o(xn,U,ze),Ie===null?Ce=xn:Ie.sibling=xn,Ie=xn,Ne=He}if(Ve.done)return n($,Ne),$e&&Aa($,ze),Ce;if(Ne===null){for(;!Ve.done;ze++,Ve=I.next())Ve=ee($,Ve.value,F),Ve!==null&&(U=o(Ve,U,ze),Ie===null?Ce=Ve:Ie.sibling=Ve,Ie=Ve);return $e&&Aa($,ze),Ce}for(Ne=s(Ne);!Ve.done;ze++,Ve=I.next())Ve=X(Ne,$,ze,Ve.value,F),Ve!==null&&(e&&Ve.alternate!==null&&Ne.delete(Ve.key===null?ze:Ve.key),U=o(Ve,U,ze),Ie===null?Ce=Ve:Ie.sibling=Ve,Ie=Ve);return e&&Ne.forEach(function(Gg){return t($,Gg)}),$e&&Aa($,ze),Ce}function et($,U,I,F){if(typeof I=="object"&&I!==null&&I.type===R&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case S:e:{for(var Ce=I.key;U!==null;){if(U.key===Ce){if(Ce=I.type,Ce===R){if(U.tag===7){n($,U.sibling),F=i(U,I.props.children),F.return=$,$=F;break e}}else if(U.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===q&&Mn(Ce)===U.type){n($,U.sibling),F=i(U,I.props),cs(F,I),F.return=$,$=F;break e}n($,U);break}else t($,U);U=U.sibling}I.type===R?(F=En(I.props.children,$.mode,F,I.key),F.return=$,$=F):(F=Sr(I.type,I.key,I.props,null,$.mode,F),cs(F,I),F.return=$,$=F)}return m($);case A:e:{for(Ce=I.key;U!==null;){if(U.key===Ce)if(U.tag===4&&U.stateNode.containerInfo===I.containerInfo&&U.stateNode.implementation===I.implementation){n($,U.sibling),F=i(U,I.children||[]),F.return=$,$=F;break e}else{n($,U);break}else t($,U);U=U.sibling}F=Ec(I,$.mode,F),F.return=$,$=F}return m($);case q:return I=Mn(I),et($,U,I,F)}if(de(I))return ye($,U,I,F);if(W(I)){if(Ce=W(I),typeof Ce!="function")throw Error(d(150));return I=Ce.call(I),Ae($,U,I,F)}if(typeof I.then=="function")return et($,U,kr(I),F);if(I.$$typeof===C)return et($,U,Cr($,I),F);Or($,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,U!==null&&U.tag===6?(n($,U.sibling),F=i(U,I),F.return=$,$=F):(n($,U),F=Cc(I,$.mode,F),F.return=$,$=F),m($)):n($,U)}return function($,U,I,F){try{is=0;var Ce=et($,U,I,F);return xl=null,Ce}catch(Ne){if(Ne===fl||Ne===Ar)throw Ne;var Ie=Yt(29,Ne,null,$.mode);return Ie.lanes=F,Ie.return=$,Ie}}}var Rn=Nf(!0),jf=Nf(!1),Za=!1;function Hc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $c(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Pa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ja(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ye&2)!==0){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,t=jr(e),lf(e,null,n),t}return Nr(e,s,t,n),jr(e)}function os(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,fu(e,n)}}function qc(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var m={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?i=o=m:o=o.next=m,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:s.shared,callbacks:s.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Gc=!1;function ds(){if(Gc){var e=ul;if(e!==null)throw e}}function us(e,t,n,s){Gc=!1;var i=e.updateQueue;Za=!1;var o=i.firstBaseUpdate,m=i.lastBaseUpdate,D=i.shared.pending;if(D!==null){i.shared.pending=null;var z=D,V=z.next;z.next=null,m===null?o=V:m.next=V,m=z;var P=e.alternate;P!==null&&(P=P.updateQueue,D=P.lastBaseUpdate,D!==m&&(D===null?P.firstBaseUpdate=V:D.next=V,P.lastBaseUpdate=z))}if(o!==null){var ee=i.baseState;m=0,P=V=z=null,D=o;do{var Y=D.lane&-536870913,X=Y!==D.lane;if(X?(Ue&Y)===Y:(s&Y)===Y){Y!==0&&Y===dl&&(Gc=!0),P!==null&&(P=P.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var ye=e,Ae=D;Y=t;var et=n;switch(Ae.tag){case 1:if(ye=Ae.payload,typeof ye=="function"){ee=ye.call(et,ee,Y);break e}ee=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Ae.payload,Y=typeof ye=="function"?ye.call(et,ee,Y):ye,Y==null)break e;ee=g({},ee,Y);break e;case 2:Za=!0}}Y=D.callback,Y!==null&&(e.flags|=64,X&&(e.flags|=8192),X=i.callbacks,X===null?i.callbacks=[Y]:X.push(Y))}else X={lane:Y,tag:D.tag,payload:D.payload,callback:D.callback,next:null},P===null?(V=P=X,z=ee):P=P.next=X,m|=Y;if(D=D.next,D===null){if(D=i.shared.pending,D===null)break;X=D,D=X.next,X.next=null,i.lastBaseUpdate=X,i.shared.pending=null}}while(!0);P===null&&(z=ee),i.baseState=z,i.firstBaseUpdate=V,i.lastBaseUpdate=P,o===null&&(i.shared.lanes=0),an|=m,e.lanes=m,e.memoizedState=ee}}function Sf(e,t){if(typeof e!="function")throw Error(d(191,e));e.call(t)}function wf(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Sf(n[e],t)}var ml=_(null),Mr=_(0);function Df(e,t){e=Ha,J(Mr,e),J(ml,t),Ha=e|t.baseLanes}function Ic(){J(Mr,Ha),J(ml,ml.current)}function Vc(){Ha=Mr.current,Q(ml),Q(Mr)}var Qt=_(null),ca=null;function Fa(e){var t=e.alternate;J(dt,dt.current&1),J(Qt,e),ca===null&&(t===null||ml.current!==null||t.memoizedState!==null)&&(ca=e)}function Yc(e){J(dt,dt.current),J(Qt,e),ca===null&&(ca=e)}function Cf(e){e.tag===22?(J(dt,dt.current),J(Qt,e),ca===null&&(ca=e)):Wa()}function Wa(){J(dt,dt.current),J(Qt,Qt.current)}function Kt(e){Q(Qt),ca===e&&(ca=null),Q(dt)}var dt=_(0);function _r(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Fo(n)||Wo(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oa=0,_e=null,Fe=null,mt=null,Rr=!1,pl=!1,zn=!1,zr=0,fs=0,hl=null,Mb=0;function ct(){throw Error(d(321))}function Qc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vt(e[n],t[n]))return!1;return!0}function Kc(e,t,n,s,i,o){return Oa=o,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,G.H=e===null||e.memoizedState===null?ox:co,zn=!1,o=n(s,i),zn=!1,pl&&(o=Af(t,n,s,i)),Ef(e),o}function Ef(e){G.H=ps;var t=Fe!==null&&Fe.next!==null;if(Oa=0,mt=Fe=_e=null,Rr=!1,fs=0,hl=null,t)throw Error(d(300));e===null||pt||(e=e.dependencies,e!==null&&Dr(e)&&(pt=!0))}function Af(e,t,n,s){_e=e;var i=0;do{if(pl&&(hl=null),fs=0,pl=!1,25<=i)throw Error(d(301));if(i+=1,mt=Fe=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}G.H=dx,o=t(n,s)}while(pl);return o}function _b(){var e=G.H,t=e.useState()[0];return t=typeof t.then=="function"?xs(t):t,e=e.useState()[0],(Fe!==null?Fe.memoizedState:null)!==e&&(_e.flags|=1024),t}function Xc(){var e=zr!==0;return zr=0,e}function Zc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Pc(e){if(Rr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Rr=!1}Oa=0,mt=Fe=_e=null,pl=!1,fs=zr=0,hl=null}function Mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?_e.memoizedState=mt=e:mt=mt.next=e,mt}function ut(){if(Fe===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var t=mt===null?_e.memoizedState:mt.next;if(t!==null)mt=t,Fe=e;else{if(e===null)throw _e.alternate===null?Error(d(467)):Error(d(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},mt===null?_e.memoizedState=mt=e:mt=mt.next=e}return mt}function Lr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xs(e){var t=fs;return fs+=1,hl===null&&(hl=[]),e=bf(hl,e,t),t=_e,(mt===null?t.memoizedState:mt.next)===null&&(t=t.alternate,G.H=t===null||t.memoizedState===null?ox:co),e}function Br(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return xs(e);if(e.$$typeof===C)return Ct(e)}throw Error(d(438,String(e)))}function Jc(e){var t=null,n=_e.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var s=_e.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Lr(),_e.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=oe;return t.index++,n}function Ma(e,t){return typeof t=="function"?t(e):t}function Ur(e){var t=ut();return Fc(t,Fe,e)}function Fc(e,t,n){var s=e.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=n;var i=e.baseQueue,o=s.pending;if(o!==null){if(i!==null){var m=i.next;i.next=o.next,o.next=m}t.baseQueue=i=o,s.pending=null}if(o=e.baseState,i===null)e.memoizedState=o;else{t=i.next;var D=m=null,z=null,V=t,P=!1;do{var ee=V.lane&-536870913;if(ee!==V.lane?(Ue&ee)===ee:(Oa&ee)===ee){var Y=V.revertLane;if(Y===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),ee===dl&&(P=!0);else if((Oa&Y)===Y){V=V.next,Y===dl&&(P=!0);continue}else ee={lane:0,revertLane:V.revertLane,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},z===null?(D=z=ee,m=o):z=z.next=ee,_e.lanes|=Y,an|=Y;ee=V.action,zn&&n(o,ee),o=V.hasEagerState?V.eagerState:n(o,ee)}else Y={lane:ee,revertLane:V.revertLane,gesture:V.gesture,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},z===null?(D=z=Y,m=o):z=z.next=Y,_e.lanes|=ee,an|=ee;V=V.next}while(V!==null&&V!==t);if(z===null?m=o:z.next=D,!Vt(o,e.memoizedState)&&(pt=!0,P&&(n=ul,n!==null)))throw n;e.memoizedState=o,e.baseState=m,e.baseQueue=z,s.lastRenderedState=o}return i===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Wc(e){var t=ut(),n=t.queue;if(n===null)throw Error(d(311));n.lastRenderedReducer=e;var s=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var m=i=i.next;do o=e(o,m.action),m=m.next;while(m!==i);Vt(o,t.memoizedState)||(pt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,s]}function Tf(e,t,n){var s=_e,i=ut(),o=$e;if(o){if(n===void 0)throw Error(d(407));n=n()}else n=t();var m=!Vt((Fe||i).memoizedState,n);if(m&&(i.memoizedState=n,pt=!0),i=i.queue,ao(Mf.bind(null,s,i,e),[e]),i.getSnapshot!==t||m||mt!==null&&mt.memoizedState.tag&1){if(s.flags|=2048,yl(9,{destroy:void 0},Of.bind(null,s,i,n,t),null),at===null)throw Error(d(349));o||(Oa&127)!==0||kf(s,t,n)}return n}function kf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_e.updateQueue,t===null?(t=Lr(),_e.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Of(e,t,n,s){t.value=n,t.getSnapshot=s,_f(t)&&Rf(e)}function Mf(e,t,n){return n(function(){_f(t)&&Rf(e)})}function _f(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vt(e,n)}catch{return!0}}function Rf(e){var t=Cn(e,2);t!==null&&qt(t,e,2)}function eo(e){var t=Mt();if(typeof e=="function"){var n=e;if(e=n(),zn){Ga(!0);try{n()}finally{Ga(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:e},t}function zf(e,t,n,s){return e.baseState=n,Fc(e,Fe,typeof s=="function"?s:Ma)}function Rb(e,t,n,s,i){if(qr(e))throw Error(d(485));if(e=t.action,e!==null){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){o.listeners.push(m)}};G.T!==null?n(!0):o.isTransition=!1,s(o),n=t.pending,n===null?(o.next=t.pending=o,Lf(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Lf(e,t){var n=t.action,s=t.payload,i=e.state;if(t.isTransition){var o=G.T,m={};G.T=m;try{var D=n(i,s),z=G.S;z!==null&&z(m,D),Bf(e,t,D)}catch(V){to(e,t,V)}finally{o!==null&&m.types!==null&&(o.types=m.types),G.T=o}}else try{o=n(i,s),Bf(e,t,o)}catch(V){to(e,t,V)}}function Bf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){Uf(e,t,s)},function(s){return to(e,t,s)}):Uf(e,t,n)}function Uf(e,t,n){t.status="fulfilled",t.value=n,Hf(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Lf(e,n)))}function to(e,t,n){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=n,Hf(t),t=t.next;while(t!==s)}e.action=null}function Hf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function $f(e,t){return t}function qf(e,t){if($e){var n=at.formState;if(n!==null){e:{var s=_e;if($e){if(lt){t:{for(var i=lt,o=ia;i.nodeType!==8;){if(!o){i=null;break t}if(i=oa(i.nextSibling),i===null){i=null;break t}}o=i.data,i=o==="F!"||o==="F"?i:null}if(i){lt=oa(i.nextSibling),s=i.data==="F!";break e}}Ka(s)}s=!1}s&&(t=n[0])}}return n=Mt(),n.memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$f,lastRenderedState:t},n.queue=s,n=rx.bind(null,_e,s),s.dispatch=n,s=eo(!1),o=io.bind(null,_e,!1,s.queue),s=Mt(),i={state:t,dispatch:null,action:e,pending:null},s.queue=i,n=Rb.bind(null,_e,i,o,n),i.dispatch=n,s.memoizedState=e,[t,n,!1]}function Gf(e){var t=ut();return If(t,Fe,e)}function If(e,t,n){if(t=Fc(e,t,$f)[0],e=Ur(Ma)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=xs(t)}catch(m){throw m===fl?Ar:m}else s=t;t=ut();var i=t.queue,o=i.dispatch;return n!==t.memoizedState&&(_e.flags|=2048,yl(9,{destroy:void 0},zb.bind(null,i,n),null)),[s,o,e]}function zb(e,t){e.action=t}function Vf(e){var t=ut(),n=Fe;if(n!==null)return If(t,n,e);ut(),t=t.memoizedState,n=ut();var s=n.queue.dispatch;return n.memoizedState=e,[t,s,!1]}function yl(e,t,n,s){return e={tag:e,create:n,deps:s,inst:t,next:null},t=_e.updateQueue,t===null&&(t=Lr(),_e.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Yf(){return ut().memoizedState}function Hr(e,t,n,s){var i=Mt();_e.flags|=e,i.memoizedState=yl(1|t,{destroy:void 0},n,s===void 0?null:s)}function $r(e,t,n,s){var i=ut();s=s===void 0?null:s;var o=i.memoizedState.inst;Fe!==null&&s!==null&&Qc(s,Fe.memoizedState.deps)?i.memoizedState=yl(t,o,n,s):(_e.flags|=e,i.memoizedState=yl(1|t,o,n,s))}function Qf(e,t){Hr(8390656,8,e,t)}function ao(e,t){$r(2048,8,e,t)}function Lb(e){_e.flags|=4;var t=_e.updateQueue;if(t===null)t=Lr(),_e.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Kf(e){var t=ut().memoizedState;return Lb({ref:t,nextImpl:e}),function(){if((Ye&2)!==0)throw Error(d(440));return t.impl.apply(void 0,arguments)}}function Xf(e,t){return $r(4,2,e,t)}function Zf(e,t){return $r(4,4,e,t)}function Pf(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jf(e,t,n){n=n!=null?n.concat([e]):null,$r(4,4,Pf.bind(null,t,e),n)}function no(){}function Ff(e,t){var n=ut();t=t===void 0?null:t;var s=n.memoizedState;return t!==null&&Qc(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Wf(e,t){var n=ut();t=t===void 0?null:t;var s=n.memoizedState;if(t!==null&&Qc(t,s[1]))return s[0];if(s=e(),zn){Ga(!0);try{e()}finally{Ga(!1)}}return n.memoizedState=[s,t],s}function lo(e,t,n){return n===void 0||(Oa&1073741824)!==0&&(Ue&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=em(),_e.lanes|=e,an|=e,n)}function ex(e,t,n,s){return Vt(n,t)?n:ml.current!==null?(e=lo(e,n,s),Vt(e,t)||(pt=!0),e):(Oa&42)===0||(Oa&1073741824)!==0&&(Ue&261930)===0?(pt=!0,e.memoizedState=n):(e=em(),_e.lanes|=e,an|=e,t)}function tx(e,t,n,s,i){var o=k.p;k.p=o!==0&&8>o?o:8;var m=G.T,D={};G.T=D,io(e,!1,t,n);try{var z=i(),V=G.S;if(V!==null&&V(D,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var P=Ob(z,s);ms(e,t,P,Pt(e))}else ms(e,t,s,Pt(e))}catch(ee){ms(e,t,{then:function(){},status:"rejected",reason:ee},Pt())}finally{k.p=o,m!==null&&D.types!==null&&(m.types=D.types),G.T=m}}function Bb(){}function so(e,t,n,s){if(e.tag!==5)throw Error(d(476));var i=ax(e).queue;tx(e,i,t,Z,n===null?Bb:function(){return nx(e),n(s)})}function ax(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:Z},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function nx(e){var t=ax(e);t.next===null&&(t=e.alternate.memoizedState),ms(e,t.next.queue,{},Pt())}function ro(){return Ct(Os)}function lx(){return ut().memoizedState}function sx(){return ut().memoizedState}function Ub(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Pt();e=Pa(n);var s=Ja(t,e,n);s!==null&&(qt(s,t,n),os(s,t,n)),t={cache:zc()},e.payload=t;return}t=t.return}}function Hb(e,t,n){var s=Pt();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},qr(e)?ix(t,n):(n=wc(e,t,n,s),n!==null&&(qt(n,e,s),cx(n,t,s)))}function rx(e,t,n){var s=Pt();ms(e,t,n,s)}function ms(e,t,n,s){var i={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(qr(e))ix(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var m=t.lastRenderedState,D=o(m,n);if(i.hasEagerState=!0,i.eagerState=D,Vt(D,m))return Nr(e,t,i,0),at===null&&vr(),!1}catch{}if(n=wc(e,t,i,s),n!==null)return qt(n,e,s),cx(n,t,s),!0}return!1}function io(e,t,n,s){if(s={lane:2,revertLane:$o(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},qr(e)){if(t)throw Error(d(479))}else t=wc(e,n,s,2),t!==null&&qt(t,e,2)}function qr(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function ix(e,t){pl=Rr=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function cx(e,t,n){if((n&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,fu(e,n)}}var ps={readContext:Ct,use:Br,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct};ps.useEffectEvent=ct;var ox={readContext:Ct,use:Br,useCallback:function(e,t){return Mt().memoizedState=[e,t===void 0?null:t],e},useContext:Ct,useEffect:Qf,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Hr(4194308,4,Pf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hr(4194308,4,e,t)},useInsertionEffect:function(e,t){Hr(4,2,e,t)},useMemo:function(e,t){var n=Mt();t=t===void 0?null:t;var s=e();if(zn){Ga(!0);try{e()}finally{Ga(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=Mt();if(n!==void 0){var i=n(t);if(zn){Ga(!0);try{n(t)}finally{Ga(!1)}}}else i=t;return s.memoizedState=s.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},s.queue=e,e=e.dispatch=Hb.bind(null,_e,e),[s.memoizedState,e]},useRef:function(e){var t=Mt();return e={current:e},t.memoizedState=e},useState:function(e){e=eo(e);var t=e.queue,n=rx.bind(null,_e,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:no,useDeferredValue:function(e,t){var n=Mt();return lo(n,e,t)},useTransition:function(){var e=eo(!1);return e=tx.bind(null,_e,e.queue,!0,!1),Mt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=_e,i=Mt();if($e){if(n===void 0)throw Error(d(407));n=n()}else{if(n=t(),at===null)throw Error(d(349));(Ue&127)!==0||kf(s,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Qf(Mf.bind(null,s,o,e),[e]),s.flags|=2048,yl(9,{destroy:void 0},Of.bind(null,s,o,n,t),null),n},useId:function(){var e=Mt(),t=at.identifierPrefix;if($e){var n=ga,s=ba;n=(s&~(1<<32-It(s)-1)).toString(32)+n,t="_"+t+"R_"+n,n=zr++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Mb++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ro,useFormState:qf,useActionState:qf,useOptimistic:function(e){var t=Mt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=io.bind(null,_e,!0,n),n.dispatch=t,[e,t]},useMemoCache:Jc,useCacheRefresh:function(){return Mt().memoizedState=Ub.bind(null,_e)},useEffectEvent:function(e){var t=Mt(),n={impl:e};return t.memoizedState=n,function(){if((Ye&2)!==0)throw Error(d(440));return n.impl.apply(void 0,arguments)}}},co={readContext:Ct,use:Br,useCallback:Ff,useContext:Ct,useEffect:ao,useImperativeHandle:Jf,useInsertionEffect:Xf,useLayoutEffect:Zf,useMemo:Wf,useReducer:Ur,useRef:Yf,useState:function(){return Ur(Ma)},useDebugValue:no,useDeferredValue:function(e,t){var n=ut();return ex(n,Fe.memoizedState,e,t)},useTransition:function(){var e=Ur(Ma)[0],t=ut().memoizedState;return[typeof e=="boolean"?e:xs(e),t]},useSyncExternalStore:Tf,useId:lx,useHostTransitionStatus:ro,useFormState:Gf,useActionState:Gf,useOptimistic:function(e,t){var n=ut();return zf(n,Fe,e,t)},useMemoCache:Jc,useCacheRefresh:sx};co.useEffectEvent=Kf;var dx={readContext:Ct,use:Br,useCallback:Ff,useContext:Ct,useEffect:ao,useImperativeHandle:Jf,useInsertionEffect:Xf,useLayoutEffect:Zf,useMemo:Wf,useReducer:Wc,useRef:Yf,useState:function(){return Wc(Ma)},useDebugValue:no,useDeferredValue:function(e,t){var n=ut();return Fe===null?lo(n,e,t):ex(n,Fe.memoizedState,e,t)},useTransition:function(){var e=Wc(Ma)[0],t=ut().memoizedState;return[typeof e=="boolean"?e:xs(e),t]},useSyncExternalStore:Tf,useId:lx,useHostTransitionStatus:ro,useFormState:Vf,useActionState:Vf,useOptimistic:function(e,t){var n=ut();return Fe!==null?zf(n,Fe,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Jc,useCacheRefresh:sx};dx.useEffectEvent=Kf;function oo(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:g({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var uo={enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Pt(),i=Pa(s);i.payload=t,n!=null&&(i.callback=n),t=Ja(e,i,s),t!==null&&(qt(t,e,s),os(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Pt(),i=Pa(s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ja(e,i,s),t!==null&&(qt(t,e,s),os(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pt(),s=Pa(n);s.tag=2,t!=null&&(s.callback=t),t=Ja(e,s,n),t!==null&&(qt(t,e,n),os(t,e,n))}};function ux(e,t,n,s,i,o,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,m):t.prototype&&t.prototype.isPureReactComponent?!ts(n,s)||!ts(i,o):!0}function fx(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&uo.enqueueReplaceState(t,t.state,null)}function Ln(e,t){var n=t;if("ref"in t){n={};for(var s in t)s!=="ref"&&(n[s]=t[s])}if(e=e.defaultProps){n===t&&(n=g({},n));for(var i in e)n[i]===void 0&&(n[i]=e[i])}return n}function xx(e){gr(e)}function mx(e){console.error(e)}function px(e){gr(e)}function Gr(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function hx(e,t,n){try{var s=e.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function fo(e,t,n){return n=Pa(n),n.tag=3,n.payload={element:null},n.callback=function(){Gr(e,t)},n}function yx(e){return e=Pa(e),e.tag=3,e}function bx(e,t,n,s){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var o=s.value;e.payload=function(){return i(o)},e.callback=function(){hx(t,n,s)}}var m=n.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){hx(t,n,s),typeof i!="function"&&(nn===null?nn=new Set([this]):nn.add(this));var D=s.stack;this.componentDidCatch(s.value,{componentStack:D!==null?D:""})})}function $b(e,t,n,s,i){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=n.alternate,t!==null&&ol(t,n,i,!0),n=Qt.current,n!==null){switch(n.tag){case 31:case 13:return ca===null?ei():n.alternate===null&&ot===0&&(ot=3),n.flags&=-257,n.flags|=65536,n.lanes=i,s===Tr?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([s]):t.add(s),Bo(e,s,i)),!1;case 22:return n.flags|=65536,s===Tr?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([s]):n.add(s)),Bo(e,s,i)),!1}throw Error(d(435,n.tag))}return Bo(e,s,i),ei(),!1}if($e)return t=Qt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,s!==kc&&(e=Error(d(422),{cause:s}),ls(la(e,n)))):(s!==kc&&(t=Error(d(423),{cause:s}),ls(la(t,n))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,s=la(s,n),i=fo(e.stateNode,s,i),qc(e,i),ot!==4&&(ot=2)),!1;var o=Error(d(520),{cause:s});if(o=la(o,n),Ss===null?Ss=[o]:Ss.push(o),ot!==4&&(ot=2),t===null)return!0;s=la(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=fo(n.stateNode,s,e),qc(n,e),!1;case 1:if(t=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(nn===null||!nn.has(o))))return n.flags|=65536,i&=-i,n.lanes|=i,i=yx(i),bx(i,e,n,s),qc(n,i),!1}n=n.return}while(n!==null);return!1}var xo=Error(d(461)),pt=!1;function Et(e,t,n,s){t.child=e===null?jf(t,null,n,s):Rn(t,e.child,n,s)}function gx(e,t,n,s,i){n=n.render;var o=t.ref;if("ref"in s){var m={};for(var D in s)D!=="ref"&&(m[D]=s[D])}else m=s;return kn(t),s=Kc(e,t,n,m,o,i),D=Xc(),e!==null&&!pt?(Zc(e,t,i),_a(e,t,i)):($e&&D&&Ac(t),t.flags|=1,Et(e,t,s,i),t.child)}function vx(e,t,n,s,i){if(e===null){var o=n.type;return typeof o=="function"&&!Dc(o)&&o.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=o,Nx(e,t,o,s,i)):(e=Sr(n.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!No(e,i)){var m=o.memoizedProps;if(n=n.compare,n=n!==null?n:ts,n(m,s)&&e.ref===t.ref)return _a(e,t,i)}return t.flags|=1,e=Ea(o,s),e.ref=t.ref,e.return=t,t.child=e}function Nx(e,t,n,s,i){if(e!==null){var o=e.memoizedProps;if(ts(o,s)&&e.ref===t.ref)if(pt=!1,t.pendingProps=s=o,No(e,i))(e.flags&131072)!==0&&(pt=!0);else return t.lanes=e.lanes,_a(e,t,i)}return mo(e,t,n,s,i)}function jx(e,t,n,s){var i=s.children,o=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(o=o!==null?o.baseLanes|n:n,e!==null){for(s=t.child=e.child,i=0;s!==null;)i=i|s.lanes|s.childLanes,s=s.sibling;s=i&~o}else s=0,t.child=null;return Sx(e,t,o,n,s)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Er(t,o!==null?o.cachePool:null),o!==null?Df(t,o):Ic(),Cf(t);else return s=t.lanes=536870912,Sx(e,t,o!==null?o.baseLanes|n:n,n,s)}else o!==null?(Er(t,o.cachePool),Df(t,o),Wa(),t.memoizedState=null):(e!==null&&Er(t,null),Ic(),Wa());return Et(e,t,i,n),t.child}function hs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Sx(e,t,n,s,i){var o=Bc();return o=o===null?null:{parent:xt._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},e!==null&&Er(t,null),Ic(),Cf(t),e!==null&&ol(e,t,s,!0),t.childLanes=i,null}function Ir(e,t){return t=Yr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function wx(e,t,n){return Rn(t,e.child,null,n),e=Ir(t,t.pendingProps),e.flags|=2,Kt(t),t.memoizedState=null,e}function qb(e,t,n){var s=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if($e){if(s.mode==="hidden")return e=Ir(t,s),t.lanes=536870912,hs(null,e);if(Yc(t),(e=lt)?(e=Lm(e,ia),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ya!==null?{id:ba,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},n=rf(e),n.return=t,t.child=n,Dt=t,lt=null)):e=null,e===null)throw Ka(t);return t.lanes=536870912,null}return Ir(t,s)}var o=e.memoizedState;if(o!==null){var m=o.dehydrated;if(Yc(t),i)if(t.flags&256)t.flags&=-257,t=wx(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(d(558));else if(pt||ol(e,t,n,!1),i=(n&e.childLanes)!==0,pt||i){if(s=at,s!==null&&(m=xu(s,n),m!==0&&m!==o.retryLane))throw o.retryLane=m,Cn(e,m),qt(s,e,m),xo;ei(),t=wx(e,t,n)}else e=o.treeContext,lt=oa(m.nextSibling),Dt=t,$e=!0,Qa=null,ia=!1,e!==null&&df(t,e),t=Ir(t,s),t.flags|=4096;return t}return e=Ea(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Vr(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(d(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function mo(e,t,n,s,i){return kn(t),n=Kc(e,t,n,s,void 0,i),s=Xc(),e!==null&&!pt?(Zc(e,t,i),_a(e,t,i)):($e&&s&&Ac(t),t.flags|=1,Et(e,t,n,i),t.child)}function Dx(e,t,n,s,i,o){return kn(t),t.updateQueue=null,n=Af(t,s,n,i),Ef(e),s=Xc(),e!==null&&!pt?(Zc(e,t,o),_a(e,t,o)):($e&&s&&Ac(t),t.flags|=1,Et(e,t,n,o),t.child)}function Cx(e,t,n,s,i){if(kn(t),t.stateNode===null){var o=sl,m=n.contextType;typeof m=="object"&&m!==null&&(o=Ct(m)),o=new n(s,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=uo,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=s,o.state=t.memoizedState,o.refs={},Hc(t),m=n.contextType,o.context=typeof m=="object"&&m!==null?Ct(m):sl,o.state=t.memoizedState,m=n.getDerivedStateFromProps,typeof m=="function"&&(oo(t,n,m,s),o.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(m=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),m!==o.state&&uo.enqueueReplaceState(o,o.state,null),us(t,s,o,i),ds(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){o=t.stateNode;var D=t.memoizedProps,z=Ln(n,D);o.props=z;var V=o.context,P=n.contextType;m=sl,typeof P=="object"&&P!==null&&(m=Ct(P));var ee=n.getDerivedStateFromProps;P=typeof ee=="function"||typeof o.getSnapshotBeforeUpdate=="function",D=t.pendingProps!==D,P||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(D||V!==m)&&fx(t,o,s,m),Za=!1;var Y=t.memoizedState;o.state=Y,us(t,s,o,i),ds(),V=t.memoizedState,D||Y!==V||Za?(typeof ee=="function"&&(oo(t,n,ee,s),V=t.memoizedState),(z=Za||ux(t,n,z,s,Y,V,m))?(P||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=V),o.props=s,o.state=V,o.context=m,s=z):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,$c(e,t),m=t.memoizedProps,P=Ln(n,m),o.props=P,ee=t.pendingProps,Y=o.context,V=n.contextType,z=sl,typeof V=="object"&&V!==null&&(z=Ct(V)),D=n.getDerivedStateFromProps,(V=typeof D=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(m!==ee||Y!==z)&&fx(t,o,s,z),Za=!1,Y=t.memoizedState,o.state=Y,us(t,s,o,i),ds();var X=t.memoizedState;m!==ee||Y!==X||Za||e!==null&&e.dependencies!==null&&Dr(e.dependencies)?(typeof D=="function"&&(oo(t,n,D,s),X=t.memoizedState),(P=Za||ux(t,n,P,s,Y,X,z)||e!==null&&e.dependencies!==null&&Dr(e.dependencies))?(V||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,X,z),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,X,z)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||m===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=X),o.props=s,o.state=X,o.context=z,s=P):(typeof o.componentDidUpdate!="function"||m===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),s=!1)}return o=s,Vr(e,t),s=(t.flags&128)!==0,o||s?(o=t.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&s?(t.child=Rn(t,e.child,null,i),t.child=Rn(t,null,n,i)):Et(e,t,n,i),t.memoizedState=o.state,e=t.child):e=_a(e,t,i),e}function Ex(e,t,n,s){return An(),t.flags|=256,Et(e,t,n,s),t.child}var po={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ho(e){return{baseLanes:e,cachePool:hf()}}function yo(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Zt),e}function Ax(e,t,n){var s=t.pendingProps,i=!1,o=(t.flags&128)!==0,m;if((m=o)||(m=e!==null&&e.memoizedState===null?!1:(dt.current&2)!==0),m&&(i=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if($e){if(i?Fa(t):Wa(),(e=lt)?(e=Lm(e,ia),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ya!==null?{id:ba,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},n=rf(e),n.return=t,t.child=n,Dt=t,lt=null)):e=null,e===null)throw Ka(t);return Wo(e)?t.lanes=32:t.lanes=536870912,null}var D=s.children;return s=s.fallback,i?(Wa(),i=t.mode,D=Yr({mode:"hidden",children:D},i),s=En(s,i,n,null),D.return=t,s.return=t,D.sibling=s,t.child=D,s=t.child,s.memoizedState=ho(n),s.childLanes=yo(e,m,n),t.memoizedState=po,hs(null,s)):(Fa(t),bo(t,D))}var z=e.memoizedState;if(z!==null&&(D=z.dehydrated,D!==null)){if(o)t.flags&256?(Fa(t),t.flags&=-257,t=go(e,t,n)):t.memoizedState!==null?(Wa(),t.child=e.child,t.flags|=128,t=null):(Wa(),D=s.fallback,i=t.mode,s=Yr({mode:"visible",children:s.children},i),D=En(D,i,n,null),D.flags|=2,s.return=t,D.return=t,s.sibling=D,t.child=s,Rn(t,e.child,null,n),s=t.child,s.memoizedState=ho(n),s.childLanes=yo(e,m,n),t.memoizedState=po,t=hs(null,s));else if(Fa(t),Wo(D)){if(m=D.nextSibling&&D.nextSibling.dataset,m)var V=m.dgst;m=V,s=Error(d(419)),s.stack="",s.digest=m,ls({value:s,source:null,stack:null}),t=go(e,t,n)}else if(pt||ol(e,t,n,!1),m=(n&e.childLanes)!==0,pt||m){if(m=at,m!==null&&(s=xu(m,n),s!==0&&s!==z.retryLane))throw z.retryLane=s,Cn(e,s),qt(m,e,s),xo;Fo(D)||ei(),t=go(e,t,n)}else Fo(D)?(t.flags|=192,t.child=e.child,t=null):(e=z.treeContext,lt=oa(D.nextSibling),Dt=t,$e=!0,Qa=null,ia=!1,e!==null&&df(t,e),t=bo(t,s.children),t.flags|=4096);return t}return i?(Wa(),D=s.fallback,i=t.mode,z=e.child,V=z.sibling,s=Ea(z,{mode:"hidden",children:s.children}),s.subtreeFlags=z.subtreeFlags&65011712,V!==null?D=Ea(V,D):(D=En(D,i,n,null),D.flags|=2),D.return=t,s.return=t,s.sibling=D,t.child=s,hs(null,s),s=t.child,D=e.child.memoizedState,D===null?D=ho(n):(i=D.cachePool,i!==null?(z=xt._currentValue,i=i.parent!==z?{parent:z,pool:z}:i):i=hf(),D={baseLanes:D.baseLanes|n,cachePool:i}),s.memoizedState=D,s.childLanes=yo(e,m,n),t.memoizedState=po,hs(e.child,s)):(Fa(t),n=e.child,e=n.sibling,n=Ea(n,{mode:"visible",children:s.children}),n.return=t,n.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=n,t.memoizedState=null,n)}function bo(e,t){return t=Yr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Yr(e,t){return e=Yt(22,e,null,t),e.lanes=0,e}function go(e,t,n){return Rn(t,e.child,null,n),e=bo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Tx(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),_c(e.return,t,n)}function vo(e,t,n,s,i,o){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i,treeForkCount:o}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=s,m.tail=n,m.tailMode=i,m.treeForkCount=o)}function kx(e,t,n){var s=t.pendingProps,i=s.revealOrder,o=s.tail;s=s.children;var m=dt.current,D=(m&2)!==0;if(D?(m=m&1|2,t.flags|=128):m&=1,J(dt,m),Et(e,t,s,n),s=$e?ns:0,!D&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tx(e,n,t);else if(e.tag===19)Tx(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&_r(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),vo(t,!1,i,n,o,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&_r(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}vo(t,!0,n,null,o,s);break;case"together":vo(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function _a(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),an|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(ol(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(d(153));if(t.child!==null){for(e=t.child,n=Ea(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ea(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function No(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Dr(e)))}function Gb(e,t,n){switch(t.tag){case 3:ie(t,t.stateNode.containerInfo),Xa(t,xt,e.memoizedState.cache),An();break;case 27:case 5:Ee(t);break;case 4:ie(t,t.stateNode.containerInfo);break;case 10:Xa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Yc(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Fa(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Ax(e,t,n):(Fa(t),e=_a(e,t,n),e!==null?e.sibling:null);Fa(t);break;case 19:var i=(e.flags&128)!==0;if(s=(n&t.childLanes)!==0,s||(ol(e,t,n,!1),s=(n&t.childLanes)!==0),i){if(s)return kx(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),J(dt,dt.current),s)break;return null;case 22:return t.lanes=0,jx(e,t,n,t.pendingProps);case 24:Xa(t,xt,e.memoizedState.cache)}return _a(e,t,n)}function Ox(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)pt=!0;else{if(!No(e,n)&&(t.flags&128)===0)return pt=!1,Gb(e,t,n);pt=(e.flags&131072)!==0}else pt=!1,$e&&(t.flags&1048576)!==0&&of(t,ns,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=Mn(t.elementType),t.type=e,typeof e=="function")Dc(e)?(s=Ln(e,s),t.tag=1,t=Cx(null,t,e,s,n)):(t.tag=0,t=mo(null,t,e,s,n));else{if(e!=null){var i=e.$$typeof;if(i===M){t.tag=11,t=gx(null,t,e,s,n);break e}else if(i===B){t.tag=14,t=vx(null,t,e,s,n);break e}}throw t=he(e)||e,Error(d(306,t,""))}}return t;case 0:return mo(e,t,t.type,t.pendingProps,n);case 1:return s=t.type,i=Ln(s,t.pendingProps),Cx(e,t,s,i,n);case 3:e:{if(ie(t,t.stateNode.containerInfo),e===null)throw Error(d(387));s=t.pendingProps;var o=t.memoizedState;i=o.element,$c(e,t),us(t,s,null,n);var m=t.memoizedState;if(s=m.cache,Xa(t,xt,s),s!==o.cache&&Rc(t,[xt],n,!0),ds(),s=m.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Ex(e,t,s,n);break e}else if(s!==i){i=la(Error(d(424)),t),ls(i),t=Ex(e,t,s,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,lt=oa(e.firstChild),Dt=t,$e=!0,Qa=null,ia=!0,n=jf(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(An(),s===i){t=_a(e,t,n);break e}Et(e,t,s,n)}t=t.child}return t;case 26:return Vr(e,t),e===null?(n=Gm(t.type,null,t.pendingProps,null))?t.memoizedState=n:$e||(n=t.type,e=t.pendingProps,s=ii(je.current).createElement(n),s[wt]=t,s[zt]=e,At(s,n,e),gt(s),t.stateNode=s):t.memoizedState=Gm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ee(t),e===null&&$e&&(s=t.stateNode=Hm(t.type,t.pendingProps,je.current),Dt=t,ia=!0,i=lt,cn(t.type)?(ed=i,lt=oa(s.firstChild)):lt=i),Et(e,t,t.pendingProps.children,n),Vr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&$e&&((i=s=lt)&&(s=bg(s,t.type,t.pendingProps,ia),s!==null?(t.stateNode=s,Dt=t,lt=oa(s.firstChild),ia=!1,i=!0):i=!1),i||Ka(t)),Ee(t),i=t.type,o=t.pendingProps,m=e!==null?e.memoizedProps:null,s=o.children,Zo(i,o)?s=null:m!==null&&Zo(i,m)&&(t.flags|=32),t.memoizedState!==null&&(i=Kc(e,t,_b,null,null,n),Os._currentValue=i),Vr(e,t),Et(e,t,s,n),t.child;case 6:return e===null&&$e&&((e=n=lt)&&(n=gg(n,t.pendingProps,ia),n!==null?(t.stateNode=n,Dt=t,lt=null,e=!0):e=!1),e||Ka(t)),null;case 13:return Ax(e,t,n);case 4:return ie(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Rn(t,null,s,n):Et(e,t,s,n),t.child;case 11:return gx(e,t,t.type,t.pendingProps,n);case 7:return Et(e,t,t.pendingProps,n),t.child;case 8:return Et(e,t,t.pendingProps.children,n),t.child;case 12:return Et(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,Xa(t,t.type,s.value),Et(e,t,s.children,n),t.child;case 9:return i=t.type._context,s=t.pendingProps.children,kn(t),i=Ct(i),s=s(i),t.flags|=1,Et(e,t,s,n),t.child;case 14:return vx(e,t,t.type,t.pendingProps,n);case 15:return Nx(e,t,t.type,t.pendingProps,n);case 19:return kx(e,t,n);case 31:return qb(e,t,n);case 22:return jx(e,t,n,t.pendingProps);case 24:return kn(t),s=Ct(xt),e===null?(i=Bc(),i===null&&(i=at,o=zc(),i.pooledCache=o,o.refCount++,o!==null&&(i.pooledCacheLanes|=n),i=o),t.memoizedState={parent:s,cache:i},Hc(t),Xa(t,xt,i)):((e.lanes&n)!==0&&($c(e,t),us(t,null,null,n),ds()),i=e.memoizedState,o=t.memoizedState,i.parent!==s?(i={parent:s,cache:s},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),Xa(t,xt,s)):(s=o.cache,Xa(t,xt,s),s!==i.cache&&Rc(t,[xt],n,!0))),Et(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(d(156,t.tag))}function Ra(e){e.flags|=4}function jo(e,t,n,s,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(lm())e.flags|=8192;else throw _n=Tr,Uc}else e.flags&=-16777217}function Mx(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Km(t))if(lm())e.flags|=8192;else throw _n=Tr,Uc}function Qr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?du():536870912,e.lanes|=t,Nl|=t)}function ys(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&65011712,s|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Ib(e,t,n){var s=t.pendingProps;switch(Tc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return st(t),null;case 3:return n=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ka(xt),be(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(cl(t)?Ra(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Oc())),st(t),null;case 26:var i=t.type,o=t.memoizedState;return e===null?(Ra(t),o!==null?(st(t),Mx(t,o)):(st(t),jo(t,i,null,s,n))):o?o!==e.memoizedState?(Ra(t),st(t),Mx(t,o)):(st(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&Ra(t),st(t),jo(t,i,e,s,n)),null;case 27:if(K(t),n=je.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ra(t);else{if(!s){if(t.stateNode===null)throw Error(d(166));return st(t),null}e=le.current,cl(t)?uf(t):(e=Hm(i,s,n),t.stateNode=e,Ra(t))}return st(t),null;case 5:if(K(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ra(t);else{if(!s){if(t.stateNode===null)throw Error(d(166));return st(t),null}if(o=le.current,cl(t))uf(t);else{var m=ii(je.current);switch(o){case 1:o=m.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:o=m.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":o=m.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":o=m.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":o=m.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof s.is=="string"?m.createElement("select",{is:s.is}):m.createElement("select"),s.multiple?o.multiple=!0:s.size&&(o.size=s.size);break;default:o=typeof s.is=="string"?m.createElement(i,{is:s.is}):m.createElement(i)}}o[wt]=t,o[zt]=s;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=o;e:switch(At(o,i,s),i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ra(t)}}return st(t),jo(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Ra(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(d(166));if(e=je.current,cl(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,i=Dt,i!==null)switch(i.tag){case 27:case 5:s=i.memoizedProps}e[wt]=t,e=!!(e.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||Am(e.nodeValue,n)),e||Ka(t,!0)}else e=ii(e).createTextNode(s),e[wt]=t,t.stateNode=e}return st(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(s=cl(t),n!==null){if(e===null){if(!s)throw Error(d(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(557));e[wt]=t}else An(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),e=!1}else n=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Kt(t),t):(Kt(t),null);if((t.flags&128)!==0)throw Error(d(558))}return st(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=cl(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(d(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(d(317));i[wt]=t}else An(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),i=!1}else i=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(Kt(t),t):(Kt(t),null)}return Kt(t),(t.flags&128)!==0?(t.lanes=n,t):(n=s!==null,e=e!==null&&e.memoizedState!==null,n&&(s=t.child,i=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(i=s.alternate.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==i&&(s.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Qr(t,t.updateQueue),st(t),null);case 4:return be(),e===null&&Vo(t.stateNode.containerInfo),st(t),null;case 10:return ka(t.type),st(t),null;case 19:if(Q(dt),s=t.memoizedState,s===null)return st(t),null;if(i=(t.flags&128)!==0,o=s.rendering,o===null)if(i)ys(s,!1);else{if(ot!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=_r(e),o!==null){for(t.flags|=128,ys(s,!1),e=o.updateQueue,t.updateQueue=e,Qr(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)sf(n,e),n=n.sibling;return J(dt,dt.current&1|2),$e&&Aa(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&Ze()>Jr&&(t.flags|=128,i=!0,ys(s,!1),t.lanes=4194304)}else{if(!i)if(e=_r(o),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Qr(t,e),ys(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!$e)return st(t),null}else 2*Ze()-s.renderingStartTime>Jr&&n!==536870912&&(t.flags|=128,i=!0,ys(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(e=s.last,e!==null?e.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ze(),e.sibling=null,n=dt.current,J(dt,i?n&1|2:n&1),$e&&Aa(t,s.treeForkCount),e):(st(t),null);case 22:case 23:return Kt(t),Vc(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(n&536870912)!==0&&(t.flags&128)===0&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),n=t.updateQueue,n!==null&&Qr(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),e!==null&&Q(On),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ka(xt),st(t),null;case 25:return null;case 30:return null}throw Error(d(156,t.tag))}function Vb(e,t){switch(Tc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ka(xt),be(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return K(t),null;case 31:if(t.memoizedState!==null){if(Kt(t),t.alternate===null)throw Error(d(340));An()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Kt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(d(340));An()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Q(dt),null;case 4:return be(),null;case 10:return ka(t.type),null;case 22:case 23:return Kt(t),Vc(),e!==null&&Q(On),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ka(xt),null;case 25:return null;default:return null}}function _x(e,t){switch(Tc(t),t.tag){case 3:ka(xt),be();break;case 26:case 27:case 5:K(t);break;case 4:be();break;case 31:t.memoizedState!==null&&Kt(t);break;case 13:Kt(t);break;case 19:Q(dt);break;case 10:ka(t.type);break;case 22:case 23:Kt(t),Vc(),e!==null&&Q(On);break;case 24:ka(xt)}}function bs(e,t){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var i=s.next;n=i;do{if((n.tag&e)===e){s=void 0;var o=n.create,m=n.inst;s=o(),m.destroy=s}n=n.next}while(n!==i)}}catch(D){Je(t,t.return,D)}}function en(e,t,n){try{var s=t.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var o=i.next;s=o;do{if((s.tag&e)===e){var m=s.inst,D=m.destroy;if(D!==void 0){m.destroy=void 0,i=t;var z=n,V=D;try{V()}catch(P){Je(i,z,P)}}}s=s.next}while(s!==o)}}catch(P){Je(t,t.return,P)}}function Rx(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{wf(t,n)}catch(s){Je(e,e.return,s)}}}function zx(e,t,n){n.props=Ln(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){Je(e,t,s)}}function gs(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof n=="function"?e.refCleanup=n(s):n.current=s}}catch(i){Je(e,t,i)}}function va(e,t){var n=e.ref,s=e.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(i){Je(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){Je(e,t,i)}else n.current=null}function Lx(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(i){Je(e,e.return,i)}}function So(e,t,n){try{var s=e.stateNode;fg(s,e.type,n,t),s[zt]=t}catch(i){Je(e,e.return,i)}}function Bx(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&cn(e.type)||e.tag===4}function wo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&cn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Do(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Da));else if(s!==4&&(s===27&&cn(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Do(e,t,n),e=e.sibling;e!==null;)Do(e,t,n),e=e.sibling}function Kr(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(s===27&&cn(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Kr(e,t,n),e=e.sibling;e!==null;)Kr(e,t,n),e=e.sibling}function Ux(e){var t=e.stateNode,n=e.memoizedProps;try{for(var s=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);At(t,s,n),t[wt]=e,t[zt]=n}catch(o){Je(e,e.return,o)}}var za=!1,ht=!1,Co=!1,Hx=typeof WeakSet=="function"?WeakSet:Set,vt=null;function Yb(e,t){if(e=e.containerInfo,Ko=mi,e=Pu(e),bc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var m=0,D=-1,z=-1,V=0,P=0,ee=e,Y=null;t:for(;;){for(var X;ee!==n||i!==0&&ee.nodeType!==3||(D=m+i),ee!==o||s!==0&&ee.nodeType!==3||(z=m+s),ee.nodeType===3&&(m+=ee.nodeValue.length),(X=ee.firstChild)!==null;)Y=ee,ee=X;for(;;){if(ee===e)break t;if(Y===n&&++V===i&&(D=m),Y===o&&++P===s&&(z=m),(X=ee.nextSibling)!==null)break;ee=Y,Y=ee.parentNode}ee=X}n=D===-1||z===-1?null:{start:D,end:z}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xo={focusedElem:e,selectionRange:n},mi=!1,vt=t;vt!==null;)if(t=vt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,vt=e;else for(;vt!==null;){switch(t=vt,o=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)i=e[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,n=t,i=o.memoizedProps,o=o.memoizedState,s=n.stateNode;try{var ye=Ln(n.type,i);e=s.getSnapshotBeforeUpdate(ye,o),s.__reactInternalSnapshotBeforeUpdate=e}catch(Ae){Je(n,n.return,Ae)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Jo(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Jo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=t.sibling,e!==null){e.return=t.return,vt=e;break}vt=t.return}}function $x(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Ba(e,n),s&4&&bs(5,n);break;case 1:if(Ba(e,n),s&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(m){Je(n,n.return,m)}else{var i=Ln(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){Je(n,n.return,m)}}s&64&&Rx(n),s&512&&gs(n,n.return);break;case 3:if(Ba(e,n),s&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{wf(e,t)}catch(m){Je(n,n.return,m)}}break;case 27:t===null&&s&4&&Ux(n);case 26:case 5:Ba(e,n),t===null&&s&4&&Lx(n),s&512&&gs(n,n.return);break;case 12:Ba(e,n);break;case 31:Ba(e,n),s&4&&Ix(e,n);break;case 13:Ba(e,n),s&4&&Vx(e,n),s&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=eg.bind(null,n),vg(e,n))));break;case 22:if(s=n.memoizedState!==null||za,!s){t=t!==null&&t.memoizedState!==null||ht,i=za;var o=ht;za=s,(ht=t)&&!o?Ua(e,n,(n.subtreeFlags&8772)!==0):Ba(e,n),za=i,ht=o}break;case 30:break;default:Ba(e,n)}}function qx(e){var t=e.alternate;t!==null&&(e.alternate=null,qx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&tc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var rt=null,Bt=!1;function La(e,t,n){for(n=n.child;n!==null;)Gx(e,t,n),n=n.sibling}function Gx(e,t,n){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Il,n)}catch{}switch(n.tag){case 26:ht||va(n,t),La(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ht||va(n,t);var s=rt,i=Bt;cn(n.type)&&(rt=n.stateNode,Bt=!1),La(e,t,n),As(n.stateNode),rt=s,Bt=i;break;case 5:ht||va(n,t);case 6:if(s=rt,i=Bt,rt=null,La(e,t,n),rt=s,Bt=i,rt!==null)if(Bt)try{(rt.nodeType===9?rt.body:rt.nodeName==="HTML"?rt.ownerDocument.body:rt).removeChild(n.stateNode)}catch(o){Je(n,t,o)}else try{rt.removeChild(n.stateNode)}catch(o){Je(n,t,o)}break;case 18:rt!==null&&(Bt?(e=rt,Rm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Tl(e)):Rm(rt,n.stateNode));break;case 4:s=rt,i=Bt,rt=n.stateNode.containerInfo,Bt=!0,La(e,t,n),rt=s,Bt=i;break;case 0:case 11:case 14:case 15:en(2,n,t),ht||en(4,n,t),La(e,t,n);break;case 1:ht||(va(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"&&zx(n,t,s)),La(e,t,n);break;case 21:La(e,t,n);break;case 22:ht=(s=ht)||n.memoizedState!==null,La(e,t,n),ht=s;break;default:La(e,t,n)}}function Ix(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Tl(e)}catch(n){Je(t,t.return,n)}}}function Vx(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Tl(e)}catch(n){Je(t,t.return,n)}}function Qb(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Hx),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Hx),t;default:throw Error(d(435,e.tag))}}function Xr(e,t){var n=Qb(e);t.forEach(function(s){if(!n.has(s)){n.add(s);var i=tg.bind(null,e,s);s.then(i,i)}})}function Ut(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s],o=e,m=t,D=m;e:for(;D!==null;){switch(D.tag){case 27:if(cn(D.type)){rt=D.stateNode,Bt=!1;break e}break;case 5:rt=D.stateNode,Bt=!1;break e;case 3:case 4:rt=D.stateNode.containerInfo,Bt=!0;break e}D=D.return}if(rt===null)throw Error(d(160));Gx(o,m,i),rt=null,Bt=!1,o=i.alternate,o!==null&&(o.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Yx(t,e),t=t.sibling}var pa=null;function Yx(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ut(t,e),Ht(e),s&4&&(en(3,e,e.return),bs(3,e),en(5,e,e.return));break;case 1:Ut(t,e),Ht(e),s&512&&(ht||n===null||va(n,n.return)),s&64&&za&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var i=pa;if(Ut(t,e),Ht(e),s&512&&(ht||n===null||va(n,n.return)),s&4){var o=n!==null?n.memoizedState:null;if(s=e.memoizedState,n===null)if(s===null)if(e.stateNode===null){e:{s=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(s){case"title":o=i.getElementsByTagName("title")[0],(!o||o[Ql]||o[wt]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=i.createElement(s),i.head.insertBefore(o,i.querySelector("head > title"))),At(o,s,n),o[wt]=e,gt(o),s=o;break e;case"link":var m=Ym("link","href",i).get(s+(n.href||""));if(m){for(var D=0;D<m.length;D++)if(o=m[D],o.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){m.splice(D,1);break t}}o=i.createElement(s),At(o,s,n),i.head.appendChild(o);break;case"meta":if(m=Ym("meta","content",i).get(s+(n.content||""))){for(D=0;D<m.length;D++)if(o=m[D],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){m.splice(D,1);break t}}o=i.createElement(s),At(o,s,n),i.head.appendChild(o);break;default:throw Error(d(468,s))}o[wt]=e,gt(o),s=o}e.stateNode=s}else Qm(i,e.type,e.stateNode);else e.stateNode=Vm(i,s,e.memoizedProps);else o!==s?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,s===null?Qm(i,e.type,e.stateNode):Vm(i,s,e.memoizedProps)):s===null&&e.stateNode!==null&&So(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ut(t,e),Ht(e),s&512&&(ht||n===null||va(n,n.return)),n!==null&&s&4&&So(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ut(t,e),Ht(e),s&512&&(ht||n===null||va(n,n.return)),e.flags&32){i=e.stateNode;try{Fn(i,"")}catch(ye){Je(e,e.return,ye)}}s&4&&e.stateNode!=null&&(i=e.memoizedProps,So(e,i,n!==null?n.memoizedProps:i)),s&1024&&(Co=!0);break;case 6:if(Ut(t,e),Ht(e),s&4){if(e.stateNode===null)throw Error(d(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(ye){Je(e,e.return,ye)}}break;case 3:if(di=null,i=pa,pa=ci(t.containerInfo),Ut(t,e),pa=i,Ht(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Tl(t.containerInfo)}catch(ye){Je(e,e.return,ye)}Co&&(Co=!1,Qx(e));break;case 4:s=pa,pa=ci(e.stateNode.containerInfo),Ut(t,e),Ht(e),pa=s;break;case 12:Ut(t,e),Ht(e);break;case 31:Ut(t,e),Ht(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Xr(e,s)));break;case 13:Ut(t,e),Ht(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Pr=Ze()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Xr(e,s)));break;case 22:i=e.memoizedState!==null;var z=n!==null&&n.memoizedState!==null,V=za,P=ht;if(za=V||i,ht=P||z,Ut(t,e),ht=P,za=V,Ht(e),s&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(n===null||z||za||ht||Bn(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){z=n=t;try{if(o=z.stateNode,i)m=o.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{D=z.stateNode;var ee=z.memoizedProps.style,Y=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;D.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ye){Je(z,z.return,ye)}}}else if(t.tag===6){if(n===null){z=t;try{z.stateNode.nodeValue=i?"":z.memoizedProps}catch(ye){Je(z,z.return,ye)}}}else if(t.tag===18){if(n===null){z=t;try{var X=z.stateNode;i?zm(X,!0):zm(z.stateNode,!1)}catch(ye){Je(z,z.return,ye)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,Xr(e,n))));break;case 19:Ut(t,e),Ht(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Xr(e,s)));break;case 30:break;case 21:break;default:Ut(t,e),Ht(e)}}function Ht(e){var t=e.flags;if(t&2){try{for(var n,s=e.return;s!==null;){if(Bx(s)){n=s;break}s=s.return}if(n==null)throw Error(d(160));switch(n.tag){case 27:var i=n.stateNode,o=wo(e);Kr(e,o,i);break;case 5:var m=n.stateNode;n.flags&32&&(Fn(m,""),n.flags&=-33);var D=wo(e);Kr(e,D,m);break;case 3:case 4:var z=n.stateNode.containerInfo,V=wo(e);Do(e,V,z);break;default:throw Error(d(161))}}catch(P){Je(e,e.return,P)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Qx(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Qx(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ba(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)$x(e,t.alternate,t),t=t.sibling}function Bn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:en(4,t,t.return),Bn(t);break;case 1:va(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&zx(t,t.return,n),Bn(t);break;case 27:As(t.stateNode);case 26:case 5:va(t,t.return),Bn(t);break;case 22:t.memoizedState===null&&Bn(t);break;case 30:Bn(t);break;default:Bn(t)}e=e.sibling}}function Ua(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,i=e,o=t,m=o.flags;switch(o.tag){case 0:case 11:case 15:Ua(i,o,n),bs(4,o);break;case 1:if(Ua(i,o,n),s=o,i=s.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(V){Je(s,s.return,V)}if(s=o,i=s.updateQueue,i!==null){var D=s.stateNode;try{var z=i.shared.hiddenCallbacks;if(z!==null)for(i.shared.hiddenCallbacks=null,i=0;i<z.length;i++)Sf(z[i],D)}catch(V){Je(s,s.return,V)}}n&&m&64&&Rx(o),gs(o,o.return);break;case 27:Ux(o);case 26:case 5:Ua(i,o,n),n&&s===null&&m&4&&Lx(o),gs(o,o.return);break;case 12:Ua(i,o,n);break;case 31:Ua(i,o,n),n&&m&4&&Ix(i,o);break;case 13:Ua(i,o,n),n&&m&4&&Vx(i,o);break;case 22:o.memoizedState===null&&Ua(i,o,n),gs(o,o.return);break;case 30:break;default:Ua(i,o,n)}t=t.sibling}}function Eo(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ss(n))}function Ao(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ss(e))}function ha(e,t,n,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Kx(e,t,n,s),t=t.sibling}function Kx(e,t,n,s){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ha(e,t,n,s),i&2048&&bs(9,t);break;case 1:ha(e,t,n,s);break;case 3:ha(e,t,n,s),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ss(e)));break;case 12:if(i&2048){ha(e,t,n,s),e=t.stateNode;try{var o=t.memoizedProps,m=o.id,D=o.onPostCommit;typeof D=="function"&&D(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){Je(t,t.return,z)}}else ha(e,t,n,s);break;case 31:ha(e,t,n,s);break;case 13:ha(e,t,n,s);break;case 23:break;case 22:o=t.stateNode,m=t.alternate,t.memoizedState!==null?o._visibility&2?ha(e,t,n,s):vs(e,t):o._visibility&2?ha(e,t,n,s):(o._visibility|=2,bl(e,t,n,s,(t.subtreeFlags&10256)!==0||!1)),i&2048&&Eo(m,t);break;case 24:ha(e,t,n,s),i&2048&&Ao(t.alternate,t);break;default:ha(e,t,n,s)}}function bl(e,t,n,s,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=e,m=t,D=n,z=s,V=m.flags;switch(m.tag){case 0:case 11:case 15:bl(o,m,D,z,i),bs(8,m);break;case 23:break;case 22:var P=m.stateNode;m.memoizedState!==null?P._visibility&2?bl(o,m,D,z,i):vs(o,m):(P._visibility|=2,bl(o,m,D,z,i)),i&&V&2048&&Eo(m.alternate,m);break;case 24:bl(o,m,D,z,i),i&&V&2048&&Ao(m.alternate,m);break;default:bl(o,m,D,z,i)}t=t.sibling}}function vs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,s=t,i=s.flags;switch(s.tag){case 22:vs(n,s),i&2048&&Eo(s.alternate,s);break;case 24:vs(n,s),i&2048&&Ao(s.alternate,s);break;default:vs(n,s)}t=t.sibling}}var Ns=8192;function gl(e,t,n){if(e.subtreeFlags&Ns)for(e=e.child;e!==null;)Xx(e,t,n),e=e.sibling}function Xx(e,t,n){switch(e.tag){case 26:gl(e,t,n),e.flags&Ns&&e.memoizedState!==null&&Mg(n,pa,e.memoizedState,e.memoizedProps);break;case 5:gl(e,t,n);break;case 3:case 4:var s=pa;pa=ci(e.stateNode.containerInfo),gl(e,t,n),pa=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Ns,Ns=16777216,gl(e,t,n),Ns=s):gl(e,t,n));break;default:gl(e,t,n)}}function Zx(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function js(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];vt=s,Jx(s,e)}Zx(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Px(e),e=e.sibling}function Px(e){switch(e.tag){case 0:case 11:case 15:js(e),e.flags&2048&&en(9,e,e.return);break;case 3:js(e);break;case 12:js(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Zr(e)):js(e);break;default:js(e)}}function Zr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];vt=s,Jx(s,e)}Zx(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:en(8,t,t.return),Zr(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Zr(t));break;default:Zr(t)}e=e.sibling}}function Jx(e,t){for(;vt!==null;){var n=vt;switch(n.tag){case 0:case 11:case 15:en(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:ss(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,vt=s;else e:for(n=e;vt!==null;){s=vt;var i=s.sibling,o=s.return;if(qx(s),s===n){vt=null;break e}if(i!==null){i.return=o,vt=i;break e}vt=o}}}var Kb={getCacheForType:function(e){var t=Ct(xt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ct(xt).controller.signal}},Xb=typeof WeakMap=="function"?WeakMap:Map,Ye=0,at=null,Le=null,Ue=0,Pe=0,Xt=null,tn=!1,vl=!1,To=!1,Ha=0,ot=0,an=0,Un=0,ko=0,Zt=0,Nl=0,Ss=null,$t=null,Oo=!1,Pr=0,Fx=0,Jr=1/0,Fr=null,nn=null,yt=0,ln=null,jl=null,$a=0,Mo=0,_o=null,Wx=null,ws=0,Ro=null;function Pt(){return(Ye&2)!==0&&Ue!==0?Ue&-Ue:G.T!==null?$o():mu()}function em(){if(Zt===0)if((Ue&536870912)===0||$e){var e=rr;rr<<=1,(rr&3932160)===0&&(rr=262144),Zt=e}else Zt=536870912;return e=Qt.current,e!==null&&(e.flags|=32),Zt}function qt(e,t,n){(e===at&&(Pe===2||Pe===9)||e.cancelPendingCommit!==null)&&(Sl(e,0),sn(e,Ue,Zt,!1)),Yl(e,n),((Ye&2)===0||e!==at)&&(e===at&&((Ye&2)===0&&(Un|=n),ot===4&&sn(e,Ue,Zt,!1)),Na(e))}function tm(e,t,n){if((Ye&6)!==0)throw Error(d(327));var s=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Vl(e,t),i=s?Jb(e,t):Lo(e,t,!0),o=s;do{if(i===0){vl&&!s&&sn(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!Zb(n)){i=Lo(e,t,!1),o=!1;continue}if(i===2){if(o=t,e.errorRecoveryDisabledLanes&o)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var D=e;i=Ss;var z=D.current.memoizedState.isDehydrated;if(z&&(Sl(D,m).flags|=256),m=Lo(D,m,!1),m!==2){if(To&&!z){D.errorRecoveryDisabledLanes|=o,Un|=o,i=4;break e}o=$t,$t=i,o!==null&&($t===null?$t=o:$t.push.apply($t,o))}i=m}if(o=!1,i!==2)continue}}if(i===1){Sl(e,0),sn(e,t,0,!0);break}e:{switch(s=e,o=i,o){case 0:case 1:throw Error(d(345));case 4:if((t&4194048)!==t)break;case 6:sn(s,t,Zt,!tn);break e;case 2:$t=null;break;case 3:case 5:break;default:throw Error(d(329))}if((t&62914560)===t&&(i=Pr+300-Ze(),10<i)){if(sn(s,t,Zt,!tn),cr(s,0,!0)!==0)break e;$a=t,s.timeoutHandle=Mm(am.bind(null,s,n,$t,Fr,Oo,t,Zt,Un,Nl,tn,o,"Throttled",-0,0),i);break e}am(s,n,$t,Fr,Oo,t,Zt,Un,Nl,tn,o,null,-0,0)}}break}while(!0);Na(e)}function am(e,t,n,s,i,o,m,D,z,V,P,ee,Y,X){if(e.timeoutHandle=-1,ee=t.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Da},Xx(t,o,ee);var ye=(o&62914560)===o?Pr-Ze():(o&4194048)===o?Fx-Ze():0;if(ye=_g(ee,ye),ye!==null){$a=o,e.cancelPendingCommit=ye(dm.bind(null,e,t,o,n,s,i,m,D,z,P,ee,null,Y,X)),sn(e,o,m,!V);return}}dm(e,t,o,n,s,i,m,D,z)}function Zb(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var i=n[s],o=i.getSnapshot;i=i.value;try{if(!Vt(o(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sn(e,t,n,s){t&=~ko,t&=~Un,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var i=t;0<i;){var o=31-It(i),m=1<<o;s[o]=-1,i&=~m}n!==0&&uu(e,n,t)}function Wr(){return(Ye&6)===0?(Ds(0),!1):!0}function zo(){if(Le!==null){if(Pe===0)var e=Le.return;else e=Le,Ta=Tn=null,Pc(e),xl=null,is=0,e=Le;for(;e!==null;)_x(e.alternate,e),e=e.return;Le=null}}function Sl(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,pg(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),$a=0,zo(),at=e,Le=n=Ea(e.current,null),Ue=t,Pe=0,Xt=null,tn=!1,vl=Vl(e,t),To=!1,Nl=Zt=ko=Un=an=ot=0,$t=Ss=null,Oo=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var i=31-It(s),o=1<<i;t|=e[i],s&=~o}return Ha=t,vr(),n}function nm(e,t){_e=null,G.H=ps,t===fl||t===Ar?(t=gf(),Pe=3):t===Uc?(t=gf(),Pe=4):Pe=t===xo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Xt=t,Le===null&&(ot=1,Gr(e,la(t,e.current)))}function lm(){var e=Qt.current;return e===null?!0:(Ue&4194048)===Ue?ca===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?e===ca:!1}function sm(){var e=G.H;return G.H=ps,e===null?ps:e}function rm(){var e=G.A;return G.A=Kb,e}function ei(){ot=4,tn||(Ue&4194048)!==Ue&&Qt.current!==null||(vl=!0),(an&134217727)===0&&(Un&134217727)===0||at===null||sn(at,Ue,Zt,!1)}function Lo(e,t,n){var s=Ye;Ye|=2;var i=sm(),o=rm();(at!==e||Ue!==t)&&(Fr=null,Sl(e,t)),t=!1;var m=ot;e:do try{if(Pe!==0&&Le!==null){var D=Le,z=Xt;switch(Pe){case 8:zo(),m=6;break e;case 3:case 2:case 9:case 6:Qt.current===null&&(t=!0);var V=Pe;if(Pe=0,Xt=null,wl(e,D,z,V),n&&vl){m=0;break e}break;default:V=Pe,Pe=0,Xt=null,wl(e,D,z,V)}}Pb(),m=ot;break}catch(P){nm(e,P)}while(!0);return t&&e.shellSuspendCounter++,Ta=Tn=null,Ye=s,G.H=i,G.A=o,Le===null&&(at=null,Ue=0,vr()),m}function Pb(){for(;Le!==null;)im(Le)}function Jb(e,t){var n=Ye;Ye|=2;var s=sm(),i=rm();at!==e||Ue!==t?(Fr=null,Jr=Ze()+500,Sl(e,t)):vl=Vl(e,t);e:do try{if(Pe!==0&&Le!==null){t=Le;var o=Xt;t:switch(Pe){case 1:Pe=0,Xt=null,wl(e,t,o,1);break;case 2:case 9:if(yf(o)){Pe=0,Xt=null,cm(t);break}t=function(){Pe!==2&&Pe!==9||at!==e||(Pe=7),Na(e)},o.then(t,t);break e;case 3:Pe=7;break e;case 4:Pe=5;break e;case 7:yf(o)?(Pe=0,Xt=null,cm(t)):(Pe=0,Xt=null,wl(e,t,o,7));break;case 5:var m=null;switch(Le.tag){case 26:m=Le.memoizedState;case 5:case 27:var D=Le;if(m?Km(m):D.stateNode.complete){Pe=0,Xt=null;var z=D.sibling;if(z!==null)Le=z;else{var V=D.return;V!==null?(Le=V,ti(V)):Le=null}break t}}Pe=0,Xt=null,wl(e,t,o,5);break;case 6:Pe=0,Xt=null,wl(e,t,o,6);break;case 8:zo(),ot=6;break e;default:throw Error(d(462))}}Fb();break}catch(P){nm(e,P)}while(!0);return Ta=Tn=null,G.H=s,G.A=i,Ye=n,Le!==null?0:(at=null,Ue=0,vr(),ot)}function Fb(){for(;Le!==null&&!Xe();)im(Le)}function im(e){var t=Ox(e.alternate,e,Ha);e.memoizedProps=e.pendingProps,t===null?ti(e):Le=t}function cm(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Dx(n,t,t.pendingProps,t.type,void 0,Ue);break;case 11:t=Dx(n,t,t.pendingProps,t.type.render,t.ref,Ue);break;case 5:Pc(t);default:_x(n,t),t=Le=sf(t,Ha),t=Ox(n,t,Ha)}e.memoizedProps=e.pendingProps,t===null?ti(e):Le=t}function wl(e,t,n,s){Ta=Tn=null,Pc(t),xl=null,is=0;var i=t.return;try{if($b(e,i,t,n,Ue)){ot=1,Gr(e,la(n,e.current)),Le=null;return}}catch(o){if(i!==null)throw Le=i,o;ot=1,Gr(e,la(n,e.current)),Le=null;return}t.flags&32768?($e||s===1?e=!0:vl||(Ue&536870912)!==0?e=!1:(tn=e=!0,(s===2||s===9||s===3||s===6)&&(s=Qt.current,s!==null&&s.tag===13&&(s.flags|=16384))),om(t,e)):ti(t)}function ti(e){var t=e;do{if((t.flags&32768)!==0){om(t,tn);return}e=t.return;var n=Ib(t.alternate,t,Ha);if(n!==null){Le=n;return}if(t=t.sibling,t!==null){Le=t;return}Le=t=e}while(t!==null);ot===0&&(ot=5)}function om(e,t){do{var n=Vb(e.alternate,e);if(n!==null){n.flags&=32767,Le=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Le=e;return}Le=e=n}while(e!==null);ot=6,Le=null}function dm(e,t,n,s,i,o,m,D,z){e.cancelPendingCommit=null;do ai();while(yt!==0);if((Ye&6)!==0)throw Error(d(327));if(t!==null){if(t===e.current)throw Error(d(177));if(o=t.lanes|t.childLanes,o|=Sc,Oy(e,n,o,m,D,z),e===at&&(Le=at=null,Ue=0),jl=t,ln=e,$a=n,Mo=o,_o=i,Wx=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ag(vn,function(){return pm(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=G.T,G.T=null,i=k.p,k.p=2,m=Ye,Ye|=4;try{Yb(e,t,n)}finally{Ye=m,k.p=i,G.T=s}}yt=1,um(),fm(),xm()}}function um(){if(yt===1){yt=0;var e=ln,t=jl,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=G.T,G.T=null;var s=k.p;k.p=2;var i=Ye;Ye|=4;try{Yx(t,e);var o=Xo,m=Pu(e.containerInfo),D=o.focusedElem,z=o.selectionRange;if(m!==D&&D&&D.ownerDocument&&Zu(D.ownerDocument.documentElement,D)){if(z!==null&&bc(D)){var V=z.start,P=z.end;if(P===void 0&&(P=V),"selectionStart"in D)D.selectionStart=V,D.selectionEnd=Math.min(P,D.value.length);else{var ee=D.ownerDocument||document,Y=ee&&ee.defaultView||window;if(Y.getSelection){var X=Y.getSelection(),ye=D.textContent.length,Ae=Math.min(z.start,ye),et=z.end===void 0?Ae:Math.min(z.end,ye);!X.extend&&Ae>et&&(m=et,et=Ae,Ae=m);var $=Xu(D,Ae),U=Xu(D,et);if($&&U&&(X.rangeCount!==1||X.anchorNode!==$.node||X.anchorOffset!==$.offset||X.focusNode!==U.node||X.focusOffset!==U.offset)){var I=ee.createRange();I.setStart($.node,$.offset),X.removeAllRanges(),Ae>et?(X.addRange(I),X.extend(U.node,U.offset)):(I.setEnd(U.node,U.offset),X.addRange(I))}}}}for(ee=[],X=D;X=X.parentNode;)X.nodeType===1&&ee.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ee.length;D++){var F=ee[D];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}mi=!!Ko,Xo=Ko=null}finally{Ye=i,k.p=s,G.T=n}}e.current=t,yt=2}}function fm(){if(yt===2){yt=0;var e=ln,t=jl,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=G.T,G.T=null;var s=k.p;k.p=2;var i=Ye;Ye|=4;try{$x(e,t.alternate,t)}finally{Ye=i,k.p=s,G.T=n}}yt=3}}function xm(){if(yt===4||yt===3){yt=0,ft();var e=ln,t=jl,n=$a,s=Wx;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?yt=5:(yt=0,jl=ln=null,mm(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(nn=null),Wi(n),t=t.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Il,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=G.T,i=k.p,k.p=2,G.T=null;try{for(var o=e.onRecoverableError,m=0;m<s.length;m++){var D=s[m];o(D.value,{componentStack:D.stack})}}finally{G.T=t,k.p=i}}($a&3)!==0&&ai(),Na(e),i=e.pendingLanes,(n&261930)!==0&&(i&42)!==0?e===Ro?ws++:(ws=0,Ro=e):ws=0,Ds(0)}}function mm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ss(t)))}function ai(){return um(),fm(),xm(),pm()}function pm(){if(yt!==5)return!1;var e=ln,t=Mo;Mo=0;var n=Wi($a),s=G.T,i=k.p;try{k.p=32>n?32:n,G.T=null,n=_o,_o=null;var o=ln,m=$a;if(yt=0,jl=ln=null,$a=0,(Ye&6)!==0)throw Error(d(331));var D=Ye;if(Ye|=4,Px(o.current),Kx(o,o.current,m,n),Ye=D,Ds(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Il,o)}catch{}return!0}finally{k.p=i,G.T=s,mm(e,t)}}function hm(e,t,n){t=la(n,t),t=fo(e.stateNode,t,2),e=Ja(e,t,2),e!==null&&(Yl(e,2),Na(e))}function Je(e,t,n){if(e.tag===3)hm(e,e,n);else for(;t!==null;){if(t.tag===3){hm(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(nn===null||!nn.has(s))){e=la(n,e),n=yx(2),s=Ja(t,n,2),s!==null&&(bx(n,s,t,e),Yl(s,2),Na(s));break}}t=t.return}}function Bo(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new Xb;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(n)||(To=!0,i.add(n),e=Wb.bind(null,e,t,n),t.then(e,e))}function Wb(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,at===e&&(Ue&n)===n&&(ot===4||ot===3&&(Ue&62914560)===Ue&&300>Ze()-Pr?(Ye&2)===0&&Sl(e,0):ko|=n,Nl===Ue&&(Nl=0)),Na(e)}function ym(e,t){t===0&&(t=du()),e=Cn(e,t),e!==null&&(Yl(e,t),Na(e))}function eg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ym(e,n)}function tg(e,t){var n=0;switch(e.tag){case 31:case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(d(314))}s!==null&&s.delete(t),ym(e,n)}function ag(e,t){return Me(e,t)}var ni=null,Dl=null,Uo=!1,li=!1,Ho=!1,rn=0;function Na(e){e!==Dl&&e.next===null&&(Dl===null?ni=Dl=e:Dl=Dl.next=e),li=!0,Uo||(Uo=!0,lg())}function Ds(e,t){if(!Ho&&li){Ho=!0;do for(var n=!1,s=ni;s!==null;){if(e!==0){var i=s.pendingLanes;if(i===0)var o=0;else{var m=s.suspendedLanes,D=s.pingedLanes;o=(1<<31-It(42|e)+1)-1,o&=i&~(m&~D),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(n=!0,Nm(s,o))}else o=Ue,o=cr(s,s===at?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(o&3)===0||Vl(s,o)||(n=!0,Nm(s,o));s=s.next}while(n);Ho=!1}}function ng(){bm()}function bm(){li=Uo=!1;var e=0;rn!==0&&mg()&&(e=rn);for(var t=Ze(),n=null,s=ni;s!==null;){var i=s.next,o=gm(s,t);o===0?(s.next=null,n===null?ni=i:n.next=i,i===null&&(Dl=n)):(n=s,(e!==0||(o&3)!==0)&&(li=!0)),s=i}yt!==0&&yt!==5||Ds(e),rn!==0&&(rn=0)}function gm(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var m=31-It(o),D=1<<m,z=i[m];z===-1?((D&n)===0||(D&s)!==0)&&(i[m]=ky(D,t)):z<=t&&(e.expiredLanes|=D),o&=~D}if(t=at,n=Ue,n=cr(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,n===0||e===t&&(Pe===2||Pe===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Se(s),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Vl(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(s!==null&&Se(s),Wi(n)){case 2:case 8:n=ql;break;case 32:n=vn;break;case 268435456:n=ou;break;default:n=vn}return s=vm.bind(null,e),n=Me(n,s),e.callbackPriority=t,e.callbackNode=n,t}return s!==null&&s!==null&&Se(s),e.callbackPriority=2,e.callbackNode=null,2}function vm(e,t){if(yt!==0&&yt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ai()&&e.callbackNode!==n)return null;var s=Ue;return s=cr(e,e===at?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(tm(e,s,t),gm(e,Ze()),e.callbackNode!=null&&e.callbackNode===n?vm.bind(null,e):null)}function Nm(e,t){if(ai())return null;tm(e,t,!0)}function lg(){hg(function(){(Ye&6)!==0?Me($l,ng):bm()})}function $o(){if(rn===0){var e=dl;e===0&&(e=sr,sr<<=1,(sr&261888)===0&&(sr=256)),rn=e}return rn}function jm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:fr(""+e)}function Sm(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function sg(e,t,n,s,i){if(t==="submit"&&n&&n.stateNode===i){var o=jm((i[zt]||null).action),m=s.submitter;m&&(t=(t=m[zt]||null)?jm(t.formAction):m.getAttribute("formAction"),t!==null&&(o=t,m=null));var D=new hr("action","action",null,s,i);e.push({event:D,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(rn!==0){var z=m?Sm(i,m):new FormData(i);so(n,{pending:!0,data:z,method:i.method,action:o},null,z)}}else typeof o=="function"&&(D.preventDefault(),z=m?Sm(i,m):new FormData(i),so(n,{pending:!0,data:z,method:i.method,action:o},o,z))},currentTarget:i}]})}}for(var qo=0;qo<jc.length;qo++){var Go=jc[qo],rg=Go.toLowerCase(),ig=Go[0].toUpperCase()+Go.slice(1);ma(rg,"on"+ig)}ma(Wu,"onAnimationEnd"),ma(ef,"onAnimationIteration"),ma(tf,"onAnimationStart"),ma("dblclick","onDoubleClick"),ma("focusin","onFocus"),ma("focusout","onBlur"),ma(Sb,"onTransitionRun"),ma(wb,"onTransitionStart"),ma(Db,"onTransitionCancel"),ma(af,"onTransitionEnd"),Pn("onMouseEnter",["mouseout","mouseover"]),Pn("onMouseLeave",["mouseout","mouseover"]),Pn("onPointerEnter",["pointerout","pointerover"]),Pn("onPointerLeave",["pointerout","pointerover"]),jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cs));function wm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],i=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var m=s.length-1;0<=m;m--){var D=s[m],z=D.instance,V=D.currentTarget;if(D=D.listener,z!==o&&i.isPropagationStopped())break e;o=D,i.currentTarget=V;try{o(i)}catch(P){gr(P)}i.currentTarget=null,o=z}else for(m=0;m<s.length;m++){if(D=s[m],z=D.instance,V=D.currentTarget,D=D.listener,z!==o&&i.isPropagationStopped())break e;o=D,i.currentTarget=V;try{o(i)}catch(P){gr(P)}i.currentTarget=null,o=z}}}}function Be(e,t){var n=t[ec];n===void 0&&(n=t[ec]=new Set);var s=e+"__bubble";n.has(s)||(Dm(t,e,2,!1),n.add(s))}function Io(e,t,n){var s=0;t&&(s|=4),Dm(n,e,s,t)}var si="_reactListening"+Math.random().toString(36).slice(2);function Vo(e){if(!e[si]){e[si]=!0,yu.forEach(function(n){n!=="selectionchange"&&(cg.has(n)||Io(n,!1,e),Io(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[si]||(t[si]=!0,Io("selectionchange",!1,t))}}function Dm(e,t,n,s){switch(ep(t)){case 2:var i=Lg;break;case 8:i=Bg;break;default:i=sd}n=i.bind(null,t,n,e),i=void 0,!oc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Yo(e,t,n,s,i){var o=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var D=s.stateNode.containerInfo;if(D===i)break;if(m===4)for(m=s.return;m!==null;){var z=m.tag;if((z===3||z===4)&&m.stateNode.containerInfo===i)return;m=m.return}for(;D!==null;){if(m=Kn(D),m===null)return;if(z=m.tag,z===5||z===6||z===26||z===27){s=o=m;continue e}D=D.parentNode}}s=s.return}Tu(function(){var V=o,P=ic(n),ee=[];e:{var Y=nf.get(e);if(Y!==void 0){var X=hr,ye=e;switch(e){case"keypress":if(mr(n)===0)break e;case"keydown":case"keyup":X=tb;break;case"focusin":ye="focus",X=xc;break;case"focusout":ye="blur",X=xc;break;case"beforeblur":case"afterblur":X=xc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Mu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Iy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=lb;break;case Wu:case ef:case tf:X=Qy;break;case af:X=rb;break;case"scroll":case"scrollend":X=qy;break;case"wheel":X=cb;break;case"copy":case"cut":case"paste":X=Xy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Ru;break;case"toggle":case"beforetoggle":X=db}var Ae=(t&4)!==0,et=!Ae&&(e==="scroll"||e==="scrollend"),$=Ae?Y!==null?Y+"Capture":null:Y;Ae=[];for(var U=V,I;U!==null;){var F=U;if(I=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||I===null||$===null||(F=Xl(U,$),F!=null&&Ae.push(Es(U,F,I))),et)break;U=U.return}0<Ae.length&&(Y=new X(Y,ye,null,n,P),ee.push({event:Y,listeners:Ae}))}}if((t&7)===0){e:{if(Y=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",Y&&n!==rc&&(ye=n.relatedTarget||n.fromElement)&&(Kn(ye)||ye[Qn]))break e;if((X||Y)&&(Y=P.window===P?P:(Y=P.ownerDocument)?Y.defaultView||Y.parentWindow:window,X?(ye=n.relatedTarget||n.toElement,X=V,ye=ye?Kn(ye):null,ye!==null&&(et=f(ye),Ae=ye.tag,ye!==et||Ae!==5&&Ae!==27&&Ae!==6)&&(ye=null)):(X=null,ye=V),X!==ye)){if(Ae=Mu,F="onMouseLeave",$="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(Ae=Ru,F="onPointerLeave",$="onPointerEnter",U="pointer"),et=X==null?Y:Kl(X),I=ye==null?Y:Kl(ye),Y=new Ae(F,U+"leave",X,n,P),Y.target=et,Y.relatedTarget=I,F=null,Kn(P)===V&&(Ae=new Ae($,U+"enter",ye,n,P),Ae.target=I,Ae.relatedTarget=et,F=Ae),et=F,X&&ye)t:{for(Ae=og,$=X,U=ye,I=0,F=$;F;F=Ae(F))I++;F=0;for(var Ce=U;Ce;Ce=Ae(Ce))F++;for(;0<I-F;)$=Ae($),I--;for(;0<F-I;)U=Ae(U),F--;for(;I--;){if($===U||U!==null&&$===U.alternate){Ae=$;break t}$=Ae($),U=Ae(U)}Ae=null}else Ae=null;X!==null&&Cm(ee,Y,X,Ae,!1),ye!==null&&et!==null&&Cm(ee,et,ye,Ae,!0)}}e:{if(Y=V?Kl(V):window,X=Y.nodeName&&Y.nodeName.toLowerCase(),X==="select"||X==="input"&&Y.type==="file")var Ie=Gu;else if($u(Y))if(Iu)Ie=vb;else{Ie=bb;var Ne=yb}else X=Y.nodeName,!X||X.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?V&&sc(V.elementType)&&(Ie=Gu):Ie=gb;if(Ie&&(Ie=Ie(e,V))){qu(ee,Ie,n,P);break e}Ne&&Ne(e,Y,V),e==="focusout"&&V&&Y.type==="number"&&V.memoizedProps.value!=null&&lc(Y,"number",Y.value)}switch(Ne=V?Kl(V):window,e){case"focusin":($u(Ne)||Ne.contentEditable==="true")&&(al=Ne,gc=V,as=null);break;case"focusout":as=gc=al=null;break;case"mousedown":vc=!0;break;case"contextmenu":case"mouseup":case"dragend":vc=!1,Ju(ee,n,P);break;case"selectionchange":if(jb)break;case"keydown":case"keyup":Ju(ee,n,P)}var ze;if(pc)e:{switch(e){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else tl?Uu(e,n)&&(He="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(He="onCompositionStart");He&&(zu&&n.locale!=="ko"&&(tl||He!=="onCompositionStart"?He==="onCompositionEnd"&&tl&&(ze=ku()):(Va=P,dc="value"in Va?Va.value:Va.textContent,tl=!0)),Ne=ri(V,He),0<Ne.length&&(He=new _u(He,e,null,n,P),ee.push({event:He,listeners:Ne}),ze?He.data=ze:(ze=Hu(n),ze!==null&&(He.data=ze)))),(ze=fb?xb(e,n):mb(e,n))&&(He=ri(V,"onBeforeInput"),0<He.length&&(Ne=new _u("onBeforeInput","beforeinput",null,n,P),ee.push({event:Ne,listeners:He}),Ne.data=ze)),sg(ee,e,V,n,P)}wm(ee,t)})}function Es(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ri(e,t){for(var n=t+"Capture",s=[];e!==null;){var i=e,o=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||o===null||(i=Xl(e,n),i!=null&&s.unshift(Es(e,i,o)),i=Xl(e,t),i!=null&&s.push(Es(e,i,o))),e.tag===3)return s;e=e.return}return[]}function og(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Cm(e,t,n,s,i){for(var o=t._reactName,m=[];n!==null&&n!==s;){var D=n,z=D.alternate,V=D.stateNode;if(D=D.tag,z!==null&&z===s)break;D!==5&&D!==26&&D!==27||V===null||(z=V,i?(V=Xl(n,o),V!=null&&m.unshift(Es(n,V,z))):i||(V=Xl(n,o),V!=null&&m.push(Es(n,V,z)))),n=n.return}m.length!==0&&e.push({event:t,listeners:m})}var dg=/\r\n?/g,ug=/\u0000|\uFFFD/g;function Em(e){return(typeof e=="string"?e:""+e).replace(dg,`
`).replace(ug,"")}function Am(e,t){return t=Em(t),Em(e)===t}function We(e,t,n,s,i,o){switch(n){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Fn(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Fn(e,""+s);break;case"className":dr(e,"class",s);break;case"tabIndex":dr(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":dr(e,n,s);break;case"style":Eu(e,s,o);break;case"data":if(t!=="object"){dr(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=fr(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(t!=="input"&&We(e,t,"name",i.name,i,null),We(e,t,"formEncType",i.formEncType,i,null),We(e,t,"formMethod",i.formMethod,i,null),We(e,t,"formTarget",i.formTarget,i,null)):(We(e,t,"encType",i.encType,i,null),We(e,t,"method",i.method,i,null),We(e,t,"target",i.target,i,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=fr(""+s),e.setAttribute(n,s);break;case"onClick":s!=null&&(e.onclick=Da);break;case"onScroll":s!=null&&Be("scroll",e);break;case"onScrollEnd":s!=null&&Be("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(d(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(d(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}n=fr(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":s===!0?e.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":Be("beforetoggle",e),Be("toggle",e),or(e,"popover",s);break;case"xlinkActuate":wa(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":wa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":wa(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":wa(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":wa(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":wa(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":wa(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":wa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":wa(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":or(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Hy.get(n)||n,or(e,n,s))}}function Qo(e,t,n,s,i,o){switch(n){case"style":Eu(e,s,o);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(d(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(d(60));e.innerHTML=n}}break;case"children":typeof s=="string"?Fn(e,s):(typeof s=="number"||typeof s=="bigint")&&Fn(e,""+s);break;case"onScroll":s!=null&&Be("scroll",e);break;case"onScrollEnd":s!=null&&Be("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Da);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bu.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),o=e[zt]||null,o=o!=null?o[n]:null,typeof o=="function"&&e.removeEventListener(t,o,i),typeof s=="function")){typeof o!="function"&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,i);break e}n in e?e[n]=s:s===!0?e.setAttribute(n,""):or(e,n,s)}}}function At(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",e),Be("load",e);var s=!1,i=!1,o;for(o in n)if(n.hasOwnProperty(o)){var m=n[o];if(m!=null)switch(o){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:We(e,t,o,m,n,null)}}i&&We(e,t,"srcSet",n.srcSet,n,null),s&&We(e,t,"src",n.src,n,null);return;case"input":Be("invalid",e);var D=o=m=i=null,z=null,V=null;for(s in n)if(n.hasOwnProperty(s)){var P=n[s];if(P!=null)switch(s){case"name":i=P;break;case"type":m=P;break;case"checked":z=P;break;case"defaultChecked":V=P;break;case"value":o=P;break;case"defaultValue":D=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(d(137,t));break;default:We(e,t,s,P,n,null)}}Su(e,o,D,z,V,m,i,!1);return;case"select":Be("invalid",e),s=m=o=null;for(i in n)if(n.hasOwnProperty(i)&&(D=n[i],D!=null))switch(i){case"value":o=D;break;case"defaultValue":m=D;break;case"multiple":s=D;default:We(e,t,i,D,n,null)}t=o,n=m,e.multiple=!!s,t!=null?Jn(e,!!s,t,!1):n!=null&&Jn(e,!!s,n,!0);return;case"textarea":Be("invalid",e),o=i=s=null;for(m in n)if(n.hasOwnProperty(m)&&(D=n[m],D!=null))switch(m){case"value":s=D;break;case"defaultValue":i=D;break;case"children":o=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(d(91));break;default:We(e,t,m,D,n,null)}Du(e,s,i,o);return;case"option":for(z in n)n.hasOwnProperty(z)&&(s=n[z],s!=null)&&(z==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":We(e,t,z,s,n,null));return;case"dialog":Be("beforetoggle",e),Be("toggle",e),Be("cancel",e),Be("close",e);break;case"iframe":case"object":Be("load",e);break;case"video":case"audio":for(s=0;s<Cs.length;s++)Be(Cs[s],e);break;case"image":Be("error",e),Be("load",e);break;case"details":Be("toggle",e);break;case"embed":case"source":case"link":Be("error",e),Be("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in n)if(n.hasOwnProperty(V)&&(s=n[V],s!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:We(e,t,V,s,n,null)}return;default:if(sc(t)){for(P in n)n.hasOwnProperty(P)&&(s=n[P],s!==void 0&&Qo(e,t,P,s,n,void 0));return}}for(D in n)n.hasOwnProperty(D)&&(s=n[D],s!=null&&We(e,t,D,s,n,null))}function fg(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,m=null,D=null,z=null,V=null,P=null;for(X in n){var ee=n[X];if(n.hasOwnProperty(X)&&ee!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":z=ee;default:s.hasOwnProperty(X)||We(e,t,X,null,s,ee)}}for(var Y in s){var X=s[Y];if(ee=n[Y],s.hasOwnProperty(Y)&&(X!=null||ee!=null))switch(Y){case"type":o=X;break;case"name":i=X;break;case"checked":V=X;break;case"defaultChecked":P=X;break;case"value":m=X;break;case"defaultValue":D=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(d(137,t));break;default:X!==ee&&We(e,t,Y,X,s,ee)}}nc(e,m,D,z,V,P,o,i);return;case"select":X=m=D=Y=null;for(o in n)if(z=n[o],n.hasOwnProperty(o)&&z!=null)switch(o){case"value":break;case"multiple":X=z;default:s.hasOwnProperty(o)||We(e,t,o,null,s,z)}for(i in s)if(o=s[i],z=n[i],s.hasOwnProperty(i)&&(o!=null||z!=null))switch(i){case"value":Y=o;break;case"defaultValue":D=o;break;case"multiple":m=o;default:o!==z&&We(e,t,i,o,s,z)}t=D,n=m,s=X,Y!=null?Jn(e,!!n,Y,!1):!!s!=!!n&&(t!=null?Jn(e,!!n,t,!0):Jn(e,!!n,n?[]:"",!1));return;case"textarea":X=Y=null;for(D in n)if(i=n[D],n.hasOwnProperty(D)&&i!=null&&!s.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:We(e,t,D,null,s,i)}for(m in s)if(i=s[m],o=n[m],s.hasOwnProperty(m)&&(i!=null||o!=null))switch(m){case"value":Y=i;break;case"defaultValue":X=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(d(91));break;default:i!==o&&We(e,t,m,i,s,o)}wu(e,Y,X);return;case"option":for(var ye in n)Y=n[ye],n.hasOwnProperty(ye)&&Y!=null&&!s.hasOwnProperty(ye)&&(ye==="selected"?e.selected=!1:We(e,t,ye,null,s,Y));for(z in s)Y=s[z],X=n[z],s.hasOwnProperty(z)&&Y!==X&&(Y!=null||X!=null)&&(z==="selected"?e.selected=Y&&typeof Y!="function"&&typeof Y!="symbol":We(e,t,z,Y,s,X));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in n)Y=n[Ae],n.hasOwnProperty(Ae)&&Y!=null&&!s.hasOwnProperty(Ae)&&We(e,t,Ae,null,s,Y);for(V in s)if(Y=s[V],X=n[V],s.hasOwnProperty(V)&&Y!==X&&(Y!=null||X!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(d(137,t));break;default:We(e,t,V,Y,s,X)}return;default:if(sc(t)){for(var et in n)Y=n[et],n.hasOwnProperty(et)&&Y!==void 0&&!s.hasOwnProperty(et)&&Qo(e,t,et,void 0,s,Y);for(P in s)Y=s[P],X=n[P],!s.hasOwnProperty(P)||Y===X||Y===void 0&&X===void 0||Qo(e,t,P,Y,s,X);return}}for(var $ in n)Y=n[$],n.hasOwnProperty($)&&Y!=null&&!s.hasOwnProperty($)&&We(e,t,$,null,s,Y);for(ee in s)Y=s[ee],X=n[ee],!s.hasOwnProperty(ee)||Y===X||Y==null&&X==null||We(e,t,ee,Y,s,X)}function Tm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var i=n[s],o=i.transferSize,m=i.initiatorType,D=i.duration;if(o&&D&&Tm(m)){for(m=0,D=i.responseEnd,s+=1;s<n.length;s++){var z=n[s],V=z.startTime;if(V>D)break;var P=z.transferSize,ee=z.initiatorType;P&&Tm(ee)&&(z=z.responseEnd,m+=P*(z<D?1:(D-V)/(z-V)))}if(--s,t+=8*(o+m)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ko=null,Xo=null;function ii(e){return e.nodeType===9?e:e.ownerDocument}function km(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Om(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Zo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Po=null;function mg(){var e=window.event;return e&&e.type==="popstate"?e===Po?!1:(Po=e,!0):(Po=null,!1)}var Mm=typeof setTimeout=="function"?setTimeout:void 0,pg=typeof clearTimeout=="function"?clearTimeout:void 0,_m=typeof Promise=="function"?Promise:void 0,hg=typeof queueMicrotask=="function"?queueMicrotask:typeof _m<"u"?function(e){return _m.resolve(null).then(e).catch(yg)}:Mm;function yg(e){setTimeout(function(){throw e})}function cn(e){return e==="head"}function Rm(e,t){var n=t,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(s===0){e.removeChild(i),Tl(t);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")As(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,As(n);for(var o=n.firstChild;o;){var m=o.nextSibling,D=o.nodeName;o[Ql]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&o.rel.toLowerCase()==="stylesheet"||n.removeChild(o),o=m}}else n==="body"&&As(e.ownerDocument.body);n=i}while(n);Tl(t)}function zm(e,t){var n=e;e=0;do{var s=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=s}while(n)}function Jo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Jo(n),tc(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function bg(e,t,n,s){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Ql])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=oa(e.nextSibling),e===null)break}return null}function gg(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=oa(e.nextSibling),e===null))return null;return e}function Lm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=oa(e.nextSibling),e===null))return null;return e}function Fo(e){return e.data==="$?"||e.data==="$~"}function Wo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function vg(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var s=function(){t(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function oa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var ed=null;function Bm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return oa(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Um(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Hm(e,t,n){switch(t=ii(n),e){case"html":if(e=t.documentElement,!e)throw Error(d(452));return e;case"head":if(e=t.head,!e)throw Error(d(453));return e;case"body":if(e=t.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function As(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);tc(e)}var da=new Map,$m=new Set;function ci(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var qa=k.d;k.d={f:Ng,r:jg,D:Sg,C:wg,L:Dg,m:Cg,X:Ag,S:Eg,M:Tg};function Ng(){var e=qa.f(),t=Wr();return e||t}function jg(e){var t=Xn(e);t!==null&&t.tag===5&&t.type==="form"?nx(t):qa.r(e)}var Cl=typeof document>"u"?null:document;function qm(e,t,n){var s=Cl;if(s&&typeof t=="string"&&t){var i=aa(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),$m.has(i)||($m.add(i),e={rel:e,crossOrigin:n,href:t},s.querySelector(i)===null&&(t=s.createElement("link"),At(t,"link",e),gt(t),s.head.appendChild(t)))}}function Sg(e){qa.D(e),qm("dns-prefetch",e,null)}function wg(e,t){qa.C(e,t),qm("preconnect",e,t)}function Dg(e,t,n){qa.L(e,t,n);var s=Cl;if(s&&e&&t){var i='link[rel="preload"][as="'+aa(t)+'"]';t==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+aa(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+aa(n.imageSizes)+'"]')):i+='[href="'+aa(e)+'"]';var o=i;switch(t){case"style":o=El(e);break;case"script":o=Al(e)}da.has(o)||(e=g({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),da.set(o,e),s.querySelector(i)!==null||t==="style"&&s.querySelector(Ts(o))||t==="script"&&s.querySelector(ks(o))||(t=s.createElement("link"),At(t,"link",e),gt(t),s.head.appendChild(t)))}}function Cg(e,t){qa.m(e,t);var n=Cl;if(n&&e){var s=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+aa(s)+'"][href="'+aa(e)+'"]',o=i;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Al(e)}if(!da.has(o)&&(e=g({rel:"modulepreload",href:e},t),da.set(o,e),n.querySelector(i)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ks(o)))return}s=n.createElement("link"),At(s,"link",e),gt(s),n.head.appendChild(s)}}}function Eg(e,t,n){qa.S(e,t,n);var s=Cl;if(s&&e){var i=Zn(s).hoistableStyles,o=El(e);t=t||"default";var m=i.get(o);if(!m){var D={loading:0,preload:null};if(m=s.querySelector(Ts(o)))D.loading=5;else{e=g({rel:"stylesheet",href:e,"data-precedence":t},n),(n=da.get(o))&&td(e,n);var z=m=s.createElement("link");gt(z),At(z,"link",e),z._p=new Promise(function(V,P){z.onload=V,z.onerror=P}),z.addEventListener("load",function(){D.loading|=1}),z.addEventListener("error",function(){D.loading|=2}),D.loading|=4,oi(m,t,s)}m={type:"stylesheet",instance:m,count:1,state:D},i.set(o,m)}}}function Ag(e,t){qa.X(e,t);var n=Cl;if(n&&e){var s=Zn(n).hoistableScripts,i=Al(e),o=s.get(i);o||(o=n.querySelector(ks(i)),o||(e=g({src:e,async:!0},t),(t=da.get(i))&&ad(e,t),o=n.createElement("script"),gt(o),At(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(i,o))}}function Tg(e,t){qa.M(e,t);var n=Cl;if(n&&e){var s=Zn(n).hoistableScripts,i=Al(e),o=s.get(i);o||(o=n.querySelector(ks(i)),o||(e=g({src:e,async:!0,type:"module"},t),(t=da.get(i))&&ad(e,t),o=n.createElement("script"),gt(o),At(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(i,o))}}function Gm(e,t,n,s){var i=(i=je.current)?ci(i):null;if(!i)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=El(n.href),n=Zn(i).hoistableStyles,s=n.get(t),s||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=El(n.href);var o=Zn(i).hoistableStyles,m=o.get(e);if(m||(i=i.ownerDocument||i,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,m),(o=i.querySelector(Ts(e)))&&!o._p&&(m.instance=o,m.state.loading=5),da.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},da.set(e,n),o||kg(i,e,n,m.state))),t&&s===null)throw Error(d(528,""));return m}if(t&&s!==null)throw Error(d(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Al(n),n=Zn(i).hoistableScripts,s=n.get(t),s||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function El(e){return'href="'+aa(e)+'"'}function Ts(e){return'link[rel="stylesheet"]['+e+"]"}function Im(e){return g({},e,{"data-precedence":e.precedence,precedence:null})}function kg(e,t,n,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),At(t,"link",n),gt(t),e.head.appendChild(t))}function Al(e){return'[src="'+aa(e)+'"]'}function ks(e){return"script[async]"+e}function Vm(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+aa(n.href)+'"]');if(s)return t.instance=s,gt(s),s;var i=g({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),gt(s),At(s,"style",i),oi(s,n.precedence,e),t.instance=s;case"stylesheet":i=El(n.href);var o=e.querySelector(Ts(i));if(o)return t.state.loading|=4,t.instance=o,gt(o),o;s=Im(n),(i=da.get(i))&&td(s,i),o=(e.ownerDocument||e).createElement("link"),gt(o);var m=o;return m._p=new Promise(function(D,z){m.onload=D,m.onerror=z}),At(o,"link",s),t.state.loading|=4,oi(o,n.precedence,e),t.instance=o;case"script":return o=Al(n.src),(i=e.querySelector(ks(o)))?(t.instance=i,gt(i),i):(s=n,(i=da.get(o))&&(s=g({},n),ad(s,i)),e=e.ownerDocument||e,i=e.createElement("script"),gt(i),At(i,"link",s),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(d(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,oi(s,n.precedence,e));return t.instance}function oi(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=s.length?s[s.length-1]:null,o=i,m=0;m<s.length;m++){var D=s[m];if(D.dataset.precedence===t)o=D;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function td(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ad(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var di=null;function Ym(e,t,n){if(di===null){var s=new Map,i=di=new Map;i.set(n,s)}else i=di,s=i.get(n),s||(s=new Map,i.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var o=n[i];if(!(o[Ql]||o[wt]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var m=o.getAttribute(t)||"";m=e+m;var D=s.get(m);D?D.push(o):s.set(m,[o])}}return s}function Qm(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Og(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Km(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Mg(e,t,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var i=El(s.href),o=t.querySelector(Ts(i));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=ui.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=o,gt(o);return}o=t.ownerDocument||t,s=Im(s),(i=da.get(i))&&td(s,i),o=o.createElement("link"),gt(o);var m=o;m._p=new Promise(function(D,z){m.onload=D,m.onerror=z}),At(o,"link",s),n.instance=o}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=ui.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var nd=0;function _g(e,t){return e.stylesheets&&e.count===0&&xi(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var s=setTimeout(function(){if(e.stylesheets&&xi(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4+t);0<e.imgBytes&&nd===0&&(nd=62500*xg());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&xi(e,e.stylesheets),e.unsuspend)){var o=e.unsuspend;e.unsuspend=null,o()}},(e.imgBytes>nd?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(i)}}:null}function ui(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xi(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var fi=null;function xi(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,fi=new Map,t.forEach(Rg,e),fi=null,ui.call(e))}function Rg(e,t){if(!(t.state.loading&4)){var n=fi.get(e);if(n)var s=n.get(null);else{n=new Map,fi.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var m=i[o];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(n.set(m.dataset.precedence,m),s=m)}s&&n.set(null,s)}i=t.instance,m=i.getAttribute("data-precedence"),o=n.get(m)||s,o===s&&n.set(null,i),n.set(m,i),this.count++,s=ui.bind(this),i.addEventListener("load",s),i.addEventListener("error",s),o?o.parentNode.insertBefore(i,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Os={$$typeof:C,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function zg(e,t,n,s,i,o,m,D,z){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ji(0),this.hiddenUpdates=Ji(null),this.identifierPrefix=s,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Xm(e,t,n,s,i,o,m,D,z,V,P,ee){return e=new zg(e,t,n,m,z,V,P,ee,D),t=1,o===!0&&(t|=24),o=Yt(3,null,null,t),e.current=o,o.stateNode=e,t=zc(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:s,isDehydrated:n,cache:t},Hc(o),e}function Zm(e){return e?(e=sl,e):sl}function Pm(e,t,n,s,i,o){i=Zm(i),s.context===null?s.context=i:s.pendingContext=i,s=Pa(t),s.payload={element:n},o=o===void 0?null:o,o!==null&&(s.callback=o),n=Ja(e,s,t),n!==null&&(qt(n,e,t),os(n,e,t))}function Jm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ld(e,t){Jm(e,t),(e=e.alternate)&&Jm(e,t)}function Fm(e){if(e.tag===13||e.tag===31){var t=Cn(e,67108864);t!==null&&qt(t,e,67108864),ld(e,67108864)}}function Wm(e){if(e.tag===13||e.tag===31){var t=Pt();t=Fi(t);var n=Cn(e,t);n!==null&&qt(n,e,t),ld(e,t)}}var mi=!0;function Lg(e,t,n,s){var i=G.T;G.T=null;var o=k.p;try{k.p=2,sd(e,t,n,s)}finally{k.p=o,G.T=i}}function Bg(e,t,n,s){var i=G.T;G.T=null;var o=k.p;try{k.p=8,sd(e,t,n,s)}finally{k.p=o,G.T=i}}function sd(e,t,n,s){if(mi){var i=rd(s);if(i===null)Yo(e,t,s,pi,n),tp(e,s);else if(Hg(i,e,t,n,s))s.stopPropagation();else if(tp(e,s),t&4&&-1<Ug.indexOf(e)){for(;i!==null;){var o=Xn(i);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var m=Nn(o.pendingLanes);if(m!==0){var D=o;for(D.pendingLanes|=2,D.entangledLanes|=2;m;){var z=1<<31-It(m);D.entanglements[1]|=z,m&=~z}Na(o),(Ye&6)===0&&(Jr=Ze()+500,Ds(0))}}break;case 31:case 13:D=Cn(o,2),D!==null&&qt(D,o,2),Wr(),ld(o,2)}if(o=rd(s),o===null&&Yo(e,t,s,pi,n),o===i)break;i=o}i!==null&&s.stopPropagation()}else Yo(e,t,s,null,n)}}function rd(e){return e=ic(e),id(e)}var pi=null;function id(e){if(pi=null,e=Kn(e),e!==null){var t=f(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=x(t),e!==null)return e;e=null}else if(n===31){if(e=b(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return pi=e,null}function ep(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ea()){case $l:return 2;case ql:return 8;case vn:case Gl:return 32;case ou:return 268435456;default:return 32}default:return 32}}var cd=!1,on=null,dn=null,un=null,Ms=new Map,_s=new Map,fn=[],Ug="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tp(e,t){switch(e){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":un=null;break;case"pointerover":case"pointerout":Ms.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_s.delete(t.pointerId)}}function Rs(e,t,n,s,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Xn(t),t!==null&&Fm(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Hg(e,t,n,s,i){switch(t){case"focusin":return on=Rs(on,e,t,n,s,i),!0;case"dragenter":return dn=Rs(dn,e,t,n,s,i),!0;case"mouseover":return un=Rs(un,e,t,n,s,i),!0;case"pointerover":var o=i.pointerId;return Ms.set(o,Rs(Ms.get(o)||null,e,t,n,s,i)),!0;case"gotpointercapture":return o=i.pointerId,_s.set(o,Rs(_s.get(o)||null,e,t,n,s,i)),!0}return!1}function ap(e){var t=Kn(e.target);if(t!==null){var n=f(t);if(n!==null){if(t=n.tag,t===13){if(t=x(n),t!==null){e.blockedOn=t,pu(e.priority,function(){Wm(n)});return}}else if(t===31){if(t=b(n),t!==null){e.blockedOn=t,pu(e.priority,function(){Wm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=rd(e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);rc=s,n.target.dispatchEvent(s),rc=null}else return t=Xn(n),t!==null&&Fm(t),e.blockedOn=n,!1;t.shift()}return!0}function np(e,t,n){hi(e)&&n.delete(t)}function $g(){cd=!1,on!==null&&hi(on)&&(on=null),dn!==null&&hi(dn)&&(dn=null),un!==null&&hi(un)&&(un=null),Ms.forEach(np),_s.forEach(np)}function yi(e,t){e.blockedOn===t&&(e.blockedOn=null,cd||(cd=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,$g)))}var bi=null;function lp(e){bi!==e&&(bi=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){bi===e&&(bi=null);for(var t=0;t<e.length;t+=3){var n=e[t],s=e[t+1],i=e[t+2];if(typeof s!="function"){if(id(s||n)===null)continue;break}var o=Xn(n);o!==null&&(e.splice(t,3),t-=3,so(o,{pending:!0,data:i,method:n.method,action:s},s,i))}}))}function Tl(e){function t(z){return yi(z,e)}on!==null&&yi(on,e),dn!==null&&yi(dn,e),un!==null&&yi(un,e),Ms.forEach(t),_s.forEach(t);for(var n=0;n<fn.length;n++){var s=fn[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<fn.length&&(n=fn[0],n.blockedOn===null);)ap(n),n.blockedOn===null&&fn.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var i=n[s],o=n[s+1],m=i[zt]||null;if(typeof o=="function")m||lp(n);else if(m){var D=null;if(o&&o.hasAttribute("formAction")){if(i=o,m=o[zt]||null)D=m.formAction;else if(id(i)!==null)continue}else D=m.action;typeof D=="function"?n[s+1]=D:(n.splice(s,3),s-=3),lp(n)}}}function sp(){function e(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(m){return i=m})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function od(e){this._internalRoot=e}gi.prototype.render=od.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(d(409));var n=t.current,s=Pt();Pm(n,s,e,t,null,null)},gi.prototype.unmount=od.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pm(e.current,2,null,e,null,null),Wr(),t[Qn]=null}};function gi(e){this._internalRoot=e}gi.prototype.unstable_scheduleHydration=function(e){if(e){var t=mu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<fn.length&&t!==0&&t<fn[n].priority;n++);fn.splice(n,0,e),n===0&&ap(e)}};var rp=r.version;if(rp!=="19.2.3")throw Error(d(527,rp,"19.2.3"));k.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=p(t),e=e!==null?j(e):null,e=e===null?null:e.stateNode,e};var qg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vi.isDisabled&&vi.supportsFiber)try{Il=vi.inject(qg),Gt=vi}catch{}}return Ls.createRoot=function(e,t){if(!u(e))throw Error(d(299));var n=!1,s="",i=xx,o=mx,m=px;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=Xm(e,1,!1,null,null,n,s,null,i,o,m,sp),e[Qn]=t.current,Vo(e),new od(t)},Ls.hydrateRoot=function(e,t,n){if(!u(e))throw Error(d(299));var s=!1,i="",o=xx,m=mx,D=px,z=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(D=n.onRecoverableError),n.formState!==void 0&&(z=n.formState)),t=Xm(e,1,!0,t,n??null,s,i,z,o,m,D,sp),t.context=Zm(null),n=t.current,s=Pt(),s=Fi(s),i=Pa(s),i.callback=null,Ja(n,i,s),n=s,t.current.lanes=n,Yl(t,n),Na(t),e[Qn]=t.current,Vo(e),new gi(t)},Ls.version="19.2.3",Ls}var hp;function Pg(){if(hp)return fd.exports;hp=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(r){console.error(r)}}return l(),fd.exports=Zg(),fd.exports}var Jg=Pg();const Fg=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wg=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,c,d)=>d?d.toUpperCase():c.toLowerCase()),yp=l=>{const r=Wg(l);return r.charAt(0).toUpperCase()+r.slice(1)},fh=(...l)=>l.filter((r,c,d)=>!!r&&r.trim()!==""&&d.indexOf(r)===c).join(" ").trim(),ev=l=>{for(const r in l)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};var tv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const av=E.forwardRef(({color:l="currentColor",size:r=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:f,iconNode:x,...b},h)=>E.createElement("svg",{ref:h,...tv,width:r,height:r,stroke:l,strokeWidth:d?Number(c)*24/Number(r):c,className:fh("lucide",u),...!f&&!ev(b)&&{"aria-hidden":"true"},...b},[...x.map(([p,j])=>E.createElement(p,j)),...Array.isArray(f)?f:[f]]));const Te=(l,r)=>{const c=E.forwardRef(({className:d,...u},f)=>E.createElement(av,{ref:f,iconNode:r,className:fh(`lucide-${Fg(yp(l))}`,`lucide-${l}`,d),...u}));return c.displayName=yp(l),c};const nv=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],In=Te("activity",nv);const lv=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Ni=Te("archive",lv);const sv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],rv=Te("arrow-right",sv);const iv=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],cv=Te("calculator",iv);const ov=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Sa=Te("calendar",ov);const dv=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Ad=Te("chart-no-axes-column",dv);const uv=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Td=Te("chart-pie",uv);const fv=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Vn=Te("chevron-down",fv);const xv=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ai=Te("chevron-up",xv);const mv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ti=Te("circle-alert",mv);const pv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],kd=Te("circle-check-big",pv);const hv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],yv=Te("circle-minus",hv);const bv=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Ol=Te("clipboard-list",bv);const gv=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],vv=Te("clipboard",gv);const Nv=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Qs=Te("clock",Nv);const jv=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Sv=Te("credit-card",jv);const wv=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],bt=Te("dollar-sign",wv);const Dv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Cv=Te("eye",Dv);const Ev=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Gs=Te("file-text",Ev);const Av=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ks=Te("funnel",Av);const Tv=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],bp=Te("grip-vertical",Tv);const kv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ov=Te("info",kv);const Mv=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],_v=Te("list-ordered",Mv);const Rv=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],zv=Te("lock",Rv);const Lv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Bv=Te("log-out",Lv);const Uv=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],gp=Te("map-pin",Uv);const Hv=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],vp=Te("moon",Hv);const $v=[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],ji=Te("package-plus",$v);const qv=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ml=Te("package",qv);const Gv=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],Iv=Te("piggy-bank",Gv);const Vv=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Yv=Te("printer",Vv);const Qv=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],it=Te("refresh-cw",Qv);const Kv=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ki=Te("rotate-ccw",Kv);const Xv=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Xs=Te("save",Xv);const Zv=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],jt=Te("search",Zv);const Pv=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xh=Te("settings",Pv);const Jv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ja=Te("shield",Jv);const Fv=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Si=Te("shopping-cart",Fv);const Wv=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Zs=Te("square-check-big",Wv);const e0=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Np=Te("sun",e0);const t0=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Oi=Te("trash-2",t0);const a0=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],pn=Te("trending-up",a0);const n0=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_l=Te("triangle-alert",n0);const l0=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Od=Te("truck",l0);const s0=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],r0=Te("user-plus",s0);const i0=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hn=Te("user",i0);const c0=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Mi=Te("users",c0);const o0=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],mn=Te("wallet",o0);const d0=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],u0=Te("wifi-off",d0),ke=async(l,r,c,d=null)=>{try{const u=new AbortController,f=setTimeout(()=>u.abort(),3e4),x=await fetch(l,{method:"POST",redirect:"follow",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:r,payload:c,token:d}),signal:u.signal});if(clearTimeout(f),!x.ok)throw new Error(`HTTP error! status: ${x.status}`);const b=await x.json();if(b.error)throw new Error(b.error);return b}catch(u){throw console.error(`API Error [${r}]:`,u),u.name==="AbortError"?new Error(" GAS "):u.message.includes("Load failed")||u.message.includes("Failed to fetch")?new Error(" GAS Anyone CORS "):u}};function f0({onLogin:l,apiUrl:r}){const[c,d]=E.useState(!1),[u,f]=E.useState(""),[x,b]=E.useState(""),[h,p]=E.useState(!1),j=async g=>{g.preventDefault(),p(!0);try{const S=await ke(r,c?"register":"login",{username:u,password:x});console.log("Login API Result:",S),c?(alert(" ()"),d(!1)):l(S)}catch(y){alert(y.message)}finally{p(!1)}};return a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 bg-slate-50",children:a.jsxs("div",{className:"bg-white border border-slate-200 p-8 w-full max-w-md rounded-2xl shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("img",{src:"/inventory-system/logo.png",alt:"Logo",className:"h-20 w-auto object-contain"})}),a.jsx("p",{className:"text-slate-500",children:c?"":""})]}),a.jsxs("form",{onSubmit:j,className:"space-y-6",children:[a.jsx("div",{children:a.jsxs("div",{className:"relative",children:[a.jsx(hn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:20}),a.jsx("input",{required:!0,type:"text",placeholder:"",className:"input-field pl-10 bg-slate-50 border-slate-200 focus:bg-white transition-all",value:u,onChange:g=>f(g.target.value)})]})}),a.jsx("div",{children:a.jsxs("div",{className:"relative",children:[a.jsx(zv,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:20}),a.jsx("input",{required:!0,type:"password",placeholder:"",className:"input-field pl-10 bg-slate-50 border-slate-200 focus:bg-white transition-all",value:x,onChange:g=>b(g.target.value)})]})}),a.jsxs("button",{type:"submit",disabled:h,className:"btn-primary w-full flex justify-center items-center gap-2 py-3",children:[h?"...":c?"":""," ",a.jsx(rv,{size:18})]})]}),a.jsx("div",{className:"mt-6 text-center text-sm text-slate-500",children:a.jsx("button",{onClick:()=>d(!c),className:"hover:text-blue-400 transition-colors",children:c?"":""})})]})})}var $d=uh();const x0=dh($d);function Rt(l){return`Minified Redux error #${l}; visit https://redux.js.org/Errors?code=${l} for the full message or use the non-minified dev environment for full errors. `}var m0=typeof Symbol=="function"&&Symbol.observable||"@@observable",jp=m0,Sp=()=>Math.random().toString(36).substring(7).split("").join("."),p0={INIT:`@@redux/INIT${Sp()}`,REPLACE:`@@redux/REPLACE${Sp()}`},wp=p0;function h0(l){if(typeof l!="object"||l===null)return!1;let r=l;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(l)===r||Object.getPrototypeOf(l)===null}function mh(l,r,c){if(typeof l!="function")throw new Error(Rt(2));if(typeof r=="function"&&typeof c=="function"||typeof c=="function"&&typeof arguments[3]=="function")throw new Error(Rt(0));if(typeof r=="function"&&typeof c>"u"&&(c=r,r=void 0),typeof c<"u"){if(typeof c!="function")throw new Error(Rt(1));return c(mh)(l,r)}let d=l,u=r,f=new Map,x=f,b=0,h=!1;function p(){x===f&&(x=new Map,f.forEach((N,w)=>{x.set(w,N)}))}function j(){if(h)throw new Error(Rt(3));return u}function g(N){if(typeof N!="function")throw new Error(Rt(4));if(h)throw new Error(Rt(5));let w=!0;p();const L=b++;return x.set(L,N),function(){if(w){if(h)throw new Error(Rt(6));w=!1,p(),x.delete(L),f=null}}}function y(N){if(!h0(N))throw new Error(Rt(7));if(typeof N.type>"u")throw new Error(Rt(8));if(typeof N.type!="string")throw new Error(Rt(17));if(h)throw new Error(Rt(9));try{h=!0,u=d(u,N)}finally{h=!1}return(f=x).forEach(L=>{L()}),N}function S(N){if(typeof N!="function")throw new Error(Rt(10));d=N,y({type:wp.REPLACE})}function A(){const N=g;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Rt(11));function L(){const M=w;M.next&&M.next(j())}return L(),{unsubscribe:N(L)}},[jp](){return this}}}return y({type:wp.INIT}),{dispatch:y,subscribe:g,getState:j,replaceReducer:S,[jp]:A}}function Dp(l,r){return function(...c){return r(l.apply(this,c))}}function Cp(l,r){if(typeof l=="function")return Dp(l,r);if(typeof l!="object"||l===null)throw new Error(Rt(16));const c={};for(const d in l){const u=l[d];typeof u=="function"&&(c[d]=Dp(u,r))}return c}function ph(...l){return l.length===0?r=>r:l.length===1?l[0]:l.reduce((r,c)=>(...d)=>r(c(...d)))}function y0(...l){return r=>(c,d)=>{const u=r(c,d);let f=()=>{throw new Error(Rt(15))};const x={getState:u.getState,dispatch:(h,...p)=>f(h,...p)},b=l.map(h=>h(x));return f=ph(...b)(u.dispatch),{...u,dispatch:f}}}var hd={exports:{}},yd={};var Ep;function b0(){if(Ep)return yd;Ep=1;var l=Gi();function r(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var c=typeof Object.is=="function"?Object.is:r,d=l.useSyncExternalStore,u=l.useRef,f=l.useEffect,x=l.useMemo,b=l.useDebugValue;return yd.useSyncExternalStoreWithSelector=function(h,p,j,g,y){var S=u(null);if(S.current===null){var A={hasValue:!1,value:null};S.current=A}else A=S.current;S=x(function(){function N(O){if(!w){if(w=!0,L=O,O=g(O),y!==void 0&&A.hasValue){var v=A.value;if(y(v,O))return C=v}return C=O}if(v=C,c(L,O))return v;var B=g(O);return y!==void 0&&y(v,B)?(L=O,v):(L=O,C=B)}var w=!1,L,C,M=j===void 0?null:j;return[function(){return N(p())},M===null?void 0:function(){return N(M())}]},[p,j,g,y]);var R=d(h,S[0],S[1]);return f(function(){A.hasValue=!0,A.value=R},[R]),b(R),R},yd}var Ap;function g0(){return Ap||(Ap=1,hd.exports=b0()),hd.exports}g0();var v0=E.version.startsWith("19"),N0=Symbol.for(v0?"react.transitional.element":"react.element"),j0=Symbol.for("react.portal"),S0=Symbol.for("react.fragment"),w0=Symbol.for("react.strict_mode"),D0=Symbol.for("react.profiler"),C0=Symbol.for("react.consumer"),E0=Symbol.for("react.context"),hh=Symbol.for("react.forward_ref"),A0=Symbol.for("react.suspense"),T0=Symbol.for("react.suspense_list"),qd=Symbol.for("react.memo"),k0=Symbol.for("react.lazy"),O0=hh,M0=qd;function _0(l){if(typeof l=="object"&&l!==null){const{$$typeof:r}=l;switch(r){case N0:switch(l=l.type,l){case S0:case D0:case w0:case A0:case T0:return l;default:switch(l=l&&l.$$typeof,l){case E0:case hh:case k0:case qd:return l;case C0:return l;default:return r}}case j0:return r}}}function R0(l){return _0(l)===qd}function z0(l,r,c,d,{areStatesEqual:u,areOwnPropsEqual:f,areStatePropsEqual:x}){let b=!1,h,p,j,g,y;function S(L,C){return h=L,p=C,j=l(h,p),g=r(d,p),y=c(j,g,p),b=!0,y}function A(){return j=l(h,p),r.dependsOnOwnProps&&(g=r(d,p)),y=c(j,g,p),y}function R(){return l.dependsOnOwnProps&&(j=l(h,p)),r.dependsOnOwnProps&&(g=r(d,p)),y=c(j,g,p),y}function N(){const L=l(h,p),C=!x(L,j);return j=L,C&&(y=c(j,g,p)),y}function w(L,C){const M=!f(C,p),O=!u(L,h,C,p);return h=L,p=C,M&&O?A():M?R():O?N():y}return function(C,M){return b?w(C,M):S(C,M)}}function L0(l,{initMapStateToProps:r,initMapDispatchToProps:c,initMergeProps:d,...u}){const f=r(l,u),x=c(l,u),b=d(l,u);return z0(f,x,b,l,u)}function B0(l,r){const c={};for(const d in l){const u=l[d];typeof u=="function"&&(c[d]=(...f)=>r(u(...f)))}return c}function Md(l){return function(c){const d=l(c);function u(){return d}return u.dependsOnOwnProps=!1,u}}function Tp(l){return l.dependsOnOwnProps?!!l.dependsOnOwnProps:l.length!==1}function yh(l,r){return function(d,{displayName:u}){const f=function(b,h){return f.dependsOnOwnProps?f.mapToProps(b,h):f.mapToProps(b,void 0)};return f.dependsOnOwnProps=!0,f.mapToProps=function(b,h){f.mapToProps=l,f.dependsOnOwnProps=Tp(l);let p=f(b,h);return typeof p=="function"&&(f.mapToProps=p,f.dependsOnOwnProps=Tp(p),p=f(b,h)),p},f}}function Gd(l,r){return(c,d)=>{throw new Error(`Invalid value of type ${typeof l} for ${r} argument when connecting component ${d.wrappedComponentName}.`)}}function U0(l){return l&&typeof l=="object"?Md(r=>B0(l,r)):l?typeof l=="function"?yh(l):Gd(l,"mapDispatchToProps"):Md(r=>({dispatch:r}))}function H0(l){return l?typeof l=="function"?yh(l):Gd(l,"mapStateToProps"):Md(()=>({}))}function $0(l,r,c){return{...c,...l,...r}}function q0(l){return function(c,{displayName:d,areMergedPropsEqual:u}){let f=!1,x;return function(h,p,j){const g=l(h,p,j);return f?u(g,x)||(x=g):(f=!0,x=g),x}}}function G0(l){return l?typeof l=="function"?q0(l):Gd(l,"mergeProps"):()=>$0}function I0(l){l()}function V0(){let l=null,r=null;return{clear(){l=null,r=null},notify(){I0(()=>{let c=l;for(;c;)c.callback(),c=c.next})},get(){const c=[];let d=l;for(;d;)c.push(d),d=d.next;return c},subscribe(c){let d=!0;const u=r={callback:c,next:null,prev:r};return u.prev?u.prev.next=u:l=u,function(){!d||l===null||(d=!1,u.next?u.next.prev=u.prev:r=u.prev,u.prev?u.prev.next=u.next:l=u.next)}}}}var kp={notify(){},get:()=>[]};function bh(l,r){let c,d=kp,u=0,f=!1;function x(R){j();const N=d.subscribe(R);let w=!1;return()=>{w||(w=!0,N(),g())}}function b(){d.notify()}function h(){A.onStateChange&&A.onStateChange()}function p(){return f}function j(){u++,c||(c=r?r.addNestedSub(h):l.subscribe(h),d=V0())}function g(){u--,c&&u===0&&(c(),c=void 0,d.clear(),d=kp)}function y(){f||(f=!0,j())}function S(){f&&(f=!1,g())}const A={addNestedSub:x,notifyNestedSubs:b,handleChangeWrapper:h,isSubscribed:p,trySubscribe:y,tryUnsubscribe:S,getListeners:()=>d};return A}var Y0=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Q0=Y0(),K0=()=>typeof navigator<"u"&&navigator.product==="ReactNative",X0=K0(),Z0=()=>Q0||X0?E.useLayoutEffect:E.useEffect,_i=Z0();function Op(l,r){return l===r?l!==0||r!==0||1/l===1/r:l!==l&&r!==r}function bd(l,r){if(Op(l,r))return!0;if(typeof l!="object"||l===null||typeof r!="object"||r===null)return!1;const c=Object.keys(l),d=Object.keys(r);if(c.length!==d.length)return!1;for(let u=0;u<c.length;u++)if(!Object.prototype.hasOwnProperty.call(r,c[u])||!Op(l[c[u]],r[c[u]]))return!1;return!0}var P0={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},J0={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},F0={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},gh={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},W0={[O0]:F0,[M0]:gh};function Mp(l){return R0(l)?gh:W0[l.$$typeof]||P0}var e1=Object.defineProperty,t1=Object.getOwnPropertyNames,_p=Object.getOwnPropertySymbols,a1=Object.getOwnPropertyDescriptor,n1=Object.getPrototypeOf,Rp=Object.prototype;function _d(l,r){if(typeof r!="string"){if(Rp){const f=n1(r);f&&f!==Rp&&_d(l,f)}let c=t1(r);_p&&(c=c.concat(_p(r)));const d=Mp(l),u=Mp(r);for(let f=0;f<c.length;++f){const x=c[f];if(!J0[x]&&!(u&&u[x])&&!(d&&d[x])){const b=a1(r,x);try{e1(l,x,b)}catch{}}}}return l}var l1=Symbol.for("react-redux-context"),s1=typeof globalThis<"u"?globalThis:{};function r1(){if(!E.createContext)return{};const l=s1[l1]??=new Map;let r=l.get(E.createContext);return r||(r=E.createContext(null),l.set(E.createContext,r)),r}var vh=r1(),i1=[null,null];function c1(l,r,c){_i(()=>l(...r),c)}function o1(l,r,c,d,u,f){l.current=d,c.current=!1,u.current&&(u.current=null,f())}function d1(l,r,c,d,u,f,x,b,h,p,j){if(!l)return()=>{};let g=!1,y=null;const S=()=>{if(g||!b.current)return;const R=r.getState();let N,w;try{N=d(R,u.current)}catch(L){w=L,y=L}w||(y=null),N===f.current?x.current||p():(f.current=N,h.current=N,x.current=!0,j())};return c.onStateChange=S,c.trySubscribe(),S(),()=>{if(g=!0,c.tryUnsubscribe(),c.onStateChange=null,y)throw y}}function u1(l,r){return l===r}function f1(l,r,c,{pure:d,areStatesEqual:u=u1,areOwnPropsEqual:f=bd,areStatePropsEqual:x=bd,areMergedPropsEqual:b=bd,forwardRef:h=!1,context:p=vh}={}){const j=p,g=H0(l),y=U0(r),S=G0(c),A=!!l;return N=>{const w=N.displayName||N.name||"Component",L=`Connect(${w})`,C={shouldHandleStateChanges:A,displayName:L,wrappedComponentName:w,WrappedComponent:N,initMapStateToProps:g,initMapDispatchToProps:y,initMergeProps:S,areStatesEqual:u,areStatePropsEqual:x,areOwnPropsEqual:f,areMergedPropsEqual:b};function M(B){const[q,ae,oe]=E.useMemo(()=>{const{reactReduxForwardedRef:H,...te}=B;return[B.context,H,te]},[B]),De=E.useMemo(()=>{let H=j;return q?.Consumer,H},[q,j]),W=E.useContext(De),ue=!!B.store&&!!B.store.getState&&!!B.store.dispatch,he=!!W&&!!W.store,de=ue?B.store:W.store,G=he?W.getServerState:de.getState,k=E.useMemo(()=>L0(de.dispatch,C),[de]),[Z,ne]=E.useMemo(()=>{if(!A)return i1;const H=bh(de,ue?void 0:W.subscription),te=H.notifyNestedSubs.bind(H);return[H,te]},[de,ue,W]),xe=E.useMemo(()=>ue?W:{...W,subscription:Z},[ue,W,Z]),_=E.useRef(void 0),Q=E.useRef(oe),J=E.useRef(void 0),le=E.useRef(!1),ve=E.useRef(!1),je=E.useRef(void 0);_i(()=>(ve.current=!0,()=>{ve.current=!1}),[]);const se=E.useMemo(()=>()=>J.current&&oe===Q.current?J.current:k(de.getState(),oe),[de,oe]),ie=E.useMemo(()=>te=>Z?d1(A,de,Z,k,Q,_,le,ve,J,ne,te):()=>{},[Z]);c1(o1,[Q,_,le,oe,J,ne]);let be;try{be=E.useSyncExternalStore(ie,se,G?()=>k(G(),oe):se)}catch(H){throw je.current&&(H.message+=`
The error may be correlated with this previous error:
${je.current.stack}

`),H}_i(()=>{je.current=void 0,J.current=void 0,_.current=be});const Ee=E.useMemo(()=>E.createElement(N,{...be,ref:ae}),[ae,N,be]);return E.useMemo(()=>A?E.createElement(De.Provider,{value:xe},Ee):Ee,[De,Ee,xe])}const v=E.memo(M);if(v.WrappedComponent=N,v.displayName=M.displayName=L,h){const q=E.forwardRef(function(oe,De){return E.createElement(v,{...oe,reactReduxForwardedRef:De})});return q.displayName=L,q.WrappedComponent=N,_d(q,N)}return _d(v,N)}}var Nh=f1;function x1(l){const{children:r,context:c,serverState:d,store:u}=l,f=E.useMemo(()=>{const h=bh(u);return{store:u,subscription:h,getServerState:d?()=>d:void 0}},[u,d]),x=E.useMemo(()=>u.getState(),[u]);_i(()=>{const{subscription:h}=f;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),x!==u.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[f,x]);const b=c||vh;return E.createElement(b.Provider,{value:f},r)}var m1=x1,p1="Invariant failed";function h1(l,r){throw new Error(p1)}var ya=function(r){var c=r.top,d=r.right,u=r.bottom,f=r.left,x=d-f,b=u-c,h={top:c,right:d,bottom:u,left:f,width:x,height:b,x:f,y:c,center:{x:(d+f)/2,y:(u+c)/2}};return h},Id=function(r,c){return{top:r.top-c.top,left:r.left-c.left,bottom:r.bottom+c.bottom,right:r.right+c.right}},zp=function(r,c){return{top:r.top+c.top,left:r.left+c.left,bottom:r.bottom-c.bottom,right:r.right-c.right}},y1=function(r,c){return{top:r.top+c.y,left:r.left+c.x,bottom:r.bottom+c.y,right:r.right+c.x}},gd={top:0,right:0,bottom:0,left:0},Vd=function(r){var c=r.borderBox,d=r.margin,u=d===void 0?gd:d,f=r.border,x=f===void 0?gd:f,b=r.padding,h=b===void 0?gd:b,p=ya(Id(c,u)),j=ya(zp(c,x)),g=ya(zp(j,h));return{marginBox:p,borderBox:ya(c),paddingBox:j,contentBox:g,margin:u,border:x,padding:h}},ua=function(r){var c=r.slice(0,-2),d=r.slice(-2);if(d!=="px")return 0;var u=Number(c);return isNaN(u)&&h1(),u},b1=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Ri=function(r,c){var d=r.borderBox,u=r.border,f=r.margin,x=r.padding,b=y1(d,c);return Vd({borderBox:b,border:u,margin:f,padding:x})},zi=function(r,c){return c===void 0&&(c=b1()),Ri(r,c)},jh=function(r,c){var d={top:ua(c.marginTop),right:ua(c.marginRight),bottom:ua(c.marginBottom),left:ua(c.marginLeft)},u={top:ua(c.paddingTop),right:ua(c.paddingRight),bottom:ua(c.paddingBottom),left:ua(c.paddingLeft)},f={top:ua(c.borderTopWidth),right:ua(c.borderRightWidth),bottom:ua(c.borderBottomWidth),left:ua(c.borderLeftWidth)};return Vd({borderBox:r,margin:d,padding:u,border:f})},Sh=function(r){var c=r.getBoundingClientRect(),d=window.getComputedStyle(r);return jh(c,d)},Ps=function(r){var c=[],d=null,u=function(){for(var x=arguments.length,b=new Array(x),h=0;h<x;h++)b[h]=arguments[h];c=b,!d&&(d=requestAnimationFrame(function(){d=null,r.apply(void 0,c)}))};return u.cancel=function(){d&&(cancelAnimationFrame(d),d=null)},u};function Li(){return Li=Object.assign?Object.assign.bind():function(l){for(var r=1;r<arguments.length;r++){var c=arguments[r];for(var d in c)({}).hasOwnProperty.call(c,d)&&(l[d]=c[d])}return l},Li.apply(null,arguments)}function wh(l,r){}wh.bind(null,"warn");wh.bind(null,"error");function yn(){}function g1(l,r){return{...l,...r}}function fa(l,r,c){const d=r.map(u=>{const f=g1(c,u.options);return l.addEventListener(u.eventName,u.fn,f),function(){l.removeEventListener(u.eventName,u.fn,f)}});return function(){d.forEach(f=>{f()})}}const v1="Invariant failed";class Bi extends Error{}Bi.prototype.toString=function(){return this.message};function ce(l,r){throw new Bi(v1)}class N1 extends Qe.Component{constructor(...r){super(...r),this.callbacks=null,this.unbind=yn,this.onWindowError=c=>{const d=this.getCallbacks();d.isDragging()&&d.tryAbort(),c.error instanceof Bi&&c.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=c=>{this.callbacks=c}}componentDidMount(){this.unbind=fa(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(r){if(r instanceof Bi){this.setState({});return}throw r}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const j1=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Ui=l=>l+1,S1=l=>`
  You have lifted an item in position ${Ui(l.source.index)}
`,Dh=(l,r)=>{const c=l.droppableId===r.droppableId,d=Ui(l.index),u=Ui(r.index);return c?`
      You have moved the item from position ${d}
      to position ${u}
    `:`
    You have moved the item from position ${d}
    in list ${l.droppableId}
    to list ${r.droppableId}
    in position ${u}
  `},Ch=(l,r,c)=>r.droppableId===c.droppableId?`
      The item ${l}
      has been combined with ${c.draggableId}`:`
      The item ${l}
      in list ${r.droppableId}
      has been combined with ${c.draggableId}
      in list ${c.droppableId}
    `,w1=l=>{const r=l.destination;if(r)return Dh(l.source,r);const c=l.combine;return c?Ch(l.draggableId,l.source,c):"You are over an area that cannot be dropped on"},Lp=l=>`
  The item has returned to its starting position
  of ${Ui(l.index)}
`,D1=l=>{if(l.reason==="CANCEL")return`
      Movement cancelled.
      ${Lp(l.source)}
    `;const r=l.destination,c=l.combine;return r?`
      You have dropped the item.
      ${Dh(l.source,r)}
    `:c?`
      You have dropped the item.
      ${Ch(l.draggableId,l.source,c)}
    `:`
    The item has been dropped while not over a drop area.
    ${Lp(l.source)}
  `},Ei={dragHandleUsageInstructions:j1,onDragStart:S1,onDragUpdate:w1,onDragEnd:D1};function C1(l,r){return!!(l===r||Number.isNaN(l)&&Number.isNaN(r))}function Eh(l,r){if(l.length!==r.length)return!1;for(let c=0;c<l.length;c++)if(!C1(l[c],r[c]))return!1;return!0}function Ge(l,r){const c=E.useState(()=>({inputs:r,result:l()}))[0],d=E.useRef(!0),u=E.useRef(c),x=d.current||!!(r&&u.current.inputs&&Eh(r,u.current.inputs))?u.current:{inputs:r,result:l()};return E.useEffect(()=>{d.current=!1,u.current=x},[x]),x.result}function we(l,r){return Ge(()=>l,r)}const St={x:0,y:0},Tt=(l,r)=>({x:l.x+r.x,y:l.y+r.y}),Jt=(l,r)=>({x:l.x-r.x,y:l.y-r.y}),bn=(l,r)=>l.x===r.x&&l.y===r.y,Bl=l=>({x:l.x!==0?-l.x:0,y:l.y!==0?-l.y:0}),Yn=(l,r,c=0)=>l==="x"?{x:r,y:c}:{x:c,y:r},Js=(l,r)=>Math.sqrt((r.x-l.x)**2+(r.y-l.y)**2),Bp=(l,r)=>Math.min(...r.map(c=>Js(l,c))),Ah=l=>r=>({x:l(r.x),y:l(r.y)});var E1=(l,r)=>{const c=ya({top:Math.max(r.top,l.top),right:Math.min(r.right,l.right),bottom:Math.min(r.bottom,l.bottom),left:Math.max(r.left,l.left)});return c.width<=0||c.height<=0?null:c};const nr=(l,r)=>({top:l.top+r.y,left:l.left+r.x,bottom:l.bottom+r.y,right:l.right+r.x}),Up=l=>[{x:l.left,y:l.top},{x:l.right,y:l.top},{x:l.left,y:l.bottom},{x:l.right,y:l.bottom}],A1={top:0,right:0,bottom:0,left:0},T1=(l,r)=>r?nr(l,r.scroll.diff.displacement):l,k1=(l,r,c)=>c&&c.increasedBy?{...l,[r.end]:l[r.end]+c.increasedBy[r.line]}:l,O1=(l,r)=>r&&r.shouldClipSubject?E1(r.pageMarginBox,l):ya(l);var Rl=({page:l,withPlaceholder:r,axis:c,frame:d})=>{const u=T1(l.marginBox,d),f=k1(u,c,r),x=O1(f,d);return{page:l,withPlaceholder:r,active:x}},Yd=(l,r)=>{l.frame||ce();const c=l.frame,d=Jt(r,c.scroll.initial),u=Bl(d),f={...c,scroll:{initial:c.scroll.initial,current:r,diff:{value:d,displacement:u},max:c.scroll.max}},x=Rl({page:l.subject.page,withPlaceholder:l.subject.withPlaceholder,axis:l.axis,frame:f});return{...l,frame:f,subject:x}};function Nt(l,r=Eh){let c=null;function d(...u){if(c&&c.lastThis===this&&r(u,c.lastArgs))return c.lastResult;const f=l.apply(this,u);return c={lastResult:f,lastArgs:u,lastThis:this},f}return d.clear=function(){c=null},d}const Th=Nt(l=>l.reduce((r,c)=>(r[c.descriptor.id]=c,r),{})),kh=Nt(l=>l.reduce((r,c)=>(r[c.descriptor.id]=c,r),{})),Ii=Nt(l=>Object.values(l)),M1=Nt(l=>Object.values(l));var Ul=Nt((l,r)=>M1(r).filter(d=>l===d.descriptor.droppableId).sort((d,u)=>d.descriptor.index-u.descriptor.index));function Qd(l){return l.at&&l.at.type==="REORDER"?l.at.destination:null}function Vi(l){return l.at&&l.at.type==="COMBINE"?l.at.combine:null}var Yi=Nt((l,r)=>r.filter(c=>c.descriptor.id!==l.descriptor.id)),_1=({isMovingForward:l,draggable:r,destination:c,insideDestination:d,previousImpact:u})=>{if(!c.isCombineEnabled||!Qd(u))return null;function x(S){const A={type:"COMBINE",combine:{draggableId:S,droppableId:c.descriptor.id}};return{...u,at:A}}const b=u.displaced.all,h=b.length?b[0]:null;if(l)return h?x(h):null;const p=Yi(r,d);if(!h){if(!p.length)return null;const S=p[p.length-1];return x(S.descriptor.id)}const j=p.findIndex(S=>S.descriptor.id===h);j===-1&&ce();const g=j-1;if(g<0)return null;const y=p[g];return x(y.descriptor.id)},Hl=(l,r)=>l.descriptor.droppableId===r.descriptor.id;const Oh={point:St,value:0},Fs={invisible:{},visible:{},all:[]},R1={displaced:Fs,displacedBy:Oh,at:null};var xa=(l,r)=>c=>l<=c&&c<=r,Mh=l=>{const r=xa(l.top,l.bottom),c=xa(l.left,l.right);return d=>{if(r(d.top)&&r(d.bottom)&&c(d.left)&&c(d.right))return!0;const f=r(d.top)||r(d.bottom),x=c(d.left)||c(d.right);if(f&&x)return!0;const h=d.top<l.top&&d.bottom>l.bottom,p=d.left<l.left&&d.right>l.right;return h&&p?!0:h&&x||p&&f}},z1=l=>{const r=xa(l.top,l.bottom),c=xa(l.left,l.right);return d=>r(d.top)&&r(d.bottom)&&c(d.left)&&c(d.right)};const Kd={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},_h={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var L1=l=>r=>{const c=xa(r.top,r.bottom),d=xa(r.left,r.right);return u=>l===Kd?c(u.top)&&c(u.bottom):d(u.left)&&d(u.right)};const B1=(l,r)=>{const c=r.frame?r.frame.scroll.diff.displacement:St;return nr(l,c)},U1=(l,r,c)=>r.subject.active?c(r.subject.active)(l):!1,H1=(l,r,c)=>c(r)(l),Xd=({target:l,destination:r,viewport:c,withDroppableDisplacement:d,isVisibleThroughFrameFn:u})=>{const f=d?B1(l,r):l;return U1(f,r,u)&&H1(f,c,u)},$1=l=>Xd({...l,isVisibleThroughFrameFn:Mh}),Rh=l=>Xd({...l,isVisibleThroughFrameFn:z1}),q1=l=>Xd({...l,isVisibleThroughFrameFn:L1(l.destination.axis)}),G1=(l,r,c)=>{if(typeof c=="boolean")return c;if(!r)return!0;const{invisible:d,visible:u}=r;if(d[l])return!1;const f=u[l];return f?f.shouldAnimate:!0};function I1(l,r){const c=l.page.marginBox,d={top:r.point.y,right:0,bottom:0,left:r.point.x};return ya(Id(c,d))}function Ws({afterDragging:l,destination:r,displacedBy:c,viewport:d,forceShouldAnimate:u,last:f}){return l.reduce(function(b,h){const p=I1(h,c),j=h.descriptor.id;if(b.all.push(j),!$1({target:p,destination:r,viewport:d,withDroppableDisplacement:!0}))return b.invisible[h.descriptor.id]=!0,b;const y=G1(j,f,u),S={draggableId:j,shouldAnimate:y};return b.visible[j]=S,b},{all:[],visible:{},invisible:{}})}function V1(l,r){if(!l.length)return 0;const c=l[l.length-1].descriptor.index;return r.inHomeList?c:c+1}function Hp({insideDestination:l,inHomeList:r,displacedBy:c,destination:d}){const u=V1(l,{inHomeList:r});return{displaced:Fs,displacedBy:c,at:{type:"REORDER",destination:{droppableId:d.descriptor.id,index:u}}}}function Hi({draggable:l,insideDestination:r,destination:c,viewport:d,displacedBy:u,last:f,index:x,forceShouldAnimate:b}){const h=Hl(l,c);if(x==null)return Hp({insideDestination:r,inHomeList:h,displacedBy:u,destination:c});const p=r.find(A=>A.descriptor.index===x);if(!p)return Hp({insideDestination:r,inHomeList:h,displacedBy:u,destination:c});const j=Yi(l,r),g=r.indexOf(p),y=j.slice(g);return{displaced:Ws({afterDragging:y,destination:c,displacedBy:u,last:f,viewport:d.frame,forceShouldAnimate:b}),displacedBy:u,at:{type:"REORDER",destination:{droppableId:c.descriptor.id,index:x}}}}function gn(l,r){return!!r.effected[l]}var Y1=({isMovingForward:l,destination:r,draggables:c,combine:d,afterCritical:u})=>{if(!r.isCombineEnabled)return null;const f=d.draggableId,b=c[f].descriptor.index;return gn(f,u)?l?b:b-1:l?b+1:b},Q1=({isMovingForward:l,isInHomeList:r,insideDestination:c,location:d})=>{if(!c.length)return null;const u=d.index,f=l?u+1:u-1,x=c[0].descriptor.index,b=c[c.length-1].descriptor.index,h=r?b:b+1;return f<x||f>h?null:f},K1=({isMovingForward:l,isInHomeList:r,draggable:c,draggables:d,destination:u,insideDestination:f,previousImpact:x,viewport:b,afterCritical:h})=>{const p=x.at;if(p||ce(),p.type==="REORDER"){const g=Q1({isMovingForward:l,isInHomeList:r,location:p.destination,insideDestination:f});return g==null?null:Hi({draggable:c,insideDestination:f,destination:u,viewport:b,last:x.displaced,displacedBy:x.displacedBy,index:g})}const j=Y1({isMovingForward:l,destination:u,displaced:x.displaced,draggables:d,combine:p.combine,afterCritical:h});return j==null?null:Hi({draggable:c,insideDestination:f,destination:u,viewport:b,last:x.displaced,displacedBy:x.displacedBy,index:j})},X1=({displaced:l,afterCritical:r,combineWith:c,displacedBy:d})=>{const u=!!(l.visible[c]||l.invisible[c]);return gn(c,r)?u?St:Bl(d.point):u?d.point:St},Z1=({afterCritical:l,impact:r,draggables:c})=>{const d=Vi(r);d||ce();const u=d.draggableId,f=c[u].page.borderBox.center,x=X1({displaced:r.displaced,afterCritical:l,combineWith:u,displacedBy:r.displacedBy});return Tt(f,x)};const zh=(l,r)=>r.margin[l.start]+r.borderBox[l.size]/2,P1=(l,r)=>r.margin[l.end]+r.borderBox[l.size]/2,Zd=(l,r,c)=>r[l.crossAxisStart]+c.margin[l.crossAxisStart]+c.borderBox[l.crossAxisSize]/2,$p=({axis:l,moveRelativeTo:r,isMoving:c})=>Yn(l.line,r.marginBox[l.end]+zh(l,c),Zd(l,r.marginBox,c)),qp=({axis:l,moveRelativeTo:r,isMoving:c})=>Yn(l.line,r.marginBox[l.start]-P1(l,c),Zd(l,r.marginBox,c)),J1=({axis:l,moveInto:r,isMoving:c})=>Yn(l.line,r.contentBox[l.start]+zh(l,c),Zd(l,r.contentBox,c));var F1=({impact:l,draggable:r,draggables:c,droppable:d,afterCritical:u})=>{const f=Ul(d.descriptor.id,c),x=r.page,b=d.axis;if(!f.length)return J1({axis:b,moveInto:d.page,isMoving:x});const{displaced:h,displacedBy:p}=l,j=h.all[0];if(j){const y=c[j];if(gn(j,u))return qp({axis:b,moveRelativeTo:y.page,isMoving:x});const S=Ri(y.page,p.point);return qp({axis:b,moveRelativeTo:S,isMoving:x})}const g=f[f.length-1];if(g.descriptor.id===r.descriptor.id)return x.borderBox.center;if(gn(g.descriptor.id,u)){const y=Ri(g.page,Bl(u.displacedBy.point));return $p({axis:b,moveRelativeTo:y,isMoving:x})}return $p({axis:b,moveRelativeTo:g.page,isMoving:x})},Rd=(l,r)=>{const c=l.frame;return c?Tt(r,c.scroll.diff.displacement):r};const W1=({impact:l,draggable:r,droppable:c,draggables:d,afterCritical:u})=>{const f=r.page.borderBox.center,x=l.at;return!c||!x?f:x.type==="REORDER"?F1({impact:l,draggable:r,draggables:d,droppable:c,afterCritical:u}):Z1({impact:l,draggables:d,afterCritical:u})};var Qi=l=>{const r=W1(l),c=l.droppable;return c?Rd(c,r):r},Lh=(l,r)=>{const c=Jt(r,l.scroll.initial),d=Bl(c);return{frame:ya({top:r.y,bottom:r.y+l.frame.height,left:r.x,right:r.x+l.frame.width}),scroll:{initial:l.scroll.initial,max:l.scroll.max,current:r,diff:{value:c,displacement:d}}}};function Gp(l,r){return l.map(c=>r[c])}function eN(l,r){for(let c=0;c<r.length;c++){const d=r[c].visible[l];if(d)return d}return null}var tN=({impact:l,viewport:r,destination:c,draggables:d,maxScrollChange:u})=>{const f=Lh(r,Tt(r.scroll.current,u)),x=c.frame?Yd(c,Tt(c.frame.scroll.current,u)):c,b=l.displaced,h=Ws({afterDragging:Gp(b.all,d),destination:c,displacedBy:l.displacedBy,viewport:f.frame,last:b,forceShouldAnimate:!1}),p=Ws({afterDragging:Gp(b.all,d),destination:x,displacedBy:l.displacedBy,viewport:r.frame,last:b,forceShouldAnimate:!1}),j={},g={},y=[b,h,p];return b.all.forEach(A=>{const R=eN(A,y);if(R){g[A]=R;return}j[A]=!0}),{...l,displaced:{all:b.all,invisible:j,visible:g}}},aN=(l,r)=>Tt(l.scroll.diff.displacement,r),Pd=({pageBorderBoxCenter:l,draggable:r,viewport:c})=>{const d=aN(c,l),u=Jt(d,r.page.borderBox.center);return Tt(r.client.borderBox.center,u)},Bh=({draggable:l,destination:r,newPageBorderBoxCenter:c,viewport:d,withDroppableDisplacement:u,onlyOnMainAxis:f=!1})=>{const x=Jt(c,l.page.borderBox.center),h={target:nr(l.page.borderBox,x),destination:r,withDroppableDisplacement:u,viewport:d};return f?q1(h):Rh(h)},nN=({isMovingForward:l,draggable:r,destination:c,draggables:d,previousImpact:u,viewport:f,previousPageBorderBoxCenter:x,previousClientSelection:b,afterCritical:h})=>{if(!c.isEnabled)return null;const p=Ul(c.descriptor.id,d),j=Hl(r,c),g=_1({isMovingForward:l,draggable:r,destination:c,insideDestination:p,previousImpact:u})||K1({isMovingForward:l,isInHomeList:j,draggable:r,draggables:d,destination:c,insideDestination:p,previousImpact:u,viewport:f,afterCritical:h});if(!g)return null;const y=Qi({impact:g,draggable:r,droppable:c,draggables:d,afterCritical:h});if(Bh({draggable:r,destination:c,newPageBorderBoxCenter:y,viewport:f.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Pd({pageBorderBoxCenter:y,draggable:r,viewport:f}),impact:g,scrollJumpRequest:null};const A=Jt(y,x),R=tN({impact:g,viewport:f,destination:c,draggables:d,maxScrollChange:A});return{clientSelection:b,impact:R,scrollJumpRequest:A}};const _t=l=>{const r=l.subject.active;return r||ce(),r};var lN=({isMovingForward:l,pageBorderBoxCenter:r,source:c,droppables:d,viewport:u})=>{const f=c.subject.active;if(!f)return null;const x=c.axis,b=xa(f[x.start],f[x.end]),h=Ii(d).filter(j=>j!==c).filter(j=>j.isEnabled).filter(j=>!!j.subject.active).filter(j=>Mh(u.frame)(_t(j))).filter(j=>{const g=_t(j);return l?f[x.crossAxisEnd]<g[x.crossAxisEnd]:g[x.crossAxisStart]<f[x.crossAxisStart]}).filter(j=>{const g=_t(j),y=xa(g[x.start],g[x.end]);return b(g[x.start])||b(g[x.end])||y(f[x.start])||y(f[x.end])}).sort((j,g)=>{const y=_t(j)[x.crossAxisStart],S=_t(g)[x.crossAxisStart];return l?y-S:S-y}).filter((j,g,y)=>_t(j)[x.crossAxisStart]===_t(y[0])[x.crossAxisStart]);if(!h.length)return null;if(h.length===1)return h[0];const p=h.filter(j=>xa(_t(j)[x.start],_t(j)[x.end])(r[x.line]));return p.length===1?p[0]:p.length>1?p.sort((j,g)=>_t(j)[x.start]-_t(g)[x.start])[0]:h.sort((j,g)=>{const y=Bp(r,Up(_t(j))),S=Bp(r,Up(_t(g)));return y!==S?y-S:_t(j)[x.start]-_t(g)[x.start]})[0]};const Ip=(l,r)=>{const c=l.page.borderBox.center;return gn(l.descriptor.id,r)?Jt(c,r.displacedBy.point):c},sN=(l,r)=>{const c=l.page.borderBox;return gn(l.descriptor.id,r)?nr(c,Bl(r.displacedBy.point)):c};var rN=({pageBorderBoxCenter:l,viewport:r,destination:c,insideDestination:d,afterCritical:u})=>d.filter(x=>Rh({target:sN(x,u),destination:c,viewport:r.frame,withDroppableDisplacement:!0})).sort((x,b)=>{const h=Js(l,Rd(c,Ip(x,u))),p=Js(l,Rd(c,Ip(b,u)));return h<p?-1:p<h?1:x.descriptor.index-b.descriptor.index})[0]||null,lr=Nt(function(r,c){const d=c[r.line];return{value:d,point:Yn(r.line,d)}});const iN=(l,r,c)=>{const d=l.axis;if(l.descriptor.mode==="virtual")return Yn(d.line,r[d.line]);const u=l.subject.page.contentBox[d.size],h=Ul(l.descriptor.id,c).reduce((p,j)=>p+j.client.marginBox[d.size],0)+r[d.line]-u;return h<=0?null:Yn(d.line,h)},Uh=(l,r)=>({...l,scroll:{...l.scroll,max:r}}),Hh=(l,r,c)=>{const d=l.frame;Hl(r,l)&&ce(),l.subject.withPlaceholder&&ce();const u=lr(l.axis,r.displaceBy).point,f=iN(l,u,c),x={placeholderSize:u,increasedBy:f,oldFrameMaxScroll:l.frame?l.frame.scroll.max:null};if(!d){const j=Rl({page:l.subject.page,withPlaceholder:x,axis:l.axis,frame:l.frame});return{...l,subject:j}}const b=f?Tt(d.scroll.max,f):d.scroll.max,h=Uh(d,b),p=Rl({page:l.subject.page,withPlaceholder:x,axis:l.axis,frame:h});return{...l,subject:p,frame:h}},cN=l=>{const r=l.subject.withPlaceholder;r||ce();const c=l.frame;if(!c){const x=Rl({page:l.subject.page,axis:l.axis,frame:null,withPlaceholder:null});return{...l,subject:x}}const d=r.oldFrameMaxScroll;d||ce();const u=Uh(c,d),f=Rl({page:l.subject.page,axis:l.axis,frame:u,withPlaceholder:null});return{...l,subject:f,frame:u}};var oN=({previousPageBorderBoxCenter:l,moveRelativeTo:r,insideDestination:c,draggable:d,draggables:u,destination:f,viewport:x,afterCritical:b})=>{if(!r){if(c.length)return null;const g={displaced:Fs,displacedBy:Oh,at:{type:"REORDER",destination:{droppableId:f.descriptor.id,index:0}}},y=Qi({impact:g,draggable:d,droppable:f,draggables:u,afterCritical:b}),S=Hl(d,f)?f:Hh(f,d,u);return Bh({draggable:d,destination:S,newPageBorderBoxCenter:y,viewport:x.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?g:null}const h=l[f.axis.line]<=r.page.borderBox.center[f.axis.line],p=(()=>{const g=r.descriptor.index;return r.descriptor.id===d.descriptor.id||h?g:g+1})(),j=lr(f.axis,d.displaceBy);return Hi({draggable:d,insideDestination:c,destination:f,viewport:x,displacedBy:j,last:Fs,index:p})},dN=({isMovingForward:l,previousPageBorderBoxCenter:r,draggable:c,isOver:d,draggables:u,droppables:f,viewport:x,afterCritical:b})=>{const h=lN({isMovingForward:l,pageBorderBoxCenter:r,source:d,droppables:f,viewport:x});if(!h)return null;const p=Ul(h.descriptor.id,u),j=rN({pageBorderBoxCenter:r,viewport:x,destination:h,insideDestination:p,afterCritical:b}),g=oN({previousPageBorderBoxCenter:r,destination:h,draggable:c,draggables:u,moveRelativeTo:j,insideDestination:p,viewport:x,afterCritical:b});if(!g)return null;const y=Qi({impact:g,draggable:c,droppable:h,draggables:u,afterCritical:b});return{clientSelection:Pd({pageBorderBoxCenter:y,draggable:c,viewport:x}),impact:g,scrollJumpRequest:null}},Ft=l=>{const r=l.at;return r?r.type==="REORDER"?r.destination.droppableId:r.combine.droppableId:null};const uN=(l,r)=>{const c=Ft(l);return c?r[c]:null};var fN=({state:l,type:r})=>{const c=uN(l.impact,l.dimensions.droppables),d=!!c,u=l.dimensions.droppables[l.critical.droppable.id],f=c||u,x=f.axis.direction,b=x==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||x==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(b&&!d)return null;const h=r==="MOVE_DOWN"||r==="MOVE_RIGHT",p=l.dimensions.draggables[l.critical.draggable.id],j=l.current.page.borderBoxCenter,{draggables:g,droppables:y}=l.dimensions;return b?nN({isMovingForward:h,previousPageBorderBoxCenter:j,draggable:p,destination:f,draggables:g,viewport:l.viewport,previousClientSelection:l.current.client.selection,previousImpact:l.impact,afterCritical:l.afterCritical}):dN({isMovingForward:h,previousPageBorderBoxCenter:j,draggable:p,isOver:f,draggables:g,droppables:y,viewport:l.viewport,afterCritical:l.afterCritical})};function Gn(l){return l.phase==="DRAGGING"||l.phase==="COLLECTING"}function $h(l){const r=xa(l.top,l.bottom),c=xa(l.left,l.right);return function(u){return r(u.y)&&c(u.x)}}function xN(l,r){return l.left<r.right&&l.right>r.left&&l.top<r.bottom&&l.bottom>r.top}function mN({pageBorderBox:l,draggable:r,candidates:c}){const d=r.page.borderBox.center,u=c.map(f=>{const x=f.axis,b=Yn(f.axis.line,l.center[x.line],f.page.borderBox.center[x.crossAxisLine]);return{id:f.descriptor.id,distance:Js(d,b)}}).sort((f,x)=>x.distance-f.distance);return u[0]?u[0].id:null}function pN({pageBorderBox:l,draggable:r,droppables:c}){const d=Ii(c).filter(u=>{if(!u.isEnabled)return!1;const f=u.subject.active;if(!f||!xN(l,f))return!1;if($h(f)(l.center))return!0;const x=u.axis,b=f.center[x.crossAxisLine],h=l[x.crossAxisStart],p=l[x.crossAxisEnd],j=xa(f[x.crossAxisStart],f[x.crossAxisEnd]),g=j(h),y=j(p);return!g&&!y?!0:g?h<b:p>b});return d.length?d.length===1?d[0].descriptor.id:mN({pageBorderBox:l,draggable:r,candidates:d}):null}const qh=(l,r)=>ya(nr(l,r));var hN=(l,r)=>{const c=l.frame;return c?qh(r,c.scroll.diff.value):r};function Gh({displaced:l,id:r}){return!!(l.visible[r]||l.invisible[r])}function yN({draggable:l,closest:r,inHomeList:c}){return r?c&&r.descriptor.index>l.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var bN=({pageBorderBoxWithDroppableScroll:l,draggable:r,destination:c,insideDestination:d,last:u,viewport:f,afterCritical:x})=>{const b=c.axis,h=lr(c.axis,r.displaceBy),p=h.value,j=l[b.start],g=l[b.end],S=Yi(r,d).find(R=>{const N=R.descriptor.id,w=R.page.borderBox.center[b.line],L=gn(N,x),C=Gh({displaced:u,id:N});return L?C?g<=w:j<w-p:C?g<=w+p:j<w})||null,A=yN({draggable:r,closest:S,inHomeList:Hl(r,c)});return Hi({draggable:r,insideDestination:d,destination:c,viewport:f,last:u,displacedBy:h,index:A})};const gN=4;var vN=({draggable:l,pageBorderBoxWithDroppableScroll:r,previousImpact:c,destination:d,insideDestination:u,afterCritical:f})=>{if(!d.isCombineEnabled)return null;const x=d.axis,b=lr(d.axis,l.displaceBy),h=b.value,p=r[x.start],j=r[x.end],y=Yi(l,u).find(A=>{const R=A.descriptor.id,N=A.page.borderBox,L=N[x.size]/gN,C=gn(R,f),M=Gh({displaced:c.displaced,id:R});return C?M?j>N[x.start]+L&&j<N[x.end]-L:p>N[x.start]-h+L&&p<N[x.end]-h-L:M?j>N[x.start]+h+L&&j<N[x.end]+h-L:p>N[x.start]+L&&p<N[x.end]-L});return y?{displacedBy:b,displaced:c.displaced,at:{type:"COMBINE",combine:{draggableId:y.descriptor.id,droppableId:d.descriptor.id}}}:null},Ih=({pageOffset:l,draggable:r,draggables:c,droppables:d,previousImpact:u,viewport:f,afterCritical:x})=>{const b=qh(r.page.borderBox,l),h=pN({pageBorderBox:b,draggable:r,droppables:d});if(!h)return R1;const p=d[h],j=Ul(p.descriptor.id,c),g=hN(p,b);return vN({pageBorderBoxWithDroppableScroll:g,draggable:r,previousImpact:u,destination:p,insideDestination:j,afterCritical:x})||bN({pageBorderBoxWithDroppableScroll:g,draggable:r,destination:p,insideDestination:j,last:u.displaced,viewport:f,afterCritical:x})},Jd=(l,r)=>({...l,[r.descriptor.id]:r});const NN=({previousImpact:l,impact:r,droppables:c})=>{const d=Ft(l),u=Ft(r);if(!d||d===u)return c;const f=c[d];if(!f.subject.withPlaceholder)return c;const x=cN(f);return Jd(c,x)};var jN=({draggable:l,draggables:r,droppables:c,previousImpact:d,impact:u})=>{const f=NN({previousImpact:d,impact:u,droppables:c}),x=Ft(u);if(!x)return f;const b=c[x];if(Hl(l,b)||b.subject.withPlaceholder)return f;const h=Hh(b,l,r);return Jd(f,h)},Vs=({state:l,clientSelection:r,dimensions:c,viewport:d,impact:u,scrollJumpRequest:f})=>{const x=d||l.viewport,b=c||l.dimensions,h=r||l.current.client.selection,p=Jt(h,l.initial.client.selection),j={offset:p,selection:h,borderBoxCenter:Tt(l.initial.client.borderBoxCenter,p)},g={selection:Tt(j.selection,x.scroll.current),borderBoxCenter:Tt(j.borderBoxCenter,x.scroll.current),offset:Tt(j.offset,x.scroll.diff.value)},y={client:j,page:g};if(l.phase==="COLLECTING")return{...l,dimensions:b,viewport:x,current:y};const S=b.draggables[l.critical.draggable.id],A=u||Ih({pageOffset:g.offset,draggable:S,draggables:b.draggables,droppables:b.droppables,previousImpact:l.impact,viewport:x,afterCritical:l.afterCritical}),R=jN({draggable:S,impact:A,previousImpact:l.impact,draggables:b.draggables,droppables:b.droppables});return{...l,current:y,dimensions:{draggables:b.draggables,droppables:R},impact:A,viewport:x,scrollJumpRequest:f||null,forceShouldAnimate:f?!1:null}};function SN(l,r){return l.map(c=>r[c])}var Vh=({impact:l,viewport:r,draggables:c,destination:d,forceShouldAnimate:u})=>{const f=l.displaced,x=SN(f.all,c),b=Ws({afterDragging:x,destination:d,displacedBy:l.displacedBy,viewport:r.frame,forceShouldAnimate:u,last:f});return{...l,displaced:b}},Yh=({impact:l,draggable:r,droppable:c,draggables:d,viewport:u,afterCritical:f})=>{const x=Qi({impact:l,draggable:r,draggables:d,droppable:c,afterCritical:f});return Pd({pageBorderBoxCenter:x,draggable:r,viewport:u})},Qh=({state:l,dimensions:r,viewport:c})=>{l.movementMode!=="SNAP"&&ce();const d=l.impact,u=c||l.viewport,f=r||l.dimensions,{draggables:x,droppables:b}=f,h=x[l.critical.draggable.id],p=Ft(d);p||ce();const j=b[p],g=Vh({impact:d,viewport:u,destination:j,draggables:x}),y=Yh({impact:g,draggable:h,droppable:j,draggables:x,viewport:u,afterCritical:l.afterCritical});return Vs({impact:g,clientSelection:y,state:l,dimensions:f,viewport:u})},wN=l=>({index:l.index,droppableId:l.droppableId}),Kh=({draggable:l,home:r,draggables:c,viewport:d})=>{const u=lr(r.axis,l.displaceBy),f=Ul(r.descriptor.id,c),x=f.indexOf(l);x===-1&&ce();const b=f.slice(x+1),h=b.reduce((y,S)=>(y[S.descriptor.id]=!0,y),{}),p={inVirtualList:r.descriptor.mode==="virtual",displacedBy:u,effected:h};return{impact:{displaced:Ws({afterDragging:b,destination:r,displacedBy:u,last:null,viewport:d.frame,forceShouldAnimate:!1}),displacedBy:u,at:{type:"REORDER",destination:wN(l.descriptor)}},afterCritical:p}},DN=(l,r)=>({draggables:l.draggables,droppables:Jd(l.droppables,r)}),CN=({draggable:l,offset:r,initialWindowScroll:c})=>{const d=Ri(l.client,r),u=zi(d,c);return{...l,placeholder:{...l.placeholder,client:d},client:d,page:u}},EN=l=>{const r=l.frame;return r||ce(),r},AN=({additions:l,updatedDroppables:r,viewport:c})=>{const d=c.scroll.diff.value;return l.map(u=>{const f=u.descriptor.droppableId,x=r[f],h=EN(x).scroll.diff.value,p=Tt(d,h);return CN({draggable:u,offset:p,initialWindowScroll:c.scroll.initial})})},TN=({state:l,published:r})=>{const c=r.modified.map(w=>{const L=l.dimensions.droppables[w.droppableId];return Yd(L,w.scroll)}),d={...l.dimensions.droppables,...Th(c)},u=kh(AN({additions:r.additions,updatedDroppables:d,viewport:l.viewport})),f={...l.dimensions.draggables,...u};r.removals.forEach(w=>{delete f[w]});const x={droppables:d,draggables:f},b=Ft(l.impact),h=b?x.droppables[b]:null,p=x.draggables[l.critical.draggable.id],j=x.droppables[l.critical.droppable.id],{impact:g,afterCritical:y}=Kh({draggable:p,home:j,draggables:f,viewport:l.viewport}),S=h&&h.isCombineEnabled?l.impact:g,A=Ih({pageOffset:l.current.page.offset,draggable:x.draggables[l.critical.draggable.id],draggables:x.draggables,droppables:x.droppables,previousImpact:S,viewport:l.viewport,afterCritical:y}),R={...l,phase:"DRAGGING",impact:A,onLiftImpact:g,dimensions:x,afterCritical:y,forceShouldAnimate:!1};return l.phase==="COLLECTING"?R:{...R,phase:"DROP_PENDING",reason:l.reason,isWaiting:!1}};const zd=l=>l.movementMode==="SNAP",vd=(l,r,c)=>{const d=DN(l.dimensions,r);return!zd(l)||c?Vs({state:l,dimensions:d}):Qh({state:l,dimensions:d})};function Nd(l){return l.isDragging&&l.movementMode==="SNAP"?{...l,scrollJumpRequest:null}:l}const Vp={phase:"IDLE",completed:null,shouldFlush:!1};var kN=(l=Vp,r)=>{if(r.type==="FLUSH")return{...Vp,shouldFlush:!0};if(r.type==="INITIAL_PUBLISH"){l.phase!=="IDLE"&&ce();const{critical:c,clientSelection:d,viewport:u,dimensions:f,movementMode:x}=r.payload,b=f.draggables[c.draggable.id],h=f.droppables[c.droppable.id],p={selection:d,borderBoxCenter:b.client.borderBox.center,offset:St},j={client:p,page:{selection:Tt(p.selection,u.scroll.initial),borderBoxCenter:Tt(p.selection,u.scroll.initial),offset:Tt(p.selection,u.scroll.diff.value)}},g=Ii(f.droppables).every(R=>!R.isFixedOnPage),{impact:y,afterCritical:S}=Kh({draggable:b,home:h,draggables:f.draggables,viewport:u});return{phase:"DRAGGING",isDragging:!0,critical:c,movementMode:x,dimensions:f,initial:j,current:j,isWindowScrollAllowed:g,impact:y,afterCritical:S,onLiftImpact:y,viewport:u,scrollJumpRequest:null,forceShouldAnimate:null}}if(r.type==="COLLECTION_STARTING")return l.phase==="COLLECTING"||l.phase==="DROP_PENDING"?l:(l.phase!=="DRAGGING"&&ce(),{...l,phase:"COLLECTING"});if(r.type==="PUBLISH_WHILE_DRAGGING")return l.phase==="COLLECTING"||l.phase==="DROP_PENDING"||ce(),TN({state:l,published:r.payload});if(r.type==="MOVE"){if(l.phase==="DROP_PENDING")return l;Gn(l)||ce();const{client:c}=r.payload;return bn(c,l.current.client.selection)?l:Vs({state:l,clientSelection:c,impact:zd(l)?l.impact:null})}if(r.type==="UPDATE_DROPPABLE_SCROLL"){if(l.phase==="DROP_PENDING"||l.phase==="COLLECTING")return Nd(l);Gn(l)||ce();const{id:c,newScroll:d}=r.payload,u=l.dimensions.droppables[c];if(!u)return l;const f=Yd(u,d);return vd(l,f,!1)}if(r.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(l.phase==="DROP_PENDING")return l;Gn(l)||ce();const{id:c,isEnabled:d}=r.payload,u=l.dimensions.droppables[c];u||ce(),u.isEnabled===d&&ce();const f={...u,isEnabled:d};return vd(l,f,!0)}if(r.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(l.phase==="DROP_PENDING")return l;Gn(l)||ce();const{id:c,isCombineEnabled:d}=r.payload,u=l.dimensions.droppables[c];u||ce(),u.isCombineEnabled===d&&ce();const f={...u,isCombineEnabled:d};return vd(l,f,!0)}if(r.type==="MOVE_BY_WINDOW_SCROLL"){if(l.phase==="DROP_PENDING"||l.phase==="DROP_ANIMATING")return l;Gn(l)||ce(),l.isWindowScrollAllowed||ce();const c=r.payload.newScroll;if(bn(l.viewport.scroll.current,c))return Nd(l);const d=Lh(l.viewport,c);return zd(l)?Qh({state:l,viewport:d}):Vs({state:l,viewport:d})}if(r.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Gn(l))return l;const c=r.payload.maxScroll;if(bn(c,l.viewport.scroll.max))return l;const d={...l.viewport,scroll:{...l.viewport.scroll,max:c}};return{...l,viewport:d}}if(r.type==="MOVE_UP"||r.type==="MOVE_DOWN"||r.type==="MOVE_LEFT"||r.type==="MOVE_RIGHT"){if(l.phase==="COLLECTING"||l.phase==="DROP_PENDING")return l;l.phase!=="DRAGGING"&&ce();const c=fN({state:l,type:r.type});return c?Vs({state:l,impact:c.impact,clientSelection:c.clientSelection,scrollJumpRequest:c.scrollJumpRequest}):l}if(r.type==="DROP_PENDING"){const c=r.payload.reason;return l.phase!=="COLLECTING"&&ce(),{...l,phase:"DROP_PENDING",isWaiting:!0,reason:c}}if(r.type==="DROP_ANIMATE"){const{completed:c,dropDuration:d,newHomeClientOffset:u}=r.payload;return l.phase==="DRAGGING"||l.phase==="DROP_PENDING"||ce(),{phase:"DROP_ANIMATING",completed:c,dropDuration:d,newHomeClientOffset:u,dimensions:l.dimensions}}if(r.type==="DROP_COMPLETE"){const{completed:c}=r.payload;return{phase:"IDLE",completed:c,shouldFlush:!1}}return l};function Ke(l,r){return l instanceof Object&&"type"in l&&l.type===r}const ON=l=>({type:"BEFORE_INITIAL_CAPTURE",payload:l}),MN=l=>({type:"LIFT",payload:l}),_N=l=>({type:"INITIAL_PUBLISH",payload:l}),RN=l=>({type:"PUBLISH_WHILE_DRAGGING",payload:l}),zN=()=>({type:"COLLECTION_STARTING",payload:null}),LN=l=>({type:"UPDATE_DROPPABLE_SCROLL",payload:l}),BN=l=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:l}),UN=l=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:l}),Xh=l=>({type:"MOVE",payload:l}),HN=l=>({type:"MOVE_BY_WINDOW_SCROLL",payload:l}),$N=l=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:l}),qN=()=>({type:"MOVE_UP",payload:null}),GN=()=>({type:"MOVE_DOWN",payload:null}),IN=()=>({type:"MOVE_RIGHT",payload:null}),VN=()=>({type:"MOVE_LEFT",payload:null}),Fd=()=>({type:"FLUSH",payload:null}),YN=l=>({type:"DROP_ANIMATE",payload:l}),Wd=l=>({type:"DROP_COMPLETE",payload:l}),Zh=l=>({type:"DROP",payload:l}),QN=l=>({type:"DROP_PENDING",payload:l}),Ph=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var KN=l=>({getState:r,dispatch:c})=>d=>u=>{if(!Ke(u,"LIFT")){d(u);return}const{id:f,clientSelection:x,movementMode:b}=u.payload,h=r();h.phase==="DROP_ANIMATING"&&c(Wd({completed:h.completed})),r().phase!=="IDLE"&&ce(),c(Fd()),c(ON({draggableId:f,movementMode:b}));const j={draggableId:f,scrollOptions:{shouldPublishImmediately:b==="SNAP"}},{critical:g,dimensions:y,viewport:S}=l.startPublishing(j);c(_N({critical:g,dimensions:y,clientSelection:x,movementMode:b,viewport:S}))},XN=l=>()=>r=>c=>{Ke(c,"INITIAL_PUBLISH")&&l.dragging(),Ke(c,"DROP_ANIMATE")&&l.dropping(c.payload.completed.result.reason),(Ke(c,"FLUSH")||Ke(c,"DROP_COMPLETE"))&&l.resting(),r(c)};const eu={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},er={opacity:{drop:0,combining:.7},scale:{drop:.75}},Jh={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Hn=`${Jh.outOfTheWay}s ${eu.outOfTheWay}`,Ys={fluid:`opacity ${Hn}`,snap:`transform ${Hn}, opacity ${Hn}`,drop:l=>{const r=`${l}s ${eu.drop}`;return`transform ${r}, opacity ${r}`},outOfTheWay:`transform ${Hn}`,placeholder:`height ${Hn}, width ${Hn}, margin ${Hn}`},Yp=l=>bn(l,St)?void 0:`translate(${l.x}px, ${l.y}px)`,Ld={moveTo:Yp,drop:(l,r)=>{const c=Yp(l);if(c)return r?`${c} scale(${er.scale.drop})`:c}},{minDropTime:Bd,maxDropTime:Fh}=Jh,ZN=Fh-Bd,Qp=1500,PN=.6;var JN=({current:l,destination:r,reason:c})=>{const d=Js(l,r);if(d<=0)return Bd;if(d>=Qp)return Fh;const u=d/Qp,f=Bd+ZN*u,x=c==="CANCEL"?f*PN:f;return Number(x.toFixed(2))},FN=({impact:l,draggable:r,dimensions:c,viewport:d,afterCritical:u})=>{const{draggables:f,droppables:x}=c,b=Ft(l),h=b?x[b]:null,p=x[r.descriptor.droppableId],j=Yh({impact:l,draggable:r,draggables:f,afterCritical:u,droppable:h||p,viewport:d});return Jt(j,r.client.borderBox.center)},WN=({draggables:l,reason:r,lastImpact:c,home:d,viewport:u,onLiftImpact:f})=>!c.at||r!=="DROP"?{impact:Vh({draggables:l,impact:f,destination:d,viewport:u,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:c.at.type==="REORDER"?{impact:c,didDropInsideDroppable:!0}:{impact:{...c,displaced:Fs},didDropInsideDroppable:!0};const ej=({getState:l,dispatch:r})=>c=>d=>{if(!Ke(d,"DROP")){c(d);return}const u=l(),f=d.payload.reason;if(u.phase==="COLLECTING"){r(QN({reason:f}));return}if(u.phase==="IDLE")return;u.phase==="DROP_PENDING"&&u.isWaiting&&ce(),u.phase==="DRAGGING"||u.phase==="DROP_PENDING"||ce();const b=u.critical,h=u.dimensions,p=h.draggables[u.critical.draggable.id],{impact:j,didDropInsideDroppable:g}=WN({reason:f,lastImpact:u.impact,afterCritical:u.afterCritical,onLiftImpact:u.onLiftImpact,home:u.dimensions.droppables[u.critical.droppable.id],viewport:u.viewport,draggables:u.dimensions.draggables}),y=g?Qd(j):null,S=g?Vi(j):null,A={index:b.draggable.index,droppableId:b.droppable.id},R={draggableId:p.descriptor.id,type:p.descriptor.type,source:A,reason:f,mode:u.movementMode,destination:y,combine:S},N=FN({impact:j,draggable:p,dimensions:h,viewport:u.viewport,afterCritical:u.afterCritical}),w={critical:u.critical,afterCritical:u.afterCritical,result:R,impact:j};if(!(!bn(u.current.client.offset,N)||!!R.combine)){r(Wd({completed:w}));return}const C=JN({current:u.current.client.offset,destination:N,reason:f});r(YN({newHomeClientOffset:N,dropDuration:C,completed:w}))};var Wh=()=>({x:window.pageXOffset,y:window.pageYOffset});function tj(l){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:r=>{r.target!==window&&r.target!==window.document||l()}}}function aj({onWindowScroll:l}){function r(){l(Wh())}const c=Ps(r),d=tj(c);let u=yn;function f(){return u!==yn}function x(){f()&&ce(),u=fa(window,[d])}function b(){f()||ce(),c.cancel(),u(),u=yn}return{start:x,stop:b,isActive:f}}const nj=l=>Ke(l,"DROP_COMPLETE")||Ke(l,"DROP_ANIMATE")||Ke(l,"FLUSH"),lj=l=>{const r=aj({onWindowScroll:c=>{l.dispatch(HN({newScroll:c}))}});return c=>d=>{!r.isActive()&&Ke(d,"INITIAL_PUBLISH")&&r.start(),r.isActive()&&nj(d)&&r.stop(),c(d)}};var sj=l=>{let r=!1,c=!1;const d=setTimeout(()=>{c=!0}),u=f=>{r||c||(r=!0,l(f),clearTimeout(d))};return u.wasCalled=()=>r,u},rj=()=>{const l=[],r=u=>{const f=l.findIndex(b=>b.timerId===u);f===-1&&ce();const[x]=l.splice(f,1);x.callback()};return{add:u=>{const f=setTimeout(()=>r(f)),x={timerId:f,callback:u};l.push(x)},flush:()=>{if(!l.length)return;const u=[...l];l.length=0,u.forEach(f=>{clearTimeout(f.timerId),f.callback()})}}};const ij=(l,r)=>l==null&&r==null?!0:l==null||r==null?!1:l.droppableId===r.droppableId&&l.index===r.index,cj=(l,r)=>l==null&&r==null?!0:l==null||r==null?!1:l.draggableId===r.draggableId&&l.droppableId===r.droppableId,oj=(l,r)=>{if(l===r)return!0;const c=l.draggable.id===r.draggable.id&&l.draggable.droppableId===r.draggable.droppableId&&l.draggable.type===r.draggable.type&&l.draggable.index===r.draggable.index,d=l.droppable.id===r.droppable.id&&l.droppable.type===r.droppable.type;return c&&d},Bs=(l,r)=>{r()},wi=(l,r)=>({draggableId:l.draggable.id,type:l.droppable.type,source:{droppableId:l.droppable.id,index:l.draggable.index},mode:r});function jd(l,r,c,d){if(!l){c(d(r));return}const u=sj(c);l(r,{announce:u}),u.wasCalled()||c(d(r))}var dj=(l,r)=>{const c=rj();let d=null;const u=(g,y)=>{d&&ce(),Bs("onBeforeCapture",()=>{const S=l().onBeforeCapture;S&&S({draggableId:g,mode:y})})},f=(g,y)=>{d&&ce(),Bs("onBeforeDragStart",()=>{const S=l().onBeforeDragStart;S&&S(wi(g,y))})},x=(g,y)=>{d&&ce();const S=wi(g,y);d={mode:y,lastCritical:g,lastLocation:S.source,lastCombine:null},c.add(()=>{Bs("onDragStart",()=>jd(l().onDragStart,S,r,Ei.onDragStart))})},b=(g,y)=>{const S=Qd(y),A=Vi(y);d||ce();const R=!oj(g,d.lastCritical);R&&(d.lastCritical=g);const N=!ij(d.lastLocation,S);N&&(d.lastLocation=S);const w=!cj(d.lastCombine,A);if(w&&(d.lastCombine=A),!R&&!N&&!w)return;const L={...wi(g,d.mode),combine:A,destination:S};c.add(()=>{Bs("onDragUpdate",()=>jd(l().onDragUpdate,L,r,Ei.onDragUpdate))})},h=()=>{d||ce(),c.flush()},p=g=>{d||ce(),d=null,Bs("onDragEnd",()=>jd(l().onDragEnd,g,r,Ei.onDragEnd))};return{beforeCapture:u,beforeStart:f,start:x,update:b,flush:h,drop:p,abort:()=>{if(!d)return;const g={...wi(d.lastCritical,d.mode),combine:null,destination:null,reason:"CANCEL"};p(g)}}},uj=(l,r)=>{const c=dj(l,r);return d=>u=>f=>{if(Ke(f,"BEFORE_INITIAL_CAPTURE")){c.beforeCapture(f.payload.draggableId,f.payload.movementMode);return}if(Ke(f,"INITIAL_PUBLISH")){const b=f.payload.critical;c.beforeStart(b,f.payload.movementMode),u(f),c.start(b,f.payload.movementMode);return}if(Ke(f,"DROP_COMPLETE")){const b=f.payload.completed.result;c.flush(),u(f),c.drop(b);return}if(u(f),Ke(f,"FLUSH")){c.abort();return}const x=d.getState();x.phase==="DRAGGING"&&c.update(x.critical,x.impact)}};const fj=l=>r=>c=>{if(!Ke(c,"DROP_ANIMATION_FINISHED")){r(c);return}const d=l.getState();d.phase!=="DROP_ANIMATING"&&ce(),l.dispatch(Wd({completed:d.completed}))},xj=l=>{let r=null,c=null;function d(){c&&(cancelAnimationFrame(c),c=null),r&&(r(),r=null)}return u=>f=>{if((Ke(f,"FLUSH")||Ke(f,"DROP_COMPLETE")||Ke(f,"DROP_ANIMATION_FINISHED"))&&d(),u(f),!Ke(f,"DROP_ANIMATE"))return;const x={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){l.getState().phase==="DROP_ANIMATING"&&l.dispatch(Ph())}};c=requestAnimationFrame(()=>{c=null,r=fa(window,[x])})}};var mj=l=>()=>r=>c=>{(Ke(c,"DROP_COMPLETE")||Ke(c,"FLUSH")||Ke(c,"DROP_ANIMATE"))&&l.stopPublishing(),r(c)},pj=l=>{let r=!1;return()=>c=>d=>{if(Ke(d,"INITIAL_PUBLISH")){r=!0,l.tryRecordFocus(d.payload.critical.draggable.id),c(d),l.tryRestoreFocusRecorded();return}if(c(d),!!r){if(Ke(d,"FLUSH")){r=!1,l.tryRestoreFocusRecorded();return}if(Ke(d,"DROP_COMPLETE")){r=!1;const u=d.payload.completed.result;u.combine&&l.tryShiftRecord(u.draggableId,u.combine.draggableId),l.tryRestoreFocusRecorded()}}}};const hj=l=>Ke(l,"DROP_COMPLETE")||Ke(l,"DROP_ANIMATE")||Ke(l,"FLUSH");var yj=l=>r=>c=>d=>{if(hj(d)){l.stop(),c(d);return}if(Ke(d,"INITIAL_PUBLISH")){c(d);const u=r.getState();u.phase!=="DRAGGING"&&ce(),l.start(u);return}c(d),l.scroll(r.getState())};const bj=l=>r=>c=>{if(r(c),!Ke(c,"PUBLISH_WHILE_DRAGGING"))return;const d=l.getState();d.phase==="DROP_PENDING"&&(d.isWaiting||l.dispatch(Zh({reason:d.reason})))},gj=ph;var vj=({dimensionMarshal:l,focusMarshal:r,styleMarshal:c,getResponders:d,announce:u,autoScroller:f})=>mh(kN,gj(y0(XN(c),mj(l),KN(l),ej,fj,xj,bj,yj(f),lj,pj(r),uj(d,u))));const Sd=()=>({additions:{},removals:{},modified:{}});function Nj({registry:l,callbacks:r}){let c=Sd(),d=null;const u=()=>{d||(r.collectionStarting(),d=requestAnimationFrame(()=>{d=null;const{additions:h,removals:p,modified:j}=c,g=Object.keys(h).map(A=>l.draggable.getById(A).getDimension(St)).sort((A,R)=>A.descriptor.index-R.descriptor.index),y=Object.keys(j).map(A=>{const N=l.droppable.getById(A).callbacks.getScrollWhileDragging();return{droppableId:A,scroll:N}}),S={additions:g,removals:Object.keys(p),modified:y};c=Sd(),r.publish(S)}))};return{add:h=>{const p=h.descriptor.id;c.additions[p]=h,c.modified[h.descriptor.droppableId]=!0,c.removals[p]&&delete c.removals[p],u()},remove:h=>{const p=h.descriptor;c.removals[p.id]=!0,c.modified[p.droppableId]=!0,c.additions[p.id]&&delete c.additions[p.id],u()},stop:()=>{d&&(cancelAnimationFrame(d),d=null,c=Sd())}}}var ey=({scrollHeight:l,scrollWidth:r,height:c,width:d})=>{const u=Jt({x:r,y:l},{x:d,y:c});return{x:Math.max(0,u.x),y:Math.max(0,u.y)}},ty=()=>{const l=document.documentElement;return l||ce(),l},ay=()=>{const l=ty();return ey({scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth,width:l.clientWidth,height:l.clientHeight})},jj=()=>{const l=Wh(),r=ay(),c=l.y,d=l.x,u=ty(),f=u.clientWidth,x=u.clientHeight,b=d+f,h=c+x;return{frame:ya({top:c,left:d,right:b,bottom:h}),scroll:{initial:l,current:l,max:r,diff:{value:St,displacement:St}}}},Sj=({critical:l,scrollOptions:r,registry:c})=>{const d=jj(),u=d.scroll.current,f=l.droppable,x=c.droppable.getAllByType(f.type).map(j=>j.callbacks.getDimensionAndWatchScroll(u,r)),b=c.draggable.getAllByType(l.draggable.type).map(j=>j.getDimension(u));return{dimensions:{draggables:kh(b),droppables:Th(x)},critical:l,viewport:d}};function Kp(l,r,c){return!(c.descriptor.id===r.id||c.descriptor.type!==r.type||l.droppable.getById(c.descriptor.droppableId).descriptor.mode!=="virtual")}var wj=(l,r)=>{let c=null;const d=Nj({callbacks:{publish:r.publishWhileDragging,collectionStarting:r.collectionStarting},registry:l}),u=(y,S)=>{l.droppable.exists(y)||ce(),c&&r.updateDroppableIsEnabled({id:y,isEnabled:S})},f=(y,S)=>{c&&(l.droppable.exists(y)||ce(),r.updateDroppableIsCombineEnabled({id:y,isCombineEnabled:S}))},x=(y,S)=>{c&&(l.droppable.exists(y)||ce(),r.updateDroppableScroll({id:y,newScroll:S}))},b=(y,S)=>{c&&l.droppable.getById(y).callbacks.scroll(S)},h=()=>{if(!c)return;d.stop();const y=c.critical.droppable;l.droppable.getAllByType(y.type).forEach(S=>S.callbacks.dragStopped()),c.unsubscribe(),c=null},p=y=>{c||ce();const S=c.critical.draggable;y.type==="ADDITION"&&Kp(l,S,y.value)&&d.add(y.value),y.type==="REMOVAL"&&Kp(l,S,y.value)&&d.remove(y.value)};return{updateDroppableIsEnabled:u,updateDroppableIsCombineEnabled:f,scrollDroppable:b,updateDroppableScroll:x,startPublishing:y=>{c&&ce();const S=l.draggable.getById(y.draggableId),A=l.droppable.getById(S.descriptor.droppableId),R={draggable:S.descriptor,droppable:A.descriptor},N=l.subscribe(p);return c={critical:R,unsubscribe:N},Sj({critical:R,registry:l,scrollOptions:y.scrollOptions})},stopPublishing:h}},ny=(l,r)=>l.phase==="IDLE"?!0:l.phase!=="DROP_ANIMATING"||l.completed.result.draggableId===r?!1:l.completed.result.reason==="DROP",Dj=l=>{window.scrollBy(l.x,l.y)};const Cj=Nt(l=>Ii(l).filter(r=>!(!r.isEnabled||!r.frame))),Ej=(l,r)=>Cj(r).find(d=>(d.frame||ce(),$h(d.frame.pageMarginBox)(l)))||null;var Aj=({center:l,destination:r,droppables:c})=>{if(r){const u=c[r];return u.frame?u:null}return Ej(l,c)};const tr={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:l=>l**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Tj=(l,r,c=()=>tr)=>{const d=c(),u=l[r.size]*d.startFromPercentage,f=l[r.size]*d.maxScrollAtPercentage;return{startScrollingFrom:u,maxScrollValueAt:f}},ly=({startOfRange:l,endOfRange:r,current:c})=>{const d=r-l;return d===0?0:(c-l)/d},tu=1,kj=(l,r,c=()=>tr)=>{const d=c();if(l>r.startScrollingFrom)return 0;if(l<=r.maxScrollValueAt)return d.maxPixelScroll;if(l===r.startScrollingFrom)return tu;const f=1-ly({startOfRange:r.maxScrollValueAt,endOfRange:r.startScrollingFrom,current:l}),x=d.maxPixelScroll*d.ease(f);return Math.ceil(x)},Oj=(l,r,c)=>{const d=c(),u=d.durationDampening.accelerateAt,f=d.durationDampening.stopDampeningAt,x=r,b=f,p=Date.now()-x;if(p>=f)return l;if(p<u)return tu;const j=ly({startOfRange:u,endOfRange:b,current:p}),g=l*d.ease(j);return Math.ceil(g)},Xp=({distanceToEdge:l,thresholds:r,dragStartTime:c,shouldUseTimeDampening:d,getAutoScrollerOptions:u})=>{const f=kj(l,r,u);return f===0?0:d?Math.max(Oj(f,c,u),tu):f},Zp=({container:l,distanceToEdges:r,dragStartTime:c,axis:d,shouldUseTimeDampening:u,getAutoScrollerOptions:f})=>{const x=Tj(l,d,f);return r[d.end]<r[d.start]?Xp({distanceToEdge:r[d.end],thresholds:x,dragStartTime:c,shouldUseTimeDampening:u,getAutoScrollerOptions:f}):-1*Xp({distanceToEdge:r[d.start],thresholds:x,dragStartTime:c,shouldUseTimeDampening:u,getAutoScrollerOptions:f})},Mj=({container:l,subject:r,proposedScroll:c})=>{const d=r.height>l.height,u=r.width>l.width;return!u&&!d?c:u&&d?null:{x:u?0:c.x,y:d?0:c.y}};const _j=Ah(l=>l===0?0:l);var sy=({dragStartTime:l,container:r,subject:c,center:d,shouldUseTimeDampening:u,getAutoScrollerOptions:f})=>{const x={top:d.y-r.top,right:r.right-d.x,bottom:r.bottom-d.y,left:d.x-r.left},b=Zp({container:r,distanceToEdges:x,dragStartTime:l,axis:Kd,shouldUseTimeDampening:u,getAutoScrollerOptions:f}),h=Zp({container:r,distanceToEdges:x,dragStartTime:l,axis:_h,shouldUseTimeDampening:u,getAutoScrollerOptions:f}),p=_j({x:h,y:b});if(bn(p,St))return null;const j=Mj({container:r,subject:c,proposedScroll:p});return j?bn(j,St)?null:j:null};const Rj=Ah(l=>l===0?0:l>0?1:-1),au=(()=>{const l=(r,c)=>r<0?r:r>c?r-c:0;return({current:r,max:c,change:d})=>{const u=Tt(r,d),f={x:l(u.x,c.x),y:l(u.y,c.y)};return bn(f,St)?null:f}})(),ry=({max:l,current:r,change:c})=>{const d={x:Math.max(r.x,l.x),y:Math.max(r.y,l.y)},u=Rj(c),f=au({max:d,current:r,change:u});return!f||u.x!==0&&f.x===0||u.y!==0&&f.y===0},nu=(l,r)=>ry({current:l.scroll.current,max:l.scroll.max,change:r}),zj=(l,r)=>{if(!nu(l,r))return null;const c=l.scroll.max,d=l.scroll.current;return au({current:d,max:c,change:r})},lu=(l,r)=>{const c=l.frame;return c?ry({current:c.scroll.current,max:c.scroll.max,change:r}):!1},Lj=(l,r)=>{const c=l.frame;return!c||!lu(l,r)?null:au({current:c.scroll.current,max:c.scroll.max,change:r})};var Bj=({viewport:l,subject:r,center:c,dragStartTime:d,shouldUseTimeDampening:u,getAutoScrollerOptions:f})=>{const x=sy({dragStartTime:d,container:l.frame,subject:r,center:c,shouldUseTimeDampening:u,getAutoScrollerOptions:f});return x&&nu(l,x)?x:null},Uj=({droppable:l,subject:r,center:c,dragStartTime:d,shouldUseTimeDampening:u,getAutoScrollerOptions:f})=>{const x=l.frame;if(!x)return null;const b=sy({dragStartTime:d,container:x.pageMarginBox,subject:r,center:c,shouldUseTimeDampening:u,getAutoScrollerOptions:f});return b&&lu(l,b)?b:null},Pp=({state:l,dragStartTime:r,shouldUseTimeDampening:c,scrollWindow:d,scrollDroppable:u,getAutoScrollerOptions:f})=>{const x=l.current.page.borderBoxCenter,h=l.dimensions.draggables[l.critical.draggable.id].page.marginBox;if(l.isWindowScrollAllowed){const g=l.viewport,y=Bj({dragStartTime:r,viewport:g,subject:h,center:x,shouldUseTimeDampening:c,getAutoScrollerOptions:f});if(y){d(y);return}}const p=Aj({center:x,destination:Ft(l.impact),droppables:l.dimensions.droppables});if(!p)return;const j=Uj({dragStartTime:r,droppable:p,subject:h,center:x,shouldUseTimeDampening:c,getAutoScrollerOptions:f});j&&u(p.descriptor.id,j)},Hj=({scrollWindow:l,scrollDroppable:r,getAutoScrollerOptions:c=()=>tr})=>{const d=Ps(l),u=Ps(r);let f=null;const x=p=>{f||ce();const{shouldUseTimeDampening:j,dragStartTime:g}=f;Pp({state:p,scrollWindow:d,scrollDroppable:u,dragStartTime:g,shouldUseTimeDampening:j,getAutoScrollerOptions:c})};return{start:p=>{f&&ce();const j=Date.now();let g=!1;const y=()=>{g=!0};Pp({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:y,scrollDroppable:y,getAutoScrollerOptions:c}),f={dragStartTime:j,shouldUseTimeDampening:g},g&&x(p)},stop:()=>{f&&(d.cancel(),u.cancel(),f=null)},scroll:x}},$j=({move:l,scrollDroppable:r,scrollWindow:c})=>{const d=(b,h)=>{const p=Tt(b.current.client.selection,h);l({client:p})},u=(b,h)=>{if(!lu(b,h))return h;const p=Lj(b,h);if(!p)return r(b.descriptor.id,h),null;const j=Jt(h,p);return r(b.descriptor.id,j),Jt(h,j)},f=(b,h,p)=>{if(!b||!nu(h,p))return p;const j=zj(h,p);if(!j)return c(p),null;const g=Jt(p,j);return c(g),Jt(p,g)};return b=>{const h=b.scrollJumpRequest;if(!h)return;const p=Ft(b.impact);p||ce();const j=u(b.dimensions.droppables[p],h);if(!j)return;const g=b.viewport,y=f(b.isWindowScrollAllowed,g,j);y&&d(b,y)}},qj=({scrollDroppable:l,scrollWindow:r,move:c,getAutoScrollerOptions:d})=>{const u=Hj({scrollWindow:r,scrollDroppable:l,getAutoScrollerOptions:d}),f=$j({move:c,scrollWindow:r,scrollDroppable:l});return{scroll:h=>{if(!(d().disabled||h.phase!=="DRAGGING")){if(h.movementMode==="FLUID"){u.scroll(h);return}h.scrollJumpRequest&&f(h)}},start:u.start,stop:u.stop}};const zl="data-rfd",Ll=(()=>{const l=`${zl}-drag-handle`;return{base:l,draggableId:`${l}-draggable-id`,contextId:`${l}-context-id`}})(),Ud=(()=>{const l=`${zl}-draggable`;return{base:l,contextId:`${l}-context-id`,id:`${l}-id`}})(),Gj=(()=>{const l=`${zl}-droppable`;return{base:l,contextId:`${l}-context-id`,id:`${l}-id`}})(),Jp={contextId:`${zl}-scroll-container-context-id`},Ij=l=>r=>`[${r}="${l}"]`,Us=(l,r)=>l.map(c=>{const d=c.styles[r];return d?`${c.selector} { ${d} }`:""}).join(" "),Vj="pointer-events: none;";var Yj=l=>{const r=Ij(l),c=(()=>{const b=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:r(Ll.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:b,dragging:Vj,dropAnimating:b}}})(),d=(()=>{const b=`
      transition: ${Ys.outOfTheWay};
    `;return{selector:r(Ud.contextId),styles:{dragging:b,dropAnimating:b,userCancel:b}}})(),u={selector:r(Gj.contextId),styles:{always:"overflow-anchor: none;"}},x=[d,c,u,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Us(x,"always"),resting:Us(x,"resting"),dragging:Us(x,"dragging"),dropAnimating:Us(x,"dropAnimating"),userCancel:Us(x,"userCancel")}};const Wt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?E.useLayoutEffect:E.useEffect,wd=()=>{const l=document.querySelector("head");return l||ce(),l},Fp=l=>{const r=document.createElement("style");return l&&r.setAttribute("nonce",l),r.type="text/css",r};function Qj(l,r){const c=Ge(()=>Yj(l),[l]),d=E.useRef(null),u=E.useRef(null),f=we(Nt(g=>{const y=u.current;y||ce(),y.textContent=g}),[]),x=we(g=>{const y=d.current;y||ce(),y.textContent=g},[]);Wt(()=>{!d.current&&!u.current||ce();const g=Fp(r),y=Fp(r);return d.current=g,u.current=y,g.setAttribute(`${zl}-always`,l),y.setAttribute(`${zl}-dynamic`,l),wd().appendChild(g),wd().appendChild(y),x(c.always),f(c.resting),()=>{const S=A=>{const R=A.current;R||ce(),wd().removeChild(R),A.current=null};S(d),S(u)}},[r,x,f,c.always,c.resting,l]);const b=we(()=>f(c.dragging),[f,c.dragging]),h=we(g=>{if(g==="DROP"){f(c.dropAnimating);return}f(c.userCancel)},[f,c.dropAnimating,c.userCancel]),p=we(()=>{u.current&&f(c.resting)},[f,c.resting]);return Ge(()=>({dragging:b,dropping:h,resting:p}),[b,h,p])}function iy(l,r){return Array.from(l.querySelectorAll(r))}var cy=l=>l&&l.ownerDocument&&l.ownerDocument.defaultView?l.ownerDocument.defaultView:window;function Ki(l){return l instanceof cy(l).HTMLElement}function Kj(l,r){const c=`[${Ll.contextId}="${l}"]`,d=iy(document,c);if(!d.length)return null;const u=d.find(f=>f.getAttribute(Ll.draggableId)===r);return!u||!Ki(u)?null:u}function Xj(l){const r=E.useRef({}),c=E.useRef(null),d=E.useRef(null),u=E.useRef(!1),f=we(function(y,S){const A={id:y,focus:S};return r.current[y]=A,function(){const N=r.current;N[y]!==A&&delete N[y]}},[]),x=we(function(y){const S=Kj(l,y);S&&S!==document.activeElement&&S.focus()},[l]),b=we(function(y,S){c.current===y&&(c.current=S)},[]),h=we(function(){d.current||u.current&&(d.current=requestAnimationFrame(()=>{d.current=null;const y=c.current;y&&x(y)}))},[x]),p=we(function(y){c.current=null;const S=document.activeElement;S&&S.getAttribute(Ll.draggableId)===y&&(c.current=y)},[]);return Wt(()=>(u.current=!0,function(){u.current=!1;const y=d.current;y&&cancelAnimationFrame(y)}),[]),Ge(()=>({register:f,tryRecordFocus:p,tryRestoreFocusRecorded:h,tryShiftRecord:b}),[f,p,h,b])}function Zj(){const l={draggables:{},droppables:{}},r=[];function c(g){return r.push(g),function(){const S=r.indexOf(g);S!==-1&&r.splice(S,1)}}function d(g){r.length&&r.forEach(y=>y(g))}function u(g){return l.draggables[g]||null}function f(g){const y=u(g);return y||ce(),y}const x={register:g=>{l.draggables[g.descriptor.id]=g,d({type:"ADDITION",value:g})},update:(g,y)=>{const S=l.draggables[y.descriptor.id];S&&S.uniqueId===g.uniqueId&&(delete l.draggables[y.descriptor.id],l.draggables[g.descriptor.id]=g)},unregister:g=>{const y=g.descriptor.id,S=u(y);S&&g.uniqueId===S.uniqueId&&(delete l.draggables[y],l.droppables[g.descriptor.droppableId]&&d({type:"REMOVAL",value:g}))},getById:f,findById:u,exists:g=>!!u(g),getAllByType:g=>Object.values(l.draggables).filter(y=>y.descriptor.type===g)};function b(g){return l.droppables[g]||null}function h(g){const y=b(g);return y||ce(),y}const p={register:g=>{l.droppables[g.descriptor.id]=g},unregister:g=>{const y=b(g.descriptor.id);y&&g.uniqueId===y.uniqueId&&delete l.droppables[g.descriptor.id]},getById:h,findById:b,exists:g=>!!b(g),getAllByType:g=>Object.values(l.droppables).filter(y=>y.descriptor.type===g)};function j(){l.draggables={},l.droppables={},r.length=0}return{draggable:x,droppable:p,subscribe:c,clean:j}}function Pj(){const l=Ge(Zj,[]);return E.useEffect(()=>function(){l.clean()},[l]),l}var su=Qe.createContext(null),$i=()=>{const l=document.body;return l||ce(),l};const Jj={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Fj=l=>`rfd-announcement-${l}`;function Wj(l){const r=Ge(()=>Fj(l),[l]),c=E.useRef(null);return E.useEffect(function(){const f=document.createElement("div");return c.current=f,f.id=r,f.setAttribute("aria-live","assertive"),f.setAttribute("aria-atomic","true"),Li(f.style,Jj),$i().appendChild(f),function(){setTimeout(function(){const h=$i();h.contains(f)&&h.removeChild(f),f===c.current&&(c.current=null)})}},[r]),we(u=>{const f=c.current;if(f){f.textContent=u;return}},[])}const e2={separator:"::"};function ru(l,r=e2){const c=Qe.useId();return Ge(()=>`${l}${r.separator}${c}`,[r.separator,l,c])}function t2({contextId:l,uniqueId:r}){return`rfd-hidden-text-${l}-${r}`}function a2({contextId:l,text:r}){const c=ru("hidden-text",{separator:"-"}),d=Ge(()=>t2({contextId:l,uniqueId:c}),[c,l]);return E.useEffect(function(){const f=document.createElement("div");return f.id=d,f.textContent=r,f.style.display="none",$i().appendChild(f),function(){const b=$i();b.contains(f)&&b.removeChild(f)}},[d,r]),d}var Xi=Qe.createContext(null);function oy(l){const r=E.useRef(l);return E.useEffect(()=>{r.current=l}),r}function n2(){let l=null;function r(){return!!l}function c(x){return x===l}function d(x){l&&ce();const b={abandon:x};return l=b,b}function u(){l||ce(),l=null}function f(){l&&(l.abandon(),u())}return{isClaimed:r,isActive:c,claim:d,release:u,tryAbandon:f}}function ar(l){return l.phase==="IDLE"||l.phase==="DROP_ANIMATING"?!1:l.isDragging}const l2=9,s2=13,iu=27,dy=32,r2=33,i2=34,c2=35,o2=36,d2=37,u2=38,f2=39,x2=40,m2={[s2]:!0,[l2]:!0};var uy=l=>{m2[l.keyCode]&&l.preventDefault()};const Zi=(()=>{const l="visibilitychange";return typeof document>"u"?l:[l,`ms${l}`,`webkit${l}`,`moz${l}`,`o${l}`].find(d=>`on${d}`in document)||l})(),fy=0,Wp=5;function p2(l,r){return Math.abs(r.x-l.x)>=Wp||Math.abs(r.y-l.y)>=Wp}const eh={type:"IDLE"};function h2({cancel:l,completed:r,getPhase:c,setPhase:d}){return[{eventName:"mousemove",fn:u=>{const{button:f,clientX:x,clientY:b}=u;if(f!==fy)return;const h={x,y:b},p=c();if(p.type==="DRAGGING"){u.preventDefault(),p.actions.move(h);return}p.type!=="PENDING"&&ce();const j=p.point;if(!p2(j,h))return;u.preventDefault();const g=p.actions.fluidLift(h);d({type:"DRAGGING",actions:g})}},{eventName:"mouseup",fn:u=>{const f=c();if(f.type!=="DRAGGING"){l();return}u.preventDefault(),f.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:u=>{c().type==="DRAGGING"&&u.preventDefault(),l()}},{eventName:"keydown",fn:u=>{if(c().type==="PENDING"){l();return}if(u.keyCode===iu){u.preventDefault(),l();return}uy(u)}},{eventName:"resize",fn:l},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{c().type==="PENDING"&&l()}},{eventName:"webkitmouseforcedown",fn:u=>{const f=c();if(f.type==="IDLE"&&ce(),f.actions.shouldRespectForcePress()){l();return}u.preventDefault()}},{eventName:Zi,fn:l}]}function y2(l){const r=E.useRef(eh),c=E.useRef(yn),d=Ge(()=>({eventName:"mousedown",fn:function(g){if(g.defaultPrevented||g.button!==fy||g.ctrlKey||g.metaKey||g.shiftKey||g.altKey)return;const y=l.findClosestDraggableId(g);if(!y)return;const S=l.tryGetLock(y,x,{sourceEvent:g});if(!S)return;g.preventDefault();const A={x:g.clientX,y:g.clientY};c.current(),p(S,A)}}),[l]),u=Ge(()=>({eventName:"webkitmouseforcewillbegin",fn:j=>{if(j.defaultPrevented)return;const g=l.findClosestDraggableId(j);if(!g)return;const y=l.findOptionsForDraggable(g);y&&(y.shouldRespectForcePress||l.canGetLock(g)&&j.preventDefault())}}),[l]),f=we(function(){const g={passive:!1,capture:!0};c.current=fa(window,[u,d],g)},[u,d]),x=we(()=>{r.current.type!=="IDLE"&&(r.current=eh,c.current(),f())},[f]),b=we(()=>{const j=r.current;x(),j.type==="DRAGGING"&&j.actions.cancel({shouldBlockNextClick:!0}),j.type==="PENDING"&&j.actions.abort()},[x]),h=we(function(){const g={capture:!0,passive:!1},y=h2({cancel:b,completed:x,getPhase:()=>r.current,setPhase:S=>{r.current=S}});c.current=fa(window,y,g)},[b,x]),p=we(function(g,y){r.current.type!=="IDLE"&&ce(),r.current={type:"PENDING",point:y,actions:g},h()},[h]);Wt(function(){return f(),function(){c.current()}},[f])}function b2(){}const g2={[i2]:!0,[r2]:!0,[o2]:!0,[c2]:!0};function v2(l,r){function c(){r(),l.cancel()}function d(){r(),l.drop()}return[{eventName:"keydown",fn:u=>{if(u.keyCode===iu){u.preventDefault(),c();return}if(u.keyCode===dy){u.preventDefault(),d();return}if(u.keyCode===x2){u.preventDefault(),l.moveDown();return}if(u.keyCode===u2){u.preventDefault(),l.moveUp();return}if(u.keyCode===f2){u.preventDefault(),l.moveRight();return}if(u.keyCode===d2){u.preventDefault(),l.moveLeft();return}if(g2[u.keyCode]){u.preventDefault();return}uy(u)}},{eventName:"mousedown",fn:c},{eventName:"mouseup",fn:c},{eventName:"click",fn:c},{eventName:"touchstart",fn:c},{eventName:"resize",fn:c},{eventName:"wheel",fn:c,options:{passive:!0}},{eventName:Zi,fn:c}]}function N2(l){const r=E.useRef(b2),c=Ge(()=>({eventName:"keydown",fn:function(f){if(f.defaultPrevented||f.keyCode!==dy)return;const x=l.findClosestDraggableId(f);if(!x)return;const b=l.tryGetLock(x,j,{sourceEvent:f});if(!b)return;f.preventDefault();let h=!0;const p=b.snapLift();r.current();function j(){h||ce(),h=!1,r.current(),d()}r.current=fa(window,v2(p,j),{capture:!0,passive:!1})}}),[l]),d=we(function(){const f={passive:!1,capture:!0};r.current=fa(window,[c],f)},[c]);Wt(function(){return d(),function(){r.current()}},[d])}const Dd={type:"IDLE"},j2=120,S2=.15;function w2({cancel:l,getPhase:r}){return[{eventName:"orientationchange",fn:l},{eventName:"resize",fn:l},{eventName:"contextmenu",fn:c=>{c.preventDefault()}},{eventName:"keydown",fn:c=>{if(r().type!=="DRAGGING"){l();return}c.keyCode===iu&&c.preventDefault(),l()}},{eventName:Zi,fn:l}]}function D2({cancel:l,completed:r,getPhase:c}){return[{eventName:"touchmove",options:{capture:!1},fn:d=>{const u=c();if(u.type!=="DRAGGING"){l();return}u.hasMoved=!0;const{clientX:f,clientY:x}=d.touches[0],b={x:f,y:x};d.preventDefault(),u.actions.move(b)}},{eventName:"touchend",fn:d=>{const u=c();if(u.type!=="DRAGGING"){l();return}d.preventDefault(),u.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:d=>{if(c().type!=="DRAGGING"){l();return}d.preventDefault(),l()}},{eventName:"touchforcechange",fn:d=>{const u=c();u.type==="IDLE"&&ce();const f=d.touches[0];if(!f||!(f.force>=S2))return;const b=u.actions.shouldRespectForcePress();if(u.type==="PENDING"){b&&l();return}if(b){if(u.hasMoved){d.preventDefault();return}l();return}d.preventDefault()}},{eventName:Zi,fn:l}]}function C2(l){const r=E.useRef(Dd),c=E.useRef(yn),d=we(function(){return r.current},[]),u=we(function(S){r.current=S},[]),f=Ge(()=>({eventName:"touchstart",fn:function(S){if(S.defaultPrevented)return;const A=l.findClosestDraggableId(S);if(!A)return;const R=l.tryGetLock(A,b,{sourceEvent:S});if(!R)return;const N=S.touches[0],{clientX:w,clientY:L}=N,C={x:w,y:L};c.current(),g(R,C)}}),[l]),x=we(function(){const S={capture:!0,passive:!1};c.current=fa(window,[f],S)},[f]),b=we(()=>{const y=r.current;y.type!=="IDLE"&&(y.type==="PENDING"&&clearTimeout(y.longPressTimerId),u(Dd),c.current(),x())},[x,u]),h=we(()=>{const y=r.current;b(),y.type==="DRAGGING"&&y.actions.cancel({shouldBlockNextClick:!0}),y.type==="PENDING"&&y.actions.abort()},[b]),p=we(function(){const S={capture:!0,passive:!1},A={cancel:h,completed:b,getPhase:d},R=fa(window,D2(A),S),N=fa(window,w2(A),S);c.current=function(){R(),N()}},[h,d,b]),j=we(function(){const S=d();S.type!=="PENDING"&&ce();const A=S.actions.fluidLift(S.point);u({type:"DRAGGING",actions:A,hasMoved:!1})},[d,u]),g=we(function(S,A){d().type!=="IDLE"&&ce();const R=setTimeout(j,j2);u({type:"PENDING",point:A,actions:S,longPressTimerId:R}),p()},[p,d,u,j]);Wt(function(){return x(),function(){c.current();const A=d();A.type==="PENDING"&&(clearTimeout(A.longPressTimerId),u(Dd))}},[d,x,u]),Wt(function(){return fa(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const E2=["input","button","textarea","select","option","optgroup","video","audio"];function xy(l,r){if(r==null)return!1;if(E2.includes(r.tagName.toLowerCase()))return!0;const d=r.getAttribute("contenteditable");return d==="true"||d===""?!0:r===l?!1:xy(l,r.parentElement)}function A2(l,r){const c=r.target;return Ki(c)?xy(l,c):!1}var T2=l=>ya(l.getBoundingClientRect()).center;function k2(l){return l instanceof cy(l).Element}const O2=(()=>{const l="matches";return typeof document>"u"?l:[l,"msMatchesSelector","webkitMatchesSelector"].find(d=>d in Element.prototype)||l})();function my(l,r){return l==null?null:l[O2](r)?l:my(l.parentElement,r)}function M2(l,r){return l.closest?l.closest(r):my(l,r)}function _2(l){return`[${Ll.contextId}="${l}"]`}function R2(l,r){const c=r.target;if(!k2(c))return null;const d=_2(l),u=M2(c,d);return!u||!Ki(u)?null:u}function z2(l,r){const c=R2(l,r);return c?c.getAttribute(Ll.draggableId):null}function L2(l,r){const c=`[${Ud.contextId}="${l}"]`,u=iy(document,c).find(f=>f.getAttribute(Ud.id)===r);return!u||!Ki(u)?null:u}function B2(l){l.preventDefault()}function Di({expected:l,phase:r,isLockActive:c,shouldWarn:d}){return!(!c()||l!==r)}function py({lockAPI:l,store:r,registry:c,draggableId:d}){if(l.isClaimed())return!1;const u=c.draggable.findById(d);return!(!u||!u.options.isEnabled||!ny(r.getState(),d))}function U2({lockAPI:l,contextId:r,store:c,registry:d,draggableId:u,forceSensorStop:f,sourceEvent:x}){if(!py({lockAPI:l,store:c,registry:d,draggableId:u}))return null;const h=d.draggable.getById(u),p=L2(r,h.descriptor.id);if(!p||x&&!h.options.canDragInteractiveElements&&A2(p,x))return null;const j=l.claim(f||yn);let g="PRE_DRAG";function y(){return h.options.shouldRespectForcePress}function S(){return l.isActive(j)}function A(O,v){Di({expected:O,phase:g,isLockActive:S,shouldWarn:!0})&&c.dispatch(v())}const R=A.bind(null,"DRAGGING");function N(O){function v(){l.release(),g="COMPLETED"}g!=="PRE_DRAG"&&(v(),ce()),c.dispatch(MN(O.liftActionArgs)),g="DRAGGING";function B(q,ae={shouldBlockNextClick:!1}){if(O.cleanup(),ae.shouldBlockNextClick){const oe=fa(window,[{eventName:"click",fn:B2,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(oe)}v(),c.dispatch(Zh({reason:q}))}return{isActive:()=>Di({expected:"DRAGGING",phase:g,isLockActive:S,shouldWarn:!1}),shouldRespectForcePress:y,drop:q=>B("DROP",q),cancel:q=>B("CANCEL",q),...O.actions}}function w(O){const v=Ps(q=>{R(()=>Xh({client:q}))});return{...N({liftActionArgs:{id:u,clientSelection:O,movementMode:"FLUID"},cleanup:()=>v.cancel(),actions:{move:v}}),move:v}}function L(){const O={moveUp:()=>R(qN),moveRight:()=>R(IN),moveDown:()=>R(GN),moveLeft:()=>R(VN)};return N({liftActionArgs:{id:u,clientSelection:T2(p),movementMode:"SNAP"},cleanup:yn,actions:O})}function C(){Di({expected:"PRE_DRAG",phase:g,isLockActive:S,shouldWarn:!0})&&l.release()}return{isActive:()=>Di({expected:"PRE_DRAG",phase:g,isLockActive:S,shouldWarn:!1}),shouldRespectForcePress:y,fluidLift:w,snapLift:L,abort:C}}const H2=[y2,N2,C2];function $2({contextId:l,store:r,registry:c,customSensors:d,enableDefaultSensors:u}){const f=[...u?H2:[],...d||[]],x=E.useState(()=>n2())[0],b=we(function(N,w){ar(N)&&!ar(w)&&x.tryAbandon()},[x]);Wt(function(){let N=r.getState();return r.subscribe(()=>{const L=r.getState();b(N,L),N=L})},[x,r,b]),Wt(()=>x.tryAbandon,[x.tryAbandon]);const h=we(R=>py({lockAPI:x,registry:c,store:r,draggableId:R}),[x,c,r]),p=we((R,N,w)=>U2({lockAPI:x,registry:c,contextId:l,store:r,draggableId:R,forceSensorStop:N||null,sourceEvent:w&&w.sourceEvent?w.sourceEvent:null}),[l,x,c,r]),j=we(R=>z2(l,R),[l]),g=we(R=>{const N=c.draggable.findById(R);return N?N.options:null},[c.draggable]),y=we(function(){x.isClaimed()&&(x.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(Fd()))},[x,r]),S=we(()=>x.isClaimed(),[x]),A=Ge(()=>({canGetLock:h,tryGetLock:p,findClosestDraggableId:j,findOptionsForDraggable:g,tryReleaseLock:y,isLockClaimed:S}),[h,p,j,g,y,S]);for(let R=0;R<f.length;R++)f[R](A)}const q2=l=>({onBeforeCapture:r=>{const c=()=>{l.onBeforeCapture&&l.onBeforeCapture(r)};$d.flushSync(c)},onBeforeDragStart:l.onBeforeDragStart,onDragStart:l.onDragStart,onDragEnd:l.onDragEnd,onDragUpdate:l.onDragUpdate}),G2=l=>({...tr,...l.autoScrollerOptions,durationDampening:{...tr.durationDampening,...l.autoScrollerOptions}});function Hs(l){return l.current||ce(),l.current}function I2(l){const{contextId:r,setCallbacks:c,sensors:d,nonce:u,dragHandleUsageInstructions:f}=l,x=E.useRef(null),b=oy(l),h=we(()=>q2(b.current),[b]),p=we(()=>G2(b.current),[b]),j=Wj(r),g=a2({contextId:r,text:f}),y=Qj(r,u),S=we(oe=>{Hs(x).dispatch(oe)},[]),A=Ge(()=>Cp({publishWhileDragging:RN,updateDroppableScroll:LN,updateDroppableIsEnabled:BN,updateDroppableIsCombineEnabled:UN,collectionStarting:zN},S),[S]),R=Pj(),N=Ge(()=>wj(R,A),[R,A]),w=Ge(()=>qj({scrollWindow:Dj,scrollDroppable:N.scrollDroppable,getAutoScrollerOptions:p,...Cp({move:Xh},S)}),[N.scrollDroppable,S,p]),L=Xj(r),C=Ge(()=>vj({announce:j,autoScroller:w,dimensionMarshal:N,focusMarshal:L,getResponders:h,styleMarshal:y}),[j,w,N,L,h,y]);x.current=C;const M=we(()=>{const oe=Hs(x);oe.getState().phase!=="IDLE"&&oe.dispatch(Fd())},[]),O=we(()=>{const oe=Hs(x).getState();return oe.phase==="DROP_ANIMATING"?!0:oe.phase==="IDLE"?!1:oe.isDragging},[]),v=Ge(()=>({isDragging:O,tryAbort:M}),[O,M]);c(v);const B=we(oe=>ny(Hs(x).getState(),oe),[]),q=we(()=>Gn(Hs(x).getState()),[]),ae=Ge(()=>({marshal:N,focus:L,contextId:r,canLift:B,isMovementAllowed:q,dragHandleUsageInstructionsId:g,registry:R}),[r,N,g,L,B,q,R]);return $2({contextId:r,store:C,registry:R,customSensors:d||null,enableDefaultSensors:l.enableDefaultSensors!==!1}),E.useEffect(()=>M,[M]),Qe.createElement(Xi.Provider,{value:ae},Qe.createElement(m1,{context:su,store:C},l.children))}function V2(){return Qe.useId()}function Y2(l){const r=V2(),c=l.dragHandleUsageInstructions||Ei.dragHandleUsageInstructions;return Qe.createElement(N1,null,d=>Qe.createElement(I2,{nonce:l.nonce,contextId:r,setCallbacks:d,dragHandleUsageInstructions:c,enableDefaultSensors:l.enableDefaultSensors,sensors:l.sensors,onBeforeCapture:l.onBeforeCapture,onBeforeDragStart:l.onBeforeDragStart,onDragStart:l.onDragStart,onDragUpdate:l.onDragUpdate,onDragEnd:l.onDragEnd,autoScrollerOptions:l.autoScrollerOptions},l.children))}const th={dragging:5e3,dropAnimating:4500},Q2=(l,r)=>r?Ys.drop(r.duration):l?Ys.snap:Ys.fluid,K2=(l,r)=>{if(l)return r?er.opacity.drop:er.opacity.combining},X2=l=>l.forceShouldAnimate!=null?l.forceShouldAnimate:l.mode==="SNAP";function Z2(l){const c=l.dimension.client,{offset:d,combineWith:u,dropping:f}=l,x=!!u,b=X2(l),h=!!f,p=h?Ld.drop(d,x):Ld.moveTo(d);return{position:"fixed",top:c.marginBox.top,left:c.marginBox.left,boxSizing:"border-box",width:c.borderBox.width,height:c.borderBox.height,transition:Q2(b,f),transform:p,opacity:K2(x,h),zIndex:h?th.dropAnimating:th.dragging,pointerEvents:"none"}}function P2(l){return{transform:Ld.moveTo(l.offset),transition:l.shouldAnimateDisplacement?void 0:"none"}}function J2(l){return l.type==="DRAGGING"?Z2(l):P2(l)}function F2(l,r,c=St){const d=window.getComputedStyle(r),u=r.getBoundingClientRect(),f=jh(u,d),x=zi(f,c),b={client:f,tagName:r.tagName.toLowerCase(),display:d.display},h={x:f.marginBox.width,y:f.marginBox.height};return{descriptor:l,placeholder:b,displaceBy:h,client:f,page:x}}function W2(l){const r=ru("draggable"),{descriptor:c,registry:d,getDraggableRef:u,canDragInteractiveElements:f,shouldRespectForcePress:x,isEnabled:b}=l,h=Ge(()=>({canDragInteractiveElements:f,shouldRespectForcePress:x,isEnabled:b}),[f,b,x]),p=we(S=>{const A=u();return A||ce(),F2(c,A,S)},[c,u]),j=Ge(()=>({uniqueId:r,descriptor:c,options:h,getDimension:p}),[c,p,h,r]),g=E.useRef(j),y=E.useRef(!0);Wt(()=>(d.draggable.register(g.current),()=>d.draggable.unregister(g.current)),[d.draggable]),Wt(()=>{if(y.current){y.current=!1;return}const S=g.current;g.current=j,d.draggable.update(j,S)},[j,d.draggable])}var cu=Qe.createContext(null);function qi(l){const r=E.useContext(l);return r||ce(),r}function eS(l){l.preventDefault()}const tS=l=>{const r=E.useRef(null),c=we((v=null)=>{r.current=v},[]),d=we(()=>r.current,[]),{contextId:u,dragHandleUsageInstructionsId:f,registry:x}=qi(Xi),{type:b,droppableId:h}=qi(cu),p=Ge(()=>({id:l.draggableId,index:l.index,type:b,droppableId:h}),[l.draggableId,l.index,b,h]),{children:j,draggableId:g,isEnabled:y,shouldRespectForcePress:S,canDragInteractiveElements:A,isClone:R,mapped:N,dropAnimationFinished:w}=l;if(!R){const v=Ge(()=>({descriptor:p,registry:x,getDraggableRef:d,canDragInteractiveElements:A,shouldRespectForcePress:S,isEnabled:y}),[p,x,d,A,S,y]);W2(v)}const L=Ge(()=>y?{tabIndex:0,role:"button","aria-describedby":f,"data-rfd-drag-handle-draggable-id":g,"data-rfd-drag-handle-context-id":u,draggable:!1,onDragStart:eS}:null,[u,f,g,y]),C=we(v=>{N.type==="DRAGGING"&&N.dropping&&v.propertyName==="transform"&&$d.flushSync(w)},[w,N]),M=Ge(()=>{const v=J2(N),B=N.type==="DRAGGING"&&N.dropping?C:void 0;return{innerRef:c,draggableProps:{"data-rfd-draggable-context-id":u,"data-rfd-draggable-id":g,style:v,onTransitionEnd:B},dragHandleProps:L}},[u,L,g,N,C,c]),O=Ge(()=>({draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}),[p.droppableId,p.id,p.index,p.type]);return Qe.createElement(Qe.Fragment,null,j(M,N.snapshot,O))};var hy=(l,r)=>l===r,yy=l=>{const{combine:r,destination:c}=l;return c?c.droppableId:r?r.droppableId:null};const aS=l=>l.combine?l.combine.draggableId:null,nS=l=>l.at&&l.at.type==="COMBINE"?l.at.combine.draggableId:null;function lS(){const l=Nt((u,f)=>({x:u,y:f})),r=Nt((u,f,x=null,b=null,h=null)=>({isDragging:!0,isClone:f,isDropAnimating:!!h,dropAnimation:h,mode:u,draggingOver:x,combineWith:b,combineTargetFor:null})),c=Nt((u,f,x,b,h=null,p=null,j=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:h,combineWith:p,mode:f,offset:u,dimension:x,forceShouldAnimate:j,snapshot:r(f,b,h,p,null)}}));return(u,f)=>{if(ar(u)){if(u.critical.draggable.id!==f.draggableId)return null;const x=u.current.client.offset,b=u.dimensions.draggables[f.draggableId],h=Ft(u.impact),p=nS(u.impact),j=u.forceShouldAnimate;return c(l(x.x,x.y),u.movementMode,b,f.isClone,h,p,j)}if(u.phase==="DROP_ANIMATING"){const x=u.completed;if(x.result.draggableId!==f.draggableId)return null;const b=f.isClone,h=u.dimensions.draggables[f.draggableId],p=x.result,j=p.mode,g=yy(p),y=aS(p),A={duration:u.dropDuration,curve:eu.drop,moveTo:u.newHomeClientOffset,opacity:y?er.opacity.drop:null,scale:y?er.scale.drop:null};return{mapped:{type:"DRAGGING",offset:u.newHomeClientOffset,dimension:h,dropping:A,draggingOver:g,combineWith:y,mode:j,forceShouldAnimate:null,snapshot:r(j,b,g,y,A)}}}return null}}function by(l=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:l,combineWith:null}}const sS={mapped:{type:"SECONDARY",offset:St,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:by(null)}};function rS(){const l=Nt((x,b)=>({x,y:b})),r=Nt(by),c=Nt((x,b=null,h)=>({mapped:{type:"SECONDARY",offset:x,combineTargetFor:b,shouldAnimateDisplacement:h,snapshot:r(b)}})),d=x=>x?c(St,x,!0):null,u=(x,b,h,p)=>{const j=h.displaced.visible[x],g=!!(p.inVirtualList&&p.effected[x]),y=Vi(h),S=y&&y.draggableId===x?b:null;if(!j){if(!g)return d(S);if(h.displaced.invisible[x])return null;const N=Bl(p.displacedBy.point),w=l(N.x,N.y);return c(w,S,!0)}if(g)return d(S);const A=h.displacedBy.point,R=l(A.x,A.y);return c(R,S,j.shouldAnimate)};return(x,b)=>{if(ar(x))return x.critical.draggable.id===b.draggableId?null:u(b.draggableId,x.critical.draggable.id,x.impact,x.afterCritical);if(x.phase==="DROP_ANIMATING"){const h=x.completed;return h.result.draggableId===b.draggableId?null:u(b.draggableId,h.result.draggableId,h.impact,h.afterCritical)}return null}}const iS=()=>{const l=lS(),r=rS();return(d,u)=>l(d,u)||r(d,u)||sS},cS={dropAnimationFinished:Ph},oS=Nh(iS,cS,null,{context:su,areStatePropsEqual:hy})(tS);function gy(l){return qi(cu).isUsingCloneFor===l.draggableId&&!l.isClone?null:Qe.createElement(oS,l)}function ah(l){const r=typeof l.isDragDisabled=="boolean"?!l.isDragDisabled:!0,c=!!l.disableInteractiveElementBlocking,d=!!l.shouldRespectForcePress;return Qe.createElement(gy,Li({},l,{isClone:!1,isEnabled:r,canDragInteractiveElements:c,shouldRespectForcePress:d}))}const vy=l=>r=>l===r,dS=vy("scroll"),uS=vy("auto"),nh=(l,r)=>r(l.overflowX)||r(l.overflowY),fS=l=>{const r=window.getComputedStyle(l),c={overflowX:r.overflowX,overflowY:r.overflowY};return nh(c,dS)||nh(c,uS)},xS=()=>!1,Ny=l=>l==null?null:l===document.body?xS()?l:null:l===document.documentElement?null:fS(l)?l:Ny(l.parentElement);var Hd=l=>({x:l.scrollLeft,y:l.scrollTop});const jy=l=>l?window.getComputedStyle(l).position==="fixed"?!0:jy(l.parentElement):!1;var mS=l=>{const r=Ny(l),c=jy(l);return{closestScrollable:r,isFixedOnPage:c}},pS=({descriptor:l,isEnabled:r,isCombineEnabled:c,isFixedOnPage:d,direction:u,client:f,page:x,closest:b})=>{const h=(()=>{if(!b)return null;const{scrollSize:y,client:S}=b,A=ey({scrollHeight:y.scrollHeight,scrollWidth:y.scrollWidth,height:S.paddingBox.height,width:S.paddingBox.width});return{pageMarginBox:b.page.marginBox,frameClient:S,scrollSize:y,shouldClipSubject:b.shouldClipSubject,scroll:{initial:b.scroll,current:b.scroll,max:A,diff:{value:St,displacement:St}}}})(),p=u==="vertical"?Kd:_h,j=Rl({page:x,withPlaceholder:null,axis:p,frame:h});return{descriptor:l,isCombineEnabled:c,isFixedOnPage:d,axis:p,isEnabled:r,client:f,page:x,frame:h,subject:j}};const hS=(l,r)=>{const c=Sh(l);if(!r||l!==r)return c;const d=c.paddingBox.top-r.scrollTop,u=c.paddingBox.left-r.scrollLeft,f=d+r.scrollHeight,x=u+r.scrollWidth,h=Id({top:d,right:x,bottom:f,left:u},c.border);return Vd({borderBox:h,margin:c.margin,border:c.border,padding:c.padding})};var yS=({ref:l,descriptor:r,env:c,windowScroll:d,direction:u,isDropDisabled:f,isCombineEnabled:x,shouldClipSubject:b})=>{const h=c.closestScrollable,p=hS(l,h),j=zi(p,d),g=(()=>{if(!h)return null;const S=Sh(h),A={scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth};return{client:S,page:zi(S,d),scroll:Hd(h),scrollSize:A,shouldClipSubject:b}})();return pS({descriptor:r,isEnabled:!f,isCombineEnabled:x,isFixedOnPage:c.isFixedOnPage,direction:u,client:p,page:j,closest:g})};const bS={passive:!1},gS={passive:!0};var lh=l=>l.shouldPublishImmediately?bS:gS;const Ci=l=>l&&l.env.closestScrollable||null;function vS(l){const r=E.useRef(null),c=qi(Xi),d=ru("droppable"),{registry:u,marshal:f}=c,x=oy(l),b=Ge(()=>({id:l.droppableId,type:l.type,mode:l.mode}),[l.droppableId,l.mode,l.type]),h=E.useRef(b),p=Ge(()=>Nt((M,O)=>{r.current||ce();const v={x:M,y:O};f.updateDroppableScroll(b.id,v)}),[b.id,f]),j=we(()=>{const M=r.current;return!M||!M.env.closestScrollable?St:Hd(M.env.closestScrollable)},[]),g=we(()=>{const M=j();p(M.x,M.y)},[j,p]),y=Ge(()=>Ps(g),[g]),S=we(()=>{const M=r.current,O=Ci(M);if(M&&O||ce(),M.scrollOptions.shouldPublishImmediately){g();return}y()},[y,g]),A=we((M,O)=>{r.current&&ce();const v=x.current,B=v.getDroppableRef();B||ce();const q=mS(B),ae={ref:B,descriptor:b,env:q,scrollOptions:O};r.current=ae;const oe=yS({ref:B,descriptor:b,env:q,windowScroll:M,direction:v.direction,isDropDisabled:v.isDropDisabled,isCombineEnabled:v.isCombineEnabled,shouldClipSubject:!v.ignoreContainerClipping}),De=q.closestScrollable;return De&&(De.setAttribute(Jp.contextId,c.contextId),De.addEventListener("scroll",S,lh(ae.scrollOptions))),oe},[c.contextId,b,S,x]),R=we(()=>{const M=r.current,O=Ci(M);return M&&O||ce(),Hd(O)},[]),N=we(()=>{const M=r.current;M||ce();const O=Ci(M);r.current=null,O&&(y.cancel(),O.removeAttribute(Jp.contextId),O.removeEventListener("scroll",S,lh(M.scrollOptions)))},[S,y]),w=we(M=>{const O=r.current;O||ce();const v=Ci(O);v||ce(),v.scrollTop+=M.y,v.scrollLeft+=M.x},[]),L=Ge(()=>({getDimensionAndWatchScroll:A,getScrollWhileDragging:R,dragStopped:N,scroll:w}),[N,A,R,w]),C=Ge(()=>({uniqueId:d,descriptor:b,callbacks:L}),[L,b,d]);Wt(()=>(h.current=C.descriptor,u.droppable.register(C),()=>{r.current&&N(),u.droppable.unregister(C)}),[L,b,N,C,f,u.droppable]),Wt(()=>{r.current&&f.updateDroppableIsEnabled(h.current.id,!l.isDropDisabled)},[l.isDropDisabled,f]),Wt(()=>{r.current&&f.updateDroppableIsCombineEnabled(h.current.id,l.isCombineEnabled)},[l.isCombineEnabled,f])}function Cd(){}const sh={width:0,height:0,margin:A1},NS=({isAnimatingOpenOnMount:l,placeholder:r,animate:c})=>l||c==="close"?sh:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin},jS=({isAnimatingOpenOnMount:l,placeholder:r,animate:c})=>{const d=NS({isAnimatingOpenOnMount:l,placeholder:r,animate:c});return{display:r.display,boxSizing:"border-box",width:d.width,height:d.height,marginTop:d.margin.top,marginRight:d.margin.right,marginBottom:d.margin.bottom,marginLeft:d.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:c!=="none"?Ys.placeholder:null}},SS=l=>{const r=E.useRef(null),c=we(()=>{r.current&&(clearTimeout(r.current),r.current=null)},[]),{animate:d,onTransitionEnd:u,onClose:f,contextId:x}=l,[b,h]=E.useState(l.animate==="open");E.useEffect(()=>b?d!=="open"?(c(),h(!1),Cd):r.current?Cd:(r.current=setTimeout(()=>{r.current=null,h(!1)}),c):Cd,[d,b,c]);const p=we(g=>{g.propertyName==="height"&&(u(),d==="close"&&f())},[d,f,u]),j=jS({isAnimatingOpenOnMount:b,animate:l.animate,placeholder:l.placeholder});return Qe.createElement(l.placeholder.tagName,{style:j,"data-rfd-placeholder-context-id":x,onTransitionEnd:p,ref:l.innerRef})};var wS=Qe.memo(SS);class DS extends Qe.PureComponent{constructor(...r){super(...r),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(r,c){return r.shouldAnimate?r.on?{isVisible:!0,data:r.on,animate:"open"}:c.isVisible?{isVisible:!0,data:c.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!r.on,data:r.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const r={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(r)}}const CS=l=>{const r=E.useContext(Xi);r||ce();const{contextId:c,isMovementAllowed:d}=r,u=E.useRef(null),f=E.useRef(null),{children:x,droppableId:b,type:h,mode:p,direction:j,ignoreContainerClipping:g,isDropDisabled:y,isCombineEnabled:S,snapshot:A,useClone:R,updateViewportMaxScroll:N,getContainerForClone:w}=l,L=we(()=>u.current,[]),C=we((De=null)=>{u.current=De},[]);we(()=>f.current,[]);const M=we((De=null)=>{f.current=De},[]),O=we(()=>{d()&&N({maxScroll:ay()})},[d,N]);vS({droppableId:b,type:h,mode:p,direction:j,isDropDisabled:y,isCombineEnabled:S,ignoreContainerClipping:g,getDroppableRef:L});const v=Ge(()=>Qe.createElement(DS,{on:l.placeholder,shouldAnimate:l.shouldAnimatePlaceholder},({onClose:De,data:W,animate:ue})=>Qe.createElement(wS,{placeholder:W,onClose:De,innerRef:M,animate:ue,contextId:c,onTransitionEnd:O})),[c,O,l.placeholder,l.shouldAnimatePlaceholder,M]),B=Ge(()=>({innerRef:C,placeholder:v,droppableProps:{"data-rfd-droppable-id":b,"data-rfd-droppable-context-id":c}}),[c,b,v,C]),q=R?R.dragging.draggableId:null,ae=Ge(()=>({droppableId:b,type:h,isUsingCloneFor:q}),[b,q,h]);function oe(){if(!R)return null;const{dragging:De,render:W}=R,ue=Qe.createElement(gy,{draggableId:De.draggableId,index:De.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(he,de)=>W(he,de,De));return x0.createPortal(ue,w())}return Qe.createElement(cu.Provider,{value:ae},x(B,A),oe())};function ES(){return document.body||ce(),document.body}const rh={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:ES},Sy=l=>{let r={...l},c;for(c in rh)l[c]===void 0&&(r={...r,[c]:rh[c]});return r},Ed=(l,r)=>l===r.droppable.type,ih=(l,r)=>r.draggables[l.draggable.id],AS=()=>{const l={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r={...l,shouldAnimatePlaceholder:!1},c=Nt(f=>({draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}})),d=Nt((f,x,b,h,p,j)=>{const g=p.descriptor.id;if(p.descriptor.droppableId===f){const A=j?{render:j,dragging:c(p.descriptor)}:null,R={isDraggingOver:b,draggingOverWith:b?g:null,draggingFromThisWith:g,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:R,useClone:A}}if(!x)return r;if(!h)return l;const S={isDraggingOver:b,draggingOverWith:g,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:S,useClone:null}});return(f,x)=>{const b=Sy(x),h=b.droppableId,p=b.type,j=!b.isDropDisabled,g=b.renderClone;if(ar(f)){const y=f.critical;if(!Ed(p,y))return r;const S=ih(y,f.dimensions),A=Ft(f.impact)===h;return d(h,j,A,A,S,g)}if(f.phase==="DROP_ANIMATING"){const y=f.completed;if(!Ed(p,y.critical))return r;const S=ih(y.critical,f.dimensions);return d(h,j,yy(y.result)===h,Ft(y.impact)===h,S,g)}if(f.phase==="IDLE"&&f.completed&&!f.shouldFlush){const y=f.completed;if(!Ed(p,y.critical))return r;const S=Ft(y.impact)===h,A=!!(y.impact.at&&y.impact.at.type==="COMBINE"),R=y.critical.droppable.id===h;return S?A?l:r:R?l:r}return r}},TS={updateViewportMaxScroll:$N},ch=Nh(AS,TS,(l,r,c)=>({...Sy(c),...l,...r}),{context:su,areStatePropsEqual:hy})(CS),oh={1L:75,1L:80,2L:155,1L:80,2L:155,:90,:20,:20,:20,:20,:18.3,:20,:16.7,:20,:18.3,:45,:70,:70,:70,:70,:55,471:30,1795:75,:27.5,:25,:25,:30,:30,:27.5,:25,:20,:10,:20,:20,:25,:20,:20,:20,:20,:10,:20,:20,:20,:20,:20,:16.7,:20,1L:70,2L:140,:50,:70,:50,:20,400:16.7,1000:25,1000:40,2000:40,2000:60,1000:60,2000:100,500:50,1000:60},$s={1L:20,1L:20,2L:12,1L:20,2L:12,:20,:70,:70,:70,:12,:24,:20,:108,:40,:40,:15,:4,:4,:4,:4,:16,471:30,1795:9,:60,:20,:24,:15,:15,:24,:25,:15,:15,:15,:15,:24,:24,:24,:24,:15,:15,:15,:15,:15,:15,:15,:24,:15},Pi=(l,r)=>[...l].sort((c,d)=>{const u=c.sortWeight!==void 0&&c.sortWeight!==null?Number(c.sortWeight):NaN,f=d.sortWeight!==void 0&&d.sortWeight!==null?Number(d.sortWeight):NaN,x=!isNaN(u),b=!isNaN(f);return x&&b&&u!==f?u-f:x&&!b?-1:!x&&b?1:String(c[r]||"").localeCompare(String(d[r]||""),"zh-Hant")}),tt=(l=new Date)=>{const r=new Date(l);return`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`},Is=l=>{if(typeof l!="string"||!l.trim().startsWith("="))return l;try{const c=l.trim().substring(1).replace(/[^0-9+\-*/(). ]/g,"");if(!c.trim())return l;const d=new Function(`return ${c}`)();return typeof d=="number"&&isFinite(d)?Number(d.toFixed(2)).toString():l}catch(r){return console.warn("Formula evaluation failed:",r),l}},qe=l=>{if(typeof l=="string"&&l.trim().startsWith("="))return 0;const r=Number(l);return isNaN(r)?0:r};function kS({user:l,apiUrl:r,logActivity:c}){const[d,u]=E.useState([]),[f,x]=E.useState({1e3:0,500:0,100:0,50:0,10:0,5:0,1:0}),[b,h]=E.useState(5e3),[p,j]=E.useState({stall:0,cleaning:0,electricity:0,gas:0,parking:0,goods:0,bags:0,others:0,linePay:0,serviceFee:0}),[g,y]=E.useState(""),[S,A]=E.useState("CASH"),[R,N]=E.useState(!1),[w,L]=E.useState(!1),[C,M]=E.useState(!1),[O,v]=E.useState(null),B=E.useCallback(async()=>{try{const K=await ke(r,"getProducts",{},l.token);if(console.log("Sales Page - Raw Products Data:",K),Array.isArray(K)){const H=K.filter(T=>(Number(T.stock)||0)>0||(Number(T.originalStock)||0)>0);let me=Pi(H,"name").map(T=>{const re=Number(T.price)||0,fe=oh[T.name]!==void 0?oh[T.name]:null,ge=`last_price_${T.id}`,Me=localStorage.getItem(ge);let Se=re;return fe!==null&&(Se=fe),Me!==null&&(Se=Number(Me)),{id:T.id,name:T.name,stock:Number(T.stock)||0,originalStock:Number(T.originalStock)||0,picked:0,original:0,returns:0,sold:0,price:Se,subtotal:0,sortWeight:T.sortWeight,fromSheet:T._fromSheet}});const pe=sessionStorage.getItem("clonedSale");if(pe)try{const T=JSON.parse(pe);console.log("Sales Page - Applying Cloned Data:",T),T.customer&&y(T.customer),T.paymentMethod&&A(T.paymentMethod),T.reserve!==void 0&&h(Number(T.reserve)),T.cashCounts&&x(re=>({...re,...T.cashCounts})),T.expenses&&j(re=>({...re,...T.expenses})),me=me.map(re=>{const fe=T.salesData.find(ge=>String(ge.productId)===String(re.id));if(fe){const ge={...re,picked:fe.picked,original:fe.original,returns:fe.returns,price:fe.unitPrice};return ge.sold=qe(ge.picked)+qe(ge.original)-qe(ge.returns),ge.subtotal=ge.sold*qe(ge.price),ge}return re})}catch(T){console.error("Failed to parse cloned data",T)}u(me)}else console.error("Sales Page - Data is not an array:",K)}catch(K){console.error("Fetch products failed",K),alert(": "+K.message)}},[r,l.token]);E.useEffect(()=>{(async()=>l?.token&&await B())()},[l.token,B]);const q=(K,H,te)=>{u(me=>me.map(pe=>{if(pe.id!==K)return pe;if(typeof te=="string"&&te.trim().startsWith("="))return{...pe,[H]:te};let T=H==="picked"?te:pe.picked,re=H==="original"?te:pe.original,fe=H==="returns"?te:pe.returns,ge=H==="price"?te:pe.price;H==="price"&&localStorage.setItem(`last_price_${K}`,qe(ge).toString()),qe(T)>pe.stock&&(T=pe.stock),qe(T)<0&&(T=0),qe(re)>pe.originalStock&&(re=pe.originalStock),qe(re)<0&&(re=0);const Me=qe(T)+qe(re);qe(fe)>Me&&(fe=Me),qe(fe)<0&&(fe=0);const Se={...pe,picked:T,original:re,returns:fe,price:ge};return Se.sold=qe(Se.picked)+qe(Se.original)-qe(Se.returns),Se.subtotal=Se.sold*(qe(Se.price)||0),Se}))},ae=(K,H,te)=>{if(typeof te=="string"&&te.trim().startsWith("=")){const me=Is(te);q(K,H,me)}else q(K,H,qe(te))},oe=(K,H)=>{x(te=>({...te,[K]:(typeof H=="string"&&H.trim().startsWith("="),H)}))},De=(K,H)=>{if(typeof H=="string"&&H.trim().startsWith("=")){const te=Is(H);oe(K,te)}else oe(K,qe(H))},W=K=>{h((typeof K=="string"&&K.trim().startsWith("="),K))},ue=K=>{if(typeof K=="string"&&K.trim().startsWith("=")){const H=Is(K);W(H)}else W(qe(K))},he=(K,H)=>{j(te=>({...te,[K]:(typeof H=="string"&&H.trim().startsWith("="),H)}))},de=(K,H)=>{if(typeof H=="string"&&H.trim().startsWith("=")){const te=Is(H);he(K,te)}else he(K,qe(H))},G=K=>{if(!K.destination)return;const H=Array.from(d),[te]=H.splice(K.source.index,1);H.splice(K.destination.index,0,te),u(H)},k=async()=>{if(C){N(!0);try{const K=d.map(te=>te.id);(await ke(r,"updateProductSortOrder",{productIds:K},l.token)).success&&alert("")}catch(K){console.error("Failed to sync sort order:",K),alert(""+K.message)}finally{N(!1),M(!1)}}else M(!0)},Z=K=>{const H=document.getElementById(K);H&&(H.focus(),H.select?.(),H.scrollIntoView({block:"nearest",behavior:"smooth"}))},ne=K=>{if(!O)return;const H=document.getElementById(O.id);if(H){const te=H.selectionStart,me=H.selectionEnd,pe=H.value,T=pe.substring(0,te),re=pe.substring(me,pe.length),fe=T+K+re;O.type==="row"?q(O.rowId,O.field,fe):O.type==="cash"?oe(O.denom,fe):O.type==="expense"?he(O.key,fe):O.type==="reserve"&&W(fe);const ge=te+K.length;setTimeout(()=>{H.selectionStart=H.selectionEnd=ge,H.focus()},0)}},xe=({inputId:K})=>a.jsx("div",{className:"flex gap-1 mb-2 overflow-x-auto pb-1 no-scrollbar",children:["=","+","-","*",""].map(H=>a.jsx("button",{onMouseDown:te=>te.preventDefault(),onClick:()=>ne(H===""?"/":H),className:"flex-1 h-10 min-w-[44px] rounded-lg bg-white border border-gray-200 text-[#800020] font-bold text-2xl active:bg-gray-100 shadow-sm transition-all flex items-center justify-center pt-0.5",children:H},H))}),_=(K,H,te,me="input-")=>{if(!["Enter","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(K.key))return;K.key.startsWith("Arrow")&&K.preventDefault();const T=["picked","original","returns","price"],re=T.indexOf(te);if(K.key==="Enter"){K.preventDefault();const ge=["picked","original","returns","price"],Me=ge.indexOf(te);if(Me<ge.length-1&&Me!==-1){const Se=ge[Me+1];Z(`${me}${H}-${Se}`)}else H<d.length-1?Z(`${me}${H+1}-picked`):Z("input-cash-1000");return}let fe=null;K.key==="ArrowUp"?H>0&&(fe=`${me}${H-1}-${te}`):K.key==="ArrowDown"?H<d.length-1?fe=`${me}${H+1}-${te}`:fe="input-cash-1000":K.key==="ArrowLeft"?re>0?fe=`${me}${H}-${T[re-1]}`:H>0&&(fe=`${me}${H-1}-price`):K.key==="ArrowRight"&&(re<T.length-1?fe=`${me}${H}-${T[re+1]}`:H<d.length-1?fe=`${me}${H+1}-picked`:fe="input-cash-1000"),fe&&Z(fe)},Q=(K,H={})=>{const{next:te,prev:me,up:pe,down:T,left:re,right:fe}=H;if(!["Enter","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(K.key))return;K.key.startsWith("Arrow")&&K.preventDefault();let Me=null;K.key==="Enter"?(K.preventDefault(),Me=te):K.key==="ArrowDown"?Me=T||te:K.key==="ArrowUp"?Me=pe||me:K.key==="ArrowLeft"?Me=re||me:K.key==="ArrowRight"&&(Me=fe||te),Me?Z(Me):(K.key==="ArrowUp"||K.key==="ArrowLeft")&&d.length>0&&Z(`input-${d.length-1}-price`)},J=d.reduce((K,H)=>K+(H.subtotal||0),0),ve=Object.entries(f).reduce((K,[H,te])=>K+Number(H)*qe(te),0)-qe(b),je=qe(p.stall)+qe(p.cleaning)+qe(p.electricity)+qe(p.gas)+qe(p.parking)+qe(p.goods)+qe(p.bags)+qe(p.others)+qe(p.linePay),se=S==="CREDIT",ie=se?J:ve+je+qe(p.serviceFee)-J,be=async()=>{console.log("Save button clicked");try{if(!String(g||"").trim()){alert("");const me=document.getElementById("input-location");me&&me.focus();return}if(!l||!l.username){console.error("User info missing:",l),alert("");return}const H={salesRep:l.username,customer:g,paymentMethod:S,salesData:d.map(me=>({productId:me.id,picked:me.picked,original:me.original,returns:me.returns,sold:me.sold,unitPrice:me.price})),cashData:{totalCash:S==="CREDIT"?0:ve,reserve:b},expenseData:{...p,finalTotal:ie},cashCounts:f};N(!0);const te=await ke(r,"saveSales",H,l.token);if(!te.success)throw new Error(te.error||"Unknown error from backend");c&&c({actionType:"DATA_EDIT",page:"",details:JSON.stringify({customer:g,paymentMethod:S,totalAmount:se?J:ie,productCount:d.filter(me=>me.sold>0).length})}),alert(" Google Sheet"),sessionStorage.removeItem("clonedSale"),window.location.reload()}catch(K){console.error("handleSubmit error:",K),alert(": "+(K.message||K.toString()))}finally{N(!1)}},Ee=async()=>{if(d.length===0){alert("");return}L(!0);try{const K={templateId:"Template_",data:{date:new Date().toISOString(),location:g,salesRep:l.username,totalSalesAmount:se?J:ie,totalCashCalc:ve,finalTotal:ie,reserve:b,expenses:p,expenses:p,rows:d.map(te=>({name:te.name,stock:te.stock,originalStock:te.originalStock,picked:te.picked,original:te.original,returns:te.returns,sold:te.sold,price:te.price,subtotal:te.subtotal}))}},H=await ke(r,"generatePdf",K,l.token);if(H.success&&H.pdfBase64){const te=atob(H.pdfBase64),me=new Array(te.length);for(let fe=0;fe<te.length;fe++)me[fe]=te.charCodeAt(fe);const pe=new Uint8Array(me),T=new Blob([pe],{type:"application/pdf"}),re=URL.createObjectURL(T);window.open(re,"_blank")}else throw new Error(H.error||"Unknown error")}catch(K){console.error("Print failed:",K),alert(": "+K.message)}finally{L(!1)}};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 h-full overflow-y-auto xl:overflow-hidden",children:[R&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)]",children:"..."})]}),a.jsxs("div",{className:"xl:col-span-2 glass-panel p-6 overflow-hidden flex flex-col h-auto min-h-[60vh] xl:h-[calc(100vh-10rem)]",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[a.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-[var(--text-primary)]",children:[a.jsx(it,{size:20,className:"text-[var(--accent-blue)]"})," "]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-4 w-full md:w-auto",children:[a.jsxs("div",{className:"flex bg-[var(--bg-tertiary)] rounded-lg p-1 border border-[var(--border-primary)] self-start md:self-auto",children:[a.jsx("button",{onClick:()=>A("CASH"),className:`px-3 py-1 text-xs font-bold rounded-md transition-all ${S==="CASH"?"bg-emerald-500 text-white shadow-sm":"text-[var(--text-tertiary)] hover:text-[var(--text-secondary)]"}`,children:""}),a.jsx("button",{onClick:()=>A("CREDIT"),className:`px-3 py-1 text-xs font-bold rounded-md transition-all ${S==="CREDIT"?"bg-amber-500 text-white shadow-sm":"text-[var(--text-tertiary)] hover:text-[var(--text-secondary)]"}`,children:""})]}),a.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[a.jsx("label",{className:"text-sm text-[var(--text-secondary)] font-bold whitespace-nowrap",children:":"}),a.jsx("input",{id:"input-location",type:"text",className:"input-field py-1 px-3 w-full md:w-48",placeholder:"...",value:g,onChange:K=>y(K.target.value),onKeyDown:K=>{K.key==="Enter"&&(K.preventDefault(),Z("input-m-0-picked")||Z("input-0-picked"))}})]}),a.jsxs("button",{onClick:k,className:`flex items-center gap-2 px-3 py-1 text-xs font-bold rounded-lg border transition-all ${C?"bg-indigo-500 text-white border-indigo-500":"bg-[var(--bg-secondary)] text-[var(--text-secondary)] border-[var(--border-primary)] hover:border-[var(--accent-blue)]"}`,children:[a.jsx(_v,{size:16}),C?"":""]}),a.jsxs("button",{onClick:Ee,disabled:w,className:`flex items-center gap-2 px-3 py-1 text-xs font-bold rounded-lg border transition-all ${w?"bg-gray-400 text-white cursor-not-allowed":"bg-[var(--bg-secondary)] text-[var(--text-secondary)] border-[var(--border-primary)] hover:border-[var(--accent-blue)]"}`,children:[a.jsx(Yv,{size:16}),w?"...":""]})]})]}),a.jsx("div",{className:"flex-1 overflow-auto",children:a.jsxs(Y2,{onDragEnd:G,children:[a.jsx(ch,{droppableId:"mobile-rows",isDropDisabled:!C,children:K=>a.jsxs("div",{...K.droppableProps,ref:K.innerRef,className:"md:hidden space-y-4",children:[d.map((H,te)=>a.jsx(ah,{draggableId:String(H.id),index:te,isDragDisabled:!C,children:(me,pe)=>a.jsxs("div",{ref:me.innerRef,...me.draggableProps,className:`bg-[var(--bg-secondary)] rounded-xl p-4 border border-[var(--border-primary)] ${pe.isDragging?"shadow-2xl z-50 ring-2 ring-indigo-500":""}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[C&&a.jsx("div",{...me.dragHandleProps,className:"text-[var(--text-tertiary)] cursor-grab active:cursor-grabbing",children:a.jsx(bp,{size:20})}),a.jsx("div",{className:"font-bold text-[var(--text-primary)] text-lg leading-tight",children:H.name})]}),a.jsxs("div",{className:"text-[10px] font-mono bg-[var(--bg-tertiary)] px-2 py-1 rounded border border-[var(--border-primary)] whitespace-nowrap",children:[a.jsx("span",{className:"text-blue-500 font-bold",children:H.stock}),a.jsx("span",{className:"text-[var(--text-tertiary)] mx-0.5",children:"/"}),a.jsx("span",{className:"text-orange-500 font-bold",children:H.originalStock||0})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 mb-3 border border-gray-100 min-h-[120px]",children:[a.jsx(xe,{}),a.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[a.jsxs("div",{className:"flex flex-col gap-1 min-h-[56px]",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] text-center font-bold",children:""}),a.jsx("input",{id:`input-m-${te}-picked`,type:"text",inputMode:"decimal",className:"input-field text-center p-2 text-base font-bold bg-white",value:H.picked||"",onChange:T=>q(H.id,"picked",T.target.value),onBlur:T=>ae(H.id,"picked",T.target.value),onFocus:()=>v({id:`input-m-${te}-picked`,type:"row",rowId:H.id,field:"picked"}),onKeyDown:T=>_(T,te,"picked","input-m-"),disabled:C})]}),a.jsxs("div",{className:"flex flex-col gap-1 min-h-[56px]",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] text-center font-bold",children:""}),a.jsx("input",{id:`input-m-${te}-original`,type:"text",inputMode:"decimal",className:"input-field text-center p-2 text-base font-bold bg-white",value:H.original||"",onChange:T=>q(H.id,"original",T.target.value),onBlur:T=>ae(H.id,"original",T.target.value),onFocus:()=>v({id:`input-m-${te}-original`,type:"row",rowId:H.id,field:"original"}),onKeyDown:T=>_(T,te,"original","input-m-"),disabled:C})]}),a.jsxs("div",{className:"flex flex-col gap-1 min-h-[56px]",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] text-center font-bold",children:""}),a.jsx("input",{id:`input-m-${te}-returns`,type:"text",inputMode:"decimal",className:"input-field text-center p-2 text-base font-bold text-red-600 bg-white",value:H.returns||"",onChange:T=>q(H.id,"returns",T.target.value),onBlur:T=>ae(H.id,"returns",T.target.value),onFocus:()=>v({id:`input-m-${te}-returns`,type:"row",rowId:H.id,field:"returns"}),onKeyDown:T=>_(T,te,"returns","input-m-"),disabled:C})]}),a.jsxs("div",{className:"flex flex-col gap-1 min-h-[56px]",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] text-center font-bold",children:""}),a.jsx("input",{id:`input-m-${te}-price`,type:"text",inputMode:"decimal",className:"input-field text-center p-2 text-base font-bold bg-white",value:H.price,onChange:T=>q(H.id,"price",T.target.value),onBlur:T=>ae(H.id,"price",T.target.value),onFocus:()=>v({id:`input-m-${te}-price`,type:"row",rowId:H.id,field:"price"}),onKeyDown:T=>_(T,te,"price","input-m-"),disabled:C})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-[var(--border-primary)]",children:[a.jsxs("div",{className:"text-xs text-[var(--text-secondary)]",children:[": ",a.jsx("span",{className:"font-bold text-blue-500 text-sm ml-1",children:H.sold})]}),a.jsxs("div",{className:"text-sm font-bold text-rose-600 font-mono",children:[a.jsx("span",{className:"text-xs text-[var(--text-tertiary)] font-normal mr-1",children:""}),"$",H.subtotal?.toLocaleString()]})]})]})},`${H.id}-${te}`)),K.placeholder]})}),a.jsxs("table",{className:"hidden md:table w-full text-left border-collapse",children:[a.jsx("thead",{className:"sticky top-0 bg-[var(--bg-secondary)] z-10 text-[var(--text-secondary)] text-xs uppercase font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 w-10"}),a.jsx("th",{className:"p-3",children:""}),a.jsx("th",{className:"p-3 w-20",children:""}),a.jsx("th",{className:"p-3 w-24",children:"(+)"}),a.jsx("th",{className:"p-3 w-24",children:"(+)"}),a.jsx("th",{className:"p-3 w-24",children:"(-)"}),a.jsx("th",{className:"p-3 w-20 text-center",children:""}),a.jsx("th",{className:"p-3 w-24",children:""}),a.jsx("th",{className:"p-3 w-28 text-right",children:""})]})}),a.jsx(ch,{droppableId:"desktop-rows",isDropDisabled:!C,children:K=>a.jsxs("tbody",{...K.droppableProps,ref:K.innerRef,className:"divide-y divide-[var(--border-primary)]",children:[d.map((H,te)=>a.jsx(ah,{draggableId:String(H.id),index:te,isDragDisabled:!C,children:(me,pe)=>a.jsxs("tr",{ref:me.innerRef,...me.draggableProps,className:`hover:bg-[var(--bg-hover)] transition-colors ${pe.isDragging?"bg-[var(--bg-tertiary)] shadow-xl z-50":""}`,children:[a.jsx("td",{className:"p-3",children:C&&a.jsx("div",{...me.dragHandleProps,className:"text-[var(--text-tertiary)] cursor-grab active:cursor-grabbing",children:a.jsx(bp,{size:16})})}),a.jsx("td",{className:"p-3 font-medium text-[var(--text-primary)]",children:H.name}),a.jsxs("td",{className:"p-3 text-[var(--text-secondary)] font-mono tracking-wider",children:[a.jsx("span",{className:"text-blue-500",children:H.stock}),a.jsx("span",{className:"text-[var(--text-tertiary)] mx-1",children:"/"}),a.jsx("span",{className:"text-orange-500",children:H.originalStock||0})]}),a.jsx("td",{className:"p-3",children:a.jsx("input",{id:`input-${te}-picked`,type:"text",className:"input-field text-center p-1",value:H.picked||"",onChange:T=>q(H.id,"picked",T.target.value),onBlur:T=>ae(H.id,"picked",T.target.value),onKeyDown:T=>_(T,te,"picked"),disabled:C})}),a.jsx("td",{className:"p-3",children:a.jsx("input",{id:`input-${te}-original`,type:"text",className:"input-field text-center p-1",value:H.original||"",onChange:T=>q(H.id,"original",T.target.value),onBlur:T=>ae(H.id,"original",T.target.value),onKeyDown:T=>_(T,te,"original"),disabled:C})}),a.jsx("td",{className:"p-3",children:a.jsx("input",{id:`input-${te}-returns`,type:"text",className:"input-field text-center p-1 text-red-600",value:H.returns||"",onChange:T=>q(H.id,"returns",T.target.value),onBlur:T=>ae(H.id,"returns",T.target.value),onKeyDown:T=>_(T,te,"returns"),disabled:C})}),a.jsx("td",{className:"p-3 text-center font-bold text-blue-500",children:H.sold}),a.jsx("td",{className:"p-3",children:a.jsx("input",{id:`input-${te}-price`,type:"text",className:"input-field text-center p-1 w-20",value:H.price,onChange:T=>q(H.id,"price",T.target.value),onBlur:T=>ae(H.id,"price",T.target.value),onKeyDown:T=>_(T,te,"price"),disabled:C})}),a.jsxs("td",{className:"p-3 text-right font-mono text-rose-600",children:["$",H.subtotal?.toLocaleString()]})]})},`${H.id}-${te}`)),K.placeholder]})})]})]})}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-primary)] flex justify-between items-center bg-[var(--bg-secondary)] p-4 rounded-lg",children:[a.jsx("span",{className:"text-[var(--text-secondary)]",children:" ()"}),a.jsxs("span",{className:"text-2xl font-bold text-rose-600",children:["$",J.toLocaleString()]})]})]}),a.jsxs("div",{className:"flex flex-col h-auto xl:h-[calc(100vh-10rem)] gap-6",children:[a.jsxs("div",{className:`flex-1 xl:overflow-y-auto pr-0 xl:pr-2 space-y-6 transition-opacity ${se?"opacity-50 pointer-events-none grayscale":""}`,children:[a.jsxs("div",{className:"glass-panel p-6 relative",children:[se&&a.jsx("div",{className:"absolute inset-0 z-50 cursor-not-allowed"}),a.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2 text-[var(--text-primary)]",children:[a.jsx(cv,{size:20,className:"text-amber-500"})," "]}),a.jsxs("div",{className:"space-y-3",children:[[1e3,500,100,50,10,5,1].map((K,H,te)=>{const me=`input-cash-${K}`,pe=H<te.length-1?`input-cash-${te[H+1]}`:"input-reserve",T=H>0?`input-cash-${te[H-1]}`:null;return a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"w-12 text-[var(--text-secondary)] font-mono text-right",children:K}),a.jsx("span",{className:"text-[var(--text-tertiary)]",children:"x"}),a.jsx("input",{id:me,type:"text",inputMode:"decimal",className:"input-field flex-1",placeholder:"0",value:f[K]||"",onChange:re=>oe(K,re.target.value),onBlur:re=>De(K,re.target.value),onFocus:()=>v({id:me,type:"cash",denom:K}),onKeyDown:re=>Q(re,{next:pe,prev:T,right:pe,left:T}),disabled:se}),a.jsxs("span",{className:"w-20 text-right font-mono text-[var(--text-secondary)]",children:["$",(K*qe(f[K])).toLocaleString()]})]},K)}),a.jsxs("div",{className:"border-t border-[var(--border-primary)] my-2 pt-2 flex items-center gap-4 text-red-500",children:[a.jsx("span",{className:"w-12 text-right",children:""}),a.jsx("span",{className:"text-[var(--text-tertiary)]",children:"-"}),a.jsx("input",{id:"input-reserve",type:"text",inputMode:"decimal",className:"input-field flex-1 border-red-900/50 focus:ring-red-500",value:b,onChange:K=>W(K.target.value),onBlur:K=>ue(K.target.value),onFocus:()=>v({id:"input-reserve",type:"reserve"}),onKeyDown:K=>Q(K,{next:"input-expense-stall",prev:"input-cash-1",right:"input-expense-stall",left:"input-cash-1"}),disabled:se})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-3 rounded flex justify-between items-center border border-[var(--border-primary)]",children:[a.jsx("span",{className:"text-[var(--text-secondary)]",children:""}),a.jsxs("span",{className:"text-xl font-bold text-amber-500",children:["$",(se?0:ve).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"glass-panel p-6 relative",children:[se&&a.jsx("div",{className:"absolute inset-0 z-50 cursor-not-allowed"}),a.jsx("h2",{className:"text-lg font-bold mb-4 text-rose-500",children:""}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:["stall:","cleaning:","electricity:","gas:","parking:","goods:","bags:","others:"].map((K,H,te)=>{const[me,pe]=K.split(":"),T=`input-expense-${me}`,fe=`input-expense-${H<te.length-1?te[H+1].split(":")[0]:"linePay"}`,ge=H>0?`input-expense-${te[H-1].split(":")[0]}`:"input-reserve",Me=H>=2?te[H-2].split(":")[0]:null,Se=H<te.length-2?te[H+2].split(":")[0]:"linePay";return a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1",children:pe}),a.jsx("input",{id:T,type:"text",inputMode:"decimal",className:"input-field text-sm",value:p[me]||"",onChange:Xe=>he(me,Xe.target.value),onBlur:Xe=>de(me,Xe.target.value),onFocus:()=>v({id:T,type:"expense",key:me}),onKeyDown:Xe=>Q(Xe,{next:fe,prev:ge,right:fe,left:ge,up:Me?`input-expense-${Me}`:"input-reserve",down:Se.startsWith("input-")?Se:`input-expense-${Se}`}),disabled:se})]},me)})}),a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1",children:"Line Pay ()"}),a.jsx("input",{id:"input-expense-linePay",type:"text",inputMode:"decimal",className:"input-field border-green-200 text-green-600",value:p.linePay||"",onChange:K=>he("linePay",K.target.value),onBlur:K=>de("linePay",K.target.value),onFocus:()=>v({id:"input-expense-linePay",type:"expense",key:"linePay"}),onKeyDown:K=>Q(K,{next:"input-expense-serviceFee",prev:"input-expense-others",right:"input-expense-serviceFee",left:"input-expense-others",up:"input-expense-bags"}),disabled:se})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1",children:" ()"}),a.jsx("input",{id:"input-expense-serviceFee",type:"text",inputMode:"decimal",className:"input-field border-red-200 text-red-600",value:p.serviceFee||"",onChange:K=>he("serviceFee",K.target.value),onBlur:K=>de("serviceFee",K.target.value),onFocus:()=>v({id:"input-expense-serviceFee",type:"expense",key:"serviceFee"}),disabled:se,onKeyDown:K=>Q(K,{next:"btn-save-data",prev:"input-expense-linePay",right:"btn-save-data",left:"input-expense-linePay",up:"input-expense-others"})})]})]})]})]}),a.jsxs("div",{className:"p-6 glass-panel shadow-lg border-t-4 border-t-blue-600 opacity-100 pointer-events-auto",children:[a.jsx("div",{className:"text-sm text-[var(--text-secondary)] mb-1 font-bold",children:" ()"}),a.jsxs("div",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-700 to-indigo-700",children:["$",(se?J:ie).toLocaleString()]}),a.jsxs("button",{id:"btn-save-data",onClick:be,className:"btn-primary w-full mt-6 flex justify-center items-center gap-2 py-4 text-lg",children:[a.jsx(Xs,{size:20})," "]})]})]})]})})}function OS({user:l,apiUrl:r,logActivity:c}){const[d,u]=E.useState([]),[f,x]=E.useState(!0),[b,h]=E.useState(""),[p,j]=E.useState(!1),[g,y]=E.useState(null),[S,A]=E.useState("SCRAP"),[R,N]=E.useState(""),[w,L]=E.useState(""),[C,M]=E.useState({}),[O,v]=E.useState({}),[B,q]=E.useState({}),[ae,oe]=E.useState(!1),De=E.useCallback(async()=>{x(!0);try{const ie=await ke(r,"getInventory",{},l.token);if(console.log("Inventory API Response:",ie),Array.isArray(ie)){const be=ie.filter(K=>{const H=Number(K.quantity);return!isNaN(H)&&H!==0});console.log("Filtered Inventory:",be);const Ee=Pi(be,"productName");console.log("Sorted Inventory:",Ee),u(Ee)}else console.error("Inventory data is not an array:",ie),u([])}catch(ie){console.error("Failed to fetch inventory:",ie),alert(": "+ie.message),u([])}finally{x(!1)}},[r,l.token]);E.useEffect(()=>{(async()=>{if(l?.token){await De();const be=localStorage.getItem("safetyStocks");be&&M(JSON.parse(be));const Ee=localStorage.getItem("customCaseSizes");Ee&&q(JSON.parse(Ee))}})()},[l.token,De]);const W=ie=>{if(!ie)return"-";const be=new Date(ie);return isNaN(be.getTime())?String(ie):be.toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"})},ue=ie=>{y(ie),N(""),L(""),j(!0)},he=async()=>{if(!R||Number(R)<=0){alert("");return}if(!w.trim()){alert("");return}oe(!0);try{await ke(r,"adjustInventory",{batchId:g.batchId,type:S,quantity:Number(R),note:w},l.token),c&&c({actionType:"DATA_EDIT",page:"",details:JSON.stringify({type:"ADJUSTMENT",product:g.productName,adjustType:S,quantity:Number(R),note:w})}),alert(""),j(!1),De()}catch(ie){alert(": "+ie.message)}finally{oe(!1)}},de=(ie,be)=>{const Ee={...C,[ie]:Number(be)||0};M(Ee),localStorage.setItem("safetyStocks",JSON.stringify(Ee))},G=(ie,be)=>{v({...O,[ie]:be})},k=ie=>{const be=O[ie];be!==void 0&&de(ie,be)},Z=(ie,be)=>{const Ee={...B,[ie]:Number(be)||0};q(Ee),localStorage.setItem("customCaseSizes",JSON.stringify(Ee))},ne=d.filter(ie=>{const be=String(ie.productName||"").toLowerCase(),Ee=b.toLowerCase();return be.includes(Ee)?!0:Ee.length>6?String(ie.batchId||"").toLowerCase().includes(Ee):!1}),xe=ne.filter(ie=>ie.type==="STOCK"),_=ne.filter(ie=>ie.type!=="STOCK"),Q={};d.forEach(ie=>{Q[ie.productName]||(Q[ie.productName]=0),Q[ie.productName]+=Number(ie.quantity)});const J=ie=>{const be={};return ie.forEach(Ee=>{be[Ee.productName]||(be[Ee.productName]=[]),be[Ee.productName].push(Ee)}),Object.values(be)},le=J(xe),ve=J(_),je=(ie,be,Ee,K)=>a.jsxs("div",{className:"hidden md:flex bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] p-6 flex-col shadow-sm",children:[a.jsxs("h3",{className:`text-lg font-bold mb-4 flex items-center gap-2 ${K}`,children:[a.jsx(Ee,{size:20})," ",be]}),a.jsx("div",{className:"rounded-lg border border-[var(--border-primary)] overflow-hidden",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-sm uppercase",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-1/4",children:""}),a.jsx("th",{className:"p-4 text-center w-24",children:""}),a.jsx("th",{className:"p-4 w-32",children:""}),a.jsx("th",{className:"p-4 text-center w-24",children:""}),a.jsx("th",{className:"p-4 text-center w-24",children:""}),a.jsx("th",{className:"p-4 text-center w-20",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:f?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-6 text-center text-[var(--text-secondary)]",children:"..."})}):ie.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-6 text-center text-[var(--text-secondary)]",children:""})}):ie.map((H,te)=>{const pe=H[0].productName,T=C[pe]||0,re=B[pe],fe=re!==void 0&&re!==0?re:$s[pe]||0,ge=Q[pe]||0,Me=T>0&&ge<=T;return a.jsx(Qe.Fragment,{children:H.map((Se,Xe)=>{const ft=Xe===H.length-1,Ze=Se.expiry?new Date(Se.expiry):null,ea=new Date;ea.setHours(0,0,0,0);const $l=new Date(ea);$l.setDate(ea.getDate()+3);const ql=Ze&&Ze>=ea&&Ze<=$l,vn=Ze&&Ze<ea;return a.jsxs("tr",{className:`hover:bg-[var(--bg-hover)] transition-colors ${Me?"bg-red-50/10":""} ${ft?"":"border-b border-dashed border-slate-200"}`,children:[Xe===0&&a.jsx("td",{className:"p-4 font-medium text-[var(--text-primary)] align-top pt-6 border-r border-[var(--border-primary)]/50",rowSpan:H.length,children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[Me&&a.jsx(_l,{size:16,className:"text-red-400"}),a.jsx("span",{className:"font-bold text-lg",children:pe})]}),a.jsxs("span",{className:"text-xs text-[var(--text-secondary)]",children:[": ",a.jsx("span",{className:"font-mono font-bold text-emerald-600 text-sm",children:ge}),fe>0&&a.jsxs("span",{className:"ml-2 text-blue-600",children:["(",(ge/fe).toFixed(1),")"]})]})]})}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("span",{className:`font-mono font-bold text-lg ${Number(Se.quantity)<0?"text-red-500":"text-emerald-600"}`,children:Se.quantity})}),a.jsx("td",{className:"p-4 text-sm whitespace-nowrap",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:vn?"text-rose-500 line-through":ql?"text-amber-500 font-bold":"text-[var(--text-secondary)]",children:W(Se.expiry)}),ql&&a.jsxs("span",{className:"text-[10px] bg-amber-100 text-amber-700 border border-amber-200 px-1.5 py-0.5 rounded self-start flex items-center gap-1 font-bold",children:[a.jsx(Qs,{size:10})," "]}),vn&&a.jsxs("span",{className:"text-[10px] bg-rose-100 text-rose-700 border border-rose-200 px-1.5 py-0.5 rounded self-start flex items-center gap-1 font-bold",children:[a.jsx(_l,{size:10})," "]})]})}),Xe===0&&a.jsxs("td",{className:"p-4 text-center align-top pt-5 border-l border-[var(--border-primary)]/50",rowSpan:H.length,children:[a.jsx("input",{id:`case-input-${pe}`,type:"number",className:"input-field w-16 text-center text-xs p-1 border-blue-200/30",value:re!==void 0?re:$s[pe]||"",onChange:Gl=>Z(pe,Gl.target.value),placeholder:""}),fe>0&&a.jsxs("div",{className:"text-[10px] text-slate-400 mt-1",children:[": ",$s[pe]||"-"]})]}),Xe===0&&a.jsx("td",{className:"p-4 text-center align-top pt-5 border-l border-[var(--border-primary)]/50",rowSpan:H.length,children:a.jsx("input",{id:`safety-input-${pe}`,type:"number",className:"input-field w-16 text-center text-xs p-1 border-amber-200/30",value:O[pe]!==void 0?O[pe]:C[pe]||"",onChange:Gl=>G(pe,Gl.target.value),onBlur:()=>k(pe),placeholder:""})}),a.jsx("td",{className:"p-4 text-center",children:a.jsxs("button",{onClick:()=>ue(Se),className:"btn-secondary text-xs px-3 py-1 flex items-center gap-1 mx-auto",title:"",children:[a.jsx(Oi,{size:14})," "]})})]},Se.batchId)})},pe)})})]})})]}),se=(ie,be,Ee,K)=>a.jsxs("div",{className:"md:hidden flex flex-col gap-4",children:[a.jsxs("h3",{className:`text-lg font-bold flex items-center gap-2 ${K} px-1`,children:[a.jsx(Ee,{size:20})," ",be]}),a.jsx("div",{className:"space-y-4",children:f?a.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)]",children:"..."}):ie.length===0?a.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:""}):ie.map((H,te)=>{const pe=H[0].productName,T=C[pe]||0,re=B[pe],fe=re!==void 0&&re!==0?re:$s[pe]||0,ge=Q[pe]||0,Me=T>0&&ge<=T;return a.jsxs("div",{className:`bg-[var(--bg-secondary)] rounded-xl p-4 border shadow-sm ${Me?"border-red-500/30 bg-red-500/5":"border-[var(--border-primary)]"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-3 border-b border-[var(--border-primary)] pb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[Me&&a.jsx(_l,{size:18,className:"text-red-500"}),a.jsx("span",{className:"font-bold text-[var(--text-primary)] text-lg",children:pe})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-2xl font-bold text-emerald-600 font-mono",children:ge}),fe>0&&a.jsxs("div",{className:"text-xs text-blue-600 font-mono",children:["",(ge/fe).toFixed(1)]})]})]}),a.jsx("div",{className:"space-y-2 mb-3",children:H.map((Se,Xe)=>{const ft=Se.expiry?new Date(Se.expiry):null,Ze=new Date;Ze.setHours(0,0,0,0);const ea=ft&&ft<Ze;return a.jsxs("div",{className:"flex justify-between items-center bg-[var(--bg-tertiary)] p-2 rounded text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:`font-mono ${ea?"text-rose-600 line-through":"text-[var(--text-secondary)]"}`,children:W(Se.expiry)}),ea&&a.jsx("span",{className:"text-[10px] text-rose-500 font-bold",children:""})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`font-mono font-bold ${Number(Se.quantity)<0?"text-red-500":"text-emerald-700"}`,children:Se.quantity}),a.jsx("button",{onClick:()=>ue(Se),className:"text-[var(--text-tertiary)] hover:text-red-500 p-1",children:a.jsx(Oi,{size:14})})]})]},Xe)})}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3 border-t border-[var(--border-primary)] pt-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-1",children:[a.jsx("span",{className:"text-[10px] text-[var(--text-tertiary)] uppercase font-bold",children:""}),a.jsx("input",{type:"number",className:"w-12 text-center text-xs p-0.5 rounded border border-[var(--border-primary)] bg-[var(--bg-primary)]",value:re!==void 0?re:$s[pe]||"",onChange:Se=>Z(pe,Se.target.value)})]}),a.jsxs("div",{className:"flex items-center justify-between gap-1",children:[a.jsx("span",{className:"text-[10px] text-[var(--text-tertiary)] uppercase font-bold",children:""}),a.jsx("input",{type:"number",className:"w-12 text-center text-xs p-0.5 rounded border border-[var(--border-primary)] bg-[var(--bg-primary)]",value:O[pe]!==void 0?O[pe]:C[pe]||"",onChange:Se=>G(pe,Se.target.value),onBlur:()=>k(pe)})]})]})]},te)})})]});return a.jsxs("div",{className:"max-w-6xl mx-auto h-[calc(100vh-6rem)] flex flex-col p-4 gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-stretch md:items-center bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] shadow-sm gap-4",children:[a.jsxs("h2",{className:"text-xl md:text-2xl font-bold flex items-center gap-2 text-[var(--text-primary)]",children:[a.jsx(Ml,{className:"text-blue-600"})," "]}),a.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[a.jsxs("div",{className:"relative flex-1 md:flex-none",children:[a.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full md:w-64",value:b,onChange:ie=>h(ie.target.value)})]}),a.jsx("button",{onClick:De,className:"btn-secondary p-2 whitespace-nowrap",title:"",children:a.jsx(it,{size:20})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto flex flex-col gap-6 pb-6",children:[je(le,"",Ml,"text-blue-600"),se(le,"",Ml,"text-blue-600"),je(ve,"/",Ti,"text-orange-600"),se(ve,"/",Ti,"text-orange-600")]}),p&&a.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:[ae&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-lg font-bold text-slate-800",children:"..."})]}),a.jsxs("div",{className:"glass-panel p-6 w-96 max-w-[90vw]",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:""}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-[var(--text-secondary)] block mb-1",children:""}),a.jsxs("div",{className:"flex justify-between items-center p-2 bg-[var(--bg-tertiary)] rounded-lg border border-[var(--border-primary)]",children:[a.jsx("div",{className:"text-[var(--text-primary)] font-bold",children:g?.productName}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-400",children:":"}),a.jsx("span",{className:"text-emerald-600 font-mono font-bold text-lg",children:g?.quantity})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-slate-400 block mb-1",children:""}),a.jsxs("select",{className:"input-field w-full",value:S,onChange:ie=>A(ie.target.value),children:[a.jsx("option",{value:"SCRAP",children:""}),a.jsx("option",{value:"RETURN",children:""}),a.jsx("option",{value:"LOSS",children:""}),a.jsx("option",{value:"OTHER",children:""})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-slate-400 block mb-1",children:""}),a.jsx("input",{id:"adjustment-qty-input",type:"number",className:"input-field w-full",value:R,onChange:ie=>N(ie.target.value),onKeyDown:ie=>{(ie.key==="Enter"||ie.key==="ArrowDown")&&(ie.preventDefault(),document.getElementById("adjustment-note-input")?.focus())},placeholder:"",autoFocus:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-sm text-slate-400 block mb-1",children:[" ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("textarea",{id:"adjustment-note-input",className:"input-field w-full",rows:"3",value:w,onChange:ie=>L(ie.target.value),onKeyDown:ie=>{ie.key==="Enter"?(ie.preventDefault(),he()):ie.key==="ArrowUp"&&(ie.preventDefault(),document.getElementById("adjustment-qty-input")?.focus())},placeholder:"..."})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:he,className:"btn-primary flex-1",children:""}),a.jsx("button",{onClick:()=>j(!1),className:"btn-secondary flex-1",children:""})]})]})]})]})]})}const MS=l=>{if(typeof l=="string"&&l.trim().startsWith("="))return 0;const r=Number(l);return isNaN(r)?0:r};function _S({user:l,apiUrl:r,logActivity:c}){const d=new Date().getFullYear().toString(),[u,f]=E.useState([{id:Date.now(),vendor:"",productName:"",quantity:"",unitPrice:"",expiryYear:d,expiryMonth:"",expiryDay:"",paymentMethod:"CASH"}]),[x,b]=E.useState({vendors:[],vendorProductMap:{}}),[h,p]=E.useState(!1);E.useEffect(()=>{const C=async()=>{try{const M=await ke(r,"getPurchaseSuggestions",{},l.token);M.vendors&&b(M)}catch(M){console.error("Failed to fetch suggestions",M)}};l?.token&&C()},[l.token,r]),E.useEffect(()=>{f(C=>C.map(M=>{const O=x.vendorDefaults?.[M.vendor];return O&&M.paymentMethod!==O?{...M,paymentMethod:O}:M}))},[x.vendorDefaults,u.map(C=>C.vendor).join(",")]);const j=async C=>{if(C.vendor)try{await ke(r,"saveVendorDefault",{vendor:C.vendor,method:C.paymentMethod},l.token),alert(`${C.vendor}${C.paymentMethod==="CASH"?"":""}`),b(M=>({...M,vendorDefaults:{...M.vendorDefaults,[C.vendor]:C.paymentMethod}}))}catch(M){alert(": "+M.message)}},g=C=>{if(C&&x.vendorProductMap[C])return x.vendorProductMap[C];const M=new Set;return Object.values(x.vendorProductMap||{}).forEach(O=>O.forEach(v=>M.add(v))),Array.from(M)},y=(C,M,O)=>{f(v=>v.map(B=>{if(B.id!==C)return B;let q={...B,[M]:O};if(M==="productName"&&O){const ae=x.vendorProductPriceMap?.[B.vendor]?.[O];ae!==void 0&&(q.unitPrice=ae)}return(M==="quantity"||M==="unitPrice")&&typeof O=="string"&&O.trim().startsWith("="),q}))},S=(C,M,O)=>{if(M==="quantity"||M==="unitPrice")if(typeof O=="string"&&O.trim().startsWith("=")){const v=Is(O);y(C,M,v)}else y(C,M,MS(O))},A=()=>{f(C=>[...C,{id:Date.now()+Math.random(),vendor:"",productName:"",quantity:"",unitPrice:"",expiryYear:d,expiryMonth:"",expiryDay:"",paymentMethod:"CASH"}])},R=C=>{u.length>1&&f(M=>M.filter(O=>O.id!==C))},N=C=>{const M=document.getElementById(C);M&&(M.focus(),M.select?.(),M.scrollIntoView({block:"nearest",behavior:"smooth"}))},w=(C,M,O)=>{const B=C.target.id.includes("-m-")?"item-m-":"item-",q=["vendor","product","qty","price","year","month","day"],ae=q.indexOf(O);C.key==="Enter"||C.key==="ArrowRight"?(C.preventDefault(),ae<q.length-1?N(`${B}${M}-${q[ae+1]}`):M<u.length-1?N(`${B}${M+1}-vendor`):C.key==="Enter"&&(A(),setTimeout(()=>N(`${B}${M+1}-vendor`),50))):C.key==="ArrowLeft"?(C.preventDefault(),ae>0?N(`${B}${M}-${q[ae-1]}`):M>0&&N(`${B}${M-1}-day`)):C.key==="ArrowDown"?(C.preventDefault(),M<u.length-1&&N(`${B}${M+1}-${O}`)):C.key==="ArrowUp"&&(C.preventDefault(),M>0&&N(`${B}${M-1}-${O}`))},L=async C=>{C.preventDefault();for(let O=0;O<u.length;O++){const v=u[O];if(!v.vendor.trim()||!v.productName.trim()||!v.quantity||!v.unitPrice||!v.expiryYear||!v.expiryMonth||!v.expiryDay){alert(` ${O+1} 
`);return}}p(!0);const M=u.map(O=>{const v=O.expiryMonth.padStart(2,"0"),B=O.expiryDay.padStart(2,"0");return{vendor:O.vendor,productName:O.productName,quantity:Number(O.quantity),price:Number(O.unitPrice),expiry:`${O.expiryYear}-${v}-${B}`,paymentMethod:O.paymentMethod}});try{const O=await ke(r,"addPurchase",{items:M,operator:l.username},l.token);if(c){const v=Array.from(new Set(M.map(B=>B.paymentMethod)));c({actionType:"DATA_EDIT",page:"",details:JSON.stringify({vendorCount:new Set(M.map(B=>B.vendor)).size,productCount:M.length,totalPrice:M.reduce((B,q)=>B+q.quantity*q.price,0),paymentMethods:v.join(", ")})})}alert(` ${O.count} `),f([{id:Date.now(),vendor:"",productName:"",quantity:"",unitPrice:"",expiryYear:d,expiryMonth:"",expiryDay:"",paymentMethod:"CASH"}])}catch(O){alert(": "+O.message)}finally{p(!1)}};return a.jsxs("div",{className:"max-w-[90rem] mx-auto p-4",children:[h&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)]",children:"..."})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsx("h2",{className:"text-2xl font-bold flex items-center gap-2 text-[var(--text-primary)]",children:""})}),a.jsxs("form",{onSubmit:L,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-2",children:[a.jsx("h3",{className:"text-sm font-semibold text-[var(--text-secondary)] uppercase tracking-wider",children:""}),a.jsxs("span",{className:"text-xs text-[var(--text-tertiary)]",children:[" ",u.length," "]})]}),a.jsx("datalist",{id:"vendors-list",children:x.vendors.map((C,M)=>a.jsx("option",{value:C},M))}),u.map((C,M)=>{const O=g(C.vendor);return a.jsxs("div",{className:"group relative p-0 md:p-4 bg-transparent md:bg-[var(--bg-tertiary)] rounded-none md:rounded-xl border-b md:border border-[var(--border-primary)] hover:md:shadow-lg transition-all duration-200 mb-6 md:mb-0",children:[a.jsxs("div",{className:"md:absolute md:-left-2 md:top-1/2 md:-translate-y-1/2 mb-2 md:mb-0 flex items-center justify-between md:block",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-5 h-5 rounded-full bg-emerald-500/10 border border-emerald-500/30 flex items-center justify-center",children:a.jsxs("span",{className:"text-[10px] font-bold text-emerald-600",children:[" ",M+1]})}),a.jsx("span",{className:"md:hidden text-sm font-bold text-[var(--text-secondary)]",children:""})]}),C.vendor&&a.jsx("button",{type:"button",onClick:()=>j(C),className:"md:hidden text-[10px] px-2 py-1 rounded-md bg-slate-100 text-slate-500 border border-slate-200",children:" "})]}),a.jsxs("div",{className:"md:hidden space-y-3 pb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{id:`item-m-${M}-vendor`,list:"vendors-list",className:"input-field flex-1 py-1.5 px-3",placeholder:"",value:C.vendor,onChange:v=>y(C.id,"vendor",v.target.value),onKeyDown:v=>w(v,M,"vendor")})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{id:`item-m-${M}-product`,list:`products-list-${M}`,className:"input-field flex-1 py-1.5 px-3",placeholder:"",value:C.productName,onChange:v=>y(C.id,"productName",v.target.value),onKeyDown:v=>w(v,M,"product")}),a.jsx("datalist",{id:`products-list-${M}`,children:O.map((v,B)=>a.jsx("option",{value:v},B))})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{id:`item-m-${M}-qty`,type:"text",inputMode:"decimal",className:"input-field flex-1 py-1.5 px-3",placeholder:"0",value:C.quantity,onChange:v=>y(C.id,"quantity",v.target.value),onBlur:v=>S(C.id,"quantity",v.target.value),onKeyDown:v=>w(v,M,"qty")})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{id:`item-m-${M}-price`,type:"text",inputMode:"decimal",className:"input-field flex-1 py-1.5 px-3",placeholder:"0",value:C.unitPrice,onChange:v=>y(C.id,"unitPrice",v.target.value),onBlur:v=>S(C.id,"unitPrice",v.target.value),onKeyDown:v=>w(v,M,"price")})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsxs("div",{className:"flex bg-slate-100 p-0.5 rounded-lg border border-slate-200 flex-1",children:[a.jsx("button",{type:"button",onClick:()=>y(C.id,"paymentMethod","CASH"),className:`flex-1 py-1 text-[10px] font-bold rounded-md transition-all ${C.paymentMethod==="CASH"?"bg-emerald-500 text-white":"text-slate-400"}`,children:""}),a.jsx("button",{type:"button",onClick:()=>y(C.id,"paymentMethod","CREDIT"),className:`flex-1 py-1 text-[10px] font-bold rounded-md transition-all ${C.paymentMethod==="CREDIT"?"bg-purple-600 text-white":"text-slate-400"}`,children:""})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsxs("div",{className:"flex flex-1 gap-1 items-center",children:[a.jsx("input",{id:`item-m-${M}-year`,type:"number",className:"input-field flex-[2] py-1.5 px-1 text-center",placeholder:"YYYY",value:C.expiryYear,onChange:v=>y(C.id,"expiryYear",v.target.value),onKeyDown:v=>w(v,M,"year")}),a.jsx("span",{className:"text-slate-300",children:"/"}),a.jsx("input",{id:`item-m-${M}-month`,type:"number",className:"input-field flex-1 py-1.5 px-1 text-center",placeholder:"MM",value:C.expiryMonth,onChange:v=>y(C.id,"expiryMonth",v.target.value),onKeyDown:v=>w(v,M,"month")}),a.jsx("span",{className:"text-slate-300",children:"/"}),a.jsx("input",{id:`item-m-${M}-day`,type:"number",className:"input-field flex-1 py-1.5 px-1 text-center",placeholder:"DD",value:C.expiryDay,onChange:v=>y(C.id,"expiryDay",v.target.value),onKeyDown:v=>w(v,M,"day")}),u.length>1&&a.jsx("button",{type:"button",onClick:()=>R(C.id),className:"w-8 h-8 ml-1 rounded-lg bg-red-500/10 text-red-500 flex items-center justify-center border border-red-500/20",children:""})]})]})]}),a.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-12 gap-3 items-end",children:[a.jsxs("div",{className:"col-span-12 md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-[var(--text-secondary)] mb-1 uppercase",children:""}),a.jsx("input",{id:`item-${M}-vendor`,list:"vendors-list",className:"input-field w-full py-1.5 px-2 text-sm",placeholder:"",value:C.vendor,onChange:v=>y(C.id,"vendor",v.target.value),onKeyDown:v=>w(v,M,"vendor"),autoFocus:M===u.length-1})]}),a.jsxs("div",{className:"col-span-12 md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-[var(--text-secondary)] mb-1 uppercase",children:""}),a.jsx("input",{id:`item-${M}-product`,list:`products-list-${M}`,className:"input-field w-full py-1.5 px-2 text-sm",placeholder:"",value:C.productName,onChange:v=>y(C.id,"productName",v.target.value),onKeyDown:v=>w(v,M,"product")})]}),a.jsxs("div",{className:"col-span-6 md:col-span-1",children:[a.jsx("label",{className:"text-[10px] font-bold text-[var(--text-secondary)] mb-1 text-center block uppercase",children:""}),a.jsx("input",{id:`item-${M}-qty`,type:"text",inputMode:"decimal",className:"input-field w-full py-1.5 px-1 text-center text-sm",placeholder:"0",value:C.quantity,onChange:v=>y(C.id,"quantity",v.target.value),onBlur:v=>S(C.id,"quantity",v.target.value),onKeyDown:v=>w(v,M,"qty")})]}),a.jsxs("div",{className:"col-span-6 md:col-span-1",children:[a.jsx("label",{className:"text-[10px] font-bold text-[var(--text-secondary)] mb-1 text-center block uppercase",children:""}),a.jsx("input",{id:`item-${M}-price`,type:"text",inputMode:"decimal",className:"input-field w-full py-1.5 px-1 text-center text-sm",placeholder:"0",value:C.unitPrice,onChange:v=>y(C.id,"unitPrice",v.target.value),onBlur:v=>S(C.id,"unitPrice",v.target.value),onKeyDown:v=>w(v,M,"price")})]}),a.jsx("div",{className:"col-span-12 md:col-span-3 flex items-end gap-1",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-[10px] font-bold text-[var(--text-secondary)] mb-1 uppercase",children:""}),a.jsxs("div",{className:"grid grid-cols-[1.5fr_auto_1fr_auto_1fr] gap-1 items-center",children:[a.jsx("input",{id:`item-${M}-year`,className:"input-field py-1.5 px-0.5 text-center text-sm font-mono",placeholder:"YYYY",value:C.expiryYear,onChange:v=>y(C.id,"expiryYear",v.target.value),onKeyDown:v=>w(v,M,"year")}),a.jsx("span",{className:"text-[var(--text-tertiary)] text-[10px]",children:"/"}),a.jsx("input",{id:`item-${M}-month`,className:"input-field py-1.5 px-0.5 text-center text-sm font-mono",placeholder:"MM",value:C.expiryMonth,onChange:v=>y(C.id,"expiryMonth",v.target.value),onKeyDown:v=>w(v,M,"month")}),a.jsx("span",{className:"text-[var(--text-tertiary)] text-[10px]",children:"/"}),a.jsx("input",{id:`item-${M}-day`,className:"input-field py-1.5 px-0.5 text-center text-sm font-mono",placeholder:"DD",value:C.expiryDay,onChange:v=>y(C.id,"expiryDay",v.target.value),onKeyDown:v=>w(v,M,"day")})]})]})}),a.jsxs("div",{className:"col-span-12 md:col-span-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("label",{className:"text-[10px] font-bold text-[var(--text-secondary)] uppercase",children:""}),C.vendor&&a.jsx("button",{type:"button",onClick:()=>j(C),className:"text-[9px] text-emerald-600 hover:text-emerald-700 font-bold transition-colors flex items-center gap-0.5",children:" "})]}),a.jsxs("div",{className:"flex bg-[var(--bg-primary)] p-0.5 rounded-lg border border-[var(--border-primary)] shadow-sm h-8",children:[a.jsx("button",{type:"button",onClick:()=>y(C.id,"paymentMethod","CASH"),className:`flex-1 py-0.5 text-[10px] font-bold rounded-md transition-all ${C.paymentMethod==="CASH"?"bg-emerald-500 text-white":"text-[var(--text-tertiary)] hover:bg-slate-50"}`,children:""}),a.jsx("button",{type:"button",onClick:()=>y(C.id,"paymentMethod","CREDIT"),className:`flex-1 py-0.5 text-[10px] font-bold rounded-md transition-all ${C.paymentMethod==="CREDIT"?"bg-purple-600 text-white":"text-[var(--text-tertiary)] hover:bg-slate-50"}`,children:""})]})]}),a.jsx("div",{className:"col-span-12 md:col-span-1 flex items-end justify-center",children:u.length>1&&a.jsx("button",{type:"button",onClick:()=>R(C.id),className:"w-8 h-8 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-all flex items-center justify-center mb-[2px]",title:"",children:""})})]})]},C.id)})]}),a.jsxs("div",{className:"flex gap-4 mt-8 pt-6 border-t border-[var(--border-primary)]",children:[a.jsxs("button",{type:"button",onClick:A,className:"btn-secondary flex-1 py-4 text-base font-semibold flex items-center justify-center gap-2 hover:scale-105 transition-transform",children:[a.jsx("span",{className:"text-xl",children:""})," "]}),a.jsx("button",{type:"submit",disabled:h,className:"btn-primary flex-[2] py-4 text-lg font-bold shadow-lg shadow-emerald-100 hover:shadow-xl hover:shadow-emerald-200 hover:scale-105 transition-all flex items-center justify-center gap-2",children:h?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-spin",children:""})," ..."]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-xl",children:""})," "]})})]})]})]})]})}const kl=l=>l.toFixed(1).replace(/\.0$/,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),qs=l=>{const c=kl(l).length;return c<=6?"text-xs md:text-xl":c<=9?"text-[10px] md:text-lg":"text-[8px] md:text-base"};function RS({user:l,apiUrl:r,setPage:c}){const[d,u]=E.useState(tt()),[f,x]=E.useState(tt()),[b,h]=E.useState(""),[p,j]=E.useState(""),[g,y]=E.useState(!1),[S,A]=E.useState([]),[R,N]=E.useState([]),[w,L]=E.useState("SALES"),[C,M]=E.useState(!1),O=E.useCallback(async()=>{if(!(!d||!f)){y(!0);try{const k={startDate:d,endDate:f},Z=l.role==="BOSS"||l.permissions&&l.permissions.includes("finance"),ne=[ke(r,"getSalesHistory",k,l.token)];Z&&ne.push(ke(r,"getExpenditures",k,l.token));const xe=await Promise.all(ne),_=xe[0],Q=Z?xe[1]:[];let J=Array.isArray(_)?_:[];const le=b.trim().toLowerCase(),ve=p.trim().toLowerCase();le&&(J=J.filter(se=>String(se.location||"").toLowerCase().includes(le))),ve&&(J=J.filter(se=>String(se.salesRep||"").toLowerCase().includes(ve))),A(J);let je=Array.isArray(Q)?Q:[];le&&(je=je.filter(se=>String(se.customer||"").toLowerCase().includes(le)||String(se.note||"").toLowerCase().includes(le))),ve&&(je=je.filter(se=>String(se.salesRep||"").toLowerCase().includes(ve))),je.forEach(se=>{se.linePayAmount=Number(se.linePay||0);const ie=Number(se.stall||0)+Number(se.cleaning||0)+Number(se.electricity||0)+Number(se.gas||0)+Number(se.parking||0)+Number(se.goods||0)+Number(se.bags||0)+Number(se.others||0)+Number(se.vehicleMaintenance||0)+Number(se.salary||0)+Number(se.serviceFee||0)+Number(se.reserve||0);se.rowTotal=ie,se.salaryAmount=Number(se.salary||0);const be=Object.keys(se).find(K=>{const H=K.toLowerCase().trim();return H==="finaltotal"||H.includes("")||H.includes("")||H.includes("")||H.includes("")}),Ee=Number(be?se[be]:se.finalTotal||0);se.displayFinalTotal=Ee,se.normCustomer=se.customer||se["/"]||se.||"",se.normSalesRep=se.salesRep||se.||"",se.normNote=se.note||se.||""}),N(je)}catch(k){console.error(k),alert(": "+k.message)}finally{y(!1)}}},[d,f,b,p,l.token,r]);Qe.useEffect(()=>{O()},[O]);const v=async k=>{if(window.confirm(`

1. 
2. 
3. `)){M(!0);try{const Z=await ke(r,"voidAndFetchSale",{saleId:k},l.token);if(Z.success&&Z.cloneData)sessionStorage.setItem("clonedSale",JSON.stringify(Z.cloneData)),c("sales");else throw new Error(Z.error||"")}catch(Z){console.error(Z),alert(": "+Z.message),M(!1)}}},B=k=>{k.preventDefault(),O()},q=S?.reduce((k,Z)=>k+(Number(Z.totalAmount)||0),0)||0,ae=S?.reduce((k,Z)=>k+(Number(Z.soldQty)||0),0)||0,oe=S?.reduce((k,Z)=>Z.paymentMethod==="CREDIT"?k:k+(Number(Z.totalAmount)||0),0)||0,De=R?.reduce((k,Z)=>k+(Z.rowTotal||0)-(Z.salaryAmount||0),0)||0,W=R?.reduce((k,Z)=>k+(Z.linePayAmount||0),0)||0,ue=R?.reduce((k,Z)=>k+(Number(Z.displayFinalTotal)||0),0)||0,he=oe-De-W+ue,de=S?.reduce((k,Z)=>{const ne=Z.productName;return k[ne]||(k[ne]={name:Z.productName,qty:0,amount:0}),k[ne].qty+=Z.soldQty,k[ne].amount+=Z.totalAmount,k},{}),G=de?Object.values(de).sort((k,Z)=>Z.qty-k.qty):[];return a.jsxs("div",{className:"max-w-[90rem] mx-auto p-4 relative",children:[C&&a.jsxs("div",{className:"fixed inset-0 bg-white/30 backdrop-blur-md z-50 flex flex-col items-center justify-center animate-in fade-in duration-300",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mb-4 shadow-lg"}),a.jsx("p",{className:"text-xl font-bold text-blue-900 drop-shadow-sm",children:"..."})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-6 border-b border-[var(--border-primary)] pb-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Gs,{className:"text-blue-600"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),S&&a.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2 md:gap-3 w-full md:w-auto",children:[a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-amber-500/10 border border-amber-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:`${qs(he)} font-bold text-amber-700 text-center whitespace-nowrap`,children:["$",kl(he)]})]}),a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-emerald-500/10 border border-emerald-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:`${qs(q)} font-bold text-emerald-700 text-center whitespace-nowrap`,children:["$",kl(q)]})]}),a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-rose-500/10 border border-rose-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:`${qs(De)} font-bold text-rose-700 text-center whitespace-nowrap`,children:["$",kl(De)]})]}),a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-cyan-500/10 border border-cyan-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:`${qs(ue)} font-bold text-cyan-700 text-center whitespace-nowrap`,children:["$",kl(ue)]})]}),a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-blue-500/10 border border-blue-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsx("p",{className:`${qs(ae)} font-bold text-blue-700 text-center whitespace-nowrap`,children:kl(ae)})]}),a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-purple-500/10 border border-purple-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsx("p",{className:"text-xs md:text-xl font-bold text-purple-700 text-center whitespace-nowrap",children:S.length})]})]})]}),a.jsxs("form",{onSubmit:B,className:"md:hidden mb-6 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{type:"date",required:!0,className:"input-field flex-1 py-1.5 px-3",value:d,onChange:k=>u(k.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{type:"date",required:!0,className:"input-field flex-1 py-1.5 px-3",value:f,onChange:k=>x(k.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field flex-1 py-1.5 px-3",value:b,onChange:k=>h(k.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsxs("div",{className:"flex flex-1 gap-2",children:[a.jsx("input",{type:"text",placeholder:"...",className:"input-field flex-1 py-1.5 px-3",value:p,onChange:k=>j(k.target.value)}),a.jsx("button",{type:"submit",disabled:g,className:"btn-primary px-4 py-1.5 flex items-center justify-center rounded-lg shadow-sm active:scale-95 transition-transform",children:a.jsx(jt,{size:18})})]})]})]}),a.jsx("form",{onSubmit:B,className:"hidden md:block mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)] shadow-sm",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 md:contents",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase px-1",children:""}),a.jsx("input",{type:"date",required:!0,className:"input-field w-full",value:d,onChange:k=>u(k.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase px-1",children:""}),a.jsx("input",{type:"date",required:!0,className:"input-field w-full",value:f,onChange:k=>x(k.target.value)})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase px-1",children:""}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full",value:b,onChange:k=>h(k.target.value)})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"space-y-1 flex-1",children:[a.jsx("label",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase px-1",children:""}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full",value:p,onChange:k=>j(k.target.value)})]}),a.jsxs("button",{type:"submit",disabled:g,className:"btn-primary py-2 px-6 flex items-center justify-center gap-2 self-end h-[42px] min-w-[100px]",children:[g?"...":a.jsx(jt,{size:18})," "]})]})]})}),S&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"rounded-xl border border-[var(--border-primary)] overflow-hidden",children:[a.jsx("div",{className:"px-4 py-3 bg-[var(--bg-tertiary)] border-b border-[var(--border-primary)]",children:a.jsxs("h3",{className:"font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Ml,{size:16,className:"text-blue-600"})," "]})}),a.jsx("div",{className:"overflow-x-auto max-h-60",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-secondary)]",children:G.length>0?G.map((k,Z)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-4 text-[var(--text-primary)]",children:k.name}),a.jsx("td",{className:"p-4 text-right text-[var(--text-tertiary)]",children:k.qty}),a.jsxs("td",{className:"p-4 text-right text-emerald-600",children:["$",k.amount.toLocaleString()]})]},Z)):a.jsx("tr",{children:a.jsx("td",{colSpan:"3",className:"p-8 text-center text-[var(--text-secondary)]",children:""})})})]})})]}),a.jsxs("div",{className:"rounded-xl border border-[var(--border-primary)] overflow-hidden flex flex-col h-[600px]",children:[a.jsxs("div",{className:"px-4 py-3 bg-[var(--bg-tertiary)] border-b border-[var(--border-primary)] flex gap-4",children:[a.jsxs("button",{onClick:()=>L("SALES"),className:`font-bold flex items-center gap-2 pb-2 border-b-2 transition-colors ${w==="SALES"?"text-blue-600 border-blue-600":"text-[var(--text-secondary)] border-transparent hover:text-[var(--text-primary)]"}`,children:[a.jsx(pn,{size:16}),"  (",S.length,")"]}),a.jsxs("button",{onClick:()=>L("EXPENSES"),className:`font-bold flex items-center gap-2 pb-2 border-b-2 transition-colors ${w==="EXPENSES"?"text-rose-600 border-rose-600":"text-[var(--text-secondary)] border-transparent hover:text-[var(--text-primary)]"}`,children:[a.jsx(bt,{size:16}),"  (",R.length,")"]})]}),a.jsx("div",{className:"overflow-auto flex-1",children:w==="SALES"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:S.map((k,Z)=>a.jsxs("div",{className:"p-4 space-y-3 bg-[var(--bg-secondary)] hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{className:"text-xs font-mono text-[var(--text-tertiary)]",children:new Date(k.date).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("div",{className:"text-emerald-600 font-bold font-mono text-lg",children:["$",k.totalAmount]}),a.jsxs("button",{onClick:ne=>{ne.stopPropagation(),v(k.saleId)},className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-amber-500/10 text-amber-600 border border-amber-200 hover:bg-amber-100 transition-colors text-xs font-bold",title:"",children:[a.jsx(ki,{size:12})," "]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1 bg-blue-500/10 text-blue-700 px-2 py-0.5 rounded-md",children:[a.jsx(gp,{size:12})," ",a.jsx("span",{className:"font-medium",children:k.location})]}),a.jsxs("div",{className:"flex items-center gap-1 bg-[var(--bg-tertiary)] text-[var(--text-secondary)] px-2 py-0.5 rounded-md",children:[a.jsx(hn,{size:12})," ",a.jsx("span",{children:k.salesRep})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-1 border-t border-[var(--border-primary)]",children:[a.jsx("div",{className:"font-bold text-[var(--text-primary)]",children:k.productName}),a.jsxs("div",{className:"text-[var(--text-secondary)]",children:[": ",a.jsx("span",{className:"font-bold text-[var(--text-primary)]",children:k.soldQty})]})]})]},Z))}),a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 font-medium w-48",children:""}),a.jsx("th",{className:"p-3 font-medium w-32",children:""}),a.jsx("th",{className:"p-3 font-medium w-32",children:""}),a.jsx("th",{className:"p-3 font-medium",children:""}),a.jsx("th",{className:"p-3 font-medium text-right w-24",children:""}),a.jsx("th",{className:"p-3 font-medium text-right w-32",children:""}),a.jsx("th",{className:"p-3 font-medium text-center w-24",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] text-[var(--text-secondary)] bg-[var(--bg-secondary)]",children:S.map((k,Z)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-3 text-[var(--text-tertiary)]",children:new Date(k.date).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}),a.jsx("td",{className:"p-3",children:k.location}),a.jsx("td",{className:"p-3",children:k.salesRep}),a.jsx("td",{className:"p-3 text-[var(--text-primary)]",children:k.productName}),a.jsx("td",{className:"p-3 text-right",children:k.soldQty}),a.jsxs("td",{className:"p-3 text-right",children:["$",k.totalAmount]}),a.jsx("td",{className:"p-3 text-center",children:a.jsx("button",{onClick:ne=>{ne.stopPropagation(),v(k.saleId)},className:"p-2 rounded-lg bg-amber-50 text-amber-600 hover:bg-amber-100 transition-colors",title:"",children:a.jsx(ki,{size:16})})})]},Z))})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:R.map((k,Z)=>{const ne=[];return k.stall&&ne.push(` $${k.stall}`),k.cleaning&&ne.push(` $${k.cleaning}`),k.electricity&&ne.push(` $${k.electricity}`),k.gas&&ne.push(` $${k.gas}`),k.parking&&ne.push(` $${k.parking}`),k.goods&&ne.push(` $${k.goods}`),k.bags&&ne.push(` $${k.bags}`),k.others&&ne.push(` $${k.others}`),k.linePay&&ne.push(`Line Pay $${k.linePay}`),k.serviceFee&&ne.push(` $${k.serviceFee}`),k.reserve&&ne.push(` $${k.reserve}`),k.vehicleMaintenance&&ne.push(` $${k.vehicleMaintenance}`),k.salary&&ne.push(` $${k.salary}`),a.jsxs("div",{className:"p-4 space-y-3 bg-[var(--bg-secondary)] hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{className:"text-xs font-mono text-[var(--text-tertiary)]",children:new Date(k.date).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsxs("div",{className:"text-emerald-600 font-bold font-mono text-lg",children:["$",Number(k.displayFinalTotal).toLocaleString()]}),a.jsxs("div",{className:"text-[10px] text-[var(--text-tertiary)] font-mono",children:[": $",Number(k.rowTotal).toLocaleString()]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[a.jsxs("div",{className:"flex flex-col gap-0.5 bg-amber-500/10 text-amber-700 px-2 py-0.5 rounded-md",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(gp,{size:10}),a.jsx("span",{className:"font-bold text-xs",children:k.normCustomer||"-"})]}),k.normNote&&a.jsx("div",{className:"text-[10px] opacity-70 ml-3.5 italic",children:k.normNote})]}),a.jsxs("div",{className:"flex items-center gap-1 bg-[var(--bg-tertiary)] text-[var(--text-secondary)] px-2 py-0.5 rounded-md border border-[var(--border-primary)]",children:[a.jsx(hn,{size:10})," ",a.jsx("span",{className:"text-xs font-bold",children:k.normSalesRep})]})]}),a.jsxs("div",{className:"pt-2 border-t border-[var(--border-primary)]",children:[a.jsx("p",{className:"text-[10px] uppercase font-bold text-[var(--text-tertiary)] mb-1",children:""}),a.jsx("div",{className:"flex flex-wrap gap-1",children:ne.map((xe,_)=>a.jsx("span",{className:"text-[10px] bg-[var(--bg-tertiary)] text-[var(--text-secondary)] px-1.5 py-0.5 rounded border border-[var(--border-primary)]",children:xe},_))})]})]},Z)})}),a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 font-medium w-48",children:""}),a.jsx("th",{className:"p-3 font-medium w-32",children:"/"}),a.jsx("th",{className:"p-3 font-medium w-32",children:""}),a.jsx("th",{className:"p-3 font-medium",children:""}),a.jsx("th",{className:"p-3 font-medium text-right w-28",children:""}),a.jsx("th",{className:"p-3 font-medium text-right w-28 text-emerald-600",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] text-[var(--text-secondary)] bg-[var(--bg-secondary)]",children:R.map((k,Z)=>{const ne=[];return k.stall&&ne.push(` $${k.stall}`),k.cleaning&&ne.push(` $${k.cleaning}`),k.electricity&&ne.push(` $${k.electricity}`),k.gas&&ne.push(` $${k.gas}`),k.parking&&ne.push(` $${k.parking}`),k.goods&&ne.push(` $${k.goods}`),k.bags&&ne.push(` $${k.bags}`),k.others&&ne.push(` $${k.others}`),k.linePay&&ne.push(`Line Pay $${k.linePay}`),k.serviceFee&&ne.push(` $${k.serviceFee}`),k.reserve&&ne.push(` $${k.reserve}`),k.vehicleMaintenance&&ne.push(` $${k.vehicleMaintenance}`),k.salary&&ne.push(` $${k.salary}`),a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-3 text-[var(--text-tertiary)]",children:new Date(k.date).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}),a.jsxs("td",{className:"p-3",children:[a.jsx("div",{className:"font-bold text-[var(--text-primary)]",children:k.normCustomer||"-"}),k.normNote&&a.jsx("div",{className:"text-[10px] text-[var(--text-tertiary)] italic",children:k.normNote})]}),a.jsx("td",{className:"p-3 text-[var(--text-secondary)] font-bold",children:k.normSalesRep}),a.jsx("td",{className:"p-3 text-xs text-[var(--text-tertiary)]",children:ne.join(", ")}),a.jsxs("td",{className:"p-3 text-right font-mono text-rose-600",children:["$",(k.rowTotal||0).toLocaleString()]}),a.jsxs("td",{className:"p-3 text-right font-mono font-bold text-emerald-600",children:["$",(Number(k.displayFinalTotal)||0).toLocaleString()]})]},Z)})})]})]})})]})]})]})]})}function zS({user:l,apiUrl:r}){const[c,d]=E.useState([]),[u,f]=E.useState(!1),[x,b]=E.useState(""),[h,p]=E.useState(""),[j,g]=E.useState(tt()),[y,S]=E.useState(tt()),A=Qe.useCallback(async()=>{f(!0);try{const w=await ke(r,"getPurchaseHistory",{startDate:j,endDate:y},l.token);Array.isArray(w)&&d(w)}catch(w){console.error("Failed to fetch purchase history:",w)}finally{f(!1)}},[r,l.token,j,y]);E.useEffect(()=>{A()},[A]);const R=c.filter(w=>{const L=String(w.productName||"").toLowerCase(),C=String(w.vendorName||w.vendor||"").toLowerCase(),M=x.toLowerCase(),O=h.toLowerCase();return L.includes(M)&&C.includes(O)}),N=R.reduce((w,L)=>w+(Number(L.totalPrice)||0),0);return a.jsx("div",{className:"max-w-[90rem] mx-auto p-4",children:a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("div",{className:"flex flex-row justify-between items-center mb-6 gap-2 md:gap-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Od,{className:"text-[var(--accent-blue)] w-6 h-6 md:w-auto md:h-auto"}),a.jsx("span",{className:"whitespace-nowrap",children:""})]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-xs md:text-sm mt-1 hidden md:block",children:""})]}),a.jsxs("div",{className:"px-3 md:px-5 py-2 md:py-3 rounded-xl border border-[var(--border-primary)] bg-[var(--bg-secondary)] flex items-center gap-2 md:gap-3",children:[a.jsx("div",{className:"p-1.5 md:p-2 rounded-full bg-[var(--bg-tertiary)] text-emerald-500",children:a.jsx(bt,{size:16,className:"md:w-5 md:h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold whitespace-nowrap",children:""}),a.jsxs("p",{className:"text-base md:text-xl font-bold text-emerald-500",children:["$",N.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"md:hidden mb-6 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{type:"date",className:"input-field flex-1 py-1.5 px-3",value:j,onChange:w=>g(w.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{type:"date",className:"input-field flex-1 py-1.5 px-3",value:y,onChange:w=>S(w.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("div",{className:"relative flex-1",children:a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full py-1.5 px-3",value:h,onChange:w=>p(w.target.value)})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("div",{className:"relative flex-1",children:a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full py-1.5 px-3",value:x,onChange:w=>b(w.target.value)})})]}),a.jsxs("button",{onClick:A,disabled:u,className:"btn-secondary w-full py-2 flex items-center justify-center gap-2 mt-2",children:[u?a.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-slate-500 border-t-transparent rounded-full"}):a.jsx(it,{size:18}),""]})]}),a.jsx("div",{className:"hidden md:block mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[a.jsxs("div",{className:"flex-1 space-y-1.5 w-full",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:x,onChange:w=>b(w.target.value)})]})]}),a.jsxs("div",{className:"flex-1 space-y-1.5 w-full",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:h,onChange:w=>p(w.target.value)})]})]}),a.jsxs("div",{className:"w-full md:w-40 space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full text-sm",value:j,onChange:w=>g(w.target.value)})]}),a.jsxs("div",{className:"w-full md:w-40 space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full text-sm",value:y,onChange:w=>S(w.target.value)})]}),a.jsxs("button",{onClick:A,disabled:u,className:"btn-secondary h-[42px] flex items-center gap-2 whitespace-nowrap px-6",children:[a.jsx(it,{size:18,className:u?"animate-spin":""})," "]})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:u?a.jsx("div",{className:"text-center py-10 text-[var(--text-secondary)]",children:"..."}):R.length>0?R.map((w,L)=>a.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-xl p-4 border border-[var(--border-primary)] shadow-sm space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-[var(--text-secondary)]",children:[a.jsx(Sa,{size:14,className:"text-[var(--accent-blue)]"}),a.jsx("span",{className:"font-medium text-[var(--text-primary)]",children:w.date?new Date(w.date).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}):"-"}),a.jsx("span",{className:"text-xs text-[var(--text-tertiary)]",children:w.date?new Date(w.date).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"}):""})]}),a.jsxs("div",{className:"text-lg font-bold text-emerald-600 font-mono",children:["$",(Number(w.totalPrice)||0).toLocaleString()]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-y-3 gap-x-2 text-sm",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-xs text-[var(--text-tertiary)] block mb-0.5",children:""}),a.jsx("span",{className:"font-medium text-[var(--text-primary)]",children:w.vendorName||w.vendor||"-"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-xs text-[var(--text-tertiary)] block mb-0.5",children:""}),a.jsx("span",{className:"font-bold text-[var(--text-primary)] text-base",children:w.productName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-[var(--text-tertiary)] block mb-0.5",children:""}),a.jsx("span",{className:"font-mono text-blue-500 font-bold",children:w.quantity})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-[var(--text-tertiary)] block mb-0.5",children:""}),a.jsxs("span",{className:"font-mono text-[var(--text-secondary)]",children:["$",(Number(w.unitPrice)||0).toLocaleString()]})]})]}),a.jsxs("div",{className:"pt-2 border-t border-[var(--border-primary)] flex justify-between items-center text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1 text-[var(--text-tertiary)] bg-[var(--bg-tertiary)] px-2 py-1 rounded",children:[a.jsx("span",{children:":"}),a.jsx("span",{className:"font-mono text-[var(--text-secondary)]",children:w.expiry?new Date(w.expiry).toLocaleDateString("zh-TW"):"-"})]}),a.jsxs("div",{className:"flex items-center gap-1 text-[var(--text-tertiary)]",children:[a.jsx(hn,{size:12}),a.jsx("span",{children:w.operator||"-"})]})]})]},L)):a.jsx("div",{className:"text-center py-10 text-[var(--text-secondary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:""})}),a.jsx("div",{className:"hidden md:block rounded-xl border border-[var(--border-primary)] overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase tracking-wider sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"p-20 text-center text-[var(--text-secondary)]",children:"..."})}):R.length>0?R.map((w,L)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2 text-[var(--text-secondary)]",children:[a.jsx(Sa,{size:14,className:"text-[var(--text-tertiary)] group-hover:text-[var(--accent-blue)] transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium text-[var(--text-secondary)]",children:w.date?new Date(w.date).toLocaleDateString("zh-TW"):"-"}),a.jsx("span",{className:"text-xs text-[var(--text-tertiary)]",children:w.date?new Date(w.date).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"}):""})]})]})}),a.jsx("td",{className:"p-4 text-[var(--text-secondary)]",children:w.vendorName||w.vendor||"-"}),a.jsx("td",{className:"p-4 font-medium text-[var(--text-primary)]",children:w.productName}),a.jsx("td",{className:"p-4 text-right font-mono text-blue-500",children:w.quantity}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:["$",(Number(w.unitPrice)||0).toLocaleString()]}),a.jsxs("td",{className:"p-4 text-right font-mono font-bold text-emerald-500",children:["$",(Number(w.totalPrice)||0).toLocaleString()]}),a.jsx("td",{className:"p-4 text-[var(--text-tertiary)] text-xs",children:w.expiry?new Date(w.expiry).toLocaleDateString("zh-TW"):"-"}),a.jsx("td",{className:"p-4 text-[var(--text-tertiary)]",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(hn,{size:12})," ",w.operator||"-"]})})]},L)):a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"p-20 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(Ks,{size:32,className:"text-[var(--text-secondary)]"}),a.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]})})})})]})})})]})})}function LS({user:l,apiUrl:r}){const[c,d]=E.useState([]),[u,f]=E.useState(!1),[x,b]=E.useState(""),[h,p]=E.useState("ALL"),[j,g]=E.useState(tt()),[y,S]=E.useState(tt()),A=Qe.useCallback(async()=>{f(!0);try{const N=await ke(r,"getAdjustmentHistory",{startDate:j,endDate:y,productName:x},l.token);Array.isArray(N)&&d(N)}catch(N){console.error("Failed to fetch adjustment history:",N)}finally{f(!1)}},[r,l.token,j,y,x]);E.useEffect(()=>{A()},[A]);const R=c.filter(N=>{const w=String(N.productName||"").toLowerCase().includes(x.toLowerCase()),L=h==="ALL"||N.type===h;return w&&L});return a.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-6 animate-in fade-in duration-500",children:a.jsxs("div",{className:"glass-panel p-4 md:p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-6 pb-6 border-b border-[var(--border-primary)] gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-500/10 flex items-center justify-center shrink-0",children:a.jsx(Ol,{className:"text-blue-500",size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[var(--text-primary)]",children:""}),a.jsx("p",{className:"text-[var(--text-tertiary)] text-xs mt-0.5",children:""})]})]}),a.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[a.jsxs("div",{className:"flex-1 md:flex-none glass-panel px-4 py-2 bg-[var(--bg-secondary)] border-[var(--border-primary)] flex flex-col items-center justify-center",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] uppercase font-bold tracking-wider",children:""}),a.jsx("p",{className:"text-xl font-bold text-blue-500",children:R.length})]}),a.jsxs("button",{onClick:A,disabled:u,className:"btn-secondary h-[46px] px-6 flex items-center justify-center gap-2 whitespace-nowrap",children:[a.jsx(it,{size:18,className:u?"animate-spin":""}),a.jsx("span",{children:""})]})]})]}),a.jsx("div",{className:"mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:16}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-9 w-full h-10",value:x,onChange:N=>b(N.target.value)})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsxs("select",{value:h,onChange:N=>p(N.target.value),className:"input-field w-full h-10 px-2",children:[a.jsx("option",{value:"ALL",children:""}),a.jsx("option",{value:"SCRAP",children:""}),a.jsx("option",{value:"RETURN",children:""}),a.jsx("option",{value:"LOSS",children:""}),a.jsx("option",{value:"OTHER",children:""})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10",value:j,onChange:N=>g(N.target.value)})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10",value:y,onChange:N=>S(N.target.value)})]})]})}),a.jsx("div",{className:"hidden md:block rounded-xl border border-[var(--border-primary)] overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-tertiary)] text-[10px] uppercase tracking-wider sticky top-0 font-bold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3",children:"/"}),a.jsx("th",{className:"px-4 py-3",children:""}),a.jsx("th",{className:"px-4 py-3",children:""}),a.jsx("th",{className:"px-4 py-3 text-right",children:""}),a.jsx("th",{className:"px-4 py-3",children:"/"}),a.jsx("th",{className:"px-4 py-3",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-20 text-center text-[var(--text-tertiary)]",children:"..."})}):R.length>0?R.map((N,w)=>{const L={SCRAP:"",RETURN:"",LOSS:"",OTHER:""};return a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-[var(--text-secondary)] font-medium",children:[a.jsx(Sa,{size:12,className:"text-[var(--text-tertiary)]"}),a.jsx("span",{children:N.date?new Date(N.date).toLocaleDateString("zh-TW"):"-"})]}),a.jsx("span",{className:"text-[11px] text-[var(--text-tertiary)] font-mono ml-4.5",children:N.date?new Date(N.date).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"}):""})]})}),a.jsx("td",{className:"px-4 py-3 font-bold text-[var(--text-primary)]",children:N.productName}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${N.type==="SCRAP"?"bg-rose-50 text-rose-600 border border-rose-100":N.type==="RETURN"?"bg-blue-50 text-blue-600 border border-blue-100":N.type==="LOSS"?"bg-amber-50 text-amber-600 border border-amber-100":"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] border border-[var(--border-primary)]"}`,children:L[N.type]||N.type})}),a.jsxs("td",{className:"px-4 py-3 text-right font-mono font-bold text-rose-500",children:["-",N.quantity]}),a.jsx("td",{className:"px-4 py-3 text-[var(--text-secondary)] text-xs max-w-xs truncate",title:N.note,children:N.note||"-"}),a.jsx("td",{className:"px-4 py-3 text-[var(--text-tertiary)] text-xs font-medium",children:N.operator||"-"})]},w)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-20 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(Ks,{size:32,className:"text-[var(--text-tertiary)] opacity-30"}),a.jsx("p",{className:"text-[var(--text-secondary)] font-medium",children:""})]})})})})]})})}),a.jsx("div",{className:"md:hidden space-y-3",children:u?a.jsx("div",{className:"text-center py-10 text-[var(--text-tertiary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:"..."}):R.length>0?R.map((N,w)=>{const L={SCRAP:"",RETURN:"",LOSS:"",OTHER:""};return a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] p-3 shadow-sm flex flex-col gap-2",children:[a.jsxs("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:[a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsxs("span",{className:"text-[var(--text-tertiary)] text-[10px] font-mono flex items-center gap-1",children:[a.jsx(Sa,{size:10}),N.date?new Date(N.date).toLocaleDateString("zh-TW"):"-",a.jsx("span",{className:"ml-1",children:N.date?new Date(N.date).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"}):""})]}),a.jsx("span",{className:`self-start px-2 py-0.5 rounded text-[10px] font-bold mt-1 ${N.type==="SCRAP"?"bg-rose-50 text-rose-600 border border-rose-100":N.type==="RETURN"?"bg-blue-50 text-blue-600 border border-blue-100":N.type==="LOSS"?"bg-amber-50 text-amber-600 border border-amber-100":"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] border border-[var(--border-primary)]"}`,children:L[N.type]||N.type})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase tracking-tighter",children:""}),a.jsxs("div",{className:"font-mono font-bold text-rose-500 text-base",children:["-",N.quantity]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-bold text-[var(--text-primary)]",children:N.productName}),a.jsxs("div",{className:"flex justify-between items-end gap-3",children:[a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-2 rounded-lg flex-1 min-w-0",children:[a.jsx("span",{className:"text-[9px] text-[var(--text-tertiary)] font-bold uppercase block mb-0.5 tracking-wider",children:"/"}),a.jsx("p",{className:"text-xs text-[var(--text-secondary)] truncate",children:N.note||"-"})]}),a.jsxs("div",{className:"text-right shrink-0",children:[a.jsx("span",{className:"text-[9px] text-[var(--text-tertiary)] font-bold uppercase block mb-0.5 tracking-wider",children:""}),a.jsx("span",{className:"text-xs font-bold text-[var(--text-secondary)]",children:N.operator||"-"})]})]})]})]},w)}):a.jsxs("div",{className:"text-center py-10 text-[var(--text-tertiary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:[a.jsx(Ks,{size:24,className:"mx-auto mb-2 opacity-30"}),a.jsx("p",{className:"text-sm font-medium",children:""})]})})]})})}function BS({user:l,apiUrl:r}){const[c,d]=E.useState([]),[u,f]=E.useState(!1),[x,b]=E.useState(""),h=async()=>{f(!0);try{const y=await ke(r,"getInventoryValuation",{},l.token);if(console.log("Inventory Valuation Data:",y),Array.isArray(y)){const S=Pi(y,"name");d(S)}else console.error("Valuation data is not an array:",y),d([])}catch(y){console.error("Failed to fetch valuation:",y),alert(": "+y.message)}finally{f(!1)}};E.useEffect(()=>{l?.token&&h()},[l.token,r]);const p=c.filter(y=>String(y.name||"").toLowerCase().includes(x.toLowerCase())),j=p.reduce((y,S)=>y+(Number(S.totalValue)||0),0),g=p.reduce((y,S)=>y+(Number(S.totalQty)||0),0);return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(bt,{className:"text-amber-500"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),a.jsxs("div",{className:"flex w-full md:w-auto gap-3",children:[a.jsxs("div",{className:"flex-1 bg-[var(--bg-secondary)] px-3 py-3 border border-[var(--border-primary)] rounded-xl shadow-sm text-center",children:[a.jsx("p",{className:"text-xs text-[var(--text-secondary)] uppercase font-bold",children:""}),a.jsxs("p",{className:"text-xl md:text-2xl font-bold text-amber-500 flex justify-center items-baseline gap-1",children:[a.jsx("span",{className:"text-sm opacity-50",children:"$"}),j.toLocaleString()]})]}),a.jsxs("div",{className:"flex-1 bg-[var(--bg-secondary)] px-3 py-3 border border-[var(--border-primary)] rounded-xl shadow-sm text-center",children:[a.jsx("p",{className:"text-xs text-[var(--text-secondary)] uppercase font-bold",children:""}),a.jsx("p",{className:"text-xl md:text-2xl font-bold text-blue-500",children:g.toLocaleString()})]})]})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] flex gap-4 items-center shadow-sm",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full bg-[var(--bg-primary)]",value:x,onChange:y=>b(y.target.value)})]}),a.jsxs("button",{onClick:h,disabled:u,className:"btn-secondary h-[42px] px-4 flex items-center gap-2",children:[a.jsx(it,{size:18,className:u?"animate-spin":""})," "]})]}),a.jsx("div",{className:"hidden md:block bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] overflow-hidden shadow-sm",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase tracking-wider sticky top-0 font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-secondary)]",children:"..."})}):p.length>0?p.map((y,S)=>{const A=Number(y.totalQty)||0,R=Number(y.totalValue)||0,N=A>0?R/A:0,w=j>0?R/j*100:0;return a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-4 font-medium text-[var(--text-primary)]",children:y.name}),a.jsx("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:A.toLocaleString()}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:["$",N.toFixed(2)]}),a.jsxs("td",{className:"p-4 text-right font-mono font-bold text-amber-500",children:["$",R.toLocaleString()]}),a.jsx("td",{className:"p-4 text-right w-24",children:a.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[a.jsxs("span",{className:"text-xs text-[var(--text-secondary)] w-8",children:[w.toFixed(1),"%"]}),a.jsx("div",{className:"w-12 h-1.5 bg-[var(--bg-tertiary)] rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-amber-500",style:{width:`${Math.min(w,100)}%`}})})]})})]},S)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(pn,{size:32,className:"text-[var(--text-secondary)]"}),a.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]})})})})]})})}),a.jsx("div",{className:"md:hidden space-y-4",children:u?a.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)]",children:"..."}):p.length>0?p.map((y,S)=>{const A=Number(y.totalQty)||0,R=Number(y.totalValue)||0,N=A>0?R/A:0,w=j>0?R/j*100:0;return a.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] p-4 shadow-sm flex flex-col gap-3",children:[a.jsxs("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:[a.jsx("h3",{className:"font-bold text-[var(--text-primary)] text-lg",children:y.name}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)]",children:""}),a.jsxs("div",{className:"font-bold text-amber-500 text-lg font-mono",children:["$",R.toLocaleString()]})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-sm",children:[a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-2 rounded-lg",children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)] mb-1",children:""}),a.jsx("div",{className:"font-mono font-bold text-[var(--text-primary)]",children:A.toLocaleString()})]}),a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-2 rounded-lg",children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)] mb-1",children:""}),a.jsxs("div",{className:"font-mono text-[var(--text-secondary)]",children:["$",N.toFixed(0)]})]}),a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-2 rounded-lg",children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)] mb-1",children:""}),a.jsxs("div",{className:"font-mono text-[var(--text-secondary)]",children:[w.toFixed(1),"%"]})]})]}),a.jsx("div",{className:"w-full h-1.5 bg-[var(--bg-tertiary)] rounded-full overflow-hidden mt-1",children:a.jsx("div",{className:"h-full bg-amber-500 transition-all duration-500",style:{width:`${Math.min(w,100)}%`}})})]},S)}):a.jsxs("div",{className:"text-center py-8 text-[var(--text-secondary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:[a.jsx(pn,{size:24,className:"mx-auto mb-2 text-[var(--text-tertiary)]"}),a.jsx("p",{children:""})]})})]})}function US({user:l,apiUrl:r,logActivity:c}){const[d,u]=E.useState([]),[f,x]=E.useState({}),[b,h]=E.useState(!0),[p,j]=E.useState(!1),[g,y]=E.useState(""),[S,A]=E.useState(!1),R=E.useCallback(W=>`${W.productName}-${W.type}`,[]),N=E.useCallback(async()=>{h(!0);try{const W=await ke(r,"getInventory",{},l.token);if(Array.isArray(W)){const ue={};W.forEach(k=>{const Z=`${k.productName}-${k.type}`;ue[Z]?ue[Z].quantity+=Number(k.quantity)||0:ue[Z]={...k,quantity:Number(k.quantity)||0,batchId:"aggregated",id:k.productId||k.id}});const he=Object.values(ue),de=Pi(he,"productName");u(de);const G={};de.forEach(k=>{k.type==="STOCK"&&(G[R(k)]={physicalQty:"",reason:"",accountability:""})}),x(G)}}catch(W){console.error("Failed to fetch inventory for stocktake:",W),alert("")}finally{h(!1)}},[r,l.token,R]);E.useEffect(()=>{l?.token&&N()},[l.token,N]);const w=(W,ue,he)=>{x(de=>({...de,[W]:{...de[W],[ue]:he}}))},L=W=>{const ue=document.getElementById(W);ue&&(ue.focus(),ue.select?.(),ue.scrollIntoView({block:"nearest",behavior:"smooth"}))},C=(W,ue,he,de,G=!1)=>{const k=de[ue],Z=R(k),ne=f[Z]||{},xe=M(k.quantity,ne.physicalQty),_=ne.physicalQty!==""&&xe!==0,Q=["qty","reason","acc"],J=Q.indexOf(he),le=G?"m-":"";W.key==="ArrowRight"||W.key==="Enter"&&!W.shiftKey?(W.preventDefault(),he==="qty"&&!_?ue<de.length-1&&L(`${le}qty-${R(de[ue+1])}`):J<Q.length-1?L(`${le}${Q[J+1]}-${Z}`):ue<de.length-1&&L(`${le}qty-${R(de[ue+1])}`)):W.key==="ArrowLeft"?(W.preventDefault(),J>0&&L(`${le}${Q[J-1]}-${Z}`)):W.key==="ArrowDown"?(W.preventDefault(),ue<de.length-1&&L(`${le}${he}-${R(de[ue+1])}`)):W.key==="ArrowUp"&&(W.preventDefault(),ue>0&&L(`${le}${he}-${R(de[ue-1])}`))},M=(W,ue)=>ue===""||ue===void 0?0:Number(ue)-Number(W),O=()=>d.filter(W=>{if(W.type!=="STOCK")return!1;const ue=f[R(W)];return ue&&ue.physicalQty!==""}).map(W=>{const ue=f[R(W)],he=M(W.quantity,ue.physicalQty);return{productId:W.id,productName:W.productName,bookQty:Number(W.quantity),physicalQty:Number(ue.physicalQty),diff:he,reason:ue.reason,accountability:ue.accountability,batchId:W.batchId||""}}),v=async()=>{const W=d.filter(de=>{if(de.type!=="STOCK"||Number(de.quantity)===0)return!1;const G=R(de),k=f[G];return!k||k.physicalQty===""||k.physicalQty===void 0});if(W.length>0){alert(` ${W.length} 
`);const de=R(W[0]);L(`qty-${de}`);return}const ue=O();ue.length===0&&d.some(de=>de.type==="STOCK");const he=ue.find(de=>de.diff!==0&&(!de.reason||!de.accountability));if(he){alert(`${he.productName}`);const de=R(he);f[de].reason?document.getElementById(`acc-${de}`)?.focus():document.getElementById(`reason-${de}`)?.focus();return}if(confirm(` ${ue.length} `)){j(!0);try{await ke(r,"saveStocktake",{date:tt(),items:ue,operator:l.username},l.token),c&&c({actionType:"DATA_EDIT",page:"",details:JSON.stringify({itemCount:ue.length,hasDifferences:ue.some(de=>de.diff!==0),totalDiff:ue.reduce((de,G)=>de+Math.abs(G.diff),0)})}),alert(""),x({}),await N()}catch(de){console.error("Stocktake submit failed:",de),alert(": "+de.message)}finally{j(!1)}}},B=d.filter(W=>!W||!S&&(Number(W.quantity)||0)===0?!1:String(W.productName||"").toLowerCase().includes(g.toLowerCase())),q=B.filter(W=>W.type==="STOCK"),ae=B.filter(W=>W.type!=="STOCK"),oe=(W,ue,he,de,G)=>a.jsxs("div",{className:"hidden md:flex bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] p-6 flex-col shadow-sm",children:[a.jsxs("h3",{className:`text-lg font-bold mb-4 flex items-center gap-2 ${de}`,children:[a.jsx(he,{size:20})," ",ue,!G&&a.jsx("span",{className:"text-xs text-[var(--text-secondary)] font-normal ml-2",children:""})]}),a.jsx("div",{className:"rounded-lg border border-[var(--border-primary)] overflow-hidden",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),G&&a.jsxs(a.Fragment,{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4",children:""})]})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:b?a.jsx("tr",{children:a.jsx("td",{colSpan:G?"6":"2",className:"p-6 text-center text-[var(--text-secondary)]",children:"..."})}):W.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:G?"6":"2",className:"p-6 text-center text-[var(--text-secondary)]",children:""})}):W.map((k,Z)=>{if(!k)return null;const ne=R(k),xe=f[ne]||{physicalQty:"",reason:"",accountability:l.username||""},_=M(k.quantity,xe.physicalQty),Q=!G&&Number(k.quantity)>0;return a.jsxs("tr",{className:`hover:bg-[var(--bg-hover)] transition-colors ${G&&_!==0&&xe.physicalQty!==""?"bg-amber-500/10":Q?"bg-orange-500/10 border-l-4 border-orange-500":""}`,children:[a.jsx("td",{className:`p-4 font-medium ${Q?"text-orange-600 font-bold":"text-[var(--text-primary)]"}`,children:k.productName||""}),a.jsx("td",{className:`p-4 text-right font-mono ${Q?"text-orange-500 font-bold text-lg":"text-[var(--text-secondary)]"}`,children:k.quantity}),G&&a.jsxs(a.Fragment,{children:[a.jsx("td",{className:"p-4",children:a.jsx("input",{id:`qty-${ne}`,type:"number",className:`input-field w-full text-right font-mono ${_!==0&&xe.physicalQty!==""?"border-red-500 text-red-500":""}`,placeholder:"0",value:xe.physicalQty,onChange:J=>w(ne,"physicalQty",J.target.value),onKeyDown:J=>C(J,Z,"qty",W),onWheel:J=>J.target.blur()})}),a.jsx("td",{className:"p-4 text-center",children:a.jsxs("span",{className:`inline-flex items-center gap-1 font-mono font-bold ${xe.physicalQty===""||_===0?"text-green-500":"text-red-500 underline"}`,children:[xe.physicalQty!==""?_>0?`+${_}`:_:0,xe.physicalQty!==""&&_!==0&&a.jsx(_l,{size:12})]})}),a.jsx("td",{className:"p-4",children:a.jsx("input",{id:`reason-${ne}`,type:"text",disabled:xe.physicalQty===""||_===0,className:`input-field w-full text-xs transition-all ${xe.physicalQty!==""&&_!==0?"":"bg-[var(--bg-tertiary)] cursor-not-allowed opacity-50"}`,placeholder:_!==0&&xe.physicalQty!==""?"...":"-",value:xe.reason,onChange:J=>w(ne,"reason",J.target.value),onKeyDown:J=>C(J,Z,"reason",W)})}),a.jsx("td",{className:"p-4",children:a.jsx("input",{id:`acc-${ne}`,type:"text",disabled:xe.physicalQty===""||_===0,className:`input-field w-full text-xs transition-all ${xe.physicalQty!==""&&_!==0?"":"bg-[var(--bg-tertiary)] cursor-not-allowed opacity-50"}`,placeholder:_!==0&&xe.physicalQty!==""?"...":"-",value:xe.accountability,onChange:J=>w(ne,"accountability",J.target.value),onKeyDown:J=>C(J,Z,"acc",W)})})]})]},ne)})})]})})]}),De=(W,ue,he,de,G)=>a.jsxs("div",{className:"md:hidden flex flex-col gap-4",children:[a.jsxs("h3",{className:`text-lg font-bold flex items-center gap-2 ${de} px-1`,children:[a.jsx(he,{size:20})," ",ue,!G&&a.jsx("span",{className:"text-xs text-slate-500 font-normal ml-2",children:""})]}),a.jsx("div",{className:"space-y-4",children:b?a.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)]",children:"..."}):W.length===0?a.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:""}):W.map((k,Z)=>{if(!k)return null;const ne=R(k),xe=f[ne]||{physicalQty:"",reason:"",accountability:l.username||""},_=M(k.quantity,xe.physicalQty),Q=xe.physicalQty!==""&&_!==0,J=!G&&Number(k.quantity)>0;return a.jsxs("div",{className:`bg-[var(--bg-secondary)] rounded-xl p-4 border shadow-sm space-y-3 ${G&&Q?"border-amber-500/30 bg-amber-500/5":J?"border-orange-500/30 bg-orange-500/5":"border-[var(--border-primary)]"}`,children:[a.jsxs("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:[a.jsx("span",{className:`font-bold text-lg ${J?"text-orange-600":"text-[var(--text-primary)]"}`,children:k.productName||""}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("span",{className:"text-xs text-[var(--text-secondary)]",children:""}),a.jsx("span",{className:`font-mono text-lg font-bold ${J?"text-orange-500":"text-[var(--text-secondary)]"}`,children:k.quantity})]})]}),G&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] min-w-[70px]",children:":"}),a.jsx("input",{id:`m-qty-${ne}`,type:"number",className:`input-field flex-1 text-right font-mono py-2 ${Q?"border-red-500 text-red-500":""}`,placeholder:"",value:xe.physicalQty,onChange:le=>w(ne,"physicalQty",le.target.value),onKeyDown:le=>C(le,Z,"qty",W,!0)}),a.jsx("div",{className:"w-12 text-right",children:a.jsx("span",{className:`font-mono font-bold ${xe.physicalQty===""||!Q?"text-slate-300":"text-red-500"}`,children:xe.physicalQty!==""?_>0?`+${_}`:_:"-"})})]}),Q&&a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-3 rounded-lg border border-amber-500/20 space-y-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-xs font-bold text-[var(--text-secondary)]",children:""}),a.jsx("input",{id:`m-reason-${ne}`,type:"text",className:"input-field w-full text-sm",placeholder:"...",value:xe.reason,onChange:le=>w(ne,"reason",le.target.value),onKeyDown:le=>C(le,Z,"reason",W,!0)})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),a.jsx("input",{id:`m-acc-${ne}`,type:"text",className:"input-field w-full text-sm",placeholder:"",value:xe.accountability,onChange:le=>w(ne,"accountability",le.target.value),onKeyDown:le=>C(le,Z,"acc",W,!0)})]})]})]})]},ne)})})]});return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)] relative",children:[p&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)]",children:"..."})]}),a.jsxs("div",{className:"hidden md:flex flex-col gap-6 shrink-0",children:[a.jsxs("div",{className:"flex justify-between items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Zs,{className:"text-blue-600"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:N,className:"btn-secondary h-[42px] px-4",title:"",children:a.jsx(ki,{size:18})}),a.jsx("button",{onClick:v,disabled:p,className:"btn-primary h-[42px] px-6 flex items-center gap-2",children:p?"...":a.jsxs(a.Fragment,{children:[a.jsx(Xs,{size:18})," "]})})]})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] flex gap-4 items-center",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:g,onChange:W=>y(W.target.value)})]}),a.jsx("div",{className:"flex items-center gap-3 bg-[var(--bg-primary)] p-2 px-4 rounded-xl border border-[var(--border-primary)] shadow-sm shrink-0",children:a.jsxs("label",{className:"text-sm font-bold text-[var(--text-secondary)] flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500",checked:S,onChange:W=>A(W.target.checked)})," 0 "]})})]})]}),a.jsxs("div",{className:"md:hidden flex flex-col gap-3 shrink-0",children:[a.jsxs("h1",{className:"text-xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Zs,{className:"text-blue-600"})," "]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:g,onChange:W=>y(W.target.value)})]}),a.jsx("button",{onClick:N,className:"btn-secondary px-3 flex items-center justify-center shrink-0",title:"",children:a.jsx(ki,{size:20})})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 bg-[var(--bg-secondary)] px-3 py-2 rounded-xl border border-[var(--border-primary)] shadow-sm",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500",checked:S,onChange:W=>A(W.target.checked)}),a.jsx("span",{className:"text-xs font-bold text-[var(--text-secondary)]",children:" 0 "})]}),a.jsx("button",{onClick:v,disabled:p,className:"btn-primary flex-1 py-2 flex items-center justify-center gap-2 text-sm",children:p?"...":a.jsxs(a.Fragment,{children:[a.jsx(Xs,{size:16})," "]})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto flex flex-col gap-6 pb-6 w-full",children:[oe(q,"",Ml,"text-blue-600",!0),De(q,"",Ml,"text-blue-600",!0),oe(ae,"/",Ti,"text-orange-600",!1),De(ae,"/",Ti,"text-orange-600",!1)]})]})}function HS({user:l,apiUrl:r}){const[c,d]=E.useState([]),[u,f]=E.useState(!1),[x,b]=E.useState(""),[h,p]=E.useState(!0),[j,g]=E.useState(tt()),[y,S]=E.useState(tt()),A=Qe.useCallback(async()=>{f(!0);try{const C=await ke(r,"getStocktakeHistory",{startDate:j,endDate:y,productName:x,diffOnly:h},l.token);Array.isArray(C)&&d(C)}catch(C){console.error("Failed to fetch stocktake history:",C)}finally{f(!1)}},[r,l.token,j,y,x,h]);E.useEffect(()=>{A()},[A]),E.useEffect(()=>{const C=()=>{if(document.hidden)return;const M=tt();if(j===y&&j!==M){const O=new Date;O.setDate(O.getDate()-1);const v=`${O.getFullYear()}-${String(O.getMonth()+1).padStart(2,"0")}-${String(O.getDate()).padStart(2,"0")}`;j===v&&(console.log("Detected stale date (yesterday), auto-updating to today:",M),g(M),S(M))}};return window.addEventListener("focus",C),document.addEventListener("visibilitychange",C),()=>{window.removeEventListener("focus",C),document.removeEventListener("visibilitychange",C)}},[j,y]);const R=c.filter(C=>String(C.productName||"").toLowerCase().includes(x.toLowerCase())),N=R.length,w=R.filter(C=>C.diff!==0).length,L=R.filter(C=>C.diff===0).length;return a.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-6 animate-in fade-in duration-500",children:a.jsxs("div",{className:"glass-panel p-4 md:p-6 text-[var(--text-primary)]",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-6 border-b border-[var(--border-primary)] pb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-500/10 flex items-center justify-center shrink-0",children:a.jsx(Ol,{className:"text-blue-500",size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[var(--text-primary)]",children:""}),a.jsx("p",{className:"text-[var(--text-tertiary)] text-xs mt-0.5",children:""})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full md:w-auto md:flex md:gap-3",children:[a.jsxs("div",{className:"px-3 py-2 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)] flex flex-col items-center justify-center min-w-[80px]",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] uppercase font-bold tracking-wider",children:""}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)]",children:N})]}),a.jsxs("div",{className:"px-3 py-2 rounded-xl bg-rose-50 border border-rose-100 flex flex-col items-center justify-center min-w-[80px]",children:[a.jsx("p",{className:"text-[10px] text-rose-500 uppercase font-bold tracking-wider",children:""}),a.jsx("p",{className:"text-lg font-bold text-rose-600",children:w})]}),a.jsxs("div",{className:"px-3 py-2 rounded-xl bg-emerald-50 border border-emerald-100 flex flex-col items-center justify-center min-w-[80px]",children:[a.jsx("p",{className:"text-[10px] text-emerald-500 uppercase font-bold tracking-wider",children:""}),a.jsx("p",{className:"text-lg font-bold text-emerald-600",children:L})]})]})]}),a.jsx("div",{className:"mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 gap-4 items-end",children:[a.jsxs("div",{className:"md:col-span-2 lg:col-span-4 space-y-1.5 w-full",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:16}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full h-10",value:x,onChange:C=>b(C.target.value)})]})]}),a.jsxs("div",{className:"md:col-span-1 lg:col-span-2 space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10",value:j,onChange:C=>g(C.target.value)})]}),a.jsxs("div",{className:"md:col-span-1 lg:col-span-2 space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10",value:y,onChange:C=>S(C.target.value)})]}),a.jsxs("div",{className:"md:col-span-2 lg:col-span-3 flex items-center gap-2",children:[a.jsxs("label",{className:"flex-1 flex items-center gap-2 px-3 py-2 rounded-xl bg-[var(--bg-primary)] border border-[var(--border-primary)] cursor-pointer hover:bg-[var(--bg-hover)] transition-colors h-10",children:[a.jsx("input",{type:"checkbox",checked:h,onChange:C=>p(C.target.checked),className:"w-4 h-4 rounded border-[var(--border-primary)] text-blue-500 focus:ring-blue-500"}),a.jsx("span",{className:"text-[11px] text-[var(--text-secondary)] font-bold whitespace-nowrap",children:""})]}),a.jsxs("button",{onClick:A,disabled:u,className:"btn-secondary h-10 px-4 flex items-center gap-2 whitespace-nowrap",children:[a.jsx(it,{size:16,className:u?"animate-spin":""})," "]})]})]})}),a.jsx("div",{className:"hidden md:block rounded-xl border border-[var(--border-primary)] overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-tertiary)] text-[10px] uppercase tracking-wider sticky top-0 font-bold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3",children:""}),a.jsx("th",{className:"px-4 py-3",children:""}),a.jsx("th",{className:"px-4 py-3 text-right",children:"/"}),a.jsx("th",{className:"px-4 py-3 text-center",children:""}),a.jsx("th",{className:"px-4 py-3",children:"/"}),a.jsx("th",{className:"px-4 py-3",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-20 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(it,{className:"animate-spin text-blue-500"}),a.jsx("span",{className:"text-[var(--text-tertiary)] text-sm",children:"..."})]})})}):R.length>0?R.map((C,M)=>a.jsxs("tr",{className:`hover:bg-[var(--bg-hover)] transition-colors group ${C.diff!==0?"bg-amber-50/30":""}`,children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-1.5 text-[var(--text-tertiary)] font-mono text-[11px]",children:[a.jsx(Sa,{size:10}),C.date]})}),a.jsx("td",{className:"px-4 py-3 font-bold text-[var(--text-primary)]",children:C.productName}),a.jsx("td",{className:"px-4 py-3 text-right",children:a.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[a.jsxs("span",{className:"text-[10px] text-[var(--text-tertiary)] font-mono",children:[": ",C.bookQty]}),a.jsxs("span",{className:"text-sm text-blue-600 font-bold font-mono",children:[": ",C.physicalQty]})]})}),a.jsx("td",{className:"px-4 py-3 text-center",children:C.diff===0?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-600 text-[10px] font-bold border border-emerald-100",children:[a.jsx(kd,{size:10})," 0"]}):a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold border ${C.diff>0?"bg-blue-50 text-blue-600 border-blue-100":"bg-rose-50 text-rose-600 border-rose-100"}`,children:[a.jsx(_l,{size:10}),C.diff>0?`+${C.diff}`:C.diff]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex flex-col gap-0.5 max-w-[150px]",children:[a.jsx("p",{className:"text-[11px] text-[var(--text-secondary)] truncate",title:C.reason,children:C.reason||"-"}),a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold",children:C.accountability||"-"})]})}),a.jsx("td",{className:"px-4 py-3 text-[var(--text-tertiary)] text-xs font-medium",children:C.operator||"-"})]},M)):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-20 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(Ks,{size:32,className:"text-[var(--text-tertiary)] opacity-30"}),a.jsx("p",{className:"text-[var(--text-secondary)] font-medium",children:""})]})})})})]})})}),a.jsx("div",{className:"md:hidden space-y-3",children:u?a.jsx("div",{className:"text-center py-10 text-[var(--text-tertiary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:"..."}):R.length>0?R.map((C,M)=>a.jsxs("div",{className:`bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] p-3 shadow-sm flex flex-col gap-2 ${C.diff!==0?"bg-amber-50/20":""}`,children:[a.jsxs("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:[a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[var(--text-tertiary)] font-mono uppercase tracking-wider",children:[a.jsx(Sa,{size:10}),C.date]}),a.jsx("h3",{className:"font-bold text-[var(--text-primary)] text-base",children:C.productName})]}),a.jsx("div",{className:"text-right",children:a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold border ${C.diff===0?"bg-emerald-50 text-emerald-600 border-emerald-100":C.diff>0?"bg-blue-50 text-blue-600 border-blue-100":"bg-rose-50 text-rose-600 border-rose-100"}`,children:[C.diff===0?a.jsx(kd,{size:10}):a.jsx(_l,{size:10}),C.diff>0?`+${C.diff}`:C.diff]})})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center bg-[var(--bg-secondary)] p-2 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[9px] text-[var(--text-tertiary)] font-bold uppercase tracking-wider",children:""}),a.jsx("div",{className:"font-mono font-medium text-[var(--text-secondary)]",children:C.bookQty})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[9px] text-[var(--text-tertiary)] font-bold uppercase tracking-wider",children:""}),a.jsx("div",{className:"font-mono font-bold text-blue-600 tracking-tighter",children:C.physicalQty})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[9px] text-[var(--text-tertiary)] font-bold uppercase tracking-wider",children:""}),a.jsx("div",{className:`font-mono font-bold ${C.diff===0?"text-emerald-600":"text-rose-600"}`,children:C.diff})]})]}),(C.reason||C.accountability)&&a.jsxs("div",{className:"text-xs bg-[var(--bg-secondary)] p-2 rounded-lg text-[var(--text-secondary)] space-y-1 border border-[var(--border-primary)]",children:[C.reason&&a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)] font-bold mr-2 uppercase text-[9px]",children:":"}),C.reason]}),C.accountability&&a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)] font-bold mr-2 uppercase text-[9px]",children:":"}),C.accountability]})]}),a.jsx("div",{className:"flex justify-between items-center text-[10px] text-[var(--text-tertiary)] pt-1",children:a.jsxs("span",{className:"flex items-center gap-1 font-medium",children:[": ",a.jsx("span",{className:"text-[var(--text-secondary)] font-bold",children:C.operator||"-"})]})})]},M)):a.jsxs("div",{className:"text-center py-10 text-[var(--text-tertiary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:[a.jsx(Ks,{size:24,className:"mx-auto mb-2 opacity-30"}),a.jsx("p",{className:"text-sm font-medium",children:""})]})})]})})}function $S({user:l,apiUrl:r}){const[c,d]=E.useState([]),[u,f]=E.useState(!1),[x,b]=E.useState(tt()),[h,p]=E.useState(tt()),[j,g]=E.useState(""),[y,S]=E.useState(""),[A,R]=E.useState(new Set),N=Qe.useCallback(async()=>{f(!0);try{const v={};x&&(v.startDate=x),h&&(v.endDate=h);const B=await ke(r,"getReceivables",v,l.token);if(Array.isArray(B)){const q=B.sort((ae,oe)=>new Date(oe.date)-new Date(ae.date));d(q)}}catch(v){console.error("Failed to fetch data:",v),alert(": "+v.message)}finally{f(!1)}},[r,l.token,x,h]);E.useEffect(()=>{N()},[N]);const w=async v=>{if(confirm("")){f(!0);try{await ke(r,"markAsPaid",{recordId:v},l.token),alert(""),N()}catch(B){console.error("Failed to mark as paid:",B),alert(": "+B.message)}finally{f(!1)}}},L=v=>{const B=new Set(A);B.has(v)?B.delete(v):B.add(v),R(B)},C=v=>[v.salesRep,v.salesPerson,v.operator,v.Operator,v.buyer].find(ae=>ae&&String(ae).toLowerCase()!=="unknown")||"-",M=c.filter(v=>{const B=String(v.clientName||v.customer||v.location||"").toLowerCase(),q=String(C(v)).toLowerCase(),ae=!j||B.includes(j.toLowerCase()),oe=!y||q.includes(y.toLowerCase());return ae&&oe}),O=M.reduce((v,B)=>v+(Number(B.amount)||Number(B.total)||0),0);return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-row justify-between items-center gap-4",children:[a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2 truncate",children:[a.jsx(mn,{className:"text-emerald-500 w-6 h-6 shrink-0"}),a.jsx("span",{className:"truncate",children:""})]})}),a.jsxs("div",{className:"glass-panel px-3 py-2 border-[var(--border-primary)] bg-[var(--bg-secondary)] shrink-0 flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase tracking-wider",children:""}),a.jsxs("p",{className:"text-lg md:text-xl font-bold text-emerald-500",children:["$",O.toLocaleString()]})]})]}),a.jsx("div",{className:"mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)]",value:x,onChange:v=>b(v.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)]",value:h,onChange:v=>p(v.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:"/"}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full h-10",value:j,onChange:v=>g(v.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full h-10",value:y,onChange:v=>S(v.target.value)})]}),a.jsxs("button",{onClick:N,className:"btn-secondary h-10 px-6 flex items-center gap-2 justify-center w-full md:w-auto",children:[a.jsx(it,{size:18})," "]})]})}),a.jsx("div",{className:"hidden md:block rounded-xl border border-[var(--border-primary)] overflow-hidden",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-10"}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-10 text-center text-[var(--text-secondary)]",children:"..."})}):M.length>0?M.map((v,B)=>a.jsxs(Qe.Fragment,{children:[a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)] transition-colors cursor-pointer",onClick:()=>L(B),children:[a.jsx("td",{className:"p-4 text-[var(--text-tertiary)]",children:A.has(B)?a.jsx(Ai,{size:16}):a.jsx(Vn,{size:16})}),a.jsx("td",{className:"p-4 text-[var(--text-secondary)]",children:(()=>{const q=v.serverTimestamp||v.timestamp||v.date,ae=new Date(q);return isNaN(ae.getTime())?"-":ae.toLocaleDateString("zh-TW")})()}),a.jsx("td",{className:"p-4 font-medium text-[var(--text-primary)]",children:v.clientName||v.customer||v.location||"-"}),a.jsxs("td",{className:"p-4 text-right font-mono font-bold text-emerald-500",children:["$",(Number(v.amount)||Number(v.total)||0).toLocaleString()]}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${v.status==="PAID"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-rose-50 text-rose-600 border border-rose-100"}`,children:v.status==="PAID"?"":""})}),a.jsx("td",{className:"p-4 text-center",onClick:q=>q.stopPropagation(),children:v.status!=="PAID"&&a.jsx("button",{onClick:()=>w(v.id),className:"btn-primary text-xs py-1 px-3",children:""})})]}),A.has(B)&&a.jsx("tr",{className:"bg-[var(--bg-secondary)]/50",children:a.jsx("td",{colSpan:"6",className:"p-4 pl-12",children:a.jsx("div",{className:"bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-lg overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] border-b border-[var(--border-primary)]",children:[a.jsx("th",{className:"py-2 px-4 text-left font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-left font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-right font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-center font-medium",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:(v.items||v.products||v.salesData||[]).length>0?(v.items||v.products||v.salesData||[]).map((q,ae)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)]",children:[a.jsx("td",{className:"py-3 px-4 text-[var(--text-secondary)]",children:C(v)}),a.jsx("td",{className:"py-3 px-4 text-[var(--text-primary)] font-medium",children:q.productName||q.name||"-"}),a.jsxs("td",{className:"py-3 px-4 text-right text-[var(--text-secondary)] font-mono",children:["$",(Number(q.price)||Number(q.unitPrice)||0).toLocaleString()]}),a.jsx("td",{className:"py-3 px-4 text-center text-[var(--text-secondary)] font-mono",children:q.qty||q.soldQty||1})]},ae)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"py-4 text-center text-[var(--text-secondary)] italic",children:""})})})]})})})})]},B)):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-10 text-center text-[var(--text-secondary)]",children:""})})})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:u?a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:"..."}):M.length>0?M.map((v,B)=>a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] p-4 shadow-sm",onClick:()=>L(B),children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)] mb-1",children:(()=>{const q=v.serverTimestamp||v.timestamp||v.date,ae=new Date(q);return isNaN(ae.getTime())?"-":ae.toLocaleDateString("zh-TW")})()}),a.jsx("div",{className:"font-bold text-[var(--text-primary)] text-lg",children:v.clientName||v.customer||v.location||""}),a.jsxs("div",{className:"text-xs text-[var(--text-secondary)] mt-1",children:[": ",C(v)]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-xl font-black font-mono text-emerald-500",children:["$",(Number(v.amount)||Number(v.total)||0).toLocaleString()]}),a.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded-full text-[10px] font-bold ${v.status==="PAID"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-rose-50 text-rose-600 border border-rose-100"}`,children:v.status==="PAID"?"":""})]})]}),a.jsxs("div",{className:"pt-3 border-t border-[var(--border-primary)] flex items-center justify-between",children:[a.jsxs("button",{className:"text-[var(--text-tertiary)] flex items-center gap-1 text-xs",children:[A.has(B)?a.jsx(Ai,{size:14}):a.jsx(Vn,{size:14}),""]}),v.status!=="PAID"&&a.jsx("button",{onClick:q=>{q.stopPropagation(),w(v.id)},className:"btn-primary text-xs py-1.5 px-4",children:""})]}),A.has(B)&&a.jsxs("div",{className:"mt-3 bg-[var(--bg-secondary)] rounded-lg p-3 text-sm space-y-2 animate-in fade-in slide-in-from-top-2 duration-200",children:[(v.items||v.products||v.salesData||[]).map((q,ae)=>a.jsxs("div",{className:"flex justify-between items-center border-b border-[var(--border-primary)] last:border-0 pb-2 last:pb-0",children:[a.jsx("span",{className:"text-[var(--text-primary)]",children:q.productName||q.name}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"text-[var(--text-primary)] font-mono",children:["$",(Number(q.price)||0).toLocaleString()," x ",q.qty||1]})})]},ae)),!v.items&&!v.products&&!v.salesData&&a.jsx("div",{className:"text-[var(--text-tertiary)] text-center py-2 italic",children:""})]})]},B)):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:""})})]})}function qS({user:l,apiUrl:r}){const[c,d]=E.useState([]),[u,f]=E.useState(!1),[x,b]=E.useState(tt()),[h,p]=E.useState(tt()),[j,g]=E.useState(""),[y,S]=E.useState(""),[A,R]=E.useState(new Set),N=Qe.useCallback(async()=>{f(!0);try{const v={};x&&(v.startDate=x),h&&(v.endDate=h);const B=await ke(r,"getPayables",v,l.token);if(Array.isArray(B)){const q=B.sort((ae,oe)=>new Date(oe.date)-new Date(ae.date));d(q)}}catch(v){console.error("Failed to fetch payables:",v)}finally{f(!1)}},[r,l.token,x,h]);E.useEffect(()=>{N()},[N]);const w=async v=>{if(confirm("")){f(!0);try{await ke(r,"markPayableAsPaid",{recordId:v},l.token),alert(""),N()}catch(B){console.error("Failed to mark as paid:",B),alert(": "+B.message)}finally{f(!1)}}},L=v=>{const B=new Set(A);B.has(v)?B.delete(v):B.add(v),R(B)},C=v=>v.operator||v.Operator||v.buyer||v.salesRep||v.salesPerson||"-",M=c.filter(v=>{const B=String(v.vendorName||v.vendor||"").toLowerCase(),q=String(C(v)).toLowerCase(),ae=!j||B.includes(j.toLowerCase()),oe=!y||q.includes(y.toLowerCase());return ae&&oe}),O=M.reduce((v,B)=>v+(Number(B.amount)||Number(B.total)||0),0);return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-row justify-between items-center gap-4",children:[a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2 truncate",children:[a.jsx(mn,{className:"text-rose-600 w-6 h-6 shrink-0"}),a.jsx("span",{className:"truncate",children:""})]})}),a.jsxs("div",{className:"glass-panel px-3 py-2 border-[var(--border-primary)] bg-[var(--bg-secondary)] shrink-0 flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase tracking-wider",children:""}),a.jsxs("p",{className:"text-lg md:text-xl font-bold text-rose-500",children:["$",O.toLocaleString()]})]})]}),a.jsx("div",{className:"mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)]",value:x,onChange:v=>b(v.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)]",value:h,onChange:v=>p(v.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full h-10",value:j,onChange:v=>g(v.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full h-10",value:y,onChange:v=>S(v.target.value)})]}),a.jsxs("button",{onClick:N,className:"btn-secondary h-10 px-6 flex items-center gap-2 justify-center w-full md:w-auto",children:[a.jsx(it,{size:18})," "]})]})}),a.jsx("div",{className:"hidden md:block rounded-xl border border-[var(--border-primary)] overflow-hidden",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-10"}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-10 text-center text-[var(--text-secondary)]",children:"..."})}):M.length>0?M.map((v,B)=>a.jsxs(Qe.Fragment,{children:[a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)] transition-colors cursor-pointer",onClick:()=>L(B),children:[a.jsx("td",{className:"p-4 text-[var(--text-tertiary)]",children:A.has(B)?a.jsx(Ai,{size:16}):a.jsx(Vn,{size:16})}),a.jsx("td",{className:"p-4 text-[var(--text-secondary)] text-center",children:(()=>{const q=v.serverTimestamp||v.timestamp||v.date,ae=new Date(q);return isNaN(ae.getTime())?"-":ae.toLocaleDateString("zh-TW")})()}),a.jsx("td",{className:"p-4 font-medium text-[var(--text-primary)]",children:v.vendorName||v.vendor||"-"}),a.jsxs("td",{className:"p-4 text-right font-mono font-bold text-rose-500",children:["$",(Number(v.amount)||Number(v.total)||0).toLocaleString()]}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${v.status==="PAID"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-rose-50 text-rose-600 border border-rose-100"}`,children:v.status==="PAID"?"":""})}),a.jsx("td",{className:"p-4 text-center",onClick:q=>q.stopPropagation(),children:v.status!=="PAID"&&a.jsx("button",{onClick:()=>w(v.id),className:"btn-primary text-xs py-1 px-3",children:""})})]}),A.has(B)&&a.jsx("tr",{className:"bg-[var(--bg-secondary)]/50",children:a.jsx("td",{colSpan:"6",className:"p-4 pl-12",children:a.jsx("div",{className:"bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-lg overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] border-b border-[var(--border-primary)]",children:[a.jsx("th",{className:"py-2 px-4 text-left font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-left font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-right font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-center font-medium",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:(v.items||v.products||[]).length>0?(v.items||v.products||[]).map((q,ae)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)]",children:[a.jsx("td",{className:"py-3 px-4 text-[var(--text-secondary)]",children:C(v)}),a.jsx("td",{className:"py-3 px-4 text-[var(--text-primary)] font-medium",children:q.productName||q.name||"-"}),a.jsxs("td",{className:"py-3 px-4 text-right text-[var(--text-secondary)] font-mono",children:["$",(Number(q.price)||Number(q.unitPrice)||0).toLocaleString()]}),a.jsx("td",{className:"py-3 px-4 text-center text-[var(--text-secondary)] font-mono",children:q.qty||q.quantity||1})]},ae)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"py-4 text-center text-[var(--text-secondary)] italic",children:""})})})]})})})})]},B)):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-10 text-center text-[var(--text-secondary)]",children:""})})})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:u?a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:"..."}):M.length>0?M.map((v,B)=>a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] p-4 shadow-sm",onClick:()=>L(B),children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)] mb-1",children:(()=>{const q=v.serverTimestamp||v.timestamp||v.date,ae=new Date(q);return isNaN(ae.getTime())?"-":ae.toLocaleDateString("zh-TW")})()}),a.jsx("div",{className:"font-bold text-[var(--text-primary)] text-lg",children:v.vendorName||v.vendor||""}),a.jsxs("div",{className:"text-xs text-[var(--text-secondary)] mt-1",children:[": ",C(v)]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-xl font-black font-mono text-rose-500",children:["$",(Number(v.amount)||Number(v.total)||0).toLocaleString()]}),a.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded-full text-[10px] font-bold ${v.status==="PAID"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-rose-50 text-rose-600 border border-rose-100"}`,children:v.status==="PAID"?"":""})]})]}),a.jsxs("div",{className:"pt-3 border-t border-[var(--border-primary)] flex items-center justify-between",children:[a.jsxs("button",{className:"text-[var(--text-tertiary)] flex items-center gap-1 text-xs",children:[A.has(B)?a.jsx(Ai,{size:14}):a.jsx(Vn,{size:14}),""]}),v.status!=="PAID"&&a.jsx("button",{onClick:q=>{q.stopPropagation(),w(v.id)},className:"btn-primary text-xs py-1.5 px-4",children:""})]}),A.has(B)&&a.jsxs("div",{className:"mt-3 bg-[var(--bg-secondary)] rounded-lg p-3 text-sm space-y-2 animate-in fade-in slide-in-from-top-2 duration-200",children:[(v.items||v.products||[]).map((q,ae)=>a.jsxs("div",{className:"flex justify-between items-center border-b border-[var(--border-primary)] last:border-0 pb-2 last:pb-0",children:[a.jsx("span",{className:"text-[var(--text-primary)]",children:q.productName||q.name}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"text-[var(--text-primary)] font-mono",children:["$",(Number(q.price)||0).toLocaleString()," x ",q.qty||1]})})]},ae)),!v.items&&!v.products&&a.jsx("div",{className:"text-[var(--text-tertiary)] text-center py-2 italic",children:""})]})]},B)):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:""})})]})}function GS({user:l,apiUrl:r}){const[c,d]=E.useState([]),[u,f]=E.useState({}),[x,b]=E.useState(!1),[h,p]=E.useState(tt()),[j,g]=E.useState(tt()),[y,S]=E.useState(""),A=async()=>{b(!0);try{const N=await ke(r,"getProducts",{},l.token),w={};Array.isArray(N)&&(N.forEach(C=>{w[C.id]=C.name}),f(w));const L=await ke(r,"getSalesRanking",{startDate:h,endDate:j},l.token);Array.isArray(L)?d(L):d([])}catch(N){console.error("Failed to fetch sales ranking:",N),alert("")}finally{b(!1)}};E.useEffect(()=>{l?.token&&A()},[l.token,r]);const R=c.filter(N=>{const w=u[N.productName]||N.productName;return String(w||"").toLowerCase().includes(y.toLowerCase())});return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)]",children:[a.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Ad,{className:"text-[var(--accent-blue)]"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),a.jsx("button",{onClick:A,disabled:x,className:"btn-secondary p-2 rounded-xl",children:a.jsx(it,{size:20,className:x?"animate-spin":""})})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] shrink-0 grid grid-cols-1 md:grid-cols-3 gap-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"date",className:"input-field flex-1 text-sm bg-[var(--bg-tertiary)]",value:h,onChange:N=>p(N.target.value)}),a.jsx("span",{className:"text-[var(--text-secondary)] font-bold hidden md:inline",children:""}),a.jsx("input",{type:"date",className:"input-field flex-1 text-sm bg-[var(--bg-tertiary)]",value:j,onChange:N=>g(N.target.value)})]}),a.jsxs("div",{className:"relative",children:[a.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full bg-[var(--bg-tertiary)]",value:y,onChange:N=>S(N.target.value)})]}),a.jsxs("button",{onClick:A,className:"btn-primary flex items-center justify-center gap-2 h-[42px]",children:[a.jsx(jt,{size:18})," "]})]}),a.jsx("div",{className:"bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] overflow-hidden flex-1 flex flex-col shadow-sm",children:a.jsxs("div",{className:"overflow-y-auto flex-1",children:[a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-10 font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-16 text-center",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:x?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-tertiary)]",children:"..."})}):R.length>0?R.map((N,w)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-4 text-center font-mono",children:w<3?a.jsx("span",{className:`w-6 h-6 rounded-full inline-flex items-center justify-center text-[10px] font-bold shadow-sm ${w===0?"bg-amber-100 text-amber-700 border border-amber-200":w===1?"bg-slate-100 text-slate-600 border border-slate-200":"bg-orange-100 text-orange-700 border border-orange-200"}`,children:w+1}):w+1}),a.jsx("td",{className:"p-4 font-bold text-[var(--text-primary)]",children:u[N.productName]||N.productName}),a.jsx("td",{className:"p-4 text-right font-mono text-emerald-500",children:N.totalQty.toLocaleString()}),a.jsxs("td",{className:"p-4 text-right font-mono text-blue-500",children:["$",N.totalAmount.toLocaleString()]}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:["$",(N.totalAmount/N.totalQty).toFixed(1)]})]},w)):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-secondary)]",children:""})})})]}),a.jsx("div",{className:"md:hidden divide-y divide-slate-100",children:x?a.jsx("div",{className:"p-10 text-center text-slate-500",children:"..."}):R.length>0?R.map((N,w)=>a.jsxs("div",{className:"p-4 bg-[var(--bg-secondary)] active:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("div",{className:"flex justify-between items-start mb-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold shrink-0 shadow-sm ${w===0?"bg-amber-100 text-amber-700":w===1?"bg-slate-100 text-slate-600":w===2?"bg-orange-100 text-orange-700":"bg-slate-50 text-slate-400 border border-slate-100"}`,children:w+1}),a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)]",children:u[N.productName]||N.productName})]})}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 pl-9",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:""}),a.jsx("p",{className:"text-xs font-mono font-bold text-emerald-600",children:N.totalQty.toLocaleString()})]}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:""}),a.jsxs("p",{className:"text-xs font-mono font-bold text-blue-600",children:["$",N.totalAmount.toLocaleString()]})]}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:""}),a.jsxs("p",{className:"text-xs font-mono font-bold text-slate-500",children:["$",(N.totalAmount/N.totalQty).toFixed(1)]})]})]})]},w)):a.jsx("div",{className:"p-10 text-center text-slate-500",children:""})})]})})]})}function IS({user:l,apiUrl:r}){const[c,d]=E.useState([]),[u,f]=E.useState(!1),[x,b]=E.useState(tt()),[h,p]=E.useState(tt()),[j,g]=E.useState(""),y=async()=>{f(!0);try{const A=await ke(r,"getCustomerRanking",{startDate:x,endDate:h},l.token);Array.isArray(A)?d(A):d([])}catch(A){console.error("Failed to fetch customer ranking:",A),alert("")}finally{f(!1)}};E.useEffect(()=>{l?.token&&y()},[l.token,r]);const S=c.filter(A=>String(A.customerName||"").toLowerCase().includes(j.toLowerCase()));return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)]",children:[a.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Mi,{className:"text-purple-600"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),a.jsx("button",{onClick:y,disabled:u,className:"btn-secondary p-2 rounded-xl",children:a.jsx(it,{size:20,className:u?"animate-spin":""})})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] shrink-0 grid grid-cols-1 md:grid-cols-3 gap-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:x,onChange:A=>b(A.target.value)}),a.jsx("span",{className:"text-[var(--text-secondary)] font-bold hidden md:inline",children:""}),a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:h,onChange:A=>p(A.target.value)})]}),a.jsxs("div",{className:"relative",children:[a.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:j,onChange:A=>g(A.target.value)})]}),a.jsxs("button",{onClick:y,className:"btn-primary flex items-center justify-center gap-2 h-[42px]",children:[a.jsx(jt,{size:18})," "]})]}),a.jsx("div",{className:"bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] overflow-hidden flex-1 flex flex-col shadow-sm",children:a.jsxs("div",{className:"overflow-y-auto flex-1",children:[a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-10 font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-16 text-center",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-secondary)]",children:"..."})}):S.length>0?S.map((A,R)=>{const N=c.reduce((L,C)=>L+C.totalAmount,0),w=A.totalAmount/N*100;return a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-4 text-center font-mono text-[var(--text-secondary)]",children:R+1}),a.jsx("td",{className:"p-4 font-bold text-[var(--text-primary)]",children:A.customerName}),a.jsx("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:A.transactionCount.toLocaleString()}),a.jsxs("td",{className:"p-4 text-right font-mono text-purple-700 font-bold",children:["$",A.totalAmount.toLocaleString()]}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsxs("span",{className:"text-xs text-[var(--text-tertiary)]",children:[w.toFixed(1),"%"]}),a.jsx("div",{className:"w-16 h-1.5 bg-[var(--bg-tertiary)] rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-500",style:{width:`${w}%`}})})]})})]},R)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-slate-500",children:""})})})]}),a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:u?a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:"..."}):S.length>0?S.map((A,R)=>{const N=c.reduce((L,C)=>L+C.totalAmount,0),w=A.totalAmount/N*100;return a.jsxs("div",{className:"p-4 bg-[var(--bg-secondary)] active:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-[var(--bg-tertiary)] border border-[var(--border-primary)] flex items-center justify-center text-[10px] font-bold text-[var(--text-tertiary)] shrink-0 shadow-sm",children:R+1}),a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)]",children:A.customerName})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsxs("span",{className:"text-xs font-mono font-bold text-purple-700",children:["$",A.totalAmount.toLocaleString()]}),a.jsxs("span",{className:"text-[10px] text-[var(--text-tertiary)] font-bold",children:[w.toFixed(1),"%"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between pl-9 mt-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsx("span",{className:"text-xs font-mono text-[var(--text-secondary)]",children:A.transactionCount.toLocaleString()})]}),a.jsx("div",{className:"w-24 h-1 bg-[var(--bg-tertiary)] rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-500",style:{width:`${w}%`}})})]})]},R)}):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:""})})]})})]})}function VS({user:l,apiUrl:r}){const[c,d]=E.useState([]),[u,f]=E.useState({}),[x,b]=E.useState(!1),[h,p]=E.useState(tt()),[j,g]=E.useState(tt()),[y,S]=E.useState(""),A=async()=>{b(!0);try{const M=await ke(r,"getProducts",{},l.token),O={};Array.isArray(M)&&(M.forEach(B=>{O[B.id]=B.name}),f(O));const v=await ke(r,"getProfitAnalysis",{startDate:h,endDate:j},l.token);Array.isArray(v)?d(v):d([])}catch(M){console.error("Failed to fetch profit analysis:",M),alert("")}finally{b(!1)}};E.useEffect(()=>{l?.token&&A()},[l.token,r]);const R=c.filter(M=>{const O=u[M.productName]||M.productName;return String(O||"").toLowerCase().includes(y.toLowerCase())}),N=R.reduce((M,O)=>M+O.revenue,0),w=R.reduce((M,O)=>M+O.cost,0),L=N-w,C=N>0?L/N*100:0;return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)]",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(pn,{className:"text-emerald-600"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),a.jsxs("div",{className:"flex gap-2 md:gap-4",children:[a.jsxs("div",{className:"bg-emerald-50/10 px-3 py-1.5 md:px-4 md:py-2 border border-emerald-200/20 rounded-xl shadow-sm flex-1",children:[a.jsx("p",{className:"text-[8px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:"text-sm md:text-xl font-bold text-emerald-600 text-center",children:["$",L.toLocaleString()]})]}),a.jsxs("div",{className:"bg-blue-50/10 px-3 py-1.5 md:px-4 md:py-2 border border-blue-200/20 rounded-xl shadow-sm flex-1",children:[a.jsx("p",{className:"text-[8px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:"text-sm md:text-xl font-bold text-blue-600 text-center",children:[C.toFixed(1),"%"]})]})]})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] shrink-0 grid grid-cols-1 md:grid-cols-3 gap-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:h,onChange:M=>p(M.target.value)}),a.jsx("span",{className:"text-[var(--text-secondary)] font-bold hidden md:inline",children:""}),a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:j,onChange:M=>g(M.target.value)})]}),a.jsxs("div",{className:"relative",children:[a.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:y,onChange:M=>S(M.target.value)})]}),a.jsxs("button",{onClick:A,className:"btn-primary flex items-center justify-center gap-2 h-[42px]",children:[a.jsx(it,{size:18,className:x?"animate-spin":""})," "]})]}),a.jsx("div",{className:"bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] overflow-hidden flex-1 flex flex-col shadow-sm",children:a.jsxs("div",{className:"overflow-y-auto flex-1",children:[a.jsxs("table",{className:"hidden md:table w-full text-left text-sm border-collapse",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-10 font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 whitespace-nowrap",children:""}),a.jsx("th",{className:"p-4 text-right whitespace-nowrap",children:""}),a.jsx("th",{className:"p-4 text-right whitespace-nowrap",children:""}),a.jsx("th",{className:"p-4 text-right whitespace-nowrap",children:""}),a.jsx("th",{className:"p-4 text-right whitespace-nowrap",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:x?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-secondary)]",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(it,{className:"animate-spin text-emerald-500"}),a.jsx("span",{children:"..."})]})})}):R.length>0?R.map((M,O)=>{const v=M.revenue-M.cost,B=M.revenue>0?v/M.revenue*100:0,q=u[M.productName]||M.productName;return a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"p-4 font-bold text-[var(--text-primary)]",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:q}),u[M.productName]&&a.jsxs("span",{className:"text-[10px] text-[var(--text-tertiary)] font-normal mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:["ID: ",M.productName.substring(0,8),"..."]})]})}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:["$",Math.round(M.revenue).toLocaleString()]}),a.jsxs("td",{className:"p-4 text-right font-mono text-rose-600/80",children:["$",Math.round(M.cost).toLocaleString()]}),a.jsxs("td",{className:`p-4 text-right font-mono font-bold ${v>=0?"text-emerald-700":"text-rose-600"}`,children:[v<0?"-":"","$",Math.abs(Math.round(v)).toLocaleString()]}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold min-w-[50px] text-center ${B>=30?"bg-emerald-100 text-emerald-700 border border-emerald-200":B>=10?"bg-blue-100 text-blue-700 border border-blue-200":"bg-rose-100 text-rose-700 border border-rose-200"}`,children:[B.toFixed(1),"%"]})})]},O)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-slate-500",children:""})})})]}),a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:x?a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)] italic",children:"..."}):R.length>0?R.map((M,O)=>{const v=M.revenue-M.cost,B=M.revenue>0?v/M.revenue*100:0,q=u[M.productName]||M.productName;return a.jsxs("div",{className:"p-4 bg-[var(--bg-secondary)] active:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)] max-w-[65%] leading-tight",children:q}),a.jsxs("span",{className:`inline-block px-2 py-0.5 rounded text-[10px] font-bold ${B>=30?"bg-emerald-100 text-emerald-700":B>=10?"bg-blue-100 text-blue-700":"bg-rose-100 text-rose-700"}`,children:[B.toFixed(1),"%"]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:"text-xs font-mono font-bold text-[var(--text-secondary)]",children:["$",Math.round(M.revenue).toLocaleString()]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:"text-xs font-mono font-bold text-rose-500/80",children:["$",Math.round(M.cost).toLocaleString()]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:`text-xs font-mono font-bold ${v>=0?"text-emerald-600":"text-rose-600"}`,children:["$",Math.abs(Math.round(v)).toLocaleString()]})]})]})]},O)}):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:""})})]})})]})}function YS({user:l,apiUrl:r}){const[c,d]=E.useState([]),[u,f]=E.useState({}),[x,b]=E.useState(!1),[h,p]=E.useState(tt()),[j,g]=E.useState(tt()),[y,S]=E.useState(""),A=async()=>{b(!0);try{const N=await ke(r,"getProducts",{},l.token),w={};Array.isArray(N)&&(N.forEach(C=>{w[C.id]=C.name}),f(w));const L=await ke(r,"getTurnoverRate",{startDate:h,endDate:j},l.token);Array.isArray(L)?d(L):d([])}catch(N){console.error("Failed to fetch turnover rate:",N),alert("")}finally{b(!1)}};E.useEffect(()=>{l?.token&&A()},[l.token,r]);const R=c.filter(N=>{const w=u[N.productName]||N.productName;return String(w||"").toLowerCase().includes(y.toLowerCase())});return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)]",children:[a.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(In,{className:"text-orange-600"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:" =  / "})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600 bg-blue-50 px-3 py-1.5 rounded-lg border border-blue-200 shadow-sm font-bold",children:[a.jsx(Ov,{size:14}),a.jsx("span",{children:""})]})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] shrink-0 grid grid-cols-1 md:grid-cols-3 gap-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:h,onChange:N=>p(N.target.value)}),a.jsx("span",{className:"text-[var(--text-secondary)] font-bold hidden md:inline",children:""}),a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:j,onChange:N=>g(N.target.value)})]}),a.jsxs("div",{className:"relative",children:[a.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:y,onChange:N=>S(N.target.value)})]}),a.jsxs("button",{onClick:A,className:"btn-primary flex items-center justify-center gap-2 h-[42px]",children:[a.jsx(it,{size:18})," "]})]}),a.jsx("div",{className:"bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] overflow-hidden flex-1 flex flex-col shadow-sm",children:a.jsxs("div",{className:"overflow-y-auto flex-1",children:[a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-10 font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:" (COGS)"}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:x?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-secondary)]",children:"..."})}):R.length>0?R.map((N,w)=>{const L=N.avgInventory>0?N.cogs/N.avgInventory:0;return a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-4 font-bold text-[var(--text-primary)]",children:u[N.productName]||N.productName}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)] font-bold",children:["$",N.cogs.toLocaleString()]}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-tertiary)]",children:["$",N.avgInventory.toLocaleString()]}),a.jsxs("td",{className:"p-4 text-right font-mono text-orange-600 font-bold",children:[L.toFixed(2)," "]}),a.jsx("td",{className:"p-4 text-center",children:L>=4?a.jsx("span",{className:"px-2 py-1 rounded text-[10px] font-bold bg-emerald-100 text-emerald-700 border border-emerald-200 uppercase",children:""}):L>=1?a.jsx("span",{className:"px-2 py-1 rounded text-[10px] font-bold bg-blue-100 text-blue-700 border border-blue-200 uppercase",children:""}):a.jsx("span",{className:"px-2 py-1 rounded text-[10px] font-bold bg-rose-100 text-rose-700 border border-rose-200 uppercase",children:""})})]},w)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-slate-500",children:""})})})]}),a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:x?a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:"..."}):R.length>0?R.map((N,w)=>{const L=N.avgInventory>0?N.cogs/N.avgInventory:0;return a.jsxs("div",{className:"p-4 bg-[var(--bg-secondary)] active:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)] leading-tight max-w-[70%]",children:u[N.productName]||N.productName}),L>=4?a.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-bold bg-emerald-100 text-emerald-700 border border-emerald-200",children:""}):L>=1?a.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-bold bg-blue-100 text-blue-700 border border-blue-200",children:""}):a.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-bold bg-rose-100 text-rose-700 border border-rose-200",children:""})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:"text-[11px] font-mono font-bold text-[var(--text-secondary)]",children:["$",N.cogs.toLocaleString()]})]}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:"text-[11px] font-mono font-bold text-[var(--text-tertiary)]",children:["$",N.avgInventory.toLocaleString()]})]}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:"text-[11px] font-mono font-extrabold text-orange-600",children:[L.toFixed(2)," "]})]})]})]},w)}):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:""})})]})})]})}function QS({user:l,apiUrl:r}){const[c,d]=E.useState([]),[u,f]=E.useState(!1),[x,b]=E.useState(tt()),[h,p]=E.useState(tt()),[j,g]=E.useState(""),y=async()=>{f(!0);try{const w=await ke(r,"getExpenditures",{startDate:x,endDate:h},l.token);Array.isArray(w)?d(w):d([])}catch(w){console.error("Failed to fetch expenditures:",w)}finally{f(!1)}};E.useEffect(()=>{l?.token&&y()},[l.token,r]);const S=c.filter(w=>`${w.customer||""} ${w.salesRep||""} ${w.note||""}`.toLowerCase().includes(j.toLowerCase())),A=S.reduce((w,L)=>(w.stall+=Number(L.stall||0),w.cleaning+=Number(L.cleaning||0),w.electricity+=Number(L.electricity||0),w.gas+=Number(L.gas||0),w.parking+=Number(L.parking||0),w.goods+=Number(L.goods||0),w.bags+=Number(L.bags||0),w.others+=Number(L.others||0),w.serviceFee+=Number(L.serviceFee||0),w.linePay+=Number(L.linePay||0),w.finalTotal+=Number(L.finalTotal||0),w.vehicleMaintenance+=Number(L.vehicleMaintenance||0),w.salary+=Number(L.salary||0),w.reserve+=Number(L.reserve||0),w),{stall:0,cleaning:0,electricity:0,gas:0,parking:0,goods:0,bags:0,others:0,serviceFee:0,linePay:0,finalTotal:0,vehicleMaintenance:0,salary:0,reserve:0}),R=A.stall+A.cleaning+A.electricity+A.gas+A.parking+A.bags+A.others+A.vehicleMaintenance+A.salary+A.serviceFee,N=[{key:"stall",label:"",color:"text-[var(--accent-blue)]"},{key:"cleaning",label:"",color:"text-indigo-600"},{key:"electricity",label:"",color:"text-amber-500"},{key:"gas",label:"",color:"text-orange-600"},{key:"parking",label:"",color:"text-[var(--text-secondary)]"},{key:"bags",label:"",color:"text-teal-600"},{key:"serviceFee",label:"",color:"text-rose-600"},{key:"others",label:"",color:"text-purple-600"},{key:"vehicleMaintenance",label:"",color:"text-indigo-600"},{key:"salary",label:"",color:"text-amber-500"}];return a.jsxs("div",{className:"max-w-7xl mx-auto p-3 md:p-4 space-y-3 md:space-y-4 flex flex-col h-full animate-in fade-in duration-500",children:[a.jsx("div",{className:"flex justify-between items-start gap-4 shrink-0",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bt,{className:"text-rose-500 shrink-0"}),a.jsx("h1",{className:"text-2xl font-bold text-[var(--text-primary)] whitespace-nowrap",children:""})]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1 pl-8 md:pl-0 truncate",children:"(Cost Calculation) "})]})}),a.jsxs("div",{className:"grid grid-cols-4 gap-2 shrink-0",children:[a.jsxs("div",{className:"glass-panel px-1 py-1.5 md:px-4 bg-[var(--bg-secondary)] border-[var(--border-primary)] flex flex-col justify-center items-center",children:[a.jsx("p",{className:"text-[9px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center leading-tight",children:""}),a.jsxs("p",{className:"text-xs md:text-xl font-bold text-rose-500 text-center text-nowrap mt-0.5 md:mt-1",children:["$",R.toLocaleString()]})]}),a.jsxs("div",{className:"glass-panel px-1 py-1.5 md:px-4 bg-[var(--bg-secondary)] border-[var(--border-primary)] flex flex-col justify-center items-center",children:[a.jsx("p",{className:"text-[9px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center leading-tight",children:""}),a.jsxs("p",{className:"text-xs md:text-xl font-bold text-emerald-500 text-center text-nowrap mt-0.5 md:mt-1",children:["$",A.goods.toLocaleString()]})]}),a.jsxs("div",{className:"glass-panel px-1 py-1.5 md:px-4 bg-[var(--bg-secondary)] border-[var(--border-primary)] flex flex-col justify-center items-center",children:[a.jsx("p",{className:"text-[9px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center leading-tight",children:""}),a.jsxs("p",{className:"text-xs md:text-xl font-bold text-emerald-500 text-center text-nowrap mt-0.5 md:mt-1",children:["$",A.reserve.toLocaleString()]})]}),a.jsxs("div",{className:"glass-panel px-1 py-1.5 md:px-4 bg-[var(--bg-secondary)] border-[var(--border-primary)] flex flex-col justify-center items-center",children:[a.jsx("p",{className:"text-[9px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center leading-tight",children:"Line Pay"}),a.jsxs("p",{className:"text-xs md:text-xl font-bold text-[var(--text-primary)] text-center text-nowrap mt-0.5 md:mt-1",children:["$",A.linePay.toLocaleString()]})]})]}),a.jsxs("div",{className:"p-3 shrink-0 grid grid-cols-1 md:grid-cols-3 gap-3 bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:[a.jsxs("div",{className:"grid grid-cols-2 md:flex md:flex-row md:items-center gap-2 w-full",children:[a.jsx("div",{className:"space-y-1 w-full md:w-auto md:flex-1",children:a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)] text-[var(--text-primary)] text-xs md:text-sm",value:x,onChange:w=>b(w.target.value)})}),a.jsx("span",{className:"text-[var(--text-tertiary)] font-bold text-center md:text-left self-center hidden md:block",children:""}),a.jsx("div",{className:"space-y-1 w-full md:w-auto md:flex-1",children:a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)] text-[var(--text-primary)] text-xs md:text-sm",value:h,onChange:w=>p(w.target.value)})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full h-10 text-[var(--text-primary)] bg-[var(--bg-primary)]",value:j,onChange:w=>g(w.target.value)})]}),a.jsxs("button",{onClick:y,className:"btn-primary w-full md:w-auto h-10 flex items-center justify-center gap-2",children:[a.jsx(it,{size:18,className:u?"animate-spin":""})," "]})]}),a.jsx("div",{className:"grid grid-cols-5 md:grid-cols-10 gap-1.5 md:gap-2 shrink-0",children:N.map(w=>a.jsxs("div",{className:"p-1 px-0.5 md:p-2 bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-lg shadow-sm flex flex-col justify-center items-center h-12 md:h-14",children:[a.jsx("p",{className:"text-[9px] md:text-[10px] text-[var(--text-secondary)] font-bold uppercase truncate w-full text-center leading-tight",children:w.label}),a.jsxs("p",{className:`text-[10px] md:text-sm font-bold ${w.color} mt-0.5`,children:["$",A[w.key].toLocaleString()]})]},w.key))}),a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-xl shadow-sm p-0 flex-1 border border-[var(--border-primary)] relative overflow-hidden",children:[a.jsx("div",{className:"hidden md:block h-full overflow-y-auto overflow-x-hidden custom-scrollbar",children:a.jsxs("table",{className:"w-full text-left text-[10px] md:text-sm border-separate border-spacing-0",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-30",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-3 border-b border-[var(--border-primary)] bg-[var(--bg-secondary)] whitespace-nowrap",children:"//"}),a.jsx("th",{className:"px-2 py-3 text-right border-b border-[var(--border-primary)]",children:""}),a.jsx("th",{className:"px-2 py-3 text-right border-b border-[var(--border-primary)]",children:""}),a.jsx("th",{className:"px-2 py-3 text-right border-b border-[var(--border-primary)]",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"p-20 text-center text-[var(--text-secondary)] font-medium",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(it,{className:"animate-spin text-rose-500"}),a.jsx("span",{children:"..."})]})})}):S.length>0?S.map((w,L)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)] transition-colors group",children:[a.jsx("td",{className:"px-2 py-4 bg-[var(--bg-primary)] border-b border-[var(--border-primary)] group-hover:bg-[var(--bg-secondary)] transition-colors",children:a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsxs("div",{className:"text-[var(--text-secondary)] font-mono text-xs flex items-center gap-1.5 mb-1",children:[a.jsx(Qs,{size:12,className:"text-[var(--text-tertiary)]"}),(()=>{const C=w.date||w.serverTimestamp;if(!C)return"";const M=new Date(C);return isNaN(M.getTime())?String(C):M.toLocaleString("zh-TW",{hour12:!1})})()]}),a.jsxs("div",{className:"pl-5 flex flex-col gap-0.5",children:[a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)]",children:w.customer||w.note||""}),a.jsxs("div",{className:"text-[10px] text-[var(--text-secondary)] font-medium",children:[": ",w.salesRep||"-"]})]})]})}),a.jsx("td",{className:"px-2 py-4 text-right align-top",children:a.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-[11px] content-start",children:[a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.stall||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.cleaning||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.electricity||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.gas||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.parking||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.goods||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.bags||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.others||0).toLocaleString()]})]})]})}),a.jsx("td",{className:"px-2 py-4 text-right align-top",children:a.jsxs("div",{className:"flex flex-col gap-1.5 items-end",children:[a.jsxs("div",{className:"flex justify-between w-28 bg-[var(--bg-secondary)] px-2 py-0.5 rounded border border-emerald-100",children:[a.jsx("span",{className:"text-[9px] text-emerald-500/70 uppercase font-bold",children:"LP "}),a.jsxs("span",{className:"text-[11px] font-bold text-emerald-500",children:["+$",Number(w.linePay||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between w-28 bg-rose-50 px-2 py-0.5 rounded border border-rose-100",children:[a.jsx("span",{className:"text-[9px] text-rose-600/70 uppercase font-bold",children:""}),a.jsxs("span",{className:"text-[11px] font-bold text-rose-700",children:["-$",Number(w.serviceFee||0).toLocaleString()]})]})]})}),a.jsx("td",{className:"px-2 py-4 text-right align-top",children:a.jsxs("div",{className:"flex flex-col gap-1 text-xs items-end",children:[a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-indigo-600 font-bold",children:["$",Number(w.vehicleMaintenance||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-amber-500 font-bold",children:["$",Number(w.salary||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-purple-600 font-bold",children:["$",Number(w.reserve||0).toLocaleString()]})]})]})})]},L)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"p-20 text-center text-[var(--text-secondary)] font-medium",children:""})})})]})}),a.jsx("div",{className:"md:hidden h-full overflow-y-auto p-3 space-y-3 custom-scrollbar",children:u?a.jsxs("div",{className:"p-10 text-center text-[var(--text-secondary)] font-medium flex flex-col items-center gap-2",children:[a.jsx(it,{className:"animate-spin text-rose-500"}),a.jsx("span",{children:"..."})]}):S.length>0?S.map((w,L)=>a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] p-3 shadow-sm text-xs space-y-3",children:[a.jsx("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsx("div",{className:"font-bold text-[var(--text-primary)] text-sm",children:w.customer||w.note||""}),a.jsxs("div",{className:"text-[var(--text-secondary)] font-medium text-[10px]",children:[": ",w.salesRep||"-"]}),a.jsxs("div",{className:"text-[var(--text-tertiary)] font-mono text-[9px] flex items-center gap-1 mt-1",children:[a.jsx(Qs,{size:10}),(()=>{const C=w.date||w.serverTimestamp,M=new Date(C);return isNaN(M.getTime())?String(C):M.toLocaleString("zh-TW",{hour12:!1})})()]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("div",{className:"space-y-0.5 text-[var(--text-secondary)]",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.stall||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.cleaning||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.electricity||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.gas||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.parking||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.goods||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.bags||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.others||0).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between items-center text-emerald-500 bg-[var(--bg-secondary)] px-1.5 py-0.5 rounded",children:[a.jsx("span",{children:"LP"})," ",a.jsxs("span",{className:"font-bold",children:["+$",Number(w.linePay||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center text-rose-500 bg-[var(--bg-secondary)] px-1.5 py-0.5 rounded",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-bold",children:["-$",Number(w.serviceFee||0).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("div",{className:"space-y-0.5 text-[var(--text-secondary)]",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-indigo-600",children:""})," ",a.jsxs("span",{className:"font-bold text-indigo-600",children:["$",Number(w.vehicleMaintenance||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-amber-500",children:""})," ",a.jsxs("span",{className:"font-bold text-amber-500",children:["$",Number(w.salary||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-600",children:""})," ",a.jsxs("span",{className:"font-bold text-purple-600",children:["$",Number(w.reserve||0).toLocaleString()]})]})]})]})]})]})]},L)):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)] font-medium",children:""})})]})]})}function KS({user:l,apiUrl:r}){const[c,d]=E.useState(!1),[u,f]=E.useState(tt().substring(0,8)+"01"),[x,b]=E.useState(tt()),[h,p]=E.useState({revenue:0,cogs:0,grossProfit:0,expenses:{},totalExpenses:0,netIncome:0}),j=async()=>{d(!0);try{const[S,A]=await Promise.all([ke(r,"getProfitAnalysis",{startDate:u,endDate:x},l.token),ke(r,"getExpenditures",{startDate:u,endDate:x},l.token)]);let R=0,N=0;Array.isArray(S)&&S.forEach(C=>{R+=Number(C.revenue||0),N+=Number(C.cost||0)});let w=0;const L={stall:0,cleaning:0,electricity:0,gas:0,parking:0,bags:0,serviceFee:0,others:0,vehicleMaintenance:0,salary:0};Array.isArray(A)&&A.forEach(C=>{L.stall+=Number(C.stall||0),L.cleaning+=Number(C.cleaning||0),L.electricity+=Number(C.electricity||0),L.gas+=Number(C.gas||0),L.parking+=Number(C.parking||0),L.bags+=Number(C.bags||0),L.serviceFee+=Number(C.serviceFee||0),L.others+=Number(C.others||0),L.vehicleMaintenance+=Number(C.vehicleMaintenance||0),L.salary+=Number(C.salary||0)}),Object.values(L).forEach(C=>w+=C),p({revenue:R,cogs:N,grossProfit:R-N,expenses:L,totalExpenses:w,netIncome:R-N-w})}catch(S){console.error("Failed to fetch income statement data:",S),alert("")}finally{d(!1)}};E.useEffect(()=>{l?.token&&j()},[l.token,r]);const g=S=>`$${Math.round(S).toLocaleString()}`,y=(S,A)=>A===0?"0%":`${(S/A*100).toFixed(1)}%`;return a.jsxs("div",{className:"max-w-4xl mx-auto p-2 md:p-6 space-y-2 md:space-y-6 flex flex-col h-[calc(100dvh-6rem)] overflow-hidden",children:[a.jsxs("div",{className:"flex justify-between items-center shrink-0 gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Td,{className:"text-emerald-500 shrink-0 w-5 h-5 md:w-6 md:h-6"}),a.jsx("h1",{className:"text-lg md:text-2xl font-bold text-[var(--text-primary)] whitespace-nowrap",children:""})]}),a.jsxs("div",{className:"hidden md:block",children:[a.jsx("div",{className:"text-[var(--text-tertiary)] text-sm font-medium mt-0.5 inline ml-2",children:"(Income Statement)"}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1 truncate",children:""})]})]}),a.jsx("button",{onClick:j,className:"btn-secondary p-1.5 md:p-2 rounded-lg md:rounded-xl shrink-0",children:a.jsx(it,{size:16,className:`md:w-5 md:h-5 ${c?"animate-spin":""}`})})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-2 md:p-4 rounded-xl border border-[var(--border-primary)] shrink-0 flex flex-col md:flex-row md:items-center gap-2 md:gap-4 shadow-sm",children:[a.jsx("div",{className:"hidden md:block",children:a.jsx(Sa,{size:18,className:"text-[var(--text-tertiary)]"})}),a.jsxs("div",{className:"grid grid-cols-2 md:flex md:flex-row md:items-center gap-2 flex-1 w-full",children:[a.jsx("div",{className:"w-full md:w-auto md:flex-1",children:a.jsx("input",{type:"date",className:"input-field w-full h-8 md:h-10 appearance-none bg-[var(--bg-primary)] text-xs md:text-sm",value:u,onChange:S=>f(S.target.value)})}),a.jsx("span",{className:"text-[var(--text-secondary)] font-bold text-center md:text-left self-center hidden md:block",children:""}),a.jsx("div",{className:"w-full md:w-auto md:flex-1",children:a.jsx("input",{type:"date",className:"input-field w-full h-8 md:h-10 appearance-none bg-[var(--bg-primary)] text-xs md:text-sm",value:x,onChange:S=>b(S.target.value)})})]}),a.jsx("button",{onClick:j,className:"btn-primary h-8 md:h-10 px-6 w-full md:w-auto text-xs md:text-sm",children:""})]}),a.jsx("div",{className:"bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] overflow-hidden flex-1 flex flex-col shadow-sm min-h-0",children:a.jsx("div",{className:"flex-1 p-3 md:p-8",children:a.jsxs("div",{className:"space-y-4 md:space-y-6 max-w-2xl mx-auto font-mono text-sm md:text-base",children:[a.jsxs("div",{className:"space-y-1 md:space-y-2",children:[a.jsx("h3",{className:"text-emerald-500 font-bold text-base md:text-lg border-b border-[var(--border-primary)] pb-1 md:pb-2 mb-2 md:mb-4",children:" (Revenue)"}),a.jsxs("div",{className:"flex justify-between items-center text-xs md:text-base",children:[a.jsx("span",{className:"text-[var(--text-secondary)]",children:""}),a.jsx("span",{className:"text-[var(--text-primary)] font-bold",children:g(h.revenue)})]}),a.jsxs("div",{className:"flex justify-between items-center text-rose-600 text-xs md:text-base",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(yv,{size:12,className:"md:w-3.5 md:h-3.5"})," "]}),a.jsxs("span",{children:["- ",g(h.cogs)]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-1 md:pt-2 border-t border-[var(--border-primary)] text-xs md:text-base",children:[a.jsx("span",{className:"text-emerald-500 font-bold",children:" (Gross Profit)"}),a.jsx("span",{className:"text-emerald-500 font-bold",children:g(h.grossProfit)})]}),a.jsxs("div",{className:"text-right text-[10px] md:text-xs text-[var(--text-secondary)]",children:[": ",y(h.grossProfit,h.revenue)]})]}),a.jsxs("div",{className:"space-y-1 md:space-y-2 mt-2 md:mt-8",children:[a.jsx("h3",{className:"text-amber-500 font-bold text-base md:text-lg border-b border-amber-200 pb-1 md:pb-2 mb-2 md:mb-4 whitespace-nowrap",children:" (Operating Expenses)"}),a.jsx("div",{className:"grid grid-cols-3 md:grid-cols-1 gap-2 md:gap-0",children:Object.entries(h.expenses).map(([S,A])=>{const R={stall:"",cleaning:"",electricity:"",gas:"",parking:"",bags:"",serviceFee:"",others:"",vehicleMaintenance:"",salary:""};return A===0?null:a.jsxs("div",{className:"flex flex-col md:flex-row justify-center md:justify-between items-center md:items-center text-[var(--text-secondary)] text-[10px] md:text-sm bg-[var(--bg-secondary)] md:bg-transparent p-1 md:p-0 rounded md:rounded-none",children:[a.jsx("span",{className:"font-medium",children:R[S]}),a.jsx("span",{className:"text-[var(--text-primary)] font-bold md:font-normal",children:g(A)})]},S)})}),a.jsxs("div",{className:"flex justify-between items-center pt-1 md:pt-2 border-t border-[var(--border-primary)] text-amber-500 mt-1 text-xs md:text-base",children:[a.jsx("span",{className:"font-bold",children:""}),a.jsxs("span",{className:"font-bold",children:["- ",g(h.totalExpenses)]})]})]}),a.jsxs("div",{className:"mt-2 md:mt-8 pt-2 md:pt-4 border-t-2 border-[var(--border-primary)]",children:[a.jsxs("div",{className:"flex justify-between items-center text-base md:text-xl",children:[a.jsx("span",{className:"text-[var(--text-primary)] font-bold",children:" (Net Income)"}),a.jsx("span",{className:`font-bold ${h.netIncome>=0?"text-emerald-500":"text-rose-600"}`,children:g(h.netIncome)})]}),a.jsxs("div",{className:"text-right text-[10px] md:text-sm text-[var(--text-secondary)] mt-0.5 md:mt-1",children:[": ",y(h.netIncome,h.revenue)]})]})]})})})]})}function XS({user:l,apiUrl:r}){const[c,d]=E.useState(!1),[u,f]=E.useState({stall:0,cleaning:0,electricity:0,gas:0,parking:0,goods:0,bags:0,others:0,linePay:0,serviceFee:0,vehicleMaintenance:0,salary:0,reserve:0}),[x,b]=E.useState(""),h=async()=>{if(!x.trim()){alert("");const N=document.getElementById("input-expense-note");N&&(N.focus(),N.scrollIntoView({behavior:"smooth",block:"center"}));return}const A=Number(u.stall)+Number(u.cleaning)+Number(u.electricity)+Number(u.gas)+Number(u.parking)+Number(u.goods)+Number(u.bags)+Number(u.others)+Number(u.serviceFee)+Number(u.vehicleMaintenance)+Number(u.salary)+Number(u.reserve)+Number(u.linePay),R={note:x,salesRep:l.username,...u,finalTotal:A};d(!0);try{await ke(r,"saveExpenditure",R,l.token),alert(" Expenditures "),f({stall:0,cleaning:0,electricity:0,gas:0,parking:0,goods:0,bags:0,others:0,linePay:0,serviceFee:0,vehicleMaintenance:0,salary:0,reserve:0}),b("")}catch(N){alert(": "+N.message)}finally{d(!1)}},p=S=>{const A=document.getElementById(S);A&&(A.focus(),A.select?.(),A.scrollIntoView({block:"nearest",behavior:"smooth"}))},j=(S,A)=>{const R=["note","stall","cleaning","electricity","gas","parking","goods","bags","others","linePay","serviceFee","vehicleMaintenance","salary","reserve"],N=R.indexOf(A);S.key==="Enter"||S.key==="ArrowRight"?(S.preventDefault(),N<R.length-1?p(`input-expense-${R[N+1]}`):S.key==="Enter"&&h()):S.key==="ArrowLeft"?(S.preventDefault(),N>0&&p(`input-expense-${R[N-1]}`)):S.key==="ArrowDown"?(S.preventDefault(),["stall","cleaning","electricity","gas","parking","goods"].includes(A)?p(`input-expense-${{stall:"electricity",cleaning:"gas",electricity:"parking",gas:"goods",parking:"bags",goods:"others"}[A]}`):N<R.length-1&&p(`input-expense-${R[N+1]}`)):S.key==="ArrowUp"&&(S.preventDefault(),["electricity","gas","parking","goods","bags","others"].includes(A)?p(`input-expense-${{electricity:"stall",gas:"cleaning",parking:"electricity",goods:"gas",bags:"parking",others:"goods"}[A]}`):N>0&&p(`input-expense-${R[N-1]}`))},y=Number(u.stall)+Number(u.cleaning)+Number(u.electricity)+Number(u.gas)+Number(u.parking)+Number(u.goods)+Number(u.bags)+Number(u.others)+Number(u.serviceFee)+Number(u.vehicleMaintenance)+Number(u.salary)+Number(u.reserve)+Number(u.linePay);return a.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-6 space-y-6 animate-in fade-in duration-500 relative",children:[c&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-rose-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)]",children:"..."})]}),a.jsxs("div",{className:"flex flex-row justify-between items-center gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2 truncate",children:[a.jsx("div",{className:"p-1.5 md:p-2 bg-rose-100 rounded-lg shrink-0",children:a.jsx(bt,{className:"text-rose-600 w-5 h-5 md:w-6 md:h-6"})}),""]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-xs md:text-sm mt-1 truncate",children:""})]}),a.jsxs("div",{className:"bg-rose-50 px-3 md:px-6 py-2 md:py-3 border border-rose-200 rounded-xl shadow-sm shrink-0 flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase tracking-wider",children:""}),a.jsxs("p",{className:"text-lg md:text-2xl font-black text-rose-600",children:["$",y.toLocaleString()]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4 text-[var(--accent-blue)] font-bold",children:[a.jsx(vv,{size:18}),a.jsx("span",{children:""})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] font-bold block mb-2",children:" /  *"}),a.jsx("input",{id:"input-expense-note",type:"text",className:"input-field w-full text-lg py-3 bg-[var(--bg-primary)]",placeholder:"1/7 ...",value:x,onChange:S=>b(S.target.value),onKeyDown:S=>j(S,"note")})]})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6 text-emerald-500 font-bold",children:[a.jsx(xh,{size:18}),a.jsx("span",{children:""})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:[{key:"stall",label:"",next:"cleaning"},{key:"cleaning",label:"",next:"electricity",prev:"stall"},{key:"electricity",label:"",next:"gas",prev:"cleaning"},{key:"gas",label:"",next:"parking",prev:"electricity"},{key:"parking",label:"",next:"goods",prev:"gas"},{key:"goods",label:"",next:"bags",prev:"parking"},{key:"bags",label:"",next:"others",prev:"goods"},{key:"others",label:"",next:"linePay",prev:"bags"}].map(S=>a.jsxs("div",{className:"flex items-center justify-between gap-4 p-2 hover:bg-[var(--bg-secondary)] rounded-lg transition-colors border-b border-[var(--border-primary)] last:border-0",children:[a.jsx("label",{className:"text-sm text-[var(--text-secondary)] font-medium whitespace-nowrap",children:S.label}),a.jsx("input",{id:`input-expense-${S.key}`,type:"number",className:"input-field text-right w-32 bg-[var(--bg-primary)]",value:u[S.key]||"",onChange:A=>f({...u,[S.key]:Number(A.target.value)}),onKeyDown:A=>j(A,S.key),onWheel:A=>A.target.blur()})]},S.key))})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"glass-panel p-6 border-[var(--border-primary)]",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6 text-amber-500 font-bold",children:[a.jsx(Sv,{size:18}),a.jsx("span",{children:""})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1",children:"Line Pay "}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"input-expense-linePay",type:"number",className:"input-field w-full pl-8 border-[var(--border-primary)] text-emerald-500 bg-[var(--bg-secondary)]",value:u.linePay||"",onChange:S=>f({...u,linePay:Number(S.target.value)}),onKeyDown:S=>j(S,"linePay"),onWheel:S=>S.target.blur()}),a.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-500 font-bold",children:"+"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"input-expense-serviceFee",type:"number",className:"input-field w-full pl-8 border-rose-200 text-rose-700 bg-rose-50",value:u.serviceFee||"",onChange:S=>f({...u,serviceFee:Number(S.target.value)}),onKeyDown:S=>j(S,"serviceFee"),onWheel:S=>S.target.blur()}),a.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-rose-600 font-bold",children:"-"})]})]})]})]}),a.jsxs("div",{className:"glass-panel p-6 border-indigo-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6 text-indigo-600 font-bold",children:[a.jsx(Od,{size:18}),a.jsx("span",{children:""})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"text-xs text-[var(--text-secondary)] flex items-center gap-2 font-bold",children:[a.jsx(Od,{size:14})," "]}),a.jsx("input",{id:"input-expense-vehicleMaintenance",type:"number",className:"input-field w-28 text-right bg-[var(--bg-primary)]",value:u.vehicleMaintenance||"",onChange:S=>f({...u,vehicleMaintenance:Number(S.target.value)}),onKeyDown:S=>j(S,"vehicleMaintenance"),onWheel:S=>S.target.blur()})]}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"text-xs text-[var(--text-secondary)] flex items-center gap-2 font-bold",children:[a.jsx(Mi,{size:14})," "]}),a.jsx("input",{id:"input-expense-salary",type:"number",className:"input-field w-28 text-right bg-[var(--bg-primary)]",value:u.salary||"",onChange:S=>f({...u,salary:Number(S.target.value)}),onKeyDown:S=>j(S,"salary"),onWheel:S=>S.target.blur()})]}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"text-xs text-[var(--text-secondary)] flex items-center gap-2 font-bold",children:[a.jsx(Iv,{size:14})," "]}),a.jsx("input",{id:"input-expense-reserve",type:"number",className:"input-field w-28 text-right bg-[var(--bg-primary)]",value:u.reserve||"",onChange:S=>f({...u,reserve:Number(S.target.value)}),onKeyDown:S=>j(S,"reserve"),onWheel:S=>S.target.blur()})]})]})]}),a.jsxs("button",{onClick:h,className:"btn-primary w-full py-4 text-lg font-black shadow-lg shadow-blue-100 hover:shadow-xl hover:shadow-blue-200 transition-all flex justify-center items-center gap-3 active:scale-95",children:[a.jsx(Xs,{size:22})," "]}),a.jsx("p",{className:"text-center text-[var(--text-secondary)] text-[10px] uppercase font-bold tracking-tighter",children:"Data will be saved to Expenditures Sheet"})]})]})]})}function ZS({user:l,apiUrl:r}){const[c,d]=E.useState([]),[u,f]=E.useState(!1),[x,b]=E.useState(!1),[h,p]=E.useState(""),[j,g]=E.useState({username:"",password:"",role:"VIEWER"}),[y,S]=E.useState(null),A=[{group:"",items:[{key:"sales_entry",label:""},{key:"sales_report",label:""}]},{group:"",items:[{key:"purchase_entry",label:""},{key:"purchase_history",label:""}]},{group:"",items:[{key:"inventory_adjust",label:""},{key:"inventory_stocktake",label:""},{key:"inventory_valuation",label:""},{key:"inventory_adjust_history",label:""},{key:"inventory_stocktake_history",label:""}]},{group:"",items:[{key:"finance_expenditure",label:""}]},{group:"",items:[{key:"finance_receivable",label:""},{key:"finance_payable",label:""},{key:"finance_income",label:""},{key:"finance_cost",label:""},{key:"finance_payroll",label:""}]},{group:"",items:[{key:"analytics_sales",label:""},{key:"analytics_customer",label:""},{key:"analytics_profit",label:""},{key:"analytics_turnover",label:""}]},{group:"",items:[{key:"system_config",label:""}]}],R=async()=>{if(!j.username||!j.password){alert("");return}b(!0),p(" ...");try{await ke(r,"addUser",j,l.token),g({username:"",password:"",role:"VIEWER"}),await w(),alert("")}catch(O){alert(": "+O.message)}finally{b(!1)}},N=async O=>{if(window.confirm(` ${O}?`)){b(!0),p(" ...");try{await ke(r,"deleteUser",{username:O},l.token),await w(),alert("")}catch(v){alert(": "+v.message)}finally{b(!1)}}},w=async()=>{f(!0);try{const O=await ke(r,"getUsers",{},l.token);if(Array.isArray(O)){const v=O.map(B=>{let q=B.permissions;if(typeof q=="string")try{q=JSON.parse(q)}catch(ae){console.error(`Failed to parse permissions for ${B.username}`,ae),q=[]}return{...B,permissions:Array.isArray(q)?q:[]}});d(v)}else console.warn("Backend returned non-array for users")}catch(O){console.error("Failed to fetch users:",O),alert("")}finally{f(!1)}};E.useEffect(()=>{l?.token&&w()},[l.token,r]);const L=async()=>{if(y){b(!0),p(" ...");try{await ke(r,"updateUserPermissions",{username:y.username,permissions:y.permissions},l.token),S(null),await w(),alert("")}catch(O){console.error(O),alert(": "+O.message)}finally{b(!1)}}},C=O=>{if(!y)return;const v=y.permissions||[];v.includes(O)?S({...y,permissions:v.filter(B=>B!==O)}):S({...y,permissions:[...v,O]})},M=O=>{if(!y)return;const v=y.permissions||[],B=O.map(ae=>ae.key);if(B.every(ae=>v.includes(ae)))S({...y,permissions:v.filter(ae=>!B.includes(ae))});else{const ae=v.filter(oe=>!B.includes(oe));S({...y,permissions:[...ae,...B]})}};return a.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)]",children:[x&&a.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-[2px] z-[60] flex items-center justify-center animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] p-6 rounded-2xl shadow-xl flex flex-col items-center gap-4 min-w-[200px]",children:[a.jsx(it,{className:"animate-spin text-[var(--accent-blue)]",size:32}),a.jsx("span",{className:"text-[var(--text-primary)] font-bold text-base",children:h})]})}),a.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("h1",{className:"text-lg md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(ja,{className:"text-rose-500",size:20})," "]}),a.jsx("p",{className:"text-[10px] md:text-sm text-[var(--text-tertiary)] font-medium",children:"(Permission Control)"})]}),a.jsx("button",{onClick:w,className:"btn-secondary p-2 rounded-xl",children:a.jsx(it,{size:18,className:u?"animate-spin":""})})]}),a.jsxs("div",{className:"glass-panel p-4 md:p-6 border-l-4 border-l-emerald-500 shrink-0",children:[a.jsxs("h3",{className:"font-bold text-base md:text-lg mb-3 flex items-center gap-2 text-[var(--text-primary)]",children:[a.jsx(r0,{size:18,className:"text-emerald-500"})," "]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end relative",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] uppercase font-bold px-1",children:" (Username)"}),a.jsx("input",{id:"input-new-username",type:"text",className:"input-field w-full",value:j.username,onChange:O=>g({...j,username:O.target.value}),onKeyDown:O=>{(O.key==="Enter"||O.key==="ArrowRight")&&(O.preventDefault(),document.getElementById("input-new-password")?.focus())},placeholder:""})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] uppercase font-bold px-1",children:" (Password)"}),a.jsx("input",{id:"input-new-password",type:"password",className:"input-field w-full",value:j.password,onChange:O=>g({...j,password:O.target.value}),onKeyDown:O=>{O.key==="Enter"||O.key==="ArrowRight"?(O.preventDefault(),document.getElementById("input-new-role")?.focus()):O.key==="ArrowLeft"&&(O.preventDefault(),document.getElementById("input-new-username")?.focus())},placeholder:""})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] uppercase font-bold px-1",children:" (Role)"}),a.jsxs("select",{id:"input-new-role",className:"input-field w-full",value:j.role,onChange:O=>g({...j,role:O.target.value}),onKeyDown:O=>{O.key==="Enter"||O.key==="ArrowRight"?(O.preventDefault(),document.getElementById("btn-add-user")?.focus()):O.key==="ArrowLeft"&&(O.preventDefault(),document.getElementById("input-new-password")?.focus())},children:[a.jsx("option",{value:"BOSS",children:" (BOSS)"}),a.jsx("option",{value:"ADMIN",children:" (ADMIN)"}),a.jsx("option",{value:"EMPLOYEE",children:" (EMPLOYEE)"}),a.jsx("option",{value:"VIEWER",children:" (VIEWER)"})]})]}),a.jsxs("button",{id:"btn-add-user",onClick:R,onKeyDown:O=>{O.key==="ArrowLeft"&&(O.preventDefault(),document.getElementById("input-new-role")?.focus())},className:"btn-primary flex justify-center items-center gap-2",disabled:u,children:[a.jsx(Xs,{size:18})," "]})]})]}),a.jsx("div",{className:"glass-panel p-0 overflow-hidden flex-1 flex flex-col",children:a.jsxs("div",{className:"overflow-y-auto flex-1",children:[a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:" (Username)"}),a.jsx("th",{className:"p-4",children:" (Role)"}),a.jsx("th",{className:"p-4 text-center",children:" (Status)"}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:c.length>0?c.map((O,v)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)] transition-colors",children:[a.jsx("td",{className:"p-4 text-[var(--text-primary)] font-bold",children:O.username}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold border ${O.role==="BOSS"?"bg-amber-500/10 text-amber-500 border-amber-500/20":O.role==="ADMIN"?"bg-rose-500/10 text-rose-500 border-rose-500/20":O.role==="EMPLOYEE"?"bg-blue-500/10 text-blue-500 border-blue-500/20":(O.role==="VIEWER","bg-slate-500/10 text-[var(--text-secondary)] border-slate-500/20")}`,children:O.role})}),a.jsx("td",{className:"p-4 text-center",children:O.status==="ACTIVE"?a.jsxs("span",{className:"flex items-center justify-center gap-2 text-emerald-500 font-bold text-xs",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.3)]"})," ACTIVE"]}):a.jsxs("span",{className:"flex items-center justify-center gap-2 text-[var(--text-secondary)] font-bold text-xs",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-500"})," ",O.status||"UNKNOWN"]})}),a.jsx("td",{className:"p-4 text-center flex items-center justify-center gap-2",children:O.username!=="admin"&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{let B=Array.isArray(O.permissions)?[...O.permissions]:[];const q={sales:["sales_entry","sales_report"],purchase:["purchase_entry","purchase_history"],inventory:["inventory_adjust","inventory_stocktake","inventory_valuation","inventory_adjust_history","inventory_stocktake_history"],finance:["finance_expenditure","finance_receivable","finance_payable","finance_income","finance_cost"],analytics:["analytics_sales","analytics_customer","analytics_profit","analytics_turnover"],system:["system_config"],inventory_history:["inventory_adjust_history","inventory_stocktake_history"]};Object.keys(q).forEach(ae=>{B.includes(ae)&&(B=B.filter(oe=>oe!==ae),q[ae].forEach(oe=>{B.includes(oe)||B.push(oe)}))}),S({username:O.username,permissions:B})},className:"p-2 text-[var(--text-tertiary)] hover:text-[var(--accent-blue)] transition-colors",title:"",children:a.jsx(ja,{size:16})}),a.jsx("button",{onClick:()=>N(O.username),className:"p-2 text-[var(--text-tertiary)] hover:text-rose-400 transition-colors",title:"",children:a.jsx(Oi,{size:16})})]})})]},v)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"p-20 text-center text-[var(--text-secondary)]",children:u?"...":""})})})]}),a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:c.length>0?c.map((O,v)=>a.jsx("div",{className:"p-6 bg-[var(--bg-primary)] hover:bg-[var(--bg-secondary)] transition-colors border-b border-[var(--border-primary)] last:border-0 shadow-sm",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-lg font-extrabold text-[var(--text-primary)] leading-tight",children:O.username}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`px-2.5 py-0.5 rounded text-[11px] font-bold border ${O.role==="BOSS"?"bg-amber-500/10 text-amber-500 border-amber-500/20":O.role==="ADMIN"?"bg-rose-500/10 text-rose-500 border-rose-500/20":O.role==="EMPLOYEE"?"bg-blue-500/10 text-blue-500 border-blue-500/20":"bg-slate-500/10 text-[var(--text-secondary)] border-slate-500/20"}`,children:O.role}),O.status==="ACTIVE"?a.jsxs("span",{className:"flex items-center gap-1.5 text-emerald-500 font-bold text-[11px]",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," ACTIVE"]}):a.jsxs("span",{className:"flex items-center gap-1.5 text-[var(--text-tertiary)] font-bold text-[11px]",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-300"})," ",O.status||"OFF"]})]})]}),O.username!=="admin"&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{let B=Array.isArray(O.permissions)?[...O.permissions]:[];const q={sales:["sales_entry","sales_report"],purchase:["purchase_entry","purchase_history"],inventory:["inventory_adjust","inventory_stocktake","inventory_valuation","inventory_adjust_history","inventory_stocktake_history"],finance:["finance_expenditure","finance_receivable","finance_payable","finance_income","finance_cost"],analytics:["analytics_sales","analytics_customer","analytics_profit","analytics_turnover"],system:["system_config"],inventory_history:["inventory_adjust_history","inventory_stocktake_history"]};Object.keys(q).forEach(ae=>{B.includes(ae)&&(B=B.filter(oe=>oe!==ae),q[ae].forEach(oe=>{B.includes(oe)||B.push(oe)}))}),S({username:O.username,permissions:B})},className:"w-12 h-12 flex items-center justify-center text-[var(--accent-blue)] bg-[var(--bg-secondary)] rounded-xl active:scale-90 transition-transform shadow-sm",children:a.jsx(ja,{size:22})}),a.jsx("button",{onClick:()=>N(O.username),className:"w-12 h-12 flex items-center justify-center text-rose-500 bg-[var(--bg-secondary)] rounded-xl active:scale-90 transition-transform shadow-sm",children:a.jsx(Oi,{size:22})})]})]})},v)):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:u?"...":""})})]})}),y&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-2xl w-full max-w-md overflow-hidden shadow-2xl animate-in fade-in zoom-in duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-[var(--border-primary)] bg-[var(--bg-secondary)]",children:[a.jsxs("h3",{className:"text-xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(ja,{className:"text-[var(--accent-blue)]"}),"  (",y.username,")"]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:" (BOSS )"})]}),a.jsx("div",{className:"p-6 space-y-6 max-h-[65vh] overflow-y-auto custom-scrollbar",children:A.map(O=>{const v=O.items.map(q=>q.key),B=v.every(q=>y.permissions?.includes(q));return v.some(q=>y.permissions?.includes(q)),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-1 cursor-pointer group/title",onClick:()=>M(O.items),children:[a.jsx("h4",{className:"text-xs font-bold text-[var(--text-tertiary)] uppercase tracking-widest flex items-center gap-2 group-hover/title:text-[var(--accent-blue)] transition-colors",children:O.group}),a.jsx("span",{className:"text-[10px] text-[var(--accent-blue)] font-bold opacity-0 group-hover/title:opacity-100 transition-opacity",children:B?"":""})]}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:O.items.map((q,ae)=>{const oe=`perm-item-${q.key}`,De=W=>{if(!["Enter"," ","ArrowDown","ArrowUp","ArrowRight","ArrowLeft"].includes(W.key))return;W.preventDefault();const he=[];A.forEach(G=>{G.items.forEach(k=>he.push(k.key))});const de=he.indexOf(q.key);if(W.key==="Enter"||W.key===" "){if(C(q.key),de<he.length-1){const G=he[de+1];document.getElementById(`perm-item-${G}`)?.focus()}}else if(W.key==="ArrowDown"||W.key==="ArrowRight"){if(de<he.length-1){const G=he[de+1];document.getElementById(`perm-item-${G}`)?.focus()}}else if((W.key==="ArrowUp"||W.key==="ArrowLeft")&&de>0){const G=he[de-1];document.getElementById(`perm-item-${G}`)?.focus()}};return a.jsxs("label",{id:oe,tabIndex:"0",onKeyDown:De,className:`flex items-center gap-3 p-3 rounded-xl border transition-all cursor-pointer group outline-none ring-offset-2 focus:ring-2 focus:ring-[var(--accent-blue)]/50 ${y.permissions?.includes(q.key)?"bg-[var(--bg-secondary)] border-[var(--border-primary)] shadow-sm":"bg-[var(--bg-secondary)] border-[var(--border-primary)] hover:bg-[var(--bg-hover)]"}`,children:[a.jsx("div",{className:`w-5 h-5 rounded-lg border flex items-center justify-center transition-all ${y.permissions?.includes(q.key)?"bg-[var(--accent-blue)] border-[var(--accent-blue)] text-white scale-110":"bg-[var(--bg-primary)] border-[var(--border-primary)] group-hover:border-[var(--accent-blue)]/50"}`,children:y.permissions?.includes(q.key)&&a.jsx(Zs,{size:12,fill:"currentColor"})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:y.permissions?.includes(q.key),onChange:()=>C(q.key)}),a.jsx("span",{className:`text-sm transition-colors ${y.permissions?.includes(q.key)?"text-[var(--text-primary)] font-bold":"text-[var(--text-secondary)]"}`,children:q.label})]},q.key)})})]},O.group)})}),a.jsxs("div",{className:"p-6 border-t border-[var(--border-primary)] flex justify-end gap-3 bg-[var(--bg-secondary)]",children:[a.jsx("button",{onClick:()=>S(null),className:"px-4 py-2 rounded-lg text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-black/5 transition-colors",children:""}),a.jsx("button",{onClick:L,className:"btn-primary px-6 py-2",children:""})]})]})})]})}function PS({user:l,apiUrl:r}){const[c,d]=E.useState(new Date().getFullYear()),[u,f]=E.useState(new Date().getMonth()+1),[x,b]=E.useState(l.username),[h,p]=E.useState([]),[j,g]=E.useState(!1),[y,S]=E.useState(null),[A,R]=E.useState(null),[N,w]=E.useState("LEAVE"),[L,C]=E.useState(""),[M,O]=E.useState(""),[v,B]=E.useState(!1),[q,ae]=E.useState({baseSalary:0,attendanceBonus:0,insurance:0,monthlyOffDays:8,bonusTiers:"[]"}),[oe,De]=E.useState(!1),[W,ue]=E.useState(!1),[he,de]=E.useState({profile:{joinedDate:"",birthday:"",identityId:"",contact:"",note:""},seniorityText:"",estimatedLeaveDays:0}),[G,k]=E.useState({joinedDate:"",birthday:"",identityId:"",contact:"",note:""}),Z={baseSalary:E.useRef(null),attendanceBonus:E.useRef(null),monthlyOffDays:E.useRef(null),insurance:E.useRef(null),bonusTiers:E.useRef(null)},ne={editValue:E.useRef(null),editNote:E.useRef(null)};E.useEffect(()=>{l.role==="BOSS"&&ke(r,"getUsers",{},l.token).then(re=>p(re)).catch(re=>console.error(re))},[l.role,l.token,r]);const xe=E.useCallback(async()=>{g(!0);try{const T=await ke(r,"getPayrollData",{year:c,month:u,targetUser:x},l.token);T&&!T.error?(S(T),T.config&&ae({...T.config,bonusTiers:JSON.stringify(T.config.bonusTiers||[])})):console.error(T?.error)}catch(T){console.error(T),alert(": "+T.message)}finally{g(!1)}},[c,u,x,l.token]),_=E.useCallback(async()=>{try{const T=await ke(r,"getEmployeeProfile",{targetUser:x},l.token);T&&!T.error&&(de(T),k(T.profile))}catch(T){console.error(T)}},[x,l.token,r]),Q=async()=>{if(!y||!y.summary){alert("");return}const T=` ${x} 

: $${(y.summary.finalSalary||0).toLocaleString()}
: ${c}${u}`;if(confirm(T)){De(!0);try{await ke(r,"savePayrollToExpenditure",{targetUser:x,year:c,month:u,finalSalary:y.summary.finalSalary},l.token),alert("")}catch(re){console.error("Save payroll failed:",re),alert(": "+re.message)}finally{De(!1)}}};E.useEffect(()=>{xe(),_()},[xe,_]);const J=async()=>{if(A){De(!0);try{await ke(r,"saveDailyRecord",{date:A.date,username:x,type:N,value:N==="WORK"||N==="LEAVE"||N==="SPECIAL_LEAVE"||N==="SICK_LEAVE"?1:Number(L),note:M},l.token),R(null),xe()}catch(T){alert(": "+T.message)}finally{De(!1)}}},le=async()=>{De(!0);try{await ke(r,"saveEmployeeProfile",{username:x,...G},l.token),ue(!1),_()}catch(T){alert(": "+T.message)}finally{De(!1)}},ve=async()=>{let T=[];try{T=JSON.parse(q.bonusTiers)}catch{alert(" (JSON Error)");return}De(!0);try{await ke(r,"savePayrollSettings",{targetUser:x,baseSalary:Number(q.baseSalary),attendanceBonus:Number(q.attendanceBonus),insurance:Number(q.insurance),monthlyOffDays:Number(q.monthlyOffDays),bonusTiers:T},l.token),B(!1),xe()}catch(re){alert(": "+re.message)}finally{De(!1)}},je=(T,re)=>{const fe=["baseSalary","attendanceBonus","monthlyOffDays","insurance","bonusTiers"],ge=fe.indexOf(re);if(!(re==="bonusTiers")&&(T.key==="ArrowUp"||T.key==="ArrowDown")&&T.preventDefault(),T.key==="Enter"){if(re==="bonusTiers"&&!T.ctrlKey)return;T.preventDefault();const ft=fe[ge+1];ft&&Z[ft].current&&(Z[ft].current.focus(),Z[ft].current.select?.());return}const Xe={baseSalary:{ArrowRight:"attendanceBonus",ArrowDown:"monthlyOffDays"},attendanceBonus:{ArrowLeft:"baseSalary",ArrowDown:"insurance"},monthlyOffDays:{ArrowRight:"insurance",ArrowUp:"baseSalary",ArrowDown:"bonusTiers"},insurance:{ArrowLeft:"monthlyOffDays",ArrowUp:"attendanceBonus",ArrowDown:"bonusTiers"},bonusTiers:{}}[re]?.[T.key];Xe&&Z[Xe].current&&(T.preventDefault(),Z[Xe].current.focus(),Z[Xe].current.select?.())},se=(T,re)=>{if(T.key==="Enter"&&(T.preventDefault(),re==="editType"?N==="LOSS"?ne.editValue.current?.focus():ne.editNote.current?.focus():re==="editValue"?ne.editNote.current?.focus():re==="editNote"&&J()),re==="editType"&&(T.key==="ArrowLeft"||T.key==="ArrowRight")){T.preventDefault();const fe=["WORK","LEAVE","SPECIAL_LEAVE","SICK_LEAVE","LOSS"];let ge=fe.indexOf(N);T.key==="ArrowLeft"&&(ge=(ge-1+fe.length)%fe.length),T.key==="ArrowRight"&&(ge=(ge+1)%fe.length),w(fe[ge])}},be=((T,re)=>{const fe=new Date(T,re,0).getDate();return Array.from({length:fe},(ge,Me)=>{const Se=new Date(T,re-1,Me+1),Xe=Se.getTimezoneOffset()*6e4;return{date:new Date(Se.getTime()-Xe).toISOString().split("T")[0],day:Me+1,weekday:["","","","","","",""][Se.getDay()]}})})(c,u),Ee=y?.summary||{};let K=0,H=0,te=0,me=0;be.forEach(T=>{const re=T.date,fe=y?.dailyData?.[re]||0,ge=y?.dailyRecords?.[re]||{};fe>0?K++:ge.isLeave?H++:ge.isSpecialLeave?te++:ge.isSickLeave?me++:H++});const pe=T=>{if(!T)return"";try{if(T instanceof Date)return`${T.getMonth()+1}${T.getDate()}`;const re=String(T),fe=new Date(re);if(!isNaN(fe.getTime()))return`${fe.getMonth()+1}${fe.getDate()}`;const ge=re.match(/(\d{1,2})[/-](\d{1,2})/);return ge?`${ge[1]}${ge[2]}`:re.replace(/[/.-]/g,"")+""}catch(re){return console.error("Format err",re),String(T)}};return a.jsxs("div",{className:"p-2 md:p-8 space-y-4 md:space-y-6 max-w-7xl mx-auto pb-24",children:[a.jsxs("div",{className:"md:hidden space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center px-1 mb-6",children:[a.jsxs("h1",{className:"text-xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(bt,{className:"text-[var(--accent-blue)]",size:24})," "]}),a.jsx("button",{onClick:xe,className:"btn-secondary py-1 px-3 text-xs h-7 rounded-full border-[var(--border-primary)] text-[var(--text-secondary)]",children:""})]}),a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg border border-[var(--border-primary)] shadow-sm h-10 px-1 flex items-center gap-1 w-full max-w-[340px] justify-center",children:[a.jsx("select",{value:c,onChange:T=>d(Number(T.target.value)),className:"bg-transparent text-sm font-medium text-[var(--text-primary)] h-8 pl-2 pr-1 outline-none text-center",children:[2025,2026,2027].map(T=>a.jsxs("option",{value:T,children:[T,""]},T))}),a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsx("select",{value:u,onChange:T=>f(Number(T.target.value)),className:"bg-transparent text-sm font-bold text-[var(--accent-blue)] h-8 px-1 outline-none text-center w-16",children:Array.from({length:12},(T,re)=>re+1).map(T=>a.jsxs("option",{value:T,children:[T,""]},T))}),l.role==="BOSS"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsxs("select",{value:x,onChange:T=>b(T.target.value),className:"bg-transparent text-sm font-medium text-[var(--text-primary)] h-8 pl-1 pr-2 outline-none text-center min-w-[5rem]",children:[h.map(T=>a.jsx("option",{value:T.username,children:T.username},T.userid)),!h.some(T=>T.username===x)&&a.jsx("option",{value:x,children:x})]})]})]})}),l.role==="BOSS"&&a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg border border-[var(--border-primary)] shadow-sm h-10 px-1 flex items-center gap-1 w-full max-w-[340px] justify-center",children:[a.jsxs("button",{onClick:()=>B(!0),className:"h-8 px-2 text-xs font-medium text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] rounded-md flex items-center gap-1",children:[a.jsx(hn,{size:14})," "]}),a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsxs("button",{onClick:()=>ue(!0),className:"h-8 px-2 text-xs font-medium text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] rounded-md flex items-center gap-1",children:[a.jsx(Sa,{size:14})," "]}),a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsxs("button",{onClick:Q,disabled:oe||!y,className:"h-8 px-2 text-xs font-medium text-[var(--accent-blue)] hover:bg-[var(--bg-secondary)] rounded-md flex items-center gap-1 disabled:opacity-50",children:[a.jsx(bt,{size:14})," "]})]})}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-2 px-1 text-[10px]",children:[a.jsxs("span",{className:"bg-[var(--bg-secondary)] text-[var(--accent-blue)] px-2 py-0.5 rounded border border-[var(--border-primary)]",children:[": ",he.profile.joinedDate||"-"]}),a.jsxs("span",{className:"bg-[var(--bg-secondary)] text-indigo-500 px-2 py-0.5 rounded border border-[var(--border-primary)]",children:[": ",he.seniorityText]}),a.jsxs("span",{className:"bg-[var(--bg-secondary)] text-emerald-500 px-2 py-0.5 rounded border border-[var(--border-primary)]",children:[": ",he.estimatedLeaveDays-(y?.totalSpecialLeaveUsed||0),""]})]})]}),a.jsxs("div",{className:"hidden md:flex glass-panel p-6 flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[var(--accent-blue)] to-indigo-500 flex items-center gap-3",children:[a.jsx(bt,{})," "]}),a.jsx("p",{className:"text-[var(--text-tertiary)] text-sm mt-1",children:""})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("select",{value:c,onChange:T=>d(Number(T.target.value)),className:"input-field w-24",children:[2025,2026,2027].map(T=>a.jsxs("option",{value:T,children:[T,""]},T))}),a.jsx("select",{value:u,onChange:T=>f(Number(T.target.value)),className:"input-field w-20",children:Array.from({length:12},(T,re)=>re+1).map(T=>a.jsxs("option",{value:T,children:[T,""]},T))}),l.role==="BOSS"&&a.jsxs("select",{value:x,onChange:T=>b(T.target.value),className:"input-field w-32",children:[h.map(T=>a.jsx("option",{value:T.username,children:T.username},T.userid)),!h.some(T=>T.username===x)&&a.jsx("option",{value:x,children:x})]}),l.role==="BOSS"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>B(!0),className:"btn-secondary flex items-center gap-2",children:[a.jsx(hn,{size:16})," "]}),a.jsxs("button",{onClick:()=>ue(!0),className:"btn-secondary flex items-center gap-2 border-[var(--border-primary)] text-emerald-500 hover:bg-[var(--bg-secondary)]",children:[a.jsx(Sa,{size:16})," "]}),a.jsxs("button",{onClick:Q,disabled:oe||!y,className:"btn-secondary flex items-center gap-2 border-[var(--border-primary)] text-blue-700 hover:bg-[var(--bg-secondary)] disabled:opacity-50",children:[a.jsx(bt,{size:16})," ",oe?"...":""]})]}),a.jsx("button",{onClick:xe,className:"btn-primary",children:""})]})]}),a.jsxs("div",{className:"hidden md:flex flex-wrap gap-4 px-2",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-[var(--bg-secondary)] text-[var(--accent-blue)] px-3 py-1.5 rounded-full text-sm font-medium border border-[var(--border-primary)]",children:[a.jsx(Sa,{size:14})," : ",he.profile.joinedDate||""]}),a.jsxs("div",{className:"flex items-center gap-2 bg-[var(--bg-secondary)] text-indigo-500 px-3 py-1.5 rounded-full text-sm font-medium border border-[var(--border-primary)]",children:[a.jsx(hn,{size:14})," : ",he.seniorityText]}),a.jsxs("div",{className:"flex items-center gap-2 bg-[var(--bg-secondary)] text-emerald-500 px-3 py-1.5 rounded-full text-sm font-medium border border-[var(--border-primary)]",children:[a.jsx(kd,{size:14})," :  ",he.estimatedLeaveDays,"  /  ",y?.totalSpecialLeaveUsed||0,"  /  ",he.estimatedLeaveDays-(y?.totalSpecialLeaveUsed||0)," "]})]}),l.role==="BOSS"&&y?.isBirthdayMonth&&a.jsx("div",{className:"px-1 md:px-2",children:a.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-rose-50 border border-pink-100 rounded-xl p-3 md:p-4 flex items-center gap-3 md:gap-4 animate-bounce-subtle",children:[a.jsx("div",{className:"bg-[var(--bg-primary)] p-1.5 md:p-2 rounded-full shadow-sm text-lg md:text-2xl",children:""}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-rose-700 font-bold text-sm md:text-base",children:[" ",he.profile.birthday?`(${pe(he.profile.birthday)})`:"",""]}),a.jsx("p",{className:"text-rose-600/80 text-xs md:text-sm",children:""})]})]})}),a.jsxs("div",{className:"grid grid-cols-4 gap-2 px-1 md:hidden",children:[a.jsx(Ot,{title:"",amount:y?.config?.baseSalary,color:"text-[var(--text-primary)]",isMobile:!0}),a.jsx(Ot,{title:"",amount:0,color:"text-indigo-600",isMobile:!0}),a.jsx(Ot,{title:"",amount:Ee.insurance,isDeduction:!0,color:"text-red-600",isMobile:!0,hoverContent:a.jsx("div",{className:"flex flex-col items-end",children:a.jsxs("p",{className:"text-xs font-bold text-emerald-500 font-mono",children:["$",(Ee.bonus||0).toLocaleString()]})})}),a.jsx(Ot,{title:"",amount:Ee.finalSalary,color:"text-[var(--accent-blue)]",isMobile:!0,className:"bg-[var(--bg-secondary)]/50 border-blue-100"})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-2 px-1 mt-2 md:hidden",children:[a.jsx(Ot,{title:"",amount:Ee.attendanceBonus,color:"text-yellow-600",isMobile:!0,hoverContent:a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] leading-none mb-0.5",children:""}),a.jsxs("p",{className:"text-xs font-bold text-emerald-500",children:[K," "]})]})}),a.jsx(Ot,{title:"",amount:H,isCurrency:!1,suffix:"",color:"text-[var(--text-secondary)]",isMobile:!0,hoverContent:a.jsxs("div",{className:"flex flex-col items-end gap-1",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] leading-none",children:""}),a.jsxs("p",{className:`text-xs font-bold ${(Ee.leaveCompensation||0)>=0?"text-[var(--accent-blue)]":"text-red-600"}`,children:["$",(Ee.leaveCompensation||0).toLocaleString()]})]})}),a.jsx(Ot,{title:"",amount:te,isCurrency:!1,suffix:"",color:"text-emerald-500",isMobile:!0}),a.jsx(Ot,{title:"",amount:me,isCurrency:!1,suffix:"",color:"text-amber-500",isMobile:!0,hoverContent:a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] leading-none",children:""}),a.jsxs("p",{className:"text-xs font-bold text-red-600",children:["-$",(me*500).toLocaleString()]})]})})]}),a.jsxs("div",{className:"hidden md:grid grid-cols-2 lg:grid-cols-4 gap-4 px-2",children:[a.jsx(Ot,{title:"",amount:y?.config?.baseSalary,color:"text-[var(--text-primary)]"}),a.jsx(Ot,{title:"",amount:0,subtext:`: $${(Ee.sales||0).toLocaleString()}`,color:"text-indigo-600"}),a.jsx(Ot,{title:" ()",amount:Ee.insurance,isDeduction:!0,color:"text-red-600",hoverContent:a.jsx("div",{className:"flex flex-col items-end",children:a.jsxs("p",{className:"text-sm font-bold text-emerald-500 font-mono",children:["$",(Ee.bonus||0).toLocaleString()]})})}),a.jsx(Ot,{title:"",amount:Ee.finalSalary,color:"text-[var(--accent-blue)]",subtext:"/"})]}),a.jsxs("div",{className:"hidden md:grid grid-cols-2 lg:grid-cols-4 gap-4 mt-4 px-2",children:[a.jsx(Ot,{title:"",amount:Ee.attendanceBonus,color:"text-yellow-600",hoverContent:a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-medium leading-none mb-1",children:""}),a.jsxs("p",{className:"text-sm font-bold text-emerald-500 font-mono",children:[K," "]})]})}),a.jsx(Ot,{title:"",amount:H,isCurrency:!1,suffix:" ",color:"text-[var(--text-secondary)]",hoverContent:a.jsxs("div",{className:"flex flex-col items-end gap-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-medium leading-none mb-1",children:""}),a.jsxs("p",{className:"text-sm font-bold text-emerald-500 font-mono",children:[y?.config?.monthlyOffDays||0," "]})]}),a.jsxs("div",{className:"w-full border-t border-emerald-100 pt-1 mt-0.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-medium leading-none mb-1",children:""}),a.jsxs("p",{className:`text-sm font-bold font-mono ${(Ee.leaveCompensation||0)>=0?"text-[var(--accent-blue)]":"text-red-600"}`,children:[(Ee.leaveCompensation||0)>=0?"+":"-","$",Math.abs(Ee.leaveCompensation||0).toLocaleString()]})]})]})}),a.jsx(Ot,{title:"",amount:te,isCurrency:!1,suffix:" ",color:"text-emerald-500"}),a.jsx(Ot,{title:"",amount:me,isCurrency:!1,suffix:" ",color:"text-amber-500",hoverContent:a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-medium leading-none mb-1",children:""}),a.jsxs("p",{className:"text-sm font-bold text-red-600 font-mono",children:["-$",(me*500).toLocaleString()]})]})})]}),a.jsx("div",{className:"px-1 md:px-2 mt-2 md:mt-4",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] p-3 rounded-lg border border-red-100 flex justify-between items-center shadow-sm",children:[a.jsx("span",{className:"text-sm text-red-600 font-bold",children:"/"}),a.jsxs("span",{className:"text-lg font-bold text-red-600",children:["-$",(Ee.loss||0).toLocaleString()]})]})}),a.jsx("div",{className:"hidden md:block glass-panel overflow-hidden",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-sm",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-32",children:""}),a.jsx("th",{className:"p-4 w-24 text-center",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4 text-right",children:"/"}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:be.map(T=>{const re=T.date,fe=y?.dailyData?.[re]||0,ge=y?.dailyRecords?.[re]||{},Me=fe>0;let Se="",Xe="text-yellow-500 bg-yellow-500/10 px-2 rounded font-medium";Me?(Se=" ()",Xe="text-green-400 font-bold"):ge.isLeave?(Se="",Xe="text-yellow-500 bg-yellow-500/10 px-2 rounded font-medium"):ge.isSpecialLeave?(Se="",Xe="text-emerald-500 bg-emerald-500/10 px-2 rounded font-medium"):ge.isSickLeave&&(Se="",Xe="text-amber-500 bg-amber-500/10 px-2 rounded font-medium");const ft=T.weekday===""||T.weekday==="";return a.jsxs("tr",{className:`hover:bg-[var(--bg-secondary)] transition-colors ${ft?"bg-[var(--bg-secondary)]/50":""}`,children:[a.jsx("td",{className:"p-4 font-mono text-[var(--text-secondary)]",children:re}),a.jsx("td",{className:`p-4 text-center ${T.weekday===""?"text-red-600":"text-[var(--text-secondary)]"}`,children:T.weekday}),a.jsx("td",{className:"p-4 text-right font-mono text-emerald-500",children:Math.abs(fe)>.01?`$${fe.toLocaleString()}`:"-"}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("span",{className:`text-sm ${Xe}`,children:Se})}),a.jsxs("td",{className:"p-4 text-right font-mono text-red-600",children:[Math.abs(ge.loss||0)>.01?`-$${Math.abs(ge.loss).toLocaleString()}`:"",ge.note&&a.jsx("span",{className:"block text-xs text-[var(--text-secondary)]",children:ge.note})]}),a.jsx("td",{className:"p-4 text-center",children:l.role==="BOSS"&&a.jsx("button",{onClick:()=>{R(T),w("LEAVE")},className:"text-xs btn-ghost text-blue-400 hover:text-blue-300",children:""})})]},re)})})]})}),a.jsx("div",{className:"md:hidden space-y-2",children:be.map(T=>{const re=T.date,fe=re.split("-"),ge=`${fe[1]}/${fe[2]}`,Me=y?.dailyData?.[re]||0,Se=y?.dailyRecords?.[re]||{},Xe=Me>0;let ft="",Ze="bg-yellow-100 text-yellow-700";Xe?(ft="",Ze="bg-green-100 text-green-700"):Se.isLeave?(ft="",Ze="bg-yellow-100 text-yellow-700"):Se.isSpecialLeave?(ft="",Ze="bg-emerald-100 text-emerald-500"):Se.isSickLeave&&(ft="",Ze="bg-amber-100 text-amber-700");const ea=T.weekday===""||T.weekday==="";return a.jsxs("div",{className:`bg-[var(--bg-primary)] rounded-lg border border-[var(--border-primary)] p-2 flex items-center shadow-sm text-xs ${ea?"bg-[var(--bg-secondary)]/50":""}`,children:[a.jsxs("div",{className:"w-14 items-center flex flex-col justify-center border-r border-[var(--border-primary)] pr-2 mr-2",children:[a.jsx("span",{className:`font-bold text-sm ${T.weekday===""?"text-rose-500":"text-[var(--text-primary)]"}`,children:ge}),a.jsxs("span",{className:`text-[10px] ${T.weekday===""?"text-rose-400":"text-[var(--text-tertiary)]"}`,children:["",T.weekday]})]}),a.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-1 items-center",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-[9px] text-[var(--text-tertiary)] mb-0.5",children:""}),a.jsx("p",{className:`font-bold ${Me>0?"text-emerald-500":"text-slate-300"}`,children:Me>0?`$${Me.toLocaleString()}`:"-"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-[9px] text-[var(--text-tertiary)] mb-0.5",children:""}),a.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold ${Ze}`,children:ft})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-[9px] text-[var(--text-tertiary)] mb-0.5",children:""}),a.jsx("p",{className:`font-bold ${Se.loss?"text-red-500":"text-slate-300"}`,children:Se.loss?`-$${Number(Se.loss).toLocaleString()}`:"-"})]})]}),a.jsx("div",{className:"pl-2 ml-1 border-l border-[var(--border-primary)]",children:l.role==="BOSS"&&a.jsx("button",{onClick:()=>{R(T),w("LEAVE")},className:"w-8 h-8 flex items-center justify-center rounded-full bg-[var(--bg-secondary)] text-[var(--text-tertiary)] hover:bg-[var(--bg-secondary)] hover:text-blue-500",children:a.jsx("span",{className:"text-[10px]",children:""})})})]},re)})}),A&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"glass-panel w-full max-w-md p-6 animate-fadeIn",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4",children:[A.date," (",A.weekday,") "]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[var(--text-tertiary)] mb-2",children:" ()"}),a.jsx("div",{className:"flex bg-[var(--bg-secondary)] rounded p-1 border border-[var(--border-primary)] outline-none focus-within:ring-2 focus-within:ring-blue-500/20",tabIndex:"0",onKeyDown:T=>se(T,"editType"),children:[{id:"WORK",label:"",color:"bg-blue-600"},{id:"LEAVE",label:"",color:"bg-yellow-600"},{id:"SPECIAL_LEAVE",label:"",color:"bg-emerald-600"},{id:"SICK_LEAVE",label:"",color:"bg-amber-600"},{id:"LOSS",label:"/",color:"bg-red-600"}].map(T=>a.jsx("button",{className:`flex-1 py-2 rounded text-xs transition-all ${N===T.id?`${T.color} text-white shadow-sm`:"text-[var(--text-secondary)] hover:bg-slate-100"}`,onClick:()=>w(T.id),children:T.label},T.id))})]}),N==="LOSS"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[var(--text-tertiary)] mb-1",children:" ()"}),a.jsx("input",{type:"number",className:"input-field w-full",placeholder:"-100",ref:ne.editValue,value:L,onChange:T=>C(T.target.value),onKeyDown:T=>se(T,"editValue")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[var(--text-tertiary)] mb-1",children:""}),a.jsx("input",{type:"text",className:"input-field w-full",placeholder:"...",ref:ne.editNote,value:M,onChange:T=>O(T.target.value),onKeyDown:T=>se(T,"editNote")})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:()=>R(null),className:"btn-secondary flex-1",disabled:oe,children:""}),a.jsx("button",{onClick:J,className:"btn-primary flex-1",disabled:oe,children:oe?"...":""})]}),oe&&a.jsx("div",{className:"absolute inset-0 bg-[var(--bg-primary)]/60 backdrop-blur-[2px] z-10 flex items-center justify-center rounded-lg",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-sm font-medium text-[var(--accent-blue)]",children:"..."})]})})]})}),v&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"glass-panel w-full max-w-lg p-6 animate-fadeIn max-h-[90vh] overflow-y-auto",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4",children:[" - ",x]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("input",{type:"number",className:"input-field w-full",ref:Z.baseSalary,value:q.baseSalary,onChange:T=>ae({...q,baseSalary:T.target.value}),onKeyDown:T=>je(T,"baseSalary")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("input",{type:"number",className:"input-field w-full",ref:Z.attendanceBonus,value:q.attendanceBonus,onChange:T=>ae({...q,attendanceBonus:T.target.value}),onKeyDown:T=>je(T,"attendanceBonus")})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("input",{type:"number",className:"input-field w-full",ref:Z.monthlyOffDays,value:q.monthlyOffDays,onChange:T=>ae({...q,monthlyOffDays:T.target.value}),onKeyDown:T=>je(T,"monthlyOffDays")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:" ()"}),a.jsx("input",{type:"number",className:"input-field w-full",ref:Z.insurance,value:q.insurance,onChange:T=>ae({...q,insurance:T.target.value}),onKeyDown:T=>je(T,"insurance")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:" (JSON)"}),a.jsx("textarea",{className:"input-field w-full font-mono text-xs h-32",ref:Z.bonusTiers,value:q.bonusTiers,onChange:T=>ae({...q,bonusTiers:T.target.value}),onKeyDown:T=>je(T,"bonusTiers"),placeholder:'[{"threshold": 50000, "bonus": 1000}]'}),a.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:': `[{"threshold": , "bonus":  }]` ( Enter )'})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:()=>B(!1),className:"btn-secondary flex-1",disabled:oe,children:""}),a.jsx("button",{onClick:ve,className:"btn-primary flex-1",disabled:oe,children:oe?"...":""})]}),oe&&a.jsx("div",{className:"absolute inset-0 bg-[var(--bg-primary)]/60 backdrop-blur-[2px] z-10 flex items-center justify-center rounded-lg text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),a.jsxs("span",{className:"text-sm font-medium text-[var(--accent-blue)] font-bold",children:["",a.jsx("br",{}),a.jsx("span",{className:"text-[10px] opacity-70",children:""})]})]})})]})}),W&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"glass-panel w-full max-w-lg p-6 animate-fadeIn",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold",children:[" - ",x]}),a.jsx("p",{className:"text-sm text-[var(--text-tertiary)] mt-1",children:""})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"block text-xs text-[var(--text-tertiary)] uppercase font-bold tracking-wider",children:""}),a.jsx("span",{className:"text-lg font-bold text-[var(--accent-blue)]",children:he.seniorityText})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("input",{type:"date",className:"input-field w-full",value:G.joinedDate,onChange:T=>k({...G,joinedDate:T.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:" (/)"}),a.jsx("input",{type:"text",placeholder:"05/20",className:"input-field w-full",value:G.birthday,onChange:T=>k({...G,birthday:T.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"/"}),a.jsx("input",{type:"text",className:"input-field w-full",placeholder:"A123456789",value:G.identityId,onChange:T=>k({...G,identityId:T.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("input",{type:"text",className:"input-field w-full",placeholder:"0912-345-678",value:G.contact,onChange:T=>k({...G,contact:T.target.value})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("textarea",{className:"input-field w-full h-24",placeholder:"...",value:G.note,onChange:T=>k({...G,note:T.target.value})})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] border border-emerald-100 rounded-lg p-3 flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-emerald-800 font-medium",children:""}),a.jsxs("span",{className:"text-xl font-bold text-emerald-500 font-mono",children:[he.estimatedLeaveDays," "]})]})]}),a.jsxs("div",{className:"flex gap-3 mt-8",children:[a.jsx("button",{onClick:()=>ue(!1),className:"btn-secondary flex-1",disabled:oe,children:""}),a.jsx("button",{onClick:le,className:"btn-primary flex-1",disabled:oe,children:oe?"...":""})]})]})})]})}function Ot({title:l,amount:r,subtext:c,color:d,isDeduction:u,isCurrency:f=!0,suffix:x="",hiddenAmount:b,hiddenTitle:h="",hoverContent:p,isMobile:j,className:g=""}){const[y,S]=E.useState(!1),A=()=>{(j||"ontouchstart"in window)&&S(!y)};return a.jsxs("div",{onClick:A,className:`
                relative overflow-hidden transition-all cursor-default border border-[var(--border-primary)] bg-[var(--bg-primary)]
                ${j?"h-16 p-2 rounded-lg flex flex-col justify-center items-center text-center shadow-sm":"h-28 p-4 rounded-xl flex flex-col justify-between glass-panel hover:border-blue-500"}
                ${g}
            `,onMouseEnter:()=>!j&&S(!0),onMouseLeave:()=>!j&&S(!1),children:[a.jsx("div",{className:`flex justify-between items-start z-10 w-full ${j?"justify-center":""}`,children:a.jsx("span",{className:`${j?"text-[10px]":"text-sm"} text-[var(--text-secondary)] font-bold`,children:l})}),a.jsxs("div",{className:`z-10 w-full ${j?"mt-1":""}`,children:[a.jsxs("span",{className:`${j?"text-xs":"text-2xl"} font-bold tracking-tight ${d}`,children:[u&&"-",f&&"$",(r||0).toLocaleString(),x]}),!j&&c&&a.jsx("p",{className:"text-xs text-[var(--text-secondary)] mt-1",children:c})]}),(b!==void 0||p)&&a.jsx("div",{className:`absolute top-0 right-0 p-1 md:p-2 transition-all duration-300 ${y?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,children:a.jsx("div",{className:"bg-[var(--bg-primary)]/95 backdrop-blur shadow-sm border border-emerald-100 rounded px-1.5 py-0.5 text-right",children:p||a.jsxs(a.Fragment,{children:[h&&a.jsx("p",{className:"text-[8px] md:text-xs text-[var(--text-tertiary)] font-medium",children:h}),a.jsxs("p",{className:"text-xs md:text-sm font-bold text-emerald-500 font-mono",children:[f&&"$",(b||0).toLocaleString()]})]})})}),!j&&a.jsx("div",{className:`absolute -right-2 -bottom-2 w-16 h-16 rounded-full opacity-5 ${d?.replace("text-","bg-")||"bg-slate-400"}`})]})}function JS({user:l,apiUrl:r}){const[c,d]=E.useState([]),[u,f]=E.useState(!1),[x,b]=E.useState({startDate:tt(new Date(Date.now()-10080*60*1e3)),endDate:tt(new Date),username:"",actionType:""}),[h,p]=E.useState(null),j=[{value:"",label:""},{value:"LOGIN",label:""},{value:"LOGOUT",label:""},{value:"PAGE_VIEW",label:""},{value:"DATA_EDIT",label:""},{value:"ERROR",label:""}],g=async()=>{f(!0);try{const L=await ke(r,"getActivityLogs",x,l.token);d(Array.isArray(L)?L:[])}catch(L){console.error("Failed to fetch activity logs:",L),alert("")}finally{f(!1)}};E.useEffect(()=>{g()},[]);const y=L=>new Date(L).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),S={sales:"",inventory:"",purchase:"",report:"",purchaseHistory:"",adjustHistory:"",valuation:"",stocktake:"",stocktakeHistory:"",receivable:"",payable:"",salesRanking:"",customerRanking:"",profitAnalysis:"",turnoverRate:"",costCalculation:"",expenditureManagement:"",incomeStatement:"",permissionControl:"",payroll:"",activityLog:""},A=L=>S[L]||L||"-",R=L=>{if(!L)return"-";try{const C=JSON.parse(L),M={action:"",page:"",customer:"",totalAmount:"",paymentMethod:"",productCount:"",type:"",product:"",quantity:"",adjustType:"",vendorCount:"",totalPrice:"",itemCount:"",hasDifferences:"",totalDiff:"",note:"",recordId:"ID",vendor:"",targetUser:"",role:"",period:"",date:"",value:""};return Object.entries(C).map(([O,v])=>{const B=M[O]||O,q=typeof v=="object"?JSON.stringify(v):String(v);return`${B}: ${q}`}).join(`
`)}catch{return L}},N=L=>{const C=j.find(M=>M.value===L);return C?C.label:L},w=L=>{switch(L){case"LOGIN":return"bg-emerald-50 text-emerald-600 border-emerald-200";case"LOGOUT":return"bg-rose-50 text-rose-600 border-rose-200";case"PAGE_VIEW":return"bg-blue-50 text-blue-600 border-blue-200";case"DATA_EDIT":return"bg-amber-50 text-amber-600 border-amber-200";case"ERROR":return"bg-rose-100 text-rose-700 border-rose-300";default:return"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] border-[var(--border-primary)]"}};return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 h-[calc(100vh-6rem)] flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-lg md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(In,{className:"text-[var(--accent-blue)]",size:24}),""]}),a.jsx("p",{className:"text-xs md:text-sm text-[var(--text-secondary)] mt-1",children:""})]}),a.jsx("button",{onClick:g,className:"btn-secondary p-2 rounded-xl",disabled:u,children:a.jsx(it,{size:18,className:u?"animate-spin":""})})]}),a.jsx("div",{className:"glass-panel p-4 shrink-0",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] font-bold block mb-1",children:""}),a.jsx("input",{type:"date",value:x.startDate,onChange:L=>b({...x,startDate:L.target.value}),className:"input-field w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] font-bold block mb-1",children:""}),a.jsx("input",{type:"date",value:x.endDate,onChange:L=>b({...x,endDate:L.target.value}),className:"input-field w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] font-bold block mb-1",children:""}),a.jsx("select",{value:x.actionType,onChange:L=>b({...x,actionType:L.target.value}),className:"input-field w-full",children:j.map(L=>a.jsx("option",{value:L.value,children:L.label},L.value))})]}),(l.role==="BOSS"||l.role==="ADMIN")&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] font-bold block mb-1",children:""}),a.jsx("input",{type:"text",value:x.username,onChange:L=>b({...x,username:L.target.value}),placeholder:"",className:"input-field w-full"})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("button",{onClick:g,className:"btn-primary w-full flex items-center justify-center gap-2",disabled:u,children:[a.jsx(jt,{size:16}),""]})})]})}),a.jsxs("div",{className:"glass-panel flex-1 overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-[var(--border-primary)]",children:a.jsxs("div",{className:"text-sm text-[var(--text-secondary)]",children:[" ",a.jsx("span",{className:"font-bold text-[var(--accent-blue)]",children:c.length})," "]})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:u?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx(it,{className:"animate-spin text-[var(--accent-blue)]",size:32})}):c.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[var(--text-tertiary)]",children:[a.jsx(In,{size:48,className:"mb-2"}),a.jsx("p",{children:""})]}):a.jsx("div",{className:"divide-y divide-[var(--border-primary)]",children:c.map((L,C)=>a.jsxs("div",{className:"p-4 hover:bg-[var(--bg-secondary)] transition-colors cursor-pointer",onClick:()=>p(h===C?null:C),children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold border ${w(L.actionType)}`,children:N(L.actionType)}),a.jsx("span",{className:"text-sm font-bold text-[var(--text-primary)]",children:L.username}),a.jsx("span",{className:"text-xs text-[var(--text-secondary)]",children:y(L.timestamp)})]}),a.jsxs("div",{className:"text-sm text-[var(--text-secondary)]",children:[": ",a.jsx("span",{className:"font-medium text-[var(--text-primary)]",children:A(L.page)})]})]}),a.jsx("button",{className:"text-[var(--text-tertiary)] hover:text-[var(--text-secondary)]",children:a.jsx(Cv,{size:16})})]}),h===C&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-[var(--border-primary)] space-y-2 text-xs",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)]",children:":"}),a.jsx("span",{className:"ml-2 font-medium text-[var(--text-secondary)]",children:L.screenResolution||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)]",children:"IP :"}),a.jsx("span",{className:"ml-2 font-medium text-[var(--text-secondary)]",children:L.ipAddress||"-"})]})]}),L.details&&a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)]",children:":"}),a.jsx("pre",{className:"mt-1 p-2 bg-[var(--bg-tertiary)] text-[var(--text-secondary)] rounded text-xs overflow-x-auto whitespace-pre-wrap border border-[var(--border-primary)]",children:R(L.details)})]}),L.userAgent&&a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)]",children:"User Agent:"}),a.jsx("div",{className:"mt-1 p-2 bg-[var(--bg-tertiary)] text-[var(--text-secondary)] rounded text-xs break-all border border-[var(--border-primary)]",children:L.userAgent})]})]})]},C))})})]})]})}const wy=E.createContext({theme:"light",actualTheme:"light",setTheme:()=>{},autoSchedule:{lightStart:"06:00",darkStart:"18:00",enabled:!1},setAutoSchedule:()=>{}}),FS=()=>E.useContext(wy),WS=({children:l})=>{const[r,c]=E.useState(()=>localStorage.getItem("theme")||"light"),[d,u]=E.useState(()=>{const j=localStorage.getItem("themeSchedule");return j?JSON.parse(j):{lightStart:"06:00",darkStart:"18:00",enabled:!1}}),[f,x]=E.useState("light"),b=()=>{if(r==="auto"&&d.enabled){const j=new Date,g=`${String(j.getHours()).padStart(2,"0")}:${String(j.getMinutes()).padStart(2,"0")}`,y=d.lightStart,S=d.darkStart;return g>=y&&g<S?"light":"dark"}return r==="auto"?"light":r},h=j=>{c(j),localStorage.setItem("theme",j)},p=j=>{u(j),localStorage.setItem("themeSchedule",JSON.stringify(j))};return E.useEffect(()=>{const j=b();x(j),document.documentElement.setAttribute("data-theme",j)},[r,d]),E.useEffect(()=>{if(r!=="auto"||!d.enabled)return;const j=setInterval(()=>{const g=b();g!==f&&(x(g),document.documentElement.setAttribute("data-theme",g))},6e4);return()=>clearInterval(j)},[r,d,f]),a.jsx(wy.Provider,{value:{theme:r,actualTheme:f,setTheme:h,autoSchedule:d,setAutoSchedule:p},children:l})};function ew(){const{theme:l,actualTheme:r,setTheme:c,autoSchedule:d,setAutoSchedule:u}=FS(),[f,x]=E.useState(!1),b=[{value:"light",label:"",icon:Np},{value:"dark",label:"",icon:vp},{value:"auto",label:"",icon:Qs}],h=(p,j)=>{u({...d,[p]:j})};return a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 rounded-lg p-1",children:[b.map(({value:p,label:j,icon:g})=>a.jsxs("button",{onClick:()=>c(p),className:`px-3 py-1.5 rounded-md text-xs font-medium transition-all flex items-center gap-1.5 ${l===p?"bg-white dark:bg-slate-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,title:j,children:[a.jsx(g,{size:14}),a.jsx("span",{className:"hidden md:inline",children:j})]},p)),l==="auto"&&a.jsx("button",{onClick:()=>x(!f),className:"p-1.5 rounded-md text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-700 transition-all",title:"",children:a.jsx(xh,{size:14})})]}),f&&l==="auto"&&a.jsxs("div",{className:"absolute top-full right-0 mt-2 w-72 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-xl p-4 z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[a.jsx(Qs,{size:16}),""]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:""}),a.jsx("input",{type:"checkbox",checked:d.enabled,onChange:p=>h("enabled",p.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 block mb-1",children:[a.jsx(Np,{size:12,className:"inline mr-1"}),""]}),a.jsx("input",{type:"time",value:d.lightStart,onChange:p=>h("lightStart",p.target.value),disabled:!d.enabled,className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 disabled:opacity-50 disabled:cursor-not-allowed"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 block mb-1",children:[a.jsx(vp,{size:12,className:"inline mr-1"}),""]}),a.jsx("input",{type:"time",value:d.darkStart,onChange:p=>h("darkStart",p.target.value),disabled:!d.enabled,className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 disabled:opacity-50 disabled:cursor-not-allowed"})]}),a.jsx("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-700",children:a.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[": ",a.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:r==="light"?"":""})]})})]}),a.jsx("button",{onClick:()=>x(!1),className:"mt-3 w-full px-3 py-2 text-xs font-medium text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-all",children:""})]})]})}class tw{constructor(r={}){this.idleTimeout=r.idleTimeout||1800*1e3,this.onLogout=r.onLogout||(()=>{}),this.onIdle=r.onIdle||(()=>{}),this.onOnline=r.onOnline||(()=>{}),this.onOffline=r.onOffline||(()=>{}),this.idleTimer=null,this.lastActivity=Date.now(),this.isOnline=navigator.onLine,this.init()}init(){this.setupActivityListeners(),this.setupNetworkListeners(),this.resetIdleTimer()}setupActivityListeners(){["mousedown","mousemove","keypress","scroll","touchstart","click"].forEach(c=>{document.addEventListener(c,()=>this.handleActivity(),!0)})}handleActivity(){this.lastActivity=Date.now(),this.resetIdleTimer()}resetIdleTimer(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=setTimeout(()=>{this.handleIdle()},this.idleTimeout)}handleIdle(){console.log("",this.idleTimeout/1e3/60,""),this.onIdle(),this.logout("IDLE_TIMEOUT")}setupNetworkListeners(){window.addEventListener("online",()=>{console.log(""),this.isOnline=!0,this.onOnline()}),window.addEventListener("offline",()=>{console.log(""),this.isOnline=!1,this.onOffline()})}setupBeforeUnloadListener(){window.addEventListener("beforeunload",r=>{})}logout(r="MANUAL"){console.log(":",r),this.cleanup(),this.onLogout(r)}cleanup(){this.idleTimer&&clearTimeout(this.idleTimer)}destroy(){this.cleanup()}checkOnlineStatus(){return this.isOnline}getIdleTime(){return Date.now()-this.lastActivity}keepAlive(){this.handleActivity()}}const aw=({user:l,apiUrl:r,enabled:c=!0})=>{const d=E.useRef([]),u=E.useRef(null),f=async(h,p={})=>{if(!c||!l?.token)return;let j=h,g=p;if(typeof h=="object"&&h!==null&&(j=h.actionType,g={...h},typeof g.details=="string"))try{const S=JSON.parse(g.details);Object.assign(g,S),delete g.details}catch{}const y={username:l.username,actionType:j||"UNKNOWN",page:g.page||window.location.pathname,details:JSON.stringify(g),timestamp:new Date().toISOString(),userAgent:navigator.userAgent,screenResolution:`${window.screen.width}x${window.screen.height}`};d.current.push(y),d.current.length>=10?b():x()},x=()=>{u.current||(u.current=setTimeout(()=>{b()},5e3))},b=async()=>{if(d.current.length===0)return;const h=[...d.current];d.current=[],u.current&&(clearTimeout(u.current),u.current=null);try{await ke(r,"logActivity",{logs:h},l.token)}catch(p){console.error("Failed to log activity:",p),d.current=[...h,...d.current]}};return E.useEffect(()=>{const h=()=>{if(d.current.length>0){const p=JSON.stringify({action:"logActivity",payload:{logs:d.current},token:l?.token});navigator.sendBeacon(r,p)}};return window.addEventListener("beforeunload",h),()=>{window.removeEventListener("beforeunload",h),b()}},[l?.token,r]),{logActivity:f,flushLogs:b,logLogin:()=>f("LOGIN",{timestamp:new Date().toISOString()}),logLogout:h=>f("LOGOUT",{reason:h}),logPageView:h=>f("PAGE_VIEW",{page:h}),logDataEdit:(h,p)=>f("DATA_EDIT",{action:h,data:p}),logError:h=>f("ERROR",{error:h.message,stack:h.stack})}},nt="https://script.google.com/macros/s/AKfycbzIoBBRytN2Qja-AUSILlXwdAnbwnU6nfil9403HYHXJH_KrvDy3lC9rQ_U8dlP9AIt/exec";console.log("---  ---");console.log("Base URL:","/inventory-system/");nt.includes("YOUR_SCRIPT_ID")?(console.error("  VITE_GAS_API_URL "),console.log(" GitHub Settings -> Secrets ")):console.log(" API URL :",nt);console.log("------------------");const $n=({label:l,icon:r,active:c,children:d,id:u,openDropdown:f,setOpenDropdown:x})=>{const b=f===u;return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:h=>{h.stopPropagation(),x(b?null:u)},className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-all duration-200 ${c?"bg-blue-50 text-blue-600 border border-blue-200 shadow-sm":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)] hover:text-[var(--text-primary)]"}`,children:[a.jsx(r,{size:18}),a.jsx("span",{className:"font-medium",children:l}),a.jsx(Vn,{size:14,className:`transition-transform duration-300 ${b?"rotate-180":""}`})]}),b&&a.jsx("div",{className:"absolute top-full left-0 mt-2 w-48 bg-[var(--bg-secondary)] backdrop-blur-xl border border-[var(--border-primary)] rounded-xl shadow-2xl py-2 z-[100] animate-in fade-in slide-in-from-top-2 duration-200",onClick:h=>h.stopPropagation(),children:a.jsx("div",{className:"flex flex-col gap-1 px-1",children:d})})]})},Re=({label:l,onClick:r,active:c,icon:d})=>a.jsxs("button",{onClick:r,className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-all flex items-center gap-2 ${c?"text-blue-600 bg-blue-50 font-bold":"text-slate-500 hover:text-slate-900 hover:bg-slate-100"}`,children:[d&&a.jsx(d,{size:14}),l]}),qn=({label:l,icon:r,children:c})=>{const[d,u]=E.useState(!1);return a.jsxs("div",{className:"border-b border-slate-100 last:border-0 border-l-4 border-l-transparent hover:border-l-blue-200 transition-all",children:[a.jsxs("button",{onClick:f=>{f.stopPropagation(),u(!d)},className:"w-full flex items-center justify-between p-3 text-slate-700 font-medium active:bg-slate-50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[r&&a.jsx(r,{size:18,className:"text-slate-400"}),a.jsx("span",{children:l})]}),a.jsx(Vn,{size:16,className:`text-slate-400 transition-transform duration-300 ${d?"rotate-180":""}`})]}),a.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${d?"grid-rows-[1fr] opacity-100 pb-2":"grid-rows-[0fr] opacity-0"}`,children:a.jsx("div",{className:"overflow-hidden bg-slate-50/50 rounded-lg mx-2 border border-slate-100/50",children:c})})]})};function nw(){const[l,r]=E.useState(null),[c,d]=E.useState("sales"),[u,f]=E.useState(null),[x,b]=E.useState(!1),[h,p]=E.useState(!1),[j,g]=E.useState(null),{logActivity:y,logLogin:S,logLogout:A,logPageView:R}=aw({user:l,apiUrl:nt,enabled:!!l});E.useEffect(()=>{if(l){const O=new tw({idleTimeout:18e5,onLogout:v=>{console.log("Session timeout:",v),A(v),M(),v==="IDLE_TIMEOUT"&&alert(",")},onOffline:()=>{p(!0)},onOnline:()=>{p(!1)}});return g(O),()=>O.destroy()}},[l]),E.useEffect(()=>{const O=sessionStorage.getItem("inventory_user");if(O){const B=JSON.parse(O);B&&typeof B.permissions>"u"?(console.warn("Detected stale user data (no permissions). Clearing session."),sessionStorage.removeItem("inventory_user"),r(null)):r(B)}const v=()=>{f(null),b(!1)};return window.addEventListener("click",v),()=>window.removeEventListener("click",v)},[]),E.useEffect(()=>{l&&c&&R(c)},[c,l]);const N=O=>{if(!l)return!1;if(l.role==="BOSS")return!0;let v=l.permissions;if(typeof v>"u"||v===null)v=[];else if(typeof v=="string")try{v=JSON.parse(v)}catch(B){console.error("Failed to parse permissions string:",B),v=[]}switch(Array.isArray(v)||(v=[]),O){case"sales":return v.includes("sales_entry")||v.includes("sales");case"report":return v.includes("sales_report")||v.includes("sales");case"purchase":return v.includes("purchase_entry")||v.includes("purchase");case"purchaseHistory":return v.includes("purchase_history")||v.includes("purchase");case"inventory":return v.includes("inventory_adjust");case"stocktake":return v.includes("inventory_stocktake");case"valuation":return v.includes("inventory_valuation");case"adjustHistory":return v.includes("inventory_adjust_history")||v.includes("inventory_history");case"stocktakeHistory":return v.includes("inventory_stocktake_history")||v.includes("inventory_history");case"expenditureManagement":return v.includes("finance_expenditure")||v.includes("finance");case"receivable":return v.includes("finance_receivable")||v.includes("finance");case"payable":return v.includes("finance_payable")||v.includes("finance");case"incomeStatement":return v.includes("finance_income")||v.includes("finance");case"costCalculation":return v.includes("finance_cost")||v.includes("finance");case"payroll":return v.includes("finance_payroll")||v.includes("finance");case"salesRanking":return v.includes("analytics_sales")||v.includes("analytics");case"customerRanking":return v.includes("analytics_customer")||v.includes("analytics");case"profitAnalysis":return v.includes("analytics_profit")||v.includes("analytics");case"turnoverRate":return v.includes("analytics_turnover")||v.includes("analytics");case"permissionControl":return v.includes("system_config")||v.includes("system");case"activityLog":return v.includes("system_activity_logs")||v.includes("system")||l.role==="BOSS"||l.role==="ADMIN";default:return!0}},w=O=>{N(O)?(d(O),f(null),b(!1)):console.warn(`Access denied for page: ${O}`)},L=O=>{r(O),sessionStorage.setItem("inventory_user",JSON.stringify(O))},C=Qe.useRef(l);E.useEffect(()=>{!C.current&&l&&setTimeout(()=>{S&&S()},500),C.current=l},[l,S]);const M=()=>{A&&A("MANUAL"),r(null),sessionStorage.removeItem("inventory_user"),j&&j.destroy()};return nt.includes("YOUR_SCRIPT_ID")?a.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-red-50 text-red-900",children:[a.jsx(ja,{size:64,className:"mb-4 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold mb-2",children:""}),a.jsx("p",{className:"text-center max-w-md mb-6",children:" `VITE_GAS_API_URL`  GitHub Secrets  Actions "}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-red-200 font-mono text-xs w-full max-w-lg",children:[a.jsx("p",{className:"font-bold mb-2",children:""}),a.jsxs("p",{children:["GAS_API_URL: ",String(nt)]}),a.jsxs("p",{children:["Base URL: ","/inventory-system/"]})]})]}):l?a.jsxs("div",{className:"min-h-screen flex flex-col",children:[h&&a.jsxs("div",{className:"bg-yellow-500 text-white text-center py-2 text-sm font-medium flex items-center justify-center gap-2",children:[a.jsx(u0,{size:16}),","]}),a.jsxs("header",{className:"h-16 border-b border-[var(--border-primary)] bg-[var(--bg-secondary)] backdrop-blur-md flex justify-between items-center px-6 sticky top-0 z-[60]",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("img",{src:"/inventory-system/logo.png",alt:"Logo",className:"h-10 w-auto object-contain"})}),a.jsxs("div",{className:"md:hidden relative",onClick:O=>O.stopPropagation(),children:[a.jsxs("button",{onClick:()=>b(!x),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-all ${x?"bg-blue-50 border-blue-200 text-blue-600 ring-2 ring-blue-100":"bg-[var(--bg-secondary)] border-[var(--border-primary)] text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:[a.jsx("span",{className:"font-bold text-sm",children:""}),a.jsx(Vn,{size:16,className:`transition-transform duration-300 ${x?"rotate-180":""}`})]}),x&&a.jsx("div",{className:"fixed top-16 left-0 right-0 mx-auto mt-2 w-[90%] max-w-md bg-[var(--bg-secondary)] backdrop-blur-xl border border-[var(--border-primary)] rounded-2xl shadow-2xl overflow-y-auto max-h-[80vh] animate-in fade-in slide-in-from-top-4 duration-200 z-[100]",children:a.jsxs("div",{className:"p-2 flex flex-col",children:[(l.role==="BOSS"||N("sales")||N("report"))&&a.jsxs(qn,{label:"",icon:Si,children:[N("sales")&&a.jsx(Re,{label:"",icon:Si,onClick:()=>w("sales"),active:c==="sales"}),N("report")&&a.jsx(Re,{label:"",icon:Gs,onClick:()=>w("report"),active:c==="report"})]}),(l.role==="BOSS"||N("purchase")||N("purchaseHistory"))&&a.jsxs(qn,{label:"",icon:ji,children:[N("purchase")&&a.jsx(Re,{label:"",icon:ji,onClick:()=>w("purchase"),active:c==="purchase"}),N("purchaseHistory")&&a.jsx(Re,{label:"",icon:Ol,onClick:()=>w("purchaseHistory"),active:c==="purchaseHistory"})]}),(l.role==="BOSS"||N("inventory")||N("stocktake")||N("valuation")||N("adjustHistory")||N("stocktakeHistory"))&&a.jsxs(qn,{label:"",icon:Ni,children:[N("inventory")&&a.jsx(Re,{label:"",icon:Ni,onClick:()=>w("inventory"),active:c==="inventory"}),N("stocktake")&&a.jsx(Re,{label:"",icon:Zs,onClick:()=>w("stocktake"),active:c==="stocktake"}),N("valuation")&&a.jsx(Re,{label:"",icon:bt,onClick:()=>w("valuation"),active:c==="valuation"}),N("adjustHistory")&&a.jsx(Re,{label:"",icon:Gs,onClick:()=>w("adjustHistory"),active:c==="adjustHistory"}),N("stocktakeHistory")&&a.jsx(Re,{label:"",icon:Ol,onClick:()=>w("stocktakeHistory"),active:c==="stocktakeHistory"})]}),(l.role==="BOSS"||N("expenditureManagement"))&&a.jsx(qn,{label:"",icon:bt,children:a.jsx(Re,{label:"",icon:bt,onClick:()=>w("expenditureManagement"),active:c==="expenditureManagement"})}),(l.role==="BOSS"||N("receivable")||N("payable")||N("incomeStatement")||N("costCalculation")||N("payroll"))&&a.jsxs(qn,{label:"",icon:mn,children:[N("receivable")&&a.jsx(Re,{label:"",icon:mn,onClick:()=>w("receivable"),active:c==="receivable"}),N("payable")&&a.jsx(Re,{label:"",icon:mn,onClick:()=>w("payable"),active:c==="payable"}),N("incomeStatement")&&a.jsx(Re,{label:"",icon:Td,onClick:()=>w("incomeStatement"),active:c==="incomeStatement"}),N("costCalculation")&&a.jsx(Re,{label:"",icon:bt,onClick:()=>w("costCalculation"),active:c==="costCalculation"}),N("payroll")&&a.jsx(Re,{label:"",icon:bt,onClick:()=>w("payroll"),active:c==="payroll"})]}),(l.role==="BOSS"||N("salesRanking")||N("customerRanking")||N("profitAnalysis")||N("turnoverRate"))&&a.jsxs(qn,{label:"",icon:pn,children:[N("salesRanking")&&a.jsx(Re,{label:"",icon:Ad,onClick:()=>w("salesRanking"),active:c==="salesRanking"}),N("customerRanking")&&a.jsx(Re,{label:"",icon:Mi,onClick:()=>w("customerRanking"),active:c==="customerRanking"}),N("profitAnalysis")&&a.jsx(Re,{label:"",icon:pn,onClick:()=>w("profitAnalysis"),active:c==="profitAnalysis"}),N("turnoverRate")&&a.jsx(Re,{label:"",icon:In,onClick:()=>w("turnoverRate"),active:c==="turnoverRate"})]}),(l.role==="BOSS"||N("permissionControl")||N("activityLog"))&&a.jsxs(qn,{label:"",icon:ja,children:[N("permissionControl")&&a.jsx(Re,{label:"",icon:ja,onClick:()=>w("permissionControl"),active:c==="permissionControl"}),N("activityLog")&&a.jsx(Re,{label:"",icon:In,onClick:()=>w("activityLog"),active:c==="activityLog"})]})]})})]}),a.jsxs("nav",{className:"hidden md:flex gap-1",children:[(l.role==="BOSS"||N("sales")||N("report"))&&a.jsxs($n,{id:"sales",label:"",icon:Si,openDropdown:u,setOpenDropdown:f,active:["sales","report"].includes(c),children:[N("sales")&&a.jsx(Re,{label:"",icon:Si,onClick:()=>w("sales"),active:c==="sales"}),N("report")&&a.jsx(Re,{label:"",icon:Gs,onClick:()=>w("report"),active:c==="report"})]}),(l.role==="BOSS"||N("purchase")||N("purchaseHistory"))&&a.jsxs($n,{id:"purchase",label:"",icon:ji,openDropdown:u,setOpenDropdown:f,active:["purchase","purchaseHistory"].includes(c),children:[N("purchase")&&a.jsx(Re,{label:"",icon:ji,onClick:()=>w("purchase"),active:c==="purchase"}),N("purchaseHistory")&&a.jsx(Re,{label:"",icon:Ol,onClick:()=>w("purchaseHistory"),active:c==="purchaseHistory"})]}),(l.role==="BOSS"||N("inventory")||N("stocktake")||N("valuation")||N("adjustHistory")||N("stocktakeHistory"))&&a.jsxs($n,{id:"inventory",label:"",icon:Ni,openDropdown:u,setOpenDropdown:f,active:["inventory","stocktake","valuation","adjustHistory","stocktakeHistory"].includes(c),children:[N("inventory")&&a.jsx(Re,{label:"",icon:Ni,onClick:()=>w("inventory"),active:c==="inventory"}),N("stocktake")&&a.jsx(Re,{label:"",icon:Zs,onClick:()=>w("stocktake"),active:c==="stocktake"}),N("valuation")&&a.jsx(Re,{label:"",icon:bt,onClick:()=>w("valuation"),active:c==="valuation"}),a.jsx("div",{className:"my-1 border-t border-slate-100"}),N("adjustHistory")&&a.jsx(Re,{label:"",icon:Gs,onClick:()=>w("adjustHistory"),active:c==="adjustHistory"}),N("stocktakeHistory")&&a.jsx(Re,{label:"",icon:Ol,onClick:()=>w("stocktakeHistory"),active:c==="stocktakeHistory"})]}),(l.role==="BOSS"||N("expenditureManagement"))&&a.jsx($n,{id:"expenditure",label:"",icon:bt,openDropdown:u,setOpenDropdown:f,active:c==="expenditureManagement",children:a.jsx(Re,{label:"",icon:bt,onClick:()=>w("expenditureManagement"),active:c==="expenditureManagement"})}),(l.role==="BOSS"||N("receivable")||N("payable")||N("incomeStatement")||N("costCalculation")||N("payroll"))&&a.jsxs($n,{id:"accounting",label:"",icon:mn,openDropdown:u,setOpenDropdown:f,active:["receivable","payable","incomeStatement","costCalculation","payroll"].includes(c),children:[N("receivable")&&a.jsx(Re,{label:"",icon:mn,onClick:()=>w("receivable"),active:c==="receivable"}),N("payable")&&a.jsx(Re,{label:"",icon:mn,onClick:()=>w("payable"),active:c==="payable"}),N("incomeStatement")&&a.jsx(Re,{label:"",icon:Td,onClick:()=>w("incomeStatement"),active:c==="incomeStatement"}),a.jsx("div",{className:"my-1 border-t border-slate-100"}),N("costCalculation")&&a.jsx(Re,{label:"",icon:bt,onClick:()=>w("costCalculation"),active:c==="costCalculation"}),N("payroll")&&a.jsx(Re,{label:"",icon:bt,onClick:()=>w("payroll"),active:c==="payroll"})]}),(l.role==="BOSS"||N("salesRanking")||N("customerRanking")||N("profitAnalysis")||N("turnoverRate"))&&a.jsxs($n,{id:"analytics",label:"",icon:pn,openDropdown:u,setOpenDropdown:f,active:["salesRanking","customerRanking","profitAnalysis","turnoverRate"].includes(c),children:[N("salesRanking")&&a.jsx(Re,{label:"",icon:Ad,onClick:()=>w("salesRanking"),active:c==="salesRanking"}),N("customerRanking")&&a.jsx(Re,{label:"",icon:Mi,onClick:()=>w("customerRanking"),active:c==="customerRanking"}),N("profitAnalysis")&&a.jsx(Re,{label:"",icon:pn,onClick:()=>w("profitAnalysis"),active:c==="profitAnalysis"}),N("turnoverRate")&&a.jsx(Re,{label:"",icon:In,onClick:()=>w("turnoverRate"),active:c==="turnoverRate"})]}),(l.role==="BOSS"||N("permissionControl")||N("activityLog"))&&a.jsxs($n,{id:"system",label:"",icon:ja,openDropdown:u,setOpenDropdown:f,active:["permissionControl","activityLog"].includes(c),children:[N("permissionControl")&&a.jsx(Re,{label:"",icon:ja,onClick:()=>w("permissionControl"),active:c==="permissionControl"}),N("activityLog")&&a.jsx(Re,{label:"",icon:In,onClick:()=>w("activityLog"),active:c==="activityLog"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ew,{}),a.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[a.jsx("span",{className:"text-xs font-bold text-blue-600 dark:text-blue-400 leading-none",children:l.username}),a.jsx("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase font-bold tracking-tighter",children:l.role})]}),a.jsx("button",{onClick:M,className:"w-10 h-10 rounded-xl flex items-center justify-center text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all border border-transparent hover:border-red-100 dark:hover:border-red-800",title:"",children:a.jsx(Bv,{size:20})})]})]}),a.jsx("main",{className:"flex-1 p-4 md:p-6 overflow-hidden",children:N(c)?a.jsxs(a.Fragment,{children:[c==="sales"&&a.jsx(kS,{user:l,apiUrl:nt,logActivity:y}),c==="inventory"&&a.jsx(OS,{user:l,apiUrl:nt,logActivity:y}),c==="purchase"&&a.jsx(_S,{user:l,apiUrl:nt,logActivity:y}),c==="report"&&a.jsx(RS,{user:l,apiUrl:nt,logActivity:y,setPage:d}),c==="purchaseHistory"&&a.jsx(zS,{user:l,apiUrl:nt,logActivity:y}),c==="adjustHistory"&&a.jsx(LS,{user:l,apiUrl:nt,logActivity:y}),c==="valuation"&&a.jsx(BS,{user:l,apiUrl:nt,logActivity:y}),c==="stocktake"&&a.jsx(US,{user:l,apiUrl:nt,logActivity:y}),c==="stocktakeHistory"&&a.jsx(HS,{user:l,apiUrl:nt,logActivity:y}),c==="receivable"&&a.jsx($S,{user:l,apiUrl:nt,logActivity:y}),c==="payable"&&a.jsx(qS,{user:l,apiUrl:nt,logActivity:y}),c==="salesRanking"&&a.jsx(GS,{user:l,apiUrl:nt,logActivity:y}),c==="customerRanking"&&a.jsx(IS,{user:l,apiUrl:nt,logActivity:y}),c==="profitAnalysis"&&a.jsx(VS,{user:l,apiUrl:nt,logActivity:y}),c==="turnoverRate"&&a.jsx(YS,{user:l,apiUrl:nt,logActivity:y}),c==="costCalculation"&&a.jsx(QS,{user:l,apiUrl:nt,logActivity:y}),c==="expenditureManagement"&&a.jsx(XS,{user:l,apiUrl:nt,logActivity:y}),c==="incomeStatement"&&a.jsx(KS,{user:l,apiUrl:nt,logActivity:y}),c==="permissionControl"&&a.jsx(ZS,{user:l,apiUrl:nt,logActivity:y}),c==="payroll"&&a.jsx(PS,{user:l,apiUrl:nt,logActivity:y}),c==="activityLog"&&a.jsx(JS,{user:l,apiUrl:nt})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[a.jsx(ja,{size:64,className:"mb-4 text-slate-200"}),a.jsx("h2",{className:"text-xl font-bold text-slate-800",children:""}),a.jsx("p",{className:"mt-2",children:""}),a.jsx("button",{onClick:()=>d("sales"),className:"mt-6 px-4 py-2 bg-white hover:bg-slate-50 text-blue-600 rounded-lg transition-colors border border-slate-200 shadow-sm",children:""})]})})]}):a.jsx(f0,{onLogin:L,apiUrl:nt})}function lw(){return a.jsx(WS,{children:a.jsx(nw,{})})}Jg.createRoot(document.getElementById("root")).render(a.jsx(E.StrictMode,{children:a.jsx(lw,{})}));

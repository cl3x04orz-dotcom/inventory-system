(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))d(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const x of f.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&d(x)}).observe(document,{childList:!0,subtree:!0});function i(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function d(u){if(u.ep)return;u.ep=!0;const f=i(u);fetch(u.href,f)}})();function fh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xd={exports:{}},Hs={};var op;function Ig(){if(op)return Hs;op=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(d,u,f){var x=null;if(f!==void 0&&(x=""+f),u.key!==void 0&&(x=""+u.key),"key"in u){f={};for(var y in u)y!=="key"&&(f[y]=u[y])}else f=u;return u=f.ref,{$$typeof:n,type:d,key:x,ref:u!==void 0?u:null,props:f}}return Hs.Fragment=r,Hs.jsx=i,Hs.jsxs=i,Hs}var dp;function Vg(){return dp||(dp=1,xd.exports=Ig()),xd.exports}var a=Vg(),md={exports:{}},ke={};var up;function Yg(){if(up)return ke;up=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),x=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),b=Symbol.iterator;function j(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,v={};function w(M,K,ae){this.props=M,this.context=K,this.refs=v,this.updater=ae||k}w.prototype.isReactComponent={},w.prototype.setState=function(M,K){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,K,"setState")},w.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function C(){}C.prototype=w.prototype;function A(M,K,ae){this.props=M,this.context=K,this.refs=v,this.updater=ae||k}var B=A.prototype=new C;B.constructor=A,R(B,w.prototype),B.isPureReactComponent=!0;var T=Array.isArray;function D(){}var U={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function re(M,K,ae){var se=ae.ref;return{$$typeof:n,type:M,key:K,ref:se!==void 0?se:null,props:ae}}function de(M,K){return re(M.type,K,M.props)}function pe(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function W(M){var K={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ae){return K[ae]})}var fe=/\/+/g;function ge(M,K){return typeof M=="object"&&M!==null&&M.key!=null?W(""+M.key):K.toString(36)}function oe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(D,D):(M.status="pending",M.then(function(K){M.status==="pending"&&(M.status="fulfilled",M.value=K)},function(K){M.status==="pending"&&(M.status="rejected",M.reason=K)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function H(M,K,ae,se,Ne){var ye=typeof M;(ye==="undefined"||ye==="boolean")&&(M=null);var J=!1;if(M===null)J=!0;else switch(ye){case"bigint":case"string":case"number":J=!0;break;case"object":switch(M.$$typeof){case n:case r:J=!0;break;case N:return J=M._init,H(J(M._payload),K,ae,se,Ne)}}if(J)return Ne=Ne(M),J=se===""?"."+ge(M,0):se,T(Ne)?(ae="",J!=null&&(ae=J.replace(fe,"$&/")+"/"),H(Ne,K,ae,"",function(Ae){return Ae})):Ne!=null&&(pe(Ne)&&(Ne=de(Ne,ae+(Ne.key==null||M&&M.key===Ne.key?"":(""+Ne.key).replace(fe,"$&/")+"/")+J)),K.push(Ne)),1;J=0;var ie=se===""?".":se+":";if(T(M))for(var me=0;me<M.length;me++)se=M[me],ye=ie+ge(se,me),J+=H(se,K,ae,ye,Ne);else if(me=j(M),typeof me=="function")for(M=me.call(M),me=0;!(se=M.next()).done;)se=se.value,ye=ie+ge(se,me++),J+=H(se,K,ae,ye,Ne);else if(ye==="object"){if(typeof M.then=="function")return H(oe(M),K,ae,se,Ne);throw K=String(M),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return J}function P(M,K,ae){if(M==null)return M;var se=[],Ne=0;return H(M,se,"","",function(ye){return K.call(ae,ye,Ne++)}),se}function O(M){if(M._status===-1){var K=M._result;K=K(),K.then(function(ae){(M._status===0||M._status===-1)&&(M._status=1,M._result=ae)},function(ae){(M._status===0||M._status===-1)&&(M._status=2,M._result=ae)}),M._status===-1&&(M._status=0,M._result=K)}if(M._status===1)return M._result.default;throw M._result}var F=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},ne={map:P,forEach:function(M,K,ae){P(M,function(){K.apply(this,arguments)},ae)},count:function(M){var K=0;return P(M,function(){K++}),K},toArray:function(M){return P(M,function(K){return K})||[]},only:function(M){if(!pe(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return ke.Activity=g,ke.Children=ne,ke.Component=w,ke.Fragment=i,ke.Profiler=u,ke.PureComponent=A,ke.StrictMode=d,ke.Suspense=p,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,ke.__COMPILER_RUNTIME={__proto__:null,c:function(M){return U.H.useMemoCache(M)}},ke.cache=function(M){return function(){return M.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(M,K,ae){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var se=R({},M.props),Ne=M.key;if(K!=null)for(ye in K.key!==void 0&&(Ne=""+K.key),K)!V.call(K,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&K.ref===void 0||(se[ye]=K[ye]);var ye=arguments.length-2;if(ye===1)se.children=ae;else if(1<ye){for(var J=Array(ye),ie=0;ie<ye;ie++)J[ie]=arguments[ie+2];se.children=J}return re(M.type,Ne,se)},ke.createContext=function(M){return M={$$typeof:x,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:f,_context:M},M},ke.createElement=function(M,K,ae){var se,Ne={},ye=null;if(K!=null)for(se in K.key!==void 0&&(ye=""+K.key),K)V.call(K,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(Ne[se]=K[se]);var J=arguments.length-2;if(J===1)Ne.children=ae;else if(1<J){for(var ie=Array(J),me=0;me<J;me++)ie[me]=arguments[me+2];Ne.children=ie}if(M&&M.defaultProps)for(se in J=M.defaultProps,J)Ne[se]===void 0&&(Ne[se]=J[se]);return re(M,ye,Ne)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(M){return{$$typeof:y,render:M}},ke.isValidElement=pe,ke.lazy=function(M){return{$$typeof:N,_payload:{_status:-1,_result:M},_init:O}},ke.memo=function(M,K){return{$$typeof:h,type:M,compare:K===void 0?null:K}},ke.startTransition=function(M){var K=U.T,ae={};U.T=ae;try{var se=M(),Ne=U.S;Ne!==null&&Ne(ae,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(D,F)}catch(ye){F(ye)}finally{K!==null&&ae.types!==null&&(K.types=ae.types),U.T=K}},ke.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},ke.use=function(M){return U.H.use(M)},ke.useActionState=function(M,K,ae){return U.H.useActionState(M,K,ae)},ke.useCallback=function(M,K){return U.H.useCallback(M,K)},ke.useContext=function(M){return U.H.useContext(M)},ke.useDebugValue=function(){},ke.useDeferredValue=function(M,K){return U.H.useDeferredValue(M,K)},ke.useEffect=function(M,K){return U.H.useEffect(M,K)},ke.useEffectEvent=function(M){return U.H.useEffectEvent(M)},ke.useId=function(){return U.H.useId()},ke.useImperativeHandle=function(M,K,ae){return U.H.useImperativeHandle(M,K,ae)},ke.useInsertionEffect=function(M,K){return U.H.useInsertionEffect(M,K)},ke.useLayoutEffect=function(M,K){return U.H.useLayoutEffect(M,K)},ke.useMemo=function(M,K){return U.H.useMemo(M,K)},ke.useOptimistic=function(M,K){return U.H.useOptimistic(M,K)},ke.useReducer=function(M,K,ae){return U.H.useReducer(M,K,ae)},ke.useRef=function(M){return U.H.useRef(M)},ke.useState=function(M){return U.H.useState(M)},ke.useSyncExternalStore=function(M,K,ae){return U.H.useSyncExternalStore(M,K,ae)},ke.useTransition=function(){return U.H.useTransition()},ke.version="19.2.3",ke}var fp;function Yi(){return fp||(fp=1,md.exports=Yg()),md.exports}var E=Yi();const Je=fh(E);var pd={exports:{}},Gs={},hd={exports:{}},bd={};var xp;function Qg(){return xp||(xp=1,(function(n){function r(H,P){var O=H.length;H.push(P);e:for(;0<O;){var F=O-1>>>1,ne=H[F];if(0<u(ne,P))H[F]=P,H[O]=ne,O=F;else break e}}function i(H){return H.length===0?null:H[0]}function d(H){if(H.length===0)return null;var P=H[0],O=H.pop();if(O!==P){H[0]=O;e:for(var F=0,ne=H.length,M=ne>>>1;F<M;){var K=2*(F+1)-1,ae=H[K],se=K+1,Ne=H[se];if(0>u(ae,O))se<ne&&0>u(Ne,ae)?(H[F]=Ne,H[se]=O,F=se):(H[F]=ae,H[K]=O,F=K);else if(se<ne&&0>u(Ne,O))H[F]=Ne,H[se]=O,F=se;else break e}}return P}function u(H,P){var O=H.sortIndex-P.sortIndex;return O!==0?O:H.id-P.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var x=Date,y=x.now();n.unstable_now=function(){return x.now()-y}}var p=[],h=[],N=1,g=null,b=3,j=!1,k=!1,R=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function B(H){for(var P=i(h);P!==null;){if(P.callback===null)d(h);else if(P.startTime<=H)d(h),P.sortIndex=P.expirationTime,r(p,P);else break;P=i(h)}}function T(H){if(R=!1,B(H),!k)if(i(p)!==null)k=!0,D||(D=!0,W());else{var P=i(h);P!==null&&oe(T,P.startTime-H)}}var D=!1,U=-1,V=5,re=-1;function de(){return v?!0:!(n.unstable_now()-re<V)}function pe(){if(v=!1,D){var H=n.unstable_now();re=H;var P=!0;try{e:{k=!1,R&&(R=!1,C(U),U=-1),j=!0;var O=b;try{t:{for(B(H),g=i(p);g!==null&&!(g.expirationTime>H&&de());){var F=g.callback;if(typeof F=="function"){g.callback=null,b=g.priorityLevel;var ne=F(g.expirationTime<=H);if(H=n.unstable_now(),typeof ne=="function"){g.callback=ne,B(H),P=!0;break t}g===i(p)&&d(p),B(H)}else d(p);g=i(p)}if(g!==null)P=!0;else{var M=i(h);M!==null&&oe(T,M.startTime-H),P=!1}}break e}finally{g=null,b=O,j=!1}P=void 0}}finally{P?W():D=!1}}}var W;if(typeof A=="function")W=function(){A(pe)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,ge=fe.port2;fe.port1.onmessage=pe,W=function(){ge.postMessage(null)}}else W=function(){w(pe,0)};function oe(H,P){U=w(function(){H(n.unstable_now())},P)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(H){switch(b){case 1:case 2:case 3:var P=3;break;default:P=b}var O=b;b=P;try{return H()}finally{b=O}},n.unstable_requestPaint=function(){v=!0},n.unstable_runWithPriority=function(H,P){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var O=b;b=H;try{return P()}finally{b=O}},n.unstable_scheduleCallback=function(H,P,O){var F=n.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?F+O:F):O=F,H){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=O+ne,H={id:N++,callback:P,priorityLevel:H,startTime:O,expirationTime:ne,sortIndex:-1},O>F?(H.sortIndex=O,r(h,H),i(p)===null&&H===i(h)&&(R?(C(U),U=-1):R=!0,oe(T,O-F))):(H.sortIndex=ne,r(p,H),k||j||(k=!0,D||(D=!0,W()))),H},n.unstable_shouldYield=de,n.unstable_wrapCallback=function(H){var P=b;return function(){var O=b;b=P;try{return H.apply(this,arguments)}finally{b=O}}}})(bd)),bd}var mp;function Kg(){return mp||(mp=1,hd.exports=Qg()),hd.exports}var yd={exports:{}},Ut={};var pp;function Xg(){if(pp)return Ut;pp=1;var n=Yi();function r(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)h+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var d={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},u=Symbol.for("react.portal");function f(p,h,N){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:g==null?null:""+g,children:p,containerInfo:h,implementation:N}}var x=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ut.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,Ut.createPortal=function(p,h){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(r(299));return f(p,h,null,N)},Ut.flushSync=function(p){var h=x.T,N=d.p;try{if(x.T=null,d.p=2,p)return p()}finally{x.T=h,d.p=N,d.d.f()}},Ut.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,d.d.C(p,h))},Ut.prefetchDNS=function(p){typeof p=="string"&&d.d.D(p)},Ut.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var N=h.as,g=y(N,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,j=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;N==="style"?d.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:b,fetchPriority:j}):N==="script"&&d.d.X(p,{crossOrigin:g,integrity:b,fetchPriority:j,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ut.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var N=y(h.as,h.crossOrigin);d.d.M(p,{crossOrigin:N,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&d.d.M(p)},Ut.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var N=h.as,g=y(N,h.crossOrigin);d.d.L(p,N,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ut.preloadModule=function(p,h){if(typeof p=="string")if(h){var N=y(h.as,h.crossOrigin);d.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:N,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else d.d.m(p)},Ut.requestFormReset=function(p){d.d.r(p)},Ut.unstable_batchedUpdates=function(p,h){return p(h)},Ut.useFormState=function(p,h,N){return x.H.useFormState(p,h,N)},Ut.useFormStatus=function(){return x.H.useHostTransitionStatus()},Ut.version="19.2.3",Ut}var hp;function xh(){if(hp)return yd.exports;hp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),yd.exports=Xg(),yd.exports}var bp;function Zg(){if(bp)return Gs;bp=1;var n=Kg(),r=Yi(),i=xh();function d(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)t+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,l=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(l=t.return),e=t.return;while(e)}return t.tag===3?l:null}function x(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(d(188))}function h(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(d(188));return t!==e?null:e}for(var l=e,s=t;;){var c=l.return;if(c===null)break;var o=c.alternate;if(o===null){if(s=c.return,s!==null){l=s;continue}break}if(c.child===o.child){for(o=c.child;o;){if(o===l)return p(c),e;if(o===s)return p(c),t;o=o.sibling}throw Error(d(188))}if(l.return!==s.return)l=c,s=o;else{for(var m=!1,S=c.child;S;){if(S===l){m=!0,l=c,s=o;break}if(S===s){m=!0,s=c,l=o;break}S=S.sibling}if(!m){for(S=o.child;S;){if(S===l){m=!0,l=o,s=c;break}if(S===s){m=!0,s=o,l=c;break}S=S.sibling}if(!m)throw Error(d(189))}}if(l.alternate!==s)throw Error(d(190))}if(l.tag!==3)throw Error(d(188));return l.stateNode.current===l?e:t}function N(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=N(e),t!==null)return t;e=e.sibling}return null}var g=Object.assign,b=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),A=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),pe=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=pe&&e[pe]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Symbol.for("react.client.reference");function ge(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===fe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case w:return"Profiler";case v:return"StrictMode";case T:return"Suspense";case D:return"SuspenseList";case re:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case A:return e.displayName||"Context";case C:return(e._context.displayName||"Context")+".Consumer";case B:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case U:return t=e.displayName||null,t!==null?t:ge(e.type)||"Memo";case V:t=e._payload,e=e._init;try{return ge(e(t))}catch{}}return null}var oe=Array.isArray,H=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},F=[],ne=-1;function M(e){return{current:e}}function K(e){0>ne||(e.current=F[ne],F[ne]=null,ne--)}function ae(e,t){ne++,F[ne]=e.current,e.current=t}var se=M(null),Ne=M(null),ye=M(null),J=M(null);function ie(e,t){switch(ae(ye,t),ae(Ne,e),ae(se,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Mm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Mm(t),e=Rm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}K(se),ae(se,e)}function me(){K(se),K(Ne),K(ye)}function Ae(e){e.memoizedState!==null&&ae(J,e);var t=se.current,l=Rm(t,e.type);t!==l&&(ae(Ne,e),ae(se,l))}function xe(e){Ne.current===e&&(K(se),K(Ne)),J.current===e&&(K(J),Ls._currentValue=O)}var Be,Ge;function ze(e){if(Be===void 0)try{throw Error()}catch(l){var t=l.stack.trim().match(/\n( *(at )?)/);Be=t&&t[1]||"",Ge=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Be+e+Ge}var it=!1;function G(e,t){if(!e||it)return"";it=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(X){var Q=X}Reflect.construct(e,[],le)}else{try{le.call()}catch(X){Q=X}e.call(le.prototype)}}else{try{throw Error()}catch(X){Q=X}(le=e())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(X){if(X&&Q&&typeof X.stack=="string")return[X.stack,Q.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=s.DetermineComponentFrameRoot(),m=o[0],S=o[1];if(m&&S){var _=m.split(`
`),Y=S.split(`
`);for(c=s=0;s<_.length&&!_[s].includes("DetermineComponentFrameRoot");)s++;for(;c<Y.length&&!Y[c].includes("DetermineComponentFrameRoot");)c++;if(s===_.length||c===Y.length)for(s=_.length-1,c=Y.length-1;1<=s&&0<=c&&_[s]!==Y[c];)c--;for(;1<=s&&0<=c;s--,c--)if(_[s]!==Y[c]){if(s!==1||c!==1)do if(s--,c--,0>c||_[s]!==Y[c]){var Z=`
`+_[s].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=s&&0<=c);break}}}finally{it=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?ze(l):""}function Se(e,t){switch(e.tag){case 26:case 27:case 5:return ze(e.type);case 16:return ze("Lazy");case 13:return e.child!==t&&t!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return G(e.type,!1);case 11:return G(e.type.render,!1);case 1:return G(e.type,!0);case 31:return ze("Activity");default:return""}}function _e(e){try{var t="",l=null;do t+=Se(e,l),l=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Te=Object.prototype.hasOwnProperty,ut=n.unstable_scheduleCallback,Pe=n.unstable_cancelCallback,q=n.unstable_shouldYield,z=n.unstable_requestPaint,ee=n.unstable_now,he=n.unstable_getCurrentPriorityLevel,Le=n.unstable_ImmediatePriority,ue=n.unstable_UserBlockingPriority,Xe=n.unstable_NormalPriority,Ue=n.unstable_LowPriority,xt=n.unstable_IdlePriority,St=n.log,Da=n.unstable_setDisableYieldValue,yt=null,Pt=null;function Fa(e){if(typeof St=="function"&&Da(e),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(yt,e)}catch{}}var Jt=Math.clz32?Math.clz32:Tb,Ab=Math.log,Eb=Math.LN2;function Tb(e){return e>>>=0,e===0?32:31-(Ab(e)/Eb|0)|0}var cr=256,or=262144,dr=4194304;function El(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ur(e,t,l){var s=e.pendingLanes;if(s===0)return 0;var c=0,o=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var S=s&134217727;return S!==0?(s=S&~o,s!==0?c=El(s):(m&=S,m!==0?c=El(m):l||(l=S&~e,l!==0&&(c=El(l))))):(S=s&~o,S!==0?c=El(S):m!==0?c=El(m):l||(l=s&~e,l!==0&&(c=El(l)))),c===0?0:t!==0&&t!==c&&(t&o)===0&&(o=c&-c,l=t&-t,o>=l||o===32&&(l&4194048)!==0)?t:c}function Zn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function kb(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fu(){var e=dr;return dr<<=1,(dr&62914560)===0&&(dr=4194304),e}function ec(e){for(var t=[],l=0;31>l;l++)t.push(e);return t}function Pn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ob(e,t,l,s,c,o){var m=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var S=e.entanglements,_=e.expirationTimes,Y=e.hiddenUpdates;for(l=m&~l;0<l;){var Z=31-Jt(l),le=1<<Z;S[Z]=0,_[Z]=-1;var Q=Y[Z];if(Q!==null)for(Y[Z]=null,Z=0;Z<Q.length;Z++){var X=Q[Z];X!==null&&(X.lane&=-536870913)}l&=~le}s!==0&&xu(e,s,0),o!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=o&~(m&~t))}function xu(e,t,l){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Jt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|l&261930}function mu(e,t){var l=e.entangledLanes|=t;for(e=e.entanglements;l;){var s=31-Jt(l),c=1<<s;c&t|e[s]&t&&(e[s]|=t),l&=~c}}function pu(e,t){var l=t&-t;return l=(l&42)!==0?1:tc(l),(l&(e.suspendedLanes|t))!==0?0:l}function tc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ac(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function hu(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:ap(e.type))}function bu(e,t){var l=P.p;try{return P.p=e,t()}finally{P.p=l}}var Wa=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Wa,It="__reactProps$"+Wa,tn="__reactContainer$"+Wa,lc="__reactEvents$"+Wa,Mb="__reactListeners$"+Wa,Rb="__reactHandles$"+Wa,yu="__reactResources$"+Wa,Jn="__reactMarker$"+Wa;function nc(e){delete e[Ot],delete e[It],delete e[lc],delete e[Mb],delete e[Rb]}function an(e){var t=e[Ot];if(t)return t;for(var l=e.parentNode;l;){if(t=l[tn]||l[Ot]){if(l=t.alternate,t.child!==null||l!==null&&l.child!==null)for(e=Hm(e);e!==null;){if(l=e[Ot])return l;e=Hm(e)}return t}e=l,l=e.parentNode}return null}function ln(e){if(e=e[Ot]||e[tn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Fn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(d(33))}function nn(e){var t=e[yu];return t||(t=e[yu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ct(e){e[Jn]=!0}var gu=new Set,vu={};function Tl(e,t){sn(e,t),sn(e+"Capture",t)}function sn(e,t){for(vu[e]=t,e=0;e<t.length;e++)gu.add(t[e])}var _b=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nu={},ju={};function zb(e){return Te.call(ju,e)?!0:Te.call(Nu,e)?!1:_b.test(e)?ju[e]=!0:(Nu[e]=!0,!1)}function fr(e,t,l){if(zb(t))if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+l)}}function xr(e,t,l){if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+l)}}function _a(e,t,l,s){if(s===null)e.removeAttribute(l);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(t,l,""+s)}}function ca(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Su(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Lb(e,t,l){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,o=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){l=""+m,o.call(this,m)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(m){l=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sc(e){if(!e._valueTracker){var t=Su(e)?"checked":"value";e._valueTracker=Lb(e,t,""+e[t])}}function wu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var l=t.getValue(),s="";return e&&(s=Su(e)?e.checked?"true":"false":e.value),e=s,e!==l?(t.setValue(e),!0):!1}function mr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Bb=/[\n"\\]/g;function oa(e){return e.replace(Bb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function rc(e,t,l,s,c,o,m,S){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ca(t)):e.value!==""+ca(t)&&(e.value=""+ca(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?ic(e,m,ca(t)):l!=null?ic(e,m,ca(l)):s!=null&&e.removeAttribute("value"),c==null&&o!=null&&(e.defaultChecked=!!o),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+ca(S):e.removeAttribute("name")}function Du(e,t,l,s,c,o,m,S){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||l!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){sc(e);return}l=l!=null?""+ca(l):"",t=t!=null?""+ca(t):l,S||t===e.value||(e.value=t),e.defaultValue=t}s=s??c,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=S?e.checked:!!s,e.defaultChecked=!!s,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),sc(e)}function ic(e,t,l){t==="number"&&mr(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function rn(e,t,l,s){if(e=e.options,t){t={};for(var c=0;c<l.length;c++)t["$"+l[c]]=!0;for(l=0;l<e.length;l++)c=t.hasOwnProperty("$"+e[l].value),e[l].selected!==c&&(e[l].selected=c),c&&s&&(e[l].defaultSelected=!0)}else{for(l=""+ca(l),t=null,c=0;c<e.length;c++){if(e[c].value===l){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Cu(e,t,l){if(t!=null&&(t=""+ca(t),t!==e.value&&(e.value=t),l==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=l!=null?""+ca(l):""}function Au(e,t,l,s){if(t==null){if(s!=null){if(l!=null)throw Error(d(92));if(oe(s)){if(1<s.length)throw Error(d(93));s=s[0]}l=s}l==null&&(l=""),t=l}l=ca(t),e.defaultValue=l,s=e.textContent,s===l&&s!==""&&s!==null&&(e.value=s),sc(e)}function cn(e,t){if(t){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=t;return}}e.textContent=t}var Ub=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Eu(e,t,l){var s=t.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,l):typeof l!="number"||l===0||Ub.has(t)?t==="float"?e.cssFloat=l:e[t]=(""+l).trim():e[t]=l+"px"}function Tu(e,t,l){if(t!=null&&typeof t!="object")throw Error(d(62));if(e=e.style,l!=null){for(var s in l)!l.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var c in t)s=t[c],t.hasOwnProperty(c)&&l[c]!==s&&Eu(e,c,s)}else for(var o in t)t.hasOwnProperty(o)&&Eu(e,o,t[o])}function cc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $b=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pr(e){return Hb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function za(){}var oc=null;function dc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var on=null,dn=null;function ku(e){var t=ln(e);if(t&&(e=t.stateNode)){var l=e[It]||null;e:switch(e=t.stateNode,t.type){case"input":if(rc(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),t=l.name,l.type==="radio"&&t!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+oa(""+t)+'"][type="radio"]'),t=0;t<l.length;t++){var s=l[t];if(s!==e&&s.form===e.form){var c=s[It]||null;if(!c)throw Error(d(90));rc(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<l.length;t++)s=l[t],s.form===e.form&&wu(s)}break e;case"textarea":Cu(e,l.value,l.defaultValue);break e;case"select":t=l.value,t!=null&&rn(e,!!l.multiple,t,!1)}}}var uc=!1;function Ou(e,t,l){if(uc)return e(t,l);uc=!0;try{var s=e(t);return s}finally{if(uc=!1,(on!==null||dn!==null)&&(ai(),on&&(t=on,e=dn,dn=on=null,ku(t),e)))for(t=0;t<e.length;t++)ku(e[t])}}function Wn(e,t){var l=e.stateNode;if(l===null)return null;var s=l[It]||null;if(s===null)return null;l=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(d(231,t,typeof l));return l}var La=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fc=!1;if(La)try{var es={};Object.defineProperty(es,"passive",{get:function(){fc=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{fc=!1}var el=null,xc=null,hr=null;function Mu(){if(hr)return hr;var e,t=xc,l=t.length,s,c="value"in el?el.value:el.textContent,o=c.length;for(e=0;e<l&&t[e]===c[e];e++);var m=l-e;for(s=1;s<=m&&t[l-s]===c[o-s];s++);return hr=c.slice(e,1<s?1-s:void 0)}function br(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function yr(){return!0}function Ru(){return!1}function Vt(e){function t(l,s,c,o,m){this._reactName=l,this._targetInst=c,this.type=s,this.nativeEvent=o,this.target=m,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(l=e[S],this[S]=l?l(o):o[S]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?yr:Ru,this.isPropagationStopped=Ru,this}return g(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=yr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=yr)},persist:function(){},isPersistent:yr}),t}var kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gr=Vt(kl),ts=g({},kl,{view:0,detail:0}),Gb=Vt(ts),mc,pc,as,vr=g({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==as&&(as&&e.type==="mousemove"?(mc=e.screenX-as.screenX,pc=e.screenY-as.screenY):pc=mc=0,as=e),mc)},movementY:function(e){return"movementY"in e?e.movementY:pc}}),_u=Vt(vr),qb=g({},vr,{dataTransfer:0}),Ib=Vt(qb),Vb=g({},ts,{relatedTarget:0}),hc=Vt(Vb),Yb=g({},kl,{animationName:0,elapsedTime:0,pseudoElement:0}),Qb=Vt(Yb),Kb=g({},kl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xb=Vt(Kb),Zb=g({},kl,{data:0}),zu=Vt(Zb),Pb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Fb[e])?!!t[e]:!1}function bc(){return Wb}var ey=g({},ts,{key:function(e){if(e.key){var t=Pb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=br(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bc,charCode:function(e){return e.type==="keypress"?br(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?br(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ty=Vt(ey),ay=g({},vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lu=Vt(ay),ly=g({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bc}),ny=Vt(ly),sy=g({},kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),ry=Vt(sy),iy=g({},vr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cy=Vt(iy),oy=g({},kl,{newState:0,oldState:0}),dy=Vt(oy),uy=[9,13,27,32],yc=La&&"CompositionEvent"in window,ls=null;La&&"documentMode"in document&&(ls=document.documentMode);var fy=La&&"TextEvent"in window&&!ls,Bu=La&&(!yc||ls&&8<ls&&11>=ls),Uu=" ",$u=!1;function Hu(e,t){switch(e){case"keyup":return uy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var un=!1;function xy(e,t){switch(e){case"compositionend":return Gu(t);case"keypress":return t.which!==32?null:($u=!0,Uu);case"textInput":return e=t.data,e===Uu&&$u?null:e;default:return null}}function my(e,t){if(un)return e==="compositionend"||!yc&&Hu(e,t)?(e=Mu(),hr=xc=el=null,un=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bu&&t.locale!=="ko"?null:t.data;default:return null}}var py={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!py[e.type]:t==="textarea"}function Iu(e,t,l,s){on?dn?dn.push(s):dn=[s]:on=s,t=oi(t,"onChange"),0<t.length&&(l=new gr("onChange","change",null,l,s),e.push({event:l,listeners:t}))}var ns=null,ss=null;function hy(e){Cm(e,0)}function Nr(e){var t=Fn(e);if(wu(t))return e}function Vu(e,t){if(e==="change")return t}var Yu=!1;if(La){var gc;if(La){var vc="oninput"in document;if(!vc){var Qu=document.createElement("div");Qu.setAttribute("oninput","return;"),vc=typeof Qu.oninput=="function"}gc=vc}else gc=!1;Yu=gc&&(!document.documentMode||9<document.documentMode)}function Ku(){ns&&(ns.detachEvent("onpropertychange",Xu),ss=ns=null)}function Xu(e){if(e.propertyName==="value"&&Nr(ss)){var t=[];Iu(t,ss,e,dc(e)),Ou(hy,t)}}function by(e,t,l){e==="focusin"?(Ku(),ns=t,ss=l,ns.attachEvent("onpropertychange",Xu)):e==="focusout"&&Ku()}function yy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nr(ss)}function gy(e,t){if(e==="click")return Nr(t)}function vy(e,t){if(e==="input"||e==="change")return Nr(t)}function Ny(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ft=typeof Object.is=="function"?Object.is:Ny;function rs(e,t){if(Ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var l=Object.keys(e),s=Object.keys(t);if(l.length!==s.length)return!1;for(s=0;s<l.length;s++){var c=l[s];if(!Te.call(t,c)||!Ft(e[c],t[c]))return!1}return!0}function Zu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pu(e,t){var l=Zu(e);e=0;for(var s;l;){if(l.nodeType===3){if(s=e+l.textContent.length,e<=t&&s>=t)return{node:l,offset:t-e};e=s}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Zu(l)}}function Ju(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ju(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=mr(e.document);t instanceof e.HTMLIFrameElement;){try{var l=typeof t.contentWindow.location.href=="string"}catch{l=!1}if(l)e=t.contentWindow;else break;t=mr(e.document)}return t}function Nc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var jy=La&&"documentMode"in document&&11>=document.documentMode,fn=null,jc=null,is=null,Sc=!1;function Wu(e,t,l){var s=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Sc||fn==null||fn!==mr(s)||(s=fn,"selectionStart"in s&&Nc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),is&&rs(is,s)||(is=s,s=oi(jc,"onSelect"),0<s.length&&(t=new gr("onSelect","select",null,t,l),e.push({event:t,listeners:s}),t.target=fn)))}function Ol(e,t){var l={};return l[e.toLowerCase()]=t.toLowerCase(),l["Webkit"+e]="webkit"+t,l["Moz"+e]="moz"+t,l}var xn={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionrun:Ol("Transition","TransitionRun"),transitionstart:Ol("Transition","TransitionStart"),transitioncancel:Ol("Transition","TransitionCancel"),transitionend:Ol("Transition","TransitionEnd")},wc={},ef={};La&&(ef=document.createElement("div").style,"AnimationEvent"in window||(delete xn.animationend.animation,delete xn.animationiteration.animation,delete xn.animationstart.animation),"TransitionEvent"in window||delete xn.transitionend.transition);function Ml(e){if(wc[e])return wc[e];if(!xn[e])return e;var t=xn[e],l;for(l in t)if(t.hasOwnProperty(l)&&l in ef)return wc[e]=t[l];return e}var tf=Ml("animationend"),af=Ml("animationiteration"),lf=Ml("animationstart"),Sy=Ml("transitionrun"),wy=Ml("transitionstart"),Dy=Ml("transitioncancel"),nf=Ml("transitionend"),sf=new Map,Dc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dc.push("scrollEnd");function Na(e,t){sf.set(e,t),Tl(t,[e])}var jr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},da=[],mn=0,Cc=0;function Sr(){for(var e=mn,t=Cc=mn=0;t<e;){var l=da[t];da[t++]=null;var s=da[t];da[t++]=null;var c=da[t];da[t++]=null;var o=da[t];if(da[t++]=null,s!==null&&c!==null){var m=s.pending;m===null?c.next=c:(c.next=m.next,m.next=c),s.pending=c}o!==0&&rf(l,c,o)}}function wr(e,t,l,s){da[mn++]=e,da[mn++]=t,da[mn++]=l,da[mn++]=s,Cc|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Ac(e,t,l,s){return wr(e,t,l,s),Dr(e)}function Rl(e,t){return wr(e,null,null,t),Dr(e)}function rf(e,t,l){e.lanes|=l;var s=e.alternate;s!==null&&(s.lanes|=l);for(var c=!1,o=e.return;o!==null;)o.childLanes|=l,s=o.alternate,s!==null&&(s.childLanes|=l),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(c=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,c&&t!==null&&(c=31-Jt(l),e=o.hiddenUpdates,s=e[c],s===null?e[c]=[t]:s.push(t),t.lane=l|536870912),o):null}function Dr(e){if(50<Ts)throw Ts=0,Bo=null,Error(d(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var pn={};function Cy(e,t,l,s){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(e,t,l,s){return new Cy(e,t,l,s)}function Ec(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ba(e,t){var l=e.alternate;return l===null?(l=Wt(e.tag,t,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=t,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,t=e.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function cf(e,t){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,t=l.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Cr(e,t,l,s,c,o){var m=0;if(s=e,typeof e=="function")Ec(e)&&(m=1);else if(typeof e=="string")m=Og(e,l,se.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case re:return e=Wt(31,l,t,c),e.elementType=re,e.lanes=o,e;case R:return _l(l.children,c,o,t);case v:m=8,c|=24;break;case w:return e=Wt(12,l,t,c|2),e.elementType=w,e.lanes=o,e;case T:return e=Wt(13,l,t,c),e.elementType=T,e.lanes=o,e;case D:return e=Wt(19,l,t,c),e.elementType=D,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:m=10;break e;case C:m=9;break e;case B:m=11;break e;case U:m=14;break e;case V:m=16,s=null;break e}m=29,l=Error(d(130,e===null?"null":typeof e,"")),s=null}return t=Wt(m,l,t,c),t.elementType=e,t.type=s,t.lanes=o,t}function _l(e,t,l,s){return e=Wt(7,e,s,t),e.lanes=l,e}function Tc(e,t,l){return e=Wt(6,e,null,t),e.lanes=l,e}function of(e){var t=Wt(18,null,null,0);return t.stateNode=e,t}function kc(e,t,l){return t=Wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=l,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var df=new WeakMap;function ua(e,t){if(typeof e=="object"&&e!==null){var l=df.get(e);return l!==void 0?l:(t={value:e,source:t,stack:_e(t)},df.set(e,t),t)}return{value:e,source:t,stack:_e(t)}}var hn=[],bn=0,Ar=null,cs=0,fa=[],xa=0,tl=null,Ca=1,Aa="";function Ua(e,t){hn[bn++]=cs,hn[bn++]=Ar,Ar=e,cs=t}function uf(e,t,l){fa[xa++]=Ca,fa[xa++]=Aa,fa[xa++]=tl,tl=e;var s=Ca;e=Aa;var c=32-Jt(s)-1;s&=~(1<<c),l+=1;var o=32-Jt(t)+c;if(30<o){var m=c-c%5;o=(s&(1<<m)-1).toString(32),s>>=m,c-=m,Ca=1<<32-Jt(t)+c|l<<c|s,Aa=o+e}else Ca=1<<o|l<<c|s,Aa=e}function Oc(e){e.return!==null&&(Ua(e,1),uf(e,1,0))}function Mc(e){for(;e===Ar;)Ar=hn[--bn],hn[bn]=null,cs=hn[--bn],hn[bn]=null;for(;e===tl;)tl=fa[--xa],fa[xa]=null,Aa=fa[--xa],fa[xa]=null,Ca=fa[--xa],fa[xa]=null}function ff(e,t){fa[xa++]=Ca,fa[xa++]=Aa,fa[xa++]=tl,Ca=t.id,Aa=t.overflow,tl=e}var Mt=null,ct=null,Ve=!1,al=null,ma=!1,Rc=Error(d(519));function ll(e){var t=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw os(ua(t,e)),Rc}function xf(e){var t=e.stateNode,l=e.type,s=e.memoizedProps;switch(t[Ot]=e,t[It]=s,l){case"dialog":He("cancel",t),He("close",t);break;case"iframe":case"object":case"embed":He("load",t);break;case"video":case"audio":for(l=0;l<Os.length;l++)He(Os[l],t);break;case"source":He("error",t);break;case"img":case"image":case"link":He("error",t),He("load",t);break;case"details":He("toggle",t);break;case"input":He("invalid",t),Du(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":He("invalid",t);break;case"textarea":He("invalid",t),Au(t,s.value,s.defaultValue,s.children)}l=s.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||t.textContent===""+l||s.suppressHydrationWarning===!0||km(t.textContent,l)?(s.popover!=null&&(He("beforetoggle",t),He("toggle",t)),s.onScroll!=null&&He("scroll",t),s.onScrollEnd!=null&&He("scrollend",t),s.onClick!=null&&(t.onclick=za),t=!0):t=!1,t||ll(e,!0)}function mf(e){for(Mt=e.return;Mt;)switch(Mt.tag){case 5:case 31:case 13:ma=!1;return;case 27:case 3:ma=!0;return;default:Mt=Mt.return}}function yn(e){if(e!==Mt)return!1;if(!Ve)return mf(e),Ve=!0,!1;var t=e.tag,l;if((l=t!==3&&t!==27)&&((l=t===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||Fo(e.type,e.memoizedProps)),l=!l),l&&ct&&ll(e),mf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));ct=$m(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));ct=$m(e)}else t===27?(t=ct,bl(e.type)?(e=ld,ld=null,ct=e):ct=t):ct=Mt?ha(e.stateNode.nextSibling):null;return!0}function zl(){ct=Mt=null,Ve=!1}function _c(){var e=al;return e!==null&&(Xt===null?Xt=e:Xt.push.apply(Xt,e),al=null),e}function os(e){al===null?al=[e]:al.push(e)}var zc=M(null),Ll=null,$a=null;function nl(e,t,l){ae(zc,t._currentValue),t._currentValue=l}function Ha(e){e._currentValue=zc.current,K(zc)}function Lc(e,t,l){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===l)break;e=e.return}}function Bc(e,t,l,s){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var o=c.dependencies;if(o!==null){var m=c.child;o=o.firstContext;e:for(;o!==null;){var S=o;o=c;for(var _=0;_<t.length;_++)if(S.context===t[_]){o.lanes|=l,S=o.alternate,S!==null&&(S.lanes|=l),Lc(o.return,l,e),s||(m=null);break e}o=S.next}}else if(c.tag===18){if(m=c.return,m===null)throw Error(d(341));m.lanes|=l,o=m.alternate,o!==null&&(o.lanes|=l),Lc(m,l,e),m=null}else m=c.child;if(m!==null)m.return=c;else for(m=c;m!==null;){if(m===e){m=null;break}if(c=m.sibling,c!==null){c.return=m.return,m=c;break}m=m.return}c=m}}function gn(e,t,l,s){e=null;for(var c=t,o=!1;c!==null;){if(!o){if((c.flags&524288)!==0)o=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var m=c.alternate;if(m===null)throw Error(d(387));if(m=m.memoizedProps,m!==null){var S=c.type;Ft(c.pendingProps.value,m.value)||(e!==null?e.push(S):e=[S])}}else if(c===J.current){if(m=c.alternate,m===null)throw Error(d(387));m.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Ls):e=[Ls])}c=c.return}e!==null&&Bc(t,e,l,s),t.flags|=262144}function Er(e){for(e=e.firstContext;e!==null;){if(!Ft(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Bl(e){Ll=e,$a=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Rt(e){return pf(Ll,e)}function Tr(e,t){return Ll===null&&Bl(e),pf(e,t)}function pf(e,t){var l=t._currentValue;if(t={context:t,memoizedValue:l,next:null},$a===null){if(e===null)throw Error(d(308));$a=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else $a=$a.next=t;return l}var Ay=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(l,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(l){return l()})}},Ey=n.unstable_scheduleCallback,Ty=n.unstable_NormalPriority,gt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uc(){return{controller:new Ay,data:new Map,refCount:0}}function ds(e){e.refCount--,e.refCount===0&&Ey(Ty,function(){e.controller.abort()})}var us=null,$c=0,vn=0,Nn=null;function ky(e,t){if(us===null){var l=us=[];$c=0,vn=Io(),Nn={status:"pending",value:void 0,then:function(s){l.push(s)}}}return $c++,t.then(hf,hf),t}function hf(){if(--$c===0&&us!==null){Nn!==null&&(Nn.status="fulfilled");var e=us;us=null,vn=0,Nn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Oy(e,t){var l=[],s={status:"pending",value:null,reason:null,then:function(c){l.push(c)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var c=0;c<l.length;c++)(0,l[c])(t)},function(c){for(s.status="rejected",s.reason=c,c=0;c<l.length;c++)(0,l[c])(void 0)}),s}var bf=H.S;H.S=function(e,t){em=ee(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&ky(e,t),bf!==null&&bf(e,t)};var Ul=M(null);function Hc(){var e=Ul.current;return e!==null?e:st.pooledCache}function kr(e,t){t===null?ae(Ul,Ul.current):ae(Ul,t.pool)}function yf(){var e=Hc();return e===null?null:{parent:gt._currentValue,pool:e}}var jn=Error(d(460)),Gc=Error(d(474)),Or=Error(d(542)),Mr={then:function(){}};function gf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function vf(e,t,l){switch(l=e[l],l===void 0?e.push(t):l!==t&&(t.then(za,za),t=l),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,jf(e),e;default:if(typeof t.status=="string")t.then(za,za);else{if(e=st,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=s}},function(s){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,jf(e),e}throw Hl=t,jn}}function $l(e){try{var t=e._init;return t(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Hl=l,jn):l}}var Hl=null;function Nf(){if(Hl===null)throw Error(d(459));var e=Hl;return Hl=null,e}function jf(e){if(e===jn||e===Or)throw Error(d(483))}var Sn=null,fs=0;function Rr(e){var t=fs;return fs+=1,Sn===null&&(Sn=[]),vf(Sn,e,t)}function xs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function _r(e,t){throw t.$$typeof===b?Error(d(525)):(e=Object.prototype.toString.call(t),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Sf(e){function t($,L){if(e){var I=$.deletions;I===null?($.deletions=[L],$.flags|=16):I.push(L)}}function l($,L){if(!e)return null;for(;L!==null;)t($,L),L=L.sibling;return null}function s($){for(var L=new Map;$!==null;)$.key!==null?L.set($.key,$):L.set($.index,$),$=$.sibling;return L}function c($,L){return $=Ba($,L),$.index=0,$.sibling=null,$}function o($,L,I){return $.index=I,e?(I=$.alternate,I!==null?(I=I.index,I<L?($.flags|=67108866,L):I):($.flags|=67108866,L)):($.flags|=1048576,L)}function m($){return e&&$.alternate===null&&($.flags|=67108866),$}function S($,L,I,te){return L===null||L.tag!==6?(L=Tc(I,$.mode,te),L.return=$,L):(L=c(L,I),L.return=$,L)}function _($,L,I,te){var we=I.type;return we===R?Z($,L,I.props.children,te,I.key):L!==null&&(L.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===V&&$l(we)===L.type)?(L=c(L,I.props),xs(L,I),L.return=$,L):(L=Cr(I.type,I.key,I.props,null,$.mode,te),xs(L,I),L.return=$,L)}function Y($,L,I,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==I.containerInfo||L.stateNode.implementation!==I.implementation?(L=kc(I,$.mode,te),L.return=$,L):(L=c(L,I.children||[]),L.return=$,L)}function Z($,L,I,te,we){return L===null||L.tag!==7?(L=_l(I,$.mode,te,we),L.return=$,L):(L=c(L,I),L.return=$,L)}function le($,L,I){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Tc(""+L,$.mode,I),L.return=$,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case j:return I=Cr(L.type,L.key,L.props,null,$.mode,I),xs(I,L),I.return=$,I;case k:return L=kc(L,$.mode,I),L.return=$,L;case V:return L=$l(L),le($,L,I)}if(oe(L)||W(L))return L=_l(L,$.mode,I,null),L.return=$,L;if(typeof L.then=="function")return le($,Rr(L),I);if(L.$$typeof===A)return le($,Tr($,L),I);_r($,L)}return null}function Q($,L,I,te){var we=L!==null?L.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return we!==null?null:S($,L,""+I,te);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case j:return I.key===we?_($,L,I,te):null;case k:return I.key===we?Y($,L,I,te):null;case V:return I=$l(I),Q($,L,I,te)}if(oe(I)||W(I))return we!==null?null:Z($,L,I,te,null);if(typeof I.then=="function")return Q($,L,Rr(I),te);if(I.$$typeof===A)return Q($,L,Tr($,I),te);_r($,I)}return null}function X($,L,I,te,we){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return $=$.get(I)||null,S(L,$,""+te,we);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case j:return $=$.get(te.key===null?I:te.key)||null,_(L,$,te,we);case k:return $=$.get(te.key===null?I:te.key)||null,Y(L,$,te,we);case V:return te=$l(te),X($,L,I,te,we)}if(oe(te)||W(te))return $=$.get(I)||null,Z(L,$,te,we,null);if(typeof te.then=="function")return X($,L,I,Rr(te),we);if(te.$$typeof===A)return X($,L,I,Tr(L,te),we);_r(L,te)}return null}function be($,L,I,te){for(var we=null,Qe=null,ve=L,Re=L=0,Ie=null;ve!==null&&Re<I.length;Re++){ve.index>Re?(Ie=ve,ve=null):Ie=ve.sibling;var Ke=Q($,ve,I[Re],te);if(Ke===null){ve===null&&(ve=Ie);break}e&&ve&&Ke.alternate===null&&t($,ve),L=o(Ke,L,Re),Qe===null?we=Ke:Qe.sibling=Ke,Qe=Ke,ve=Ie}if(Re===I.length)return l($,ve),Ve&&Ua($,Re),we;if(ve===null){for(;Re<I.length;Re++)ve=le($,I[Re],te),ve!==null&&(L=o(ve,L,Re),Qe===null?we=ve:Qe.sibling=ve,Qe=ve);return Ve&&Ua($,Re),we}for(ve=s(ve);Re<I.length;Re++)Ie=X(ve,$,Re,I[Re],te),Ie!==null&&(e&&Ie.alternate!==null&&ve.delete(Ie.key===null?Re:Ie.key),L=o(Ie,L,Re),Qe===null?we=Ie:Qe.sibling=Ie,Qe=Ie);return e&&ve.forEach(function(jl){return t($,jl)}),Ve&&Ua($,Re),we}function De($,L,I,te){if(I==null)throw Error(d(151));for(var we=null,Qe=null,ve=L,Re=L=0,Ie=null,Ke=I.next();ve!==null&&!Ke.done;Re++,Ke=I.next()){ve.index>Re?(Ie=ve,ve=null):Ie=ve.sibling;var jl=Q($,ve,Ke.value,te);if(jl===null){ve===null&&(ve=Ie);break}e&&ve&&jl.alternate===null&&t($,ve),L=o(jl,L,Re),Qe===null?we=jl:Qe.sibling=jl,Qe=jl,ve=Ie}if(Ke.done)return l($,ve),Ve&&Ua($,Re),we;if(ve===null){for(;!Ke.done;Re++,Ke=I.next())Ke=le($,Ke.value,te),Ke!==null&&(L=o(Ke,L,Re),Qe===null?we=Ke:Qe.sibling=Ke,Qe=Ke);return Ve&&Ua($,Re),we}for(ve=s(ve);!Ke.done;Re++,Ke=I.next())Ke=X(ve,$,Re,Ke.value,te),Ke!==null&&(e&&Ke.alternate!==null&&ve.delete(Ke.key===null?Re:Ke.key),L=o(Ke,L,Re),Qe===null?we=Ke:Qe.sibling=Ke,Qe=Ke);return e&&ve.forEach(function(qg){return t($,qg)}),Ve&&Ua($,Re),we}function lt($,L,I,te){if(typeof I=="object"&&I!==null&&I.type===R&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case j:e:{for(var we=I.key;L!==null;){if(L.key===we){if(we=I.type,we===R){if(L.tag===7){l($,L.sibling),te=c(L,I.props.children),te.return=$,$=te;break e}}else if(L.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===V&&$l(we)===L.type){l($,L.sibling),te=c(L,I.props),xs(te,I),te.return=$,$=te;break e}l($,L);break}else t($,L);L=L.sibling}I.type===R?(te=_l(I.props.children,$.mode,te,I.key),te.return=$,$=te):(te=Cr(I.type,I.key,I.props,null,$.mode,te),xs(te,I),te.return=$,$=te)}return m($);case k:e:{for(we=I.key;L!==null;){if(L.key===we)if(L.tag===4&&L.stateNode.containerInfo===I.containerInfo&&L.stateNode.implementation===I.implementation){l($,L.sibling),te=c(L,I.children||[]),te.return=$,$=te;break e}else{l($,L);break}else t($,L);L=L.sibling}te=kc(I,$.mode,te),te.return=$,$=te}return m($);case V:return I=$l(I),lt($,L,I,te)}if(oe(I))return be($,L,I,te);if(W(I)){if(we=W(I),typeof we!="function")throw Error(d(150));return I=we.call(I),De($,L,I,te)}if(typeof I.then=="function")return lt($,L,Rr(I),te);if(I.$$typeof===A)return lt($,L,Tr($,I),te);_r($,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,L!==null&&L.tag===6?(l($,L.sibling),te=c(L,I),te.return=$,$=te):(l($,L),te=Tc(I,$.mode,te),te.return=$,$=te),m($)):l($,L)}return function($,L,I,te){try{fs=0;var we=lt($,L,I,te);return Sn=null,we}catch(ve){if(ve===jn||ve===Or)throw ve;var Qe=Wt(29,ve,null,$.mode);return Qe.lanes=te,Qe.return=$,Qe}}}var Gl=Sf(!0),wf=Sf(!1),sl=!1;function qc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ic(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function rl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function il(e,t,l){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ze&2)!==0){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,t=Dr(e),rf(e,null,l),t}return wr(e,s,t,l),Dr(e)}function ms(e,t,l){if(t=t.updateQueue,t!==null&&(t=t.shared,(l&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,l|=s,t.lanes=l,mu(e,l)}}function Vc(e,t){var l=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,l===s)){var c=null,o=null;if(l=l.firstBaseUpdate,l!==null){do{var m={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};o===null?c=o=m:o=o.next=m,l=l.next}while(l!==null);o===null?c=o=t:o=o.next=t}else c=o=t;l={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:o,shared:s.shared,callbacks:s.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=t:e.next=t,l.lastBaseUpdate=t}var Yc=!1;function ps(){if(Yc){var e=Nn;if(e!==null)throw e}}function hs(e,t,l,s){Yc=!1;var c=e.updateQueue;sl=!1;var o=c.firstBaseUpdate,m=c.lastBaseUpdate,S=c.shared.pending;if(S!==null){c.shared.pending=null;var _=S,Y=_.next;_.next=null,m===null?o=Y:m.next=Y,m=_;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,S=Z.lastBaseUpdate,S!==m&&(S===null?Z.firstBaseUpdate=Y:S.next=Y,Z.lastBaseUpdate=_))}if(o!==null){var le=c.baseState;m=0,Z=Y=_=null,S=o;do{var Q=S.lane&-536870913,X=Q!==S.lane;if(X?(qe&Q)===Q:(s&Q)===Q){Q!==0&&Q===vn&&(Yc=!0),Z!==null&&(Z=Z.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var be=e,De=S;Q=t;var lt=l;switch(De.tag){case 1:if(be=De.payload,typeof be=="function"){le=be.call(lt,le,Q);break e}le=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=De.payload,Q=typeof be=="function"?be.call(lt,le,Q):be,Q==null)break e;le=g({},le,Q);break e;case 2:sl=!0}}Q=S.callback,Q!==null&&(e.flags|=64,X&&(e.flags|=8192),X=c.callbacks,X===null?c.callbacks=[Q]:X.push(Q))}else X={lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Z===null?(Y=Z=X,_=le):Z=Z.next=X,m|=Q;if(S=S.next,S===null){if(S=c.shared.pending,S===null)break;X=S,S=X.next,X.next=null,c.lastBaseUpdate=X,c.shared.pending=null}}while(!0);Z===null&&(_=le),c.baseState=_,c.firstBaseUpdate=Y,c.lastBaseUpdate=Z,o===null&&(c.shared.lanes=0),fl|=m,e.lanes=m,e.memoizedState=le}}function Df(e,t){if(typeof e!="function")throw Error(d(191,e));e.call(t)}function Cf(e,t){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)Df(l[e],t)}var wn=M(null),zr=M(0);function Af(e,t){e=Za,ae(zr,e),ae(wn,t),Za=e|t.baseLanes}function Qc(){ae(zr,Za),ae(wn,wn.current)}function Kc(){Za=zr.current,K(wn),K(zr)}var ea=M(null),pa=null;function cl(e){var t=e.alternate;ae(ht,ht.current&1),ae(ea,e),pa===null&&(t===null||wn.current!==null||t.memoizedState!==null)&&(pa=e)}function Xc(e){ae(ht,ht.current),ae(ea,e),pa===null&&(pa=e)}function Ef(e){e.tag===22?(ae(ht,ht.current),ae(ea,e),pa===null&&(pa=e)):ol()}function ol(){ae(ht,ht.current),ae(ea,ea.current)}function ta(e){K(ea),pa===e&&(pa=null),K(ht)}var ht=M(0);function Lr(e){for(var t=e;t!==null;){if(t.tag===13){var l=t.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||td(l)||ad(l)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ga=0,Oe=null,tt=null,vt=null,Br=!1,Dn=!1,ql=!1,Ur=0,bs=0,Cn=null,My=0;function mt(){throw Error(d(321))}function Zc(e,t){if(t===null)return!1;for(var l=0;l<t.length&&l<e.length;l++)if(!Ft(e[l],t[l]))return!1;return!0}function Pc(e,t,l,s,c,o){return Ga=o,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,H.H=e===null||e.memoizedState===null?ux:fo,ql=!1,o=l(s,c),ql=!1,Dn&&(o=kf(t,l,s,c)),Tf(e),o}function Tf(e){H.H=vs;var t=tt!==null&&tt.next!==null;if(Ga=0,vt=tt=Oe=null,Br=!1,bs=0,Cn=null,t)throw Error(d(300));e===null||Nt||(e=e.dependencies,e!==null&&Er(e)&&(Nt=!0))}function kf(e,t,l,s){Oe=e;var c=0;do{if(Dn&&(Cn=null),bs=0,Dn=!1,25<=c)throw Error(d(301));if(c+=1,vt=tt=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}H.H=fx,o=t(l,s)}while(Dn);return o}function Ry(){var e=H.H,t=e.useState()[0];return t=typeof t.then=="function"?ys(t):t,e=e.useState()[0],(tt!==null?tt.memoizedState:null)!==e&&(Oe.flags|=1024),t}function Jc(){var e=Ur!==0;return Ur=0,e}function Fc(e,t,l){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l}function Wc(e){if(Br){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Br=!1}Ga=0,vt=tt=Oe=null,Dn=!1,bs=Ur=0,Cn=null}function Ht(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Oe.memoizedState=vt=e:vt=vt.next=e,vt}function bt(){if(tt===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=tt.next;var t=vt===null?Oe.memoizedState:vt.next;if(t!==null)vt=t,tt=e;else{if(e===null)throw Oe.alternate===null?Error(d(467)):Error(d(310));tt=e,e={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},vt===null?Oe.memoizedState=vt=e:vt=vt.next=e}return vt}function $r(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ys(e){var t=bs;return bs+=1,Cn===null&&(Cn=[]),e=vf(Cn,e,t),t=Oe,(vt===null?t.memoizedState:vt.next)===null&&(t=t.alternate,H.H=t===null||t.memoizedState===null?ux:fo),e}function Hr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ys(e);if(e.$$typeof===A)return Rt(e)}throw Error(d(438,String(e)))}function eo(e){var t=null,l=Oe.updateQueue;if(l!==null&&(t=l.memoCache),t==null){var s=Oe.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),l===null&&(l=$r(),Oe.updateQueue=l),l.memoCache=t,l=t.data[t.index],l===void 0)for(l=t.data[t.index]=Array(e),s=0;s<e;s++)l[s]=de;return t.index++,l}function qa(e,t){return typeof t=="function"?t(e):t}function Gr(e){var t=bt();return to(t,tt,e)}function to(e,t,l){var s=e.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=l;var c=e.baseQueue,o=s.pending;if(o!==null){if(c!==null){var m=c.next;c.next=o.next,o.next=m}t.baseQueue=c=o,s.pending=null}if(o=e.baseState,c===null)e.memoizedState=o;else{t=c.next;var S=m=null,_=null,Y=t,Z=!1;do{var le=Y.lane&-536870913;if(le!==Y.lane?(qe&le)===le:(Ga&le)===le){var Q=Y.revertLane;if(Q===0)_!==null&&(_=_.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),le===vn&&(Z=!0);else if((Ga&Q)===Q){Y=Y.next,Q===vn&&(Z=!0);continue}else le={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},_===null?(S=_=le,m=o):_=_.next=le,Oe.lanes|=Q,fl|=Q;le=Y.action,ql&&l(o,le),o=Y.hasEagerState?Y.eagerState:l(o,le)}else Q={lane:le,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},_===null?(S=_=Q,m=o):_=_.next=Q,Oe.lanes|=le,fl|=le;Y=Y.next}while(Y!==null&&Y!==t);if(_===null?m=o:_.next=S,!Ft(o,e.memoizedState)&&(Nt=!0,Z&&(l=Nn,l!==null)))throw l;e.memoizedState=o,e.baseState=m,e.baseQueue=_,s.lastRenderedState=o}return c===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function ao(e){var t=bt(),l=t.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=e;var s=l.dispatch,c=l.pending,o=t.memoizedState;if(c!==null){l.pending=null;var m=c=c.next;do o=e(o,m.action),m=m.next;while(m!==c);Ft(o,t.memoizedState)||(Nt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),l.lastRenderedState=o}return[o,s]}function Of(e,t,l){var s=Oe,c=bt(),o=Ve;if(o){if(l===void 0)throw Error(d(407));l=l()}else l=t();var m=!Ft((tt||c).memoizedState,l);if(m&&(c.memoizedState=l,Nt=!0),c=c.queue,so(_f.bind(null,s,c,e),[e]),c.getSnapshot!==t||m||vt!==null&&vt.memoizedState.tag&1){if(s.flags|=2048,An(9,{destroy:void 0},Rf.bind(null,s,c,l,t),null),st===null)throw Error(d(349));o||(Ga&127)!==0||Mf(s,t,l)}return l}function Mf(e,t,l){e.flags|=16384,e={getSnapshot:t,value:l},t=Oe.updateQueue,t===null?(t=$r(),Oe.updateQueue=t,t.stores=[e]):(l=t.stores,l===null?t.stores=[e]:l.push(e))}function Rf(e,t,l,s){t.value=l,t.getSnapshot=s,zf(t)&&Lf(e)}function _f(e,t,l){return l(function(){zf(t)&&Lf(e)})}function zf(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!Ft(e,l)}catch{return!0}}function Lf(e){var t=Rl(e,2);t!==null&&Zt(t,e,2)}function lo(e){var t=Ht();if(typeof e=="function"){var l=e;if(e=l(),ql){Fa(!0);try{l()}finally{Fa(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:e},t}function Bf(e,t,l,s){return e.baseState=l,to(e,tt,typeof s=="function"?s:qa)}function _y(e,t,l,s,c){if(Vr(e))throw Error(d(485));if(e=t.action,e!==null){var o={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){o.listeners.push(m)}};H.T!==null?l(!0):o.isTransition=!1,s(o),l=t.pending,l===null?(o.next=t.pending=o,Uf(t,o)):(o.next=l.next,t.pending=l.next=o)}}function Uf(e,t){var l=t.action,s=t.payload,c=e.state;if(t.isTransition){var o=H.T,m={};H.T=m;try{var S=l(c,s),_=H.S;_!==null&&_(m,S),$f(e,t,S)}catch(Y){no(e,t,Y)}finally{o!==null&&m.types!==null&&(o.types=m.types),H.T=o}}else try{o=l(c,s),$f(e,t,o)}catch(Y){no(e,t,Y)}}function $f(e,t,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(s){Hf(e,t,s)},function(s){return no(e,t,s)}):Hf(e,t,l)}function Hf(e,t,l){t.status="fulfilled",t.value=l,Gf(t),e.state=l,t=e.pending,t!==null&&(l=t.next,l===t?e.pending=null:(l=l.next,t.next=l,Uf(e,l)))}function no(e,t,l){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=l,Gf(t),t=t.next;while(t!==s)}e.action=null}function Gf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function qf(e,t){return t}function If(e,t){if(Ve){var l=st.formState;if(l!==null){e:{var s=Oe;if(Ve){if(ct){t:{for(var c=ct,o=ma;c.nodeType!==8;){if(!o){c=null;break t}if(c=ha(c.nextSibling),c===null){c=null;break t}}o=c.data,c=o==="F!"||o==="F"?c:null}if(c){ct=ha(c.nextSibling),s=c.data==="F!";break e}}ll(s)}s=!1}s&&(t=l[0])}}return l=Ht(),l.memoizedState=l.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qf,lastRenderedState:t},l.queue=s,l=cx.bind(null,Oe,s),s.dispatch=l,s=lo(!1),o=uo.bind(null,Oe,!1,s.queue),s=Ht(),c={state:t,dispatch:null,action:e,pending:null},s.queue=c,l=_y.bind(null,Oe,c,o,l),c.dispatch=l,s.memoizedState=e,[t,l,!1]}function Vf(e){var t=bt();return Yf(t,tt,e)}function Yf(e,t,l){if(t=to(e,t,qf)[0],e=Gr(qa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=ys(t)}catch(m){throw m===jn?Or:m}else s=t;t=bt();var c=t.queue,o=c.dispatch;return l!==t.memoizedState&&(Oe.flags|=2048,An(9,{destroy:void 0},zy.bind(null,c,l),null)),[s,o,e]}function zy(e,t){e.action=t}function Qf(e){var t=bt(),l=tt;if(l!==null)return Yf(t,l,e);bt(),t=t.memoizedState,l=bt();var s=l.queue.dispatch;return l.memoizedState=e,[t,s,!1]}function An(e,t,l,s){return e={tag:e,create:l,deps:s,inst:t,next:null},t=Oe.updateQueue,t===null&&(t=$r(),Oe.updateQueue=t),l=t.lastEffect,l===null?t.lastEffect=e.next=e:(s=l.next,l.next=e,e.next=s,t.lastEffect=e),e}function Kf(){return bt().memoizedState}function qr(e,t,l,s){var c=Ht();Oe.flags|=e,c.memoizedState=An(1|t,{destroy:void 0},l,s===void 0?null:s)}function Ir(e,t,l,s){var c=bt();s=s===void 0?null:s;var o=c.memoizedState.inst;tt!==null&&s!==null&&Zc(s,tt.memoizedState.deps)?c.memoizedState=An(t,o,l,s):(Oe.flags|=e,c.memoizedState=An(1|t,o,l,s))}function Xf(e,t){qr(8390656,8,e,t)}function so(e,t){Ir(2048,8,e,t)}function Ly(e){Oe.flags|=4;var t=Oe.updateQueue;if(t===null)t=$r(),Oe.updateQueue=t,t.events=[e];else{var l=t.events;l===null?t.events=[e]:l.push(e)}}function Zf(e){var t=bt().memoizedState;return Ly({ref:t,nextImpl:e}),function(){if((Ze&2)!==0)throw Error(d(440));return t.impl.apply(void 0,arguments)}}function Pf(e,t){return Ir(4,2,e,t)}function Jf(e,t){return Ir(4,4,e,t)}function Ff(e,t){if(typeof t=="function"){e=e();var l=t(e);return function(){typeof l=="function"?l():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wf(e,t,l){l=l!=null?l.concat([e]):null,Ir(4,4,Ff.bind(null,t,e),l)}function ro(){}function ex(e,t){var l=bt();t=t===void 0?null:t;var s=l.memoizedState;return t!==null&&Zc(t,s[1])?s[0]:(l.memoizedState=[e,t],e)}function tx(e,t){var l=bt();t=t===void 0?null:t;var s=l.memoizedState;if(t!==null&&Zc(t,s[1]))return s[0];if(s=e(),ql){Fa(!0);try{e()}finally{Fa(!1)}}return l.memoizedState=[s,t],s}function io(e,t,l){return l===void 0||(Ga&1073741824)!==0&&(qe&261930)===0?e.memoizedState=t:(e.memoizedState=l,e=am(),Oe.lanes|=e,fl|=e,l)}function ax(e,t,l,s){return Ft(l,t)?l:wn.current!==null?(e=io(e,l,s),Ft(e,t)||(Nt=!0),e):(Ga&42)===0||(Ga&1073741824)!==0&&(qe&261930)===0?(Nt=!0,e.memoizedState=l):(e=am(),Oe.lanes|=e,fl|=e,t)}function lx(e,t,l,s,c){var o=P.p;P.p=o!==0&&8>o?o:8;var m=H.T,S={};H.T=S,uo(e,!1,t,l);try{var _=c(),Y=H.S;if(Y!==null&&Y(S,_),_!==null&&typeof _=="object"&&typeof _.then=="function"){var Z=Oy(_,s);gs(e,t,Z,na(e))}else gs(e,t,s,na(e))}catch(le){gs(e,t,{then:function(){},status:"rejected",reason:le},na())}finally{P.p=o,m!==null&&S.types!==null&&(m.types=S.types),H.T=m}}function By(){}function co(e,t,l,s){if(e.tag!==5)throw Error(d(476));var c=nx(e).queue;lx(e,c,t,O,l===null?By:function(){return sx(e),l(s)})}function nx(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:O},next:null};var l={};return t.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:l},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function sx(e){var t=nx(e);t.next===null&&(t=e.alternate.memoizedState),gs(e,t.next.queue,{},na())}function oo(){return Rt(Ls)}function rx(){return bt().memoizedState}function ix(){return bt().memoizedState}function Uy(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var l=na();e=rl(l);var s=il(t,e,l);s!==null&&(Zt(s,t,l),ms(s,t,l)),t={cache:Uc()},e.payload=t;return}t=t.return}}function $y(e,t,l){var s=na();l={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Vr(e)?ox(t,l):(l=Ac(e,t,l,s),l!==null&&(Zt(l,e,s),dx(l,t,s)))}function cx(e,t,l){var s=na();gs(e,t,l,s)}function gs(e,t,l,s){var c={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Vr(e))ox(t,c);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var m=t.lastRenderedState,S=o(m,l);if(c.hasEagerState=!0,c.eagerState=S,Ft(S,m))return wr(e,t,c,0),st===null&&Sr(),!1}catch{}if(l=Ac(e,t,c,s),l!==null)return Zt(l,e,s),dx(l,t,s),!0}return!1}function uo(e,t,l,s){if(s={lane:2,revertLane:Io(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Vr(e)){if(t)throw Error(d(479))}else t=Ac(e,l,s,2),t!==null&&Zt(t,e,2)}function Vr(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function ox(e,t){Dn=Br=!0;var l=e.pending;l===null?t.next=t:(t.next=l.next,l.next=t),e.pending=t}function dx(e,t,l){if((l&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,l|=s,t.lanes=l,mu(e,l)}}var vs={readContext:Rt,use:Hr,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};vs.useEffectEvent=mt;var ux={readContext:Rt,use:Hr,useCallback:function(e,t){return Ht().memoizedState=[e,t===void 0?null:t],e},useContext:Rt,useEffect:Xf,useImperativeHandle:function(e,t,l){l=l!=null?l.concat([e]):null,qr(4194308,4,Ff.bind(null,t,e),l)},useLayoutEffect:function(e,t){return qr(4194308,4,e,t)},useInsertionEffect:function(e,t){qr(4,2,e,t)},useMemo:function(e,t){var l=Ht();t=t===void 0?null:t;var s=e();if(ql){Fa(!0);try{e()}finally{Fa(!1)}}return l.memoizedState=[s,t],s},useReducer:function(e,t,l){var s=Ht();if(l!==void 0){var c=l(t);if(ql){Fa(!0);try{l(t)}finally{Fa(!1)}}}else c=t;return s.memoizedState=s.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},s.queue=e,e=e.dispatch=$y.bind(null,Oe,e),[s.memoizedState,e]},useRef:function(e){var t=Ht();return e={current:e},t.memoizedState=e},useState:function(e){e=lo(e);var t=e.queue,l=cx.bind(null,Oe,t);return t.dispatch=l,[e.memoizedState,l]},useDebugValue:ro,useDeferredValue:function(e,t){var l=Ht();return io(l,e,t)},useTransition:function(){var e=lo(!1);return e=lx.bind(null,Oe,e.queue,!0,!1),Ht().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,l){var s=Oe,c=Ht();if(Ve){if(l===void 0)throw Error(d(407));l=l()}else{if(l=t(),st===null)throw Error(d(349));(qe&127)!==0||Mf(s,t,l)}c.memoizedState=l;var o={value:l,getSnapshot:t};return c.queue=o,Xf(_f.bind(null,s,o,e),[e]),s.flags|=2048,An(9,{destroy:void 0},Rf.bind(null,s,o,l,t),null),l},useId:function(){var e=Ht(),t=st.identifierPrefix;if(Ve){var l=Aa,s=Ca;l=(s&~(1<<32-Jt(s)-1)).toString(32)+l,t="_"+t+"R_"+l,l=Ur++,0<l&&(t+="H"+l.toString(32)),t+="_"}else l=My++,t="_"+t+"r_"+l.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:oo,useFormState:If,useActionState:If,useOptimistic:function(e){var t=Ht();t.memoizedState=t.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=l,t=uo.bind(null,Oe,!0,l),l.dispatch=t,[e,t]},useMemoCache:eo,useCacheRefresh:function(){return Ht().memoizedState=Uy.bind(null,Oe)},useEffectEvent:function(e){var t=Ht(),l={impl:e};return t.memoizedState=l,function(){if((Ze&2)!==0)throw Error(d(440));return l.impl.apply(void 0,arguments)}}},fo={readContext:Rt,use:Hr,useCallback:ex,useContext:Rt,useEffect:so,useImperativeHandle:Wf,useInsertionEffect:Pf,useLayoutEffect:Jf,useMemo:tx,useReducer:Gr,useRef:Kf,useState:function(){return Gr(qa)},useDebugValue:ro,useDeferredValue:function(e,t){var l=bt();return ax(l,tt.memoizedState,e,t)},useTransition:function(){var e=Gr(qa)[0],t=bt().memoizedState;return[typeof e=="boolean"?e:ys(e),t]},useSyncExternalStore:Of,useId:rx,useHostTransitionStatus:oo,useFormState:Vf,useActionState:Vf,useOptimistic:function(e,t){var l=bt();return Bf(l,tt,e,t)},useMemoCache:eo,useCacheRefresh:ix};fo.useEffectEvent=Zf;var fx={readContext:Rt,use:Hr,useCallback:ex,useContext:Rt,useEffect:so,useImperativeHandle:Wf,useInsertionEffect:Pf,useLayoutEffect:Jf,useMemo:tx,useReducer:ao,useRef:Kf,useState:function(){return ao(qa)},useDebugValue:ro,useDeferredValue:function(e,t){var l=bt();return tt===null?io(l,e,t):ax(l,tt.memoizedState,e,t)},useTransition:function(){var e=ao(qa)[0],t=bt().memoizedState;return[typeof e=="boolean"?e:ys(e),t]},useSyncExternalStore:Of,useId:rx,useHostTransitionStatus:oo,useFormState:Qf,useActionState:Qf,useOptimistic:function(e,t){var l=bt();return tt!==null?Bf(l,tt,e,t):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:eo,useCacheRefresh:ix};fx.useEffectEvent=Zf;function xo(e,t,l,s){t=e.memoizedState,l=l(s,t),l=l==null?t:g({},t,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var mo={enqueueSetState:function(e,t,l){e=e._reactInternals;var s=na(),c=rl(s);c.payload=t,l!=null&&(c.callback=l),t=il(e,c,s),t!==null&&(Zt(t,e,s),ms(t,e,s))},enqueueReplaceState:function(e,t,l){e=e._reactInternals;var s=na(),c=rl(s);c.tag=1,c.payload=t,l!=null&&(c.callback=l),t=il(e,c,s),t!==null&&(Zt(t,e,s),ms(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var l=na(),s=rl(l);s.tag=2,t!=null&&(s.callback=t),t=il(e,s,l),t!==null&&(Zt(t,e,l),ms(t,e,l))}};function xx(e,t,l,s,c,o,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,m):t.prototype&&t.prototype.isPureReactComponent?!rs(l,s)||!rs(c,o):!0}function mx(e,t,l,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(l,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(l,s),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function Il(e,t){var l=t;if("ref"in t){l={};for(var s in t)s!=="ref"&&(l[s]=t[s])}if(e=e.defaultProps){l===t&&(l=g({},l));for(var c in e)l[c]===void 0&&(l[c]=e[c])}return l}function px(e){jr(e)}function hx(e){console.error(e)}function bx(e){jr(e)}function Yr(e,t){try{var l=e.onUncaughtError;l(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function yx(e,t,l){try{var s=e.onCaughtError;s(l.value,{componentStack:l.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function po(e,t,l){return l=rl(l),l.tag=3,l.payload={element:null},l.callback=function(){Yr(e,t)},l}function gx(e){return e=rl(e),e.tag=3,e}function vx(e,t,l,s){var c=l.type.getDerivedStateFromError;if(typeof c=="function"){var o=s.value;e.payload=function(){return c(o)},e.callback=function(){yx(t,l,s)}}var m=l.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){yx(t,l,s),typeof c!="function"&&(xl===null?xl=new Set([this]):xl.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})})}function Hy(e,t,l,s,c){if(l.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=l.alternate,t!==null&&gn(t,l,c,!0),l=ea.current,l!==null){switch(l.tag){case 31:case 13:return pa===null?li():l.alternate===null&&pt===0&&(pt=3),l.flags&=-257,l.flags|=65536,l.lanes=c,s===Mr?l.flags|=16384:(t=l.updateQueue,t===null?l.updateQueue=new Set([s]):t.add(s),Ho(e,s,c)),!1;case 22:return l.flags|=65536,s===Mr?l.flags|=16384:(t=l.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},l.updateQueue=t):(l=t.retryQueue,l===null?t.retryQueue=new Set([s]):l.add(s)),Ho(e,s,c)),!1}throw Error(d(435,l.tag))}return Ho(e,s,c),li(),!1}if(Ve)return t=ea.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,s!==Rc&&(e=Error(d(422),{cause:s}),os(ua(e,l)))):(s!==Rc&&(t=Error(d(423),{cause:s}),os(ua(t,l))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,s=ua(s,l),c=po(e.stateNode,s,c),Vc(e,c),pt!==4&&(pt=2)),!1;var o=Error(d(520),{cause:s});if(o=ua(o,l),Es===null?Es=[o]:Es.push(o),pt!==4&&(pt=2),t===null)return!0;s=ua(s,l),l=t;do{switch(l.tag){case 3:return l.flags|=65536,e=c&-c,l.lanes|=e,e=po(l.stateNode,s,e),Vc(l,e),!1;case 1:if(t=l.type,o=l.stateNode,(l.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(xl===null||!xl.has(o))))return l.flags|=65536,c&=-c,l.lanes|=c,c=gx(c),vx(c,e,l,s),Vc(l,c),!1}l=l.return}while(l!==null);return!1}var ho=Error(d(461)),Nt=!1;function _t(e,t,l,s){t.child=e===null?wf(t,null,l,s):Gl(t,e.child,l,s)}function Nx(e,t,l,s,c){l=l.render;var o=t.ref;if("ref"in s){var m={};for(var S in s)S!=="ref"&&(m[S]=s[S])}else m=s;return Bl(t),s=Pc(e,t,l,m,o,c),S=Jc(),e!==null&&!Nt?(Fc(e,t,c),Ia(e,t,c)):(Ve&&S&&Oc(t),t.flags|=1,_t(e,t,s,c),t.child)}function jx(e,t,l,s,c){if(e===null){var o=l.type;return typeof o=="function"&&!Ec(o)&&o.defaultProps===void 0&&l.compare===null?(t.tag=15,t.type=o,Sx(e,t,o,s,c)):(e=Cr(l.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!wo(e,c)){var m=o.memoizedProps;if(l=l.compare,l=l!==null?l:rs,l(m,s)&&e.ref===t.ref)return Ia(e,t,c)}return t.flags|=1,e=Ba(o,s),e.ref=t.ref,e.return=t,t.child=e}function Sx(e,t,l,s,c){if(e!==null){var o=e.memoizedProps;if(rs(o,s)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=s=o,wo(e,c))(e.flags&131072)!==0&&(Nt=!0);else return t.lanes=e.lanes,Ia(e,t,c)}return bo(e,t,l,s,c)}function wx(e,t,l,s){var c=s.children,o=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(o=o!==null?o.baseLanes|l:l,e!==null){for(s=t.child=e.child,c=0;s!==null;)c=c|s.lanes|s.childLanes,s=s.sibling;s=c&~o}else s=0,t.child=null;return Dx(e,t,o,l,s)}if((l&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&kr(t,o!==null?o.cachePool:null),o!==null?Af(t,o):Qc(),Ef(t);else return s=t.lanes=536870912,Dx(e,t,o!==null?o.baseLanes|l:l,l,s)}else o!==null?(kr(t,o.cachePool),Af(t,o),ol(),t.memoizedState=null):(e!==null&&kr(t,null),Qc(),ol());return _t(e,t,c,l),t.child}function Ns(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Dx(e,t,l,s,c){var o=Hc();return o=o===null?null:{parent:gt._currentValue,pool:o},t.memoizedState={baseLanes:l,cachePool:o},e!==null&&kr(t,null),Qc(),Ef(t),e!==null&&gn(e,t,s,!0),t.childLanes=c,null}function Qr(e,t){return t=Xr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Cx(e,t,l){return Gl(t,e.child,null,l),e=Qr(t,t.pendingProps),e.flags|=2,ta(t),t.memoizedState=null,e}function Gy(e,t,l){var s=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ve){if(s.mode==="hidden")return e=Qr(t,s),t.lanes=536870912,Ns(null,e);if(Xc(t),(e=ct)?(e=Um(e,ma),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:tl!==null?{id:Ca,overflow:Aa}:null,retryLane:536870912,hydrationErrors:null},l=of(e),l.return=t,t.child=l,Mt=t,ct=null)):e=null,e===null)throw ll(t);return t.lanes=536870912,null}return Qr(t,s)}var o=e.memoizedState;if(o!==null){var m=o.dehydrated;if(Xc(t),c)if(t.flags&256)t.flags&=-257,t=Cx(e,t,l);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(d(558));else if(Nt||gn(e,t,l,!1),c=(l&e.childLanes)!==0,Nt||c){if(s=st,s!==null&&(m=pu(s,l),m!==0&&m!==o.retryLane))throw o.retryLane=m,Rl(e,m),Zt(s,e,m),ho;li(),t=Cx(e,t,l)}else e=o.treeContext,ct=ha(m.nextSibling),Mt=t,Ve=!0,al=null,ma=!1,e!==null&&ff(t,e),t=Qr(t,s),t.flags|=4096;return t}return e=Ba(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Kr(e,t){var l=t.ref;if(l===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(d(284));(e===null||e.ref!==l)&&(t.flags|=4194816)}}function bo(e,t,l,s,c){return Bl(t),l=Pc(e,t,l,s,void 0,c),s=Jc(),e!==null&&!Nt?(Fc(e,t,c),Ia(e,t,c)):(Ve&&s&&Oc(t),t.flags|=1,_t(e,t,l,c),t.child)}function Ax(e,t,l,s,c,o){return Bl(t),t.updateQueue=null,l=kf(t,s,l,c),Tf(e),s=Jc(),e!==null&&!Nt?(Fc(e,t,o),Ia(e,t,o)):(Ve&&s&&Oc(t),t.flags|=1,_t(e,t,l,o),t.child)}function Ex(e,t,l,s,c){if(Bl(t),t.stateNode===null){var o=pn,m=l.contextType;typeof m=="object"&&m!==null&&(o=Rt(m)),o=new l(s,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=mo,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=s,o.state=t.memoizedState,o.refs={},qc(t),m=l.contextType,o.context=typeof m=="object"&&m!==null?Rt(m):pn,o.state=t.memoizedState,m=l.getDerivedStateFromProps,typeof m=="function"&&(xo(t,l,m,s),o.state=t.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(m=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),m!==o.state&&mo.enqueueReplaceState(o,o.state,null),hs(t,s,o,c),ps(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){o=t.stateNode;var S=t.memoizedProps,_=Il(l,S);o.props=_;var Y=o.context,Z=l.contextType;m=pn,typeof Z=="object"&&Z!==null&&(m=Rt(Z));var le=l.getDerivedStateFromProps;Z=typeof le=="function"||typeof o.getSnapshotBeforeUpdate=="function",S=t.pendingProps!==S,Z||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(S||Y!==m)&&mx(t,o,s,m),sl=!1;var Q=t.memoizedState;o.state=Q,hs(t,s,o,c),ps(),Y=t.memoizedState,S||Q!==Y||sl?(typeof le=="function"&&(xo(t,l,le,s),Y=t.memoizedState),(_=sl||xx(t,l,_,s,Q,Y,m))?(Z||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=Y),o.props=s,o.state=Y,o.context=m,s=_):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,Ic(e,t),m=t.memoizedProps,Z=Il(l,m),o.props=Z,le=t.pendingProps,Q=o.context,Y=l.contextType,_=pn,typeof Y=="object"&&Y!==null&&(_=Rt(Y)),S=l.getDerivedStateFromProps,(Y=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(m!==le||Q!==_)&&mx(t,o,s,_),sl=!1,Q=t.memoizedState,o.state=Q,hs(t,s,o,c),ps();var X=t.memoizedState;m!==le||Q!==X||sl||e!==null&&e.dependencies!==null&&Er(e.dependencies)?(typeof S=="function"&&(xo(t,l,S,s),X=t.memoizedState),(Z=sl||xx(t,l,Z,s,Q,X,_)||e!==null&&e.dependencies!==null&&Er(e.dependencies))?(Y||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,X,_),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,X,_)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||m===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=X),o.props=s,o.state=X,o.context=_,s=Z):(typeof o.componentDidUpdate!="function"||m===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),s=!1)}return o=s,Kr(e,t),s=(t.flags&128)!==0,o||s?(o=t.stateNode,l=s&&typeof l.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&s?(t.child=Gl(t,e.child,null,c),t.child=Gl(t,null,l,c)):_t(e,t,l,c),t.memoizedState=o.state,e=t.child):e=Ia(e,t,c),e}function Tx(e,t,l,s){return zl(),t.flags|=256,_t(e,t,l,s),t.child}var yo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function go(e){return{baseLanes:e,cachePool:yf()}}function vo(e,t,l){return e=e!==null?e.childLanes&~l:0,t&&(e|=la),e}function kx(e,t,l){var s=t.pendingProps,c=!1,o=(t.flags&128)!==0,m;if((m=o)||(m=e!==null&&e.memoizedState===null?!1:(ht.current&2)!==0),m&&(c=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ve){if(c?cl(t):ol(),(e=ct)?(e=Um(e,ma),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:tl!==null?{id:Ca,overflow:Aa}:null,retryLane:536870912,hydrationErrors:null},l=of(e),l.return=t,t.child=l,Mt=t,ct=null)):e=null,e===null)throw ll(t);return ad(e)?t.lanes=32:t.lanes=536870912,null}var S=s.children;return s=s.fallback,c?(ol(),c=t.mode,S=Xr({mode:"hidden",children:S},c),s=_l(s,c,l,null),S.return=t,s.return=t,S.sibling=s,t.child=S,s=t.child,s.memoizedState=go(l),s.childLanes=vo(e,m,l),t.memoizedState=yo,Ns(null,s)):(cl(t),No(t,S))}var _=e.memoizedState;if(_!==null&&(S=_.dehydrated,S!==null)){if(o)t.flags&256?(cl(t),t.flags&=-257,t=jo(e,t,l)):t.memoizedState!==null?(ol(),t.child=e.child,t.flags|=128,t=null):(ol(),S=s.fallback,c=t.mode,s=Xr({mode:"visible",children:s.children},c),S=_l(S,c,l,null),S.flags|=2,s.return=t,S.return=t,s.sibling=S,t.child=s,Gl(t,e.child,null,l),s=t.child,s.memoizedState=go(l),s.childLanes=vo(e,m,l),t.memoizedState=yo,t=Ns(null,s));else if(cl(t),ad(S)){if(m=S.nextSibling&&S.nextSibling.dataset,m)var Y=m.dgst;m=Y,s=Error(d(419)),s.stack="",s.digest=m,os({value:s,source:null,stack:null}),t=jo(e,t,l)}else if(Nt||gn(e,t,l,!1),m=(l&e.childLanes)!==0,Nt||m){if(m=st,m!==null&&(s=pu(m,l),s!==0&&s!==_.retryLane))throw _.retryLane=s,Rl(e,s),Zt(m,e,s),ho;td(S)||li(),t=jo(e,t,l)}else td(S)?(t.flags|=192,t.child=e.child,t=null):(e=_.treeContext,ct=ha(S.nextSibling),Mt=t,Ve=!0,al=null,ma=!1,e!==null&&ff(t,e),t=No(t,s.children),t.flags|=4096);return t}return c?(ol(),S=s.fallback,c=t.mode,_=e.child,Y=_.sibling,s=Ba(_,{mode:"hidden",children:s.children}),s.subtreeFlags=_.subtreeFlags&65011712,Y!==null?S=Ba(Y,S):(S=_l(S,c,l,null),S.flags|=2),S.return=t,s.return=t,s.sibling=S,t.child=s,Ns(null,s),s=t.child,S=e.child.memoizedState,S===null?S=go(l):(c=S.cachePool,c!==null?(_=gt._currentValue,c=c.parent!==_?{parent:_,pool:_}:c):c=yf(),S={baseLanes:S.baseLanes|l,cachePool:c}),s.memoizedState=S,s.childLanes=vo(e,m,l),t.memoizedState=yo,Ns(e.child,s)):(cl(t),l=e.child,e=l.sibling,l=Ba(l,{mode:"visible",children:s.children}),l.return=t,l.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=l,t.memoizedState=null,l)}function No(e,t){return t=Xr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Xr(e,t){return e=Wt(22,e,null,t),e.lanes=0,e}function jo(e,t,l){return Gl(t,e.child,null,l),e=No(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ox(e,t,l){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Lc(e.return,t,l)}function So(e,t,l,s,c,o){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:l,tailMode:c,treeForkCount:o}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=s,m.tail=l,m.tailMode=c,m.treeForkCount=o)}function Mx(e,t,l){var s=t.pendingProps,c=s.revealOrder,o=s.tail;s=s.children;var m=ht.current,S=(m&2)!==0;if(S?(m=m&1|2,t.flags|=128):m&=1,ae(ht,m),_t(e,t,s,l),s=Ve?cs:0,!S&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ox(e,l,t);else if(e.tag===19)Ox(e,l,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(l=t.child,c=null;l!==null;)e=l.alternate,e!==null&&Lr(e)===null&&(c=l),l=l.sibling;l=c,l===null?(c=t.child,t.child=null):(c=l.sibling,l.sibling=null),So(t,!1,c,l,o,s);break;case"backwards":case"unstable_legacy-backwards":for(l=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Lr(e)===null){t.child=c;break}e=c.sibling,c.sibling=l,l=c,c=e}So(t,!0,l,null,o,s);break;case"together":So(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Ia(e,t,l){if(e!==null&&(t.dependencies=e.dependencies),fl|=t.lanes,(l&t.childLanes)===0)if(e!==null){if(gn(e,t,l,!1),(l&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(d(153));if(t.child!==null){for(e=t.child,l=Ba(e,e.pendingProps),t.child=l,l.return=t;e.sibling!==null;)e=e.sibling,l=l.sibling=Ba(e,e.pendingProps),l.return=t;l.sibling=null}return t.child}function wo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Er(e)))}function qy(e,t,l){switch(t.tag){case 3:ie(t,t.stateNode.containerInfo),nl(t,gt,e.memoizedState.cache),zl();break;case 27:case 5:Ae(t);break;case 4:ie(t,t.stateNode.containerInfo);break;case 10:nl(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Xc(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(cl(t),t.flags|=128,null):(l&t.child.childLanes)!==0?kx(e,t,l):(cl(t),e=Ia(e,t,l),e!==null?e.sibling:null);cl(t);break;case 19:var c=(e.flags&128)!==0;if(s=(l&t.childLanes)!==0,s||(gn(e,t,l,!1),s=(l&t.childLanes)!==0),c){if(s)return Mx(e,t,l);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ae(ht,ht.current),s)break;return null;case 22:return t.lanes=0,wx(e,t,l,t.pendingProps);case 24:nl(t,gt,e.memoizedState.cache)}return Ia(e,t,l)}function Rx(e,t,l){if(e!==null)if(e.memoizedProps!==t.pendingProps)Nt=!0;else{if(!wo(e,l)&&(t.flags&128)===0)return Nt=!1,qy(e,t,l);Nt=(e.flags&131072)!==0}else Nt=!1,Ve&&(t.flags&1048576)!==0&&uf(t,cs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=$l(t.elementType),t.type=e,typeof e=="function")Ec(e)?(s=Il(e,s),t.tag=1,t=Ex(null,t,e,s,l)):(t.tag=0,t=bo(null,t,e,s,l));else{if(e!=null){var c=e.$$typeof;if(c===B){t.tag=11,t=Nx(null,t,e,s,l);break e}else if(c===U){t.tag=14,t=jx(null,t,e,s,l);break e}}throw t=ge(e)||e,Error(d(306,t,""))}}return t;case 0:return bo(e,t,t.type,t.pendingProps,l);case 1:return s=t.type,c=Il(s,t.pendingProps),Ex(e,t,s,c,l);case 3:e:{if(ie(t,t.stateNode.containerInfo),e===null)throw Error(d(387));s=t.pendingProps;var o=t.memoizedState;c=o.element,Ic(e,t),hs(t,s,null,l);var m=t.memoizedState;if(s=m.cache,nl(t,gt,s),s!==o.cache&&Bc(t,[gt],l,!0),ps(),s=m.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Tx(e,t,s,l);break e}else if(s!==c){c=ua(Error(d(424)),t),os(c),t=Tx(e,t,s,l);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,ct=ha(e.firstChild),Mt=t,Ve=!0,al=null,ma=!0,l=wf(t,null,s,l),t.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(zl(),s===c){t=Ia(e,t,l);break e}_t(e,t,s,l)}t=t.child}return t;case 26:return Kr(e,t),e===null?(l=Vm(t.type,null,t.pendingProps,null))?t.memoizedState=l:Ve||(l=t.type,e=t.pendingProps,s=di(ye.current).createElement(l),s[Ot]=t,s[It]=e,zt(s,l,e),Ct(s),t.stateNode=s):t.memoizedState=Vm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ae(t),e===null&&Ve&&(s=t.stateNode=Gm(t.type,t.pendingProps,ye.current),Mt=t,ma=!0,c=ct,bl(t.type)?(ld=c,ct=ha(s.firstChild)):ct=c),_t(e,t,t.pendingProps.children,l),Kr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ve&&((c=s=ct)&&(s=yg(s,t.type,t.pendingProps,ma),s!==null?(t.stateNode=s,Mt=t,ct=ha(s.firstChild),ma=!1,c=!0):c=!1),c||ll(t)),Ae(t),c=t.type,o=t.pendingProps,m=e!==null?e.memoizedProps:null,s=o.children,Fo(c,o)?s=null:m!==null&&Fo(c,m)&&(t.flags|=32),t.memoizedState!==null&&(c=Pc(e,t,Ry,null,null,l),Ls._currentValue=c),Kr(e,t),_t(e,t,s,l),t.child;case 6:return e===null&&Ve&&((e=l=ct)&&(l=gg(l,t.pendingProps,ma),l!==null?(t.stateNode=l,Mt=t,ct=null,e=!0):e=!1),e||ll(t)),null;case 13:return kx(e,t,l);case 4:return ie(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Gl(t,null,s,l):_t(e,t,s,l),t.child;case 11:return Nx(e,t,t.type,t.pendingProps,l);case 7:return _t(e,t,t.pendingProps,l),t.child;case 8:return _t(e,t,t.pendingProps.children,l),t.child;case 12:return _t(e,t,t.pendingProps.children,l),t.child;case 10:return s=t.pendingProps,nl(t,t.type,s.value),_t(e,t,s.children,l),t.child;case 9:return c=t.type._context,s=t.pendingProps.children,Bl(t),c=Rt(c),s=s(c),t.flags|=1,_t(e,t,s,l),t.child;case 14:return jx(e,t,t.type,t.pendingProps,l);case 15:return Sx(e,t,t.type,t.pendingProps,l);case 19:return Mx(e,t,l);case 31:return Gy(e,t,l);case 22:return wx(e,t,l,t.pendingProps);case 24:return Bl(t),s=Rt(gt),e===null?(c=Hc(),c===null&&(c=st,o=Uc(),c.pooledCache=o,o.refCount++,o!==null&&(c.pooledCacheLanes|=l),c=o),t.memoizedState={parent:s,cache:c},qc(t),nl(t,gt,c)):((e.lanes&l)!==0&&(Ic(e,t),hs(t,null,null,l),ps()),c=e.memoizedState,o=t.memoizedState,c.parent!==s?(c={parent:s,cache:s},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),nl(t,gt,s)):(s=o.cache,nl(t,gt,s),s!==c.cache&&Bc(t,[gt],l,!0))),_t(e,t,t.pendingProps.children,l),t.child;case 29:throw t.pendingProps}throw Error(d(156,t.tag))}function Va(e){e.flags|=4}function Do(e,t,l,s,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(rm())e.flags|=8192;else throw Hl=Mr,Gc}else e.flags&=-16777217}function _x(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Zm(t))if(rm())e.flags|=8192;else throw Hl=Mr,Gc}function Zr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?fu():536870912,e.lanes|=t,On|=t)}function js(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var l=null;t!==null;)t.alternate!==null&&(l=t),t=t.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var s=null;l!==null;)l.alternate!==null&&(s=l),l=l.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,l=0,s=0;if(t)for(var c=e.child;c!==null;)l|=c.lanes|c.childLanes,s|=c.subtreeFlags&65011712,s|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)l|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=l,t}function Iy(e,t,l){var s=t.pendingProps;switch(Mc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(t),null;case 1:return ot(t),null;case 3:return l=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Ha(gt),me(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(yn(t)?Va(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,_c())),ot(t),null;case 26:var c=t.type,o=t.memoizedState;return e===null?(Va(t),o!==null?(ot(t),_x(t,o)):(ot(t),Do(t,c,null,s,l))):o?o!==e.memoizedState?(Va(t),ot(t),_x(t,o)):(ot(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&Va(t),ot(t),Do(t,c,e,s,l)),null;case 27:if(xe(t),l=ye.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Va(t);else{if(!s){if(t.stateNode===null)throw Error(d(166));return ot(t),null}e=se.current,yn(t)?xf(t):(e=Gm(c,s,l),t.stateNode=e,Va(t))}return ot(t),null;case 5:if(xe(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Va(t);else{if(!s){if(t.stateNode===null)throw Error(d(166));return ot(t),null}if(o=se.current,yn(t))xf(t);else{var m=di(ye.current);switch(o){case 1:o=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:o=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":o=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":o=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":o=m.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof s.is=="string"?m.createElement("select",{is:s.is}):m.createElement("select"),s.multiple?o.multiple=!0:s.size&&(o.size=s.size);break;default:o=typeof s.is=="string"?m.createElement(c,{is:s.is}):m.createElement(c)}}o[Ot]=t,o[It]=s;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=o;e:switch(zt(o,c,s),c){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Va(t)}}return ot(t),Do(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,l),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Va(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(d(166));if(e=ye.current,yn(t)){if(e=t.stateNode,l=t.memoizedProps,s=null,c=Mt,c!==null)switch(c.tag){case 27:case 5:s=c.memoizedProps}e[Ot]=t,e=!!(e.nodeValue===l||s!==null&&s.suppressHydrationWarning===!0||km(e.nodeValue,l)),e||ll(t,!0)}else e=di(e).createTextNode(s),e[Ot]=t,t.stateNode=e}return ot(t),null;case 31:if(l=t.memoizedState,e===null||e.memoizedState!==null){if(s=yn(t),l!==null){if(e===null){if(!s)throw Error(d(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(557));e[Ot]=t}else zl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ot(t),e=!1}else l=_c(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return t.flags&256?(ta(t),t):(ta(t),null);if((t.flags&128)!==0)throw Error(d(558))}return ot(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=yn(t),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(d(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(d(317));c[Ot]=t}else zl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ot(t),c=!1}else c=_c(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(ta(t),t):(ta(t),null)}return ta(t),(t.flags&128)!==0?(t.lanes=l,t):(l=s!==null,e=e!==null&&e.memoizedState!==null,l&&(s=t.child,c=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(c=s.alternate.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==c&&(s.flags|=2048)),l!==e&&l&&(t.child.flags|=8192),Zr(t,t.updateQueue),ot(t),null);case 4:return me(),e===null&&Ko(t.stateNode.containerInfo),ot(t),null;case 10:return Ha(t.type),ot(t),null;case 19:if(K(ht),s=t.memoizedState,s===null)return ot(t),null;if(c=(t.flags&128)!==0,o=s.rendering,o===null)if(c)js(s,!1);else{if(pt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Lr(e),o!==null){for(t.flags|=128,js(s,!1),e=o.updateQueue,t.updateQueue=e,Zr(t,e),t.subtreeFlags=0,e=l,l=t.child;l!==null;)cf(l,e),l=l.sibling;return ae(ht,ht.current&1|2),Ve&&Ua(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&ee()>ei&&(t.flags|=128,c=!0,js(s,!1),t.lanes=4194304)}else{if(!c)if(e=Lr(o),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Zr(t,e),js(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ve)return ot(t),null}else 2*ee()-s.renderingStartTime>ei&&l!==536870912&&(t.flags|=128,c=!0,js(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(e=s.last,e!==null?e.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ee(),e.sibling=null,l=ht.current,ae(ht,c?l&1|2:l&1),Ve&&Ua(t,s.treeForkCount),e):(ot(t),null);case 22:case 23:return ta(t),Kc(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(l&536870912)!==0&&(t.flags&128)===0&&(ot(t),t.subtreeFlags&6&&(t.flags|=8192)):ot(t),l=t.updateQueue,l!==null&&Zr(t,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==l&&(t.flags|=2048),e!==null&&K(Ul),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Ha(gt),ot(t),null;case 25:return null;case 30:return null}throw Error(d(156,t.tag))}function Vy(e,t){switch(Mc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ha(gt),me(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return xe(t),null;case 31:if(t.memoizedState!==null){if(ta(t),t.alternate===null)throw Error(d(340));zl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ta(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(d(340));zl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return K(ht),null;case 4:return me(),null;case 10:return Ha(t.type),null;case 22:case 23:return ta(t),Kc(),e!==null&&K(Ul),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ha(gt),null;case 25:return null;default:return null}}function zx(e,t){switch(Mc(t),t.tag){case 3:Ha(gt),me();break;case 26:case 27:case 5:xe(t);break;case 4:me();break;case 31:t.memoizedState!==null&&ta(t);break;case 13:ta(t);break;case 19:K(ht);break;case 10:Ha(t.type);break;case 22:case 23:ta(t),Kc(),e!==null&&K(Ul);break;case 24:Ha(gt)}}function Ss(e,t){try{var l=t.updateQueue,s=l!==null?l.lastEffect:null;if(s!==null){var c=s.next;l=c;do{if((l.tag&e)===e){s=void 0;var o=l.create,m=l.inst;s=o(),m.destroy=s}l=l.next}while(l!==c)}}catch(S){et(t,t.return,S)}}function dl(e,t,l){try{var s=t.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var o=c.next;s=o;do{if((s.tag&e)===e){var m=s.inst,S=m.destroy;if(S!==void 0){m.destroy=void 0,c=t;var _=l,Y=S;try{Y()}catch(Z){et(c,_,Z)}}}s=s.next}while(s!==o)}}catch(Z){et(t,t.return,Z)}}function Lx(e){var t=e.updateQueue;if(t!==null){var l=e.stateNode;try{Cf(t,l)}catch(s){et(e,e.return,s)}}}function Bx(e,t,l){l.props=Il(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(s){et(e,t,s)}}function ws(e,t){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof l=="function"?e.refCleanup=l(s):l.current=s}}catch(c){et(e,t,c)}}function Ea(e,t){var l=e.ref,s=e.refCleanup;if(l!==null)if(typeof s=="function")try{s()}catch(c){et(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(c){et(e,t,c)}else l.current=null}function Ux(e){var t=e.type,l=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":l.autoFocus&&s.focus();break e;case"img":l.src?s.src=l.src:l.srcSet&&(s.srcset=l.srcSet)}}catch(c){et(e,e.return,c)}}function Co(e,t,l){try{var s=e.stateNode;fg(s,e.type,l,t),s[It]=t}catch(c){et(e,e.return,c)}}function $x(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&bl(e.type)||e.tag===4}function Ao(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$x(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&bl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Eo(e,t,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,t):(t=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,t.appendChild(e),l=l._reactRootContainer,l!=null||t.onclick!==null||(t.onclick=za));else if(s!==4&&(s===27&&bl(e.type)&&(l=e.stateNode,t=null),e=e.child,e!==null))for(Eo(e,t,l),e=e.sibling;e!==null;)Eo(e,t,l),e=e.sibling}function Pr(e,t,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?l.insertBefore(e,t):l.appendChild(e);else if(s!==4&&(s===27&&bl(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Pr(e,t,l),e=e.sibling;e!==null;)Pr(e,t,l),e=e.sibling}function Hx(e){var t=e.stateNode,l=e.memoizedProps;try{for(var s=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);zt(t,s,l),t[Ot]=e,t[It]=l}catch(o){et(e,e.return,o)}}var Ya=!1,jt=!1,To=!1,Gx=typeof WeakSet=="function"?WeakSet:Set,At=null;function Yy(e,t){if(e=e.containerInfo,Po=bi,e=Fu(e),Nc(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var s=l.getSelection&&l.getSelection();if(s&&s.rangeCount!==0){l=s.anchorNode;var c=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{l.nodeType,o.nodeType}catch{l=null;break e}var m=0,S=-1,_=-1,Y=0,Z=0,le=e,Q=null;t:for(;;){for(var X;le!==l||c!==0&&le.nodeType!==3||(S=m+c),le!==o||s!==0&&le.nodeType!==3||(_=m+s),le.nodeType===3&&(m+=le.nodeValue.length),(X=le.firstChild)!==null;)Q=le,le=X;for(;;){if(le===e)break t;if(Q===l&&++Y===c&&(S=m),Q===o&&++Z===s&&(_=m),(X=le.nextSibling)!==null)break;le=Q,Q=le.parentNode}le=X}l=S===-1||_===-1?null:{start:S,end:_}}else l=null}l=l||{start:0,end:0}}else l=null;for(Jo={focusedElem:e,selectionRange:l},bi=!1,At=t;At!==null;)if(t=At,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,At=e;else for(;At!==null;){switch(t=At,o=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)c=e[l],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,l=t,c=o.memoizedProps,o=o.memoizedState,s=l.stateNode;try{var be=Il(l.type,c);e=s.getSnapshotBeforeUpdate(be,o),s.__reactInternalSnapshotBeforeUpdate=e}catch(De){et(l,l.return,De)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,l=e.nodeType,l===9)ed(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ed(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=t.sibling,e!==null){e.return=t.return,At=e;break}At=t.return}}function qx(e,t,l){var s=l.flags;switch(l.tag){case 0:case 11:case 15:Ka(e,l),s&4&&Ss(5,l);break;case 1:if(Ka(e,l),s&4)if(e=l.stateNode,t===null)try{e.componentDidMount()}catch(m){et(l,l.return,m)}else{var c=Il(l.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){et(l,l.return,m)}}s&64&&Lx(l),s&512&&ws(l,l.return);break;case 3:if(Ka(e,l),s&64&&(e=l.updateQueue,e!==null)){if(t=null,l.child!==null)switch(l.child.tag){case 27:case 5:t=l.child.stateNode;break;case 1:t=l.child.stateNode}try{Cf(e,t)}catch(m){et(l,l.return,m)}}break;case 27:t===null&&s&4&&Hx(l);case 26:case 5:Ka(e,l),t===null&&s&4&&Ux(l),s&512&&ws(l,l.return);break;case 12:Ka(e,l);break;case 31:Ka(e,l),s&4&&Yx(e,l);break;case 13:Ka(e,l),s&4&&Qx(e,l),s&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=eg.bind(null,l),vg(e,l))));break;case 22:if(s=l.memoizedState!==null||Ya,!s){t=t!==null&&t.memoizedState!==null||jt,c=Ya;var o=jt;Ya=s,(jt=t)&&!o?Xa(e,l,(l.subtreeFlags&8772)!==0):Ka(e,l),Ya=c,jt=o}break;case 30:break;default:Ka(e,l)}}function Ix(e){var t=e.alternate;t!==null&&(e.alternate=null,Ix(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&nc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var dt=null,Yt=!1;function Qa(e,t,l){for(l=l.child;l!==null;)Vx(e,t,l),l=l.sibling}function Vx(e,t,l){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(yt,l)}catch{}switch(l.tag){case 26:jt||Ea(l,t),Qa(e,t,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:jt||Ea(l,t);var s=dt,c=Yt;bl(l.type)&&(dt=l.stateNode,Yt=!1),Qa(e,t,l),Rs(l.stateNode),dt=s,Yt=c;break;case 5:jt||Ea(l,t);case 6:if(s=dt,c=Yt,dt=null,Qa(e,t,l),dt=s,Yt=c,dt!==null)if(Yt)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(l.stateNode)}catch(o){et(l,t,o)}else try{dt.removeChild(l.stateNode)}catch(o){et(l,t,o)}break;case 18:dt!==null&&(Yt?(e=dt,Lm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),$n(e)):Lm(dt,l.stateNode));break;case 4:s=dt,c=Yt,dt=l.stateNode.containerInfo,Yt=!0,Qa(e,t,l),dt=s,Yt=c;break;case 0:case 11:case 14:case 15:dl(2,l,t),jt||dl(4,l,t),Qa(e,t,l);break;case 1:jt||(Ea(l,t),s=l.stateNode,typeof s.componentWillUnmount=="function"&&Bx(l,t,s)),Qa(e,t,l);break;case 21:Qa(e,t,l);break;case 22:jt=(s=jt)||l.memoizedState!==null,Qa(e,t,l),jt=s;break;default:Qa(e,t,l)}}function Yx(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{$n(e)}catch(l){et(t,t.return,l)}}}function Qx(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{$n(e)}catch(l){et(t,t.return,l)}}function Qy(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Gx),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Gx),t;default:throw Error(d(435,e.tag))}}function Jr(e,t){var l=Qy(e);t.forEach(function(s){if(!l.has(s)){l.add(s);var c=tg.bind(null,e,s);s.then(c,c)}})}function Qt(e,t){var l=t.deletions;if(l!==null)for(var s=0;s<l.length;s++){var c=l[s],o=e,m=t,S=m;e:for(;S!==null;){switch(S.tag){case 27:if(bl(S.type)){dt=S.stateNode,Yt=!1;break e}break;case 5:dt=S.stateNode,Yt=!1;break e;case 3:case 4:dt=S.stateNode.containerInfo,Yt=!0;break e}S=S.return}if(dt===null)throw Error(d(160));Vx(o,m,c),dt=null,Yt=!1,o=c.alternate,o!==null&&(o.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Kx(t,e),t=t.sibling}var ja=null;function Kx(e,t){var l=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qt(t,e),Kt(e),s&4&&(dl(3,e,e.return),Ss(3,e),dl(5,e,e.return));break;case 1:Qt(t,e),Kt(e),s&512&&(jt||l===null||Ea(l,l.return)),s&64&&Ya&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?s:l.concat(s))));break;case 26:var c=ja;if(Qt(t,e),Kt(e),s&512&&(jt||l===null||Ea(l,l.return)),s&4){var o=l!==null?l.memoizedState:null;if(s=e.memoizedState,l===null)if(s===null)if(e.stateNode===null){e:{s=e.type,l=e.memoizedProps,c=c.ownerDocument||c;t:switch(s){case"title":o=c.getElementsByTagName("title")[0],(!o||o[Jn]||o[Ot]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=c.createElement(s),c.head.insertBefore(o,c.querySelector("head > title"))),zt(o,s,l),o[Ot]=e,Ct(o),s=o;break e;case"link":var m=Km("link","href",c).get(s+(l.href||""));if(m){for(var S=0;S<m.length;S++)if(o=m[S],o.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&o.getAttribute("rel")===(l.rel==null?null:l.rel)&&o.getAttribute("title")===(l.title==null?null:l.title)&&o.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){m.splice(S,1);break t}}o=c.createElement(s),zt(o,s,l),c.head.appendChild(o);break;case"meta":if(m=Km("meta","content",c).get(s+(l.content||""))){for(S=0;S<m.length;S++)if(o=m[S],o.getAttribute("content")===(l.content==null?null:""+l.content)&&o.getAttribute("name")===(l.name==null?null:l.name)&&o.getAttribute("property")===(l.property==null?null:l.property)&&o.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&o.getAttribute("charset")===(l.charSet==null?null:l.charSet)){m.splice(S,1);break t}}o=c.createElement(s),zt(o,s,l),c.head.appendChild(o);break;default:throw Error(d(468,s))}o[Ot]=e,Ct(o),s=o}e.stateNode=s}else Xm(c,e.type,e.stateNode);else e.stateNode=Qm(c,s,e.memoizedProps);else o!==s?(o===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):o.count--,s===null?Xm(c,e.type,e.stateNode):Qm(c,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Co(e,e.memoizedProps,l.memoizedProps)}break;case 27:Qt(t,e),Kt(e),s&512&&(jt||l===null||Ea(l,l.return)),l!==null&&s&4&&Co(e,e.memoizedProps,l.memoizedProps);break;case 5:if(Qt(t,e),Kt(e),s&512&&(jt||l===null||Ea(l,l.return)),e.flags&32){c=e.stateNode;try{cn(c,"")}catch(be){et(e,e.return,be)}}s&4&&e.stateNode!=null&&(c=e.memoizedProps,Co(e,c,l!==null?l.memoizedProps:c)),s&1024&&(To=!0);break;case 6:if(Qt(t,e),Kt(e),s&4){if(e.stateNode===null)throw Error(d(162));s=e.memoizedProps,l=e.stateNode;try{l.nodeValue=s}catch(be){et(e,e.return,be)}}break;case 3:if(xi=null,c=ja,ja=ui(t.containerInfo),Qt(t,e),ja=c,Kt(e),s&4&&l!==null&&l.memoizedState.isDehydrated)try{$n(t.containerInfo)}catch(be){et(e,e.return,be)}To&&(To=!1,Xx(e));break;case 4:s=ja,ja=ui(e.stateNode.containerInfo),Qt(t,e),Kt(e),ja=s;break;case 12:Qt(t,e),Kt(e);break;case 31:Qt(t,e),Kt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Jr(e,s)));break;case 13:Qt(t,e),Kt(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Wr=ee()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Jr(e,s)));break;case 22:c=e.memoizedState!==null;var _=l!==null&&l.memoizedState!==null,Y=Ya,Z=jt;if(Ya=Y||c,jt=Z||_,Qt(t,e),jt=Z,Ya=Y,Kt(e),s&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(l===null||_||Ya||jt||Vl(e)),l=null,t=e;;){if(t.tag===5||t.tag===26){if(l===null){_=l=t;try{if(o=_.stateNode,c)m=o.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{S=_.stateNode;var le=_.memoizedProps.style,Q=le!=null&&le.hasOwnProperty("display")?le.display:null;S.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(be){et(_,_.return,be)}}}else if(t.tag===6){if(l===null){_=t;try{_.stateNode.nodeValue=c?"":_.memoizedProps}catch(be){et(_,_.return,be)}}}else if(t.tag===18){if(l===null){_=t;try{var X=_.stateNode;c?Bm(X,!0):Bm(_.stateNode,!1)}catch(be){et(_,_.return,be)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;l===t&&(l=null),t=t.return}l===t&&(l=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(l=s.retryQueue,l!==null&&(s.retryQueue=null,Jr(e,l))));break;case 19:Qt(t,e),Kt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Jr(e,s)));break;case 30:break;case 21:break;default:Qt(t,e),Kt(e)}}function Kt(e){var t=e.flags;if(t&2){try{for(var l,s=e.return;s!==null;){if($x(s)){l=s;break}s=s.return}if(l==null)throw Error(d(160));switch(l.tag){case 27:var c=l.stateNode,o=Ao(e);Pr(e,o,c);break;case 5:var m=l.stateNode;l.flags&32&&(cn(m,""),l.flags&=-33);var S=Ao(e);Pr(e,S,m);break;case 3:case 4:var _=l.stateNode.containerInfo,Y=Ao(e);Eo(e,Y,_);break;default:throw Error(d(161))}}catch(Z){et(e,e.return,Z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Xx(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Xx(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ka(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)qx(e,t.alternate,t),t=t.sibling}function Vl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:dl(4,t,t.return),Vl(t);break;case 1:Ea(t,t.return);var l=t.stateNode;typeof l.componentWillUnmount=="function"&&Bx(t,t.return,l),Vl(t);break;case 27:Rs(t.stateNode);case 26:case 5:Ea(t,t.return),Vl(t);break;case 22:t.memoizedState===null&&Vl(t);break;case 30:Vl(t);break;default:Vl(t)}e=e.sibling}}function Xa(e,t,l){for(l=l&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,c=e,o=t,m=o.flags;switch(o.tag){case 0:case 11:case 15:Xa(c,o,l),Ss(4,o);break;case 1:if(Xa(c,o,l),s=o,c=s.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(Y){et(s,s.return,Y)}if(s=o,c=s.updateQueue,c!==null){var S=s.stateNode;try{var _=c.shared.hiddenCallbacks;if(_!==null)for(c.shared.hiddenCallbacks=null,c=0;c<_.length;c++)Df(_[c],S)}catch(Y){et(s,s.return,Y)}}l&&m&64&&Lx(o),ws(o,o.return);break;case 27:Hx(o);case 26:case 5:Xa(c,o,l),l&&s===null&&m&4&&Ux(o),ws(o,o.return);break;case 12:Xa(c,o,l);break;case 31:Xa(c,o,l),l&&m&4&&Yx(c,o);break;case 13:Xa(c,o,l),l&&m&4&&Qx(c,o);break;case 22:o.memoizedState===null&&Xa(c,o,l),ws(o,o.return);break;case 30:break;default:Xa(c,o,l)}t=t.sibling}}function ko(e,t){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&ds(l))}function Oo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ds(e))}function Sa(e,t,l,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zx(e,t,l,s),t=t.sibling}function Zx(e,t,l,s){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Sa(e,t,l,s),c&2048&&Ss(9,t);break;case 1:Sa(e,t,l,s);break;case 3:Sa(e,t,l,s),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ds(e)));break;case 12:if(c&2048){Sa(e,t,l,s),e=t.stateNode;try{var o=t.memoizedProps,m=o.id,S=o.onPostCommit;typeof S=="function"&&S(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(_){et(t,t.return,_)}}else Sa(e,t,l,s);break;case 31:Sa(e,t,l,s);break;case 13:Sa(e,t,l,s);break;case 23:break;case 22:o=t.stateNode,m=t.alternate,t.memoizedState!==null?o._visibility&2?Sa(e,t,l,s):Ds(e,t):o._visibility&2?Sa(e,t,l,s):(o._visibility|=2,En(e,t,l,s,(t.subtreeFlags&10256)!==0||!1)),c&2048&&ko(m,t);break;case 24:Sa(e,t,l,s),c&2048&&Oo(t.alternate,t);break;default:Sa(e,t,l,s)}}function En(e,t,l,s,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=e,m=t,S=l,_=s,Y=m.flags;switch(m.tag){case 0:case 11:case 15:En(o,m,S,_,c),Ss(8,m);break;case 23:break;case 22:var Z=m.stateNode;m.memoizedState!==null?Z._visibility&2?En(o,m,S,_,c):Ds(o,m):(Z._visibility|=2,En(o,m,S,_,c)),c&&Y&2048&&ko(m.alternate,m);break;case 24:En(o,m,S,_,c),c&&Y&2048&&Oo(m.alternate,m);break;default:En(o,m,S,_,c)}t=t.sibling}}function Ds(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var l=e,s=t,c=s.flags;switch(s.tag){case 22:Ds(l,s),c&2048&&ko(s.alternate,s);break;case 24:Ds(l,s),c&2048&&Oo(s.alternate,s);break;default:Ds(l,s)}t=t.sibling}}var Cs=8192;function Tn(e,t,l){if(e.subtreeFlags&Cs)for(e=e.child;e!==null;)Px(e,t,l),e=e.sibling}function Px(e,t,l){switch(e.tag){case 26:Tn(e,t,l),e.flags&Cs&&e.memoizedState!==null&&Mg(l,ja,e.memoizedState,e.memoizedProps);break;case 5:Tn(e,t,l);break;case 3:case 4:var s=ja;ja=ui(e.stateNode.containerInfo),Tn(e,t,l),ja=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Cs,Cs=16777216,Tn(e,t,l),Cs=s):Tn(e,t,l));break;default:Tn(e,t,l)}}function Jx(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function As(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var s=t[l];At=s,Wx(s,e)}Jx(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Fx(e),e=e.sibling}function Fx(e){switch(e.tag){case 0:case 11:case 15:As(e),e.flags&2048&&dl(9,e,e.return);break;case 3:As(e);break;case 12:As(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Fr(e)):As(e);break;default:As(e)}}function Fr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var s=t[l];At=s,Wx(s,e)}Jx(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:dl(8,t,t.return),Fr(t);break;case 22:l=t.stateNode,l._visibility&2&&(l._visibility&=-3,Fr(t));break;default:Fr(t)}e=e.sibling}}function Wx(e,t){for(;At!==null;){var l=At;switch(l.tag){case 0:case 11:case 15:dl(8,l,t);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var s=l.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:ds(l.memoizedState.cache)}if(s=l.child,s!==null)s.return=l,At=s;else e:for(l=e;At!==null;){s=At;var c=s.sibling,o=s.return;if(Ix(s),s===l){At=null;break e}if(c!==null){c.return=o,At=c;break e}At=o}}}var Ky={getCacheForType:function(e){var t=Rt(gt),l=t.data.get(e);return l===void 0&&(l=e(),t.data.set(e,l)),l},cacheSignal:function(){return Rt(gt).controller.signal}},Xy=typeof WeakMap=="function"?WeakMap:Map,Ze=0,st=null,$e=null,qe=0,We=0,aa=null,ul=!1,kn=!1,Mo=!1,Za=0,pt=0,fl=0,Yl=0,Ro=0,la=0,On=0,Es=null,Xt=null,_o=!1,Wr=0,em=0,ei=1/0,ti=null,xl=null,wt=0,ml=null,Mn=null,Pa=0,zo=0,Lo=null,tm=null,Ts=0,Bo=null;function na(){return(Ze&2)!==0&&qe!==0?qe&-qe:H.T!==null?Io():hu()}function am(){if(la===0)if((qe&536870912)===0||Ve){var e=or;or<<=1,(or&3932160)===0&&(or=262144),la=e}else la=536870912;return e=ea.current,e!==null&&(e.flags|=32),la}function Zt(e,t,l){(e===st&&(We===2||We===9)||e.cancelPendingCommit!==null)&&(Rn(e,0),pl(e,qe,la,!1)),Pn(e,l),((Ze&2)===0||e!==st)&&(e===st&&((Ze&2)===0&&(Yl|=l),pt===4&&pl(e,qe,la,!1)),Ta(e))}function lm(e,t,l){if((Ze&6)!==0)throw Error(d(327));var s=!l&&(t&127)===0&&(t&e.expiredLanes)===0||Zn(e,t),c=s?Jy(e,t):$o(e,t,!0),o=s;do{if(c===0){kn&&!s&&pl(e,t,0,!1);break}else{if(l=e.current.alternate,o&&!Zy(l)){c=$o(e,t,!1),o=!1;continue}if(c===2){if(o=t,e.errorRecoveryDisabledLanes&o)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var S=e;c=Es;var _=S.current.memoizedState.isDehydrated;if(_&&(Rn(S,m).flags|=256),m=$o(S,m,!1),m!==2){if(Mo&&!_){S.errorRecoveryDisabledLanes|=o,Yl|=o,c=4;break e}o=Xt,Xt=c,o!==null&&(Xt===null?Xt=o:Xt.push.apply(Xt,o))}c=m}if(o=!1,c!==2)continue}}if(c===1){Rn(e,0),pl(e,t,0,!0);break}e:{switch(s=e,o=c,o){case 0:case 1:throw Error(d(345));case 4:if((t&4194048)!==t)break;case 6:pl(s,t,la,!ul);break e;case 2:Xt=null;break;case 3:case 5:break;default:throw Error(d(329))}if((t&62914560)===t&&(c=Wr+300-ee(),10<c)){if(pl(s,t,la,!ul),ur(s,0,!0)!==0)break e;Pa=t,s.timeoutHandle=_m(nm.bind(null,s,l,Xt,ti,_o,t,la,Yl,On,ul,o,"Throttled",-0,0),c);break e}nm(s,l,Xt,ti,_o,t,la,Yl,On,ul,o,null,-0,0)}}break}while(!0);Ta(e)}function nm(e,t,l,s,c,o,m,S,_,Y,Z,le,Q,X){if(e.timeoutHandle=-1,le=t.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:za},Px(t,o,le);var be=(o&62914560)===o?Wr-ee():(o&4194048)===o?em-ee():0;if(be=Rg(le,be),be!==null){Pa=o,e.cancelPendingCommit=be(fm.bind(null,e,t,o,l,s,c,m,S,_,Z,le,null,Q,X)),pl(e,o,m,!Y);return}}fm(e,t,o,l,s,c,m,S,_)}function Zy(e){for(var t=e;;){var l=t.tag;if((l===0||l===11||l===15)&&t.flags&16384&&(l=t.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var s=0;s<l.length;s++){var c=l[s],o=c.getSnapshot;c=c.value;try{if(!Ft(o(),c))return!1}catch{return!1}}if(l=t.child,t.subtreeFlags&16384&&l!==null)l.return=t,t=l;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pl(e,t,l,s){t&=~Ro,t&=~Yl,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var c=t;0<c;){var o=31-Jt(c),m=1<<o;s[o]=-1,c&=~m}l!==0&&xu(e,l,t)}function ai(){return(Ze&6)===0?(ks(0),!1):!0}function Uo(){if($e!==null){if(We===0)var e=$e.return;else e=$e,$a=Ll=null,Wc(e),Sn=null,fs=0,e=$e;for(;e!==null;)zx(e.alternate,e),e=e.return;$e=null}}function Rn(e,t){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,pg(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),Pa=0,Uo(),st=e,$e=l=Ba(e.current,null),qe=t,We=0,aa=null,ul=!1,kn=Zn(e,t),Mo=!1,On=la=Ro=Yl=fl=pt=0,Xt=Es=null,_o=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var c=31-Jt(s),o=1<<c;t|=e[c],s&=~o}return Za=t,Sr(),l}function sm(e,t){Oe=null,H.H=vs,t===jn||t===Or?(t=Nf(),We=3):t===Gc?(t=Nf(),We=4):We=t===ho?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,aa=t,$e===null&&(pt=1,Yr(e,ua(t,e.current)))}function rm(){var e=ea.current;return e===null?!0:(qe&4194048)===qe?pa===null:(qe&62914560)===qe||(qe&536870912)!==0?e===pa:!1}function im(){var e=H.H;return H.H=vs,e===null?vs:e}function cm(){var e=H.A;return H.A=Ky,e}function li(){pt=4,ul||(qe&4194048)!==qe&&ea.current!==null||(kn=!0),(fl&134217727)===0&&(Yl&134217727)===0||st===null||pl(st,qe,la,!1)}function $o(e,t,l){var s=Ze;Ze|=2;var c=im(),o=cm();(st!==e||qe!==t)&&(ti=null,Rn(e,t)),t=!1;var m=pt;e:do try{if(We!==0&&$e!==null){var S=$e,_=aa;switch(We){case 8:Uo(),m=6;break e;case 3:case 2:case 9:case 6:ea.current===null&&(t=!0);var Y=We;if(We=0,aa=null,_n(e,S,_,Y),l&&kn){m=0;break e}break;default:Y=We,We=0,aa=null,_n(e,S,_,Y)}}Py(),m=pt;break}catch(Z){sm(e,Z)}while(!0);return t&&e.shellSuspendCounter++,$a=Ll=null,Ze=s,H.H=c,H.A=o,$e===null&&(st=null,qe=0,Sr()),m}function Py(){for(;$e!==null;)om($e)}function Jy(e,t){var l=Ze;Ze|=2;var s=im(),c=cm();st!==e||qe!==t?(ti=null,ei=ee()+500,Rn(e,t)):kn=Zn(e,t);e:do try{if(We!==0&&$e!==null){t=$e;var o=aa;t:switch(We){case 1:We=0,aa=null,_n(e,t,o,1);break;case 2:case 9:if(gf(o)){We=0,aa=null,dm(t);break}t=function(){We!==2&&We!==9||st!==e||(We=7),Ta(e)},o.then(t,t);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:gf(o)?(We=0,aa=null,dm(t)):(We=0,aa=null,_n(e,t,o,7));break;case 5:var m=null;switch($e.tag){case 26:m=$e.memoizedState;case 5:case 27:var S=$e;if(m?Zm(m):S.stateNode.complete){We=0,aa=null;var _=S.sibling;if(_!==null)$e=_;else{var Y=S.return;Y!==null?($e=Y,ni(Y)):$e=null}break t}}We=0,aa=null,_n(e,t,o,5);break;case 6:We=0,aa=null,_n(e,t,o,6);break;case 8:Uo(),pt=6;break e;default:throw Error(d(462))}}Fy();break}catch(Z){sm(e,Z)}while(!0);return $a=Ll=null,H.H=s,H.A=c,Ze=l,$e!==null?0:(st=null,qe=0,Sr(),pt)}function Fy(){for(;$e!==null&&!q();)om($e)}function om(e){var t=Rx(e.alternate,e,Za);e.memoizedProps=e.pendingProps,t===null?ni(e):$e=t}function dm(e){var t=e,l=t.alternate;switch(t.tag){case 15:case 0:t=Ax(l,t,t.pendingProps,t.type,void 0,qe);break;case 11:t=Ax(l,t,t.pendingProps,t.type.render,t.ref,qe);break;case 5:Wc(t);default:zx(l,t),t=$e=cf(t,Za),t=Rx(l,t,Za)}e.memoizedProps=e.pendingProps,t===null?ni(e):$e=t}function _n(e,t,l,s){$a=Ll=null,Wc(t),Sn=null,fs=0;var c=t.return;try{if(Hy(e,c,t,l,qe)){pt=1,Yr(e,ua(l,e.current)),$e=null;return}}catch(o){if(c!==null)throw $e=c,o;pt=1,Yr(e,ua(l,e.current)),$e=null;return}t.flags&32768?(Ve||s===1?e=!0:kn||(qe&536870912)!==0?e=!1:(ul=e=!0,(s===2||s===9||s===3||s===6)&&(s=ea.current,s!==null&&s.tag===13&&(s.flags|=16384))),um(t,e)):ni(t)}function ni(e){var t=e;do{if((t.flags&32768)!==0){um(t,ul);return}e=t.return;var l=Iy(t.alternate,t,Za);if(l!==null){$e=l;return}if(t=t.sibling,t!==null){$e=t;return}$e=t=e}while(t!==null);pt===0&&(pt=5)}function um(e,t){do{var l=Vy(e.alternate,e);if(l!==null){l.flags&=32767,$e=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!t&&(e=e.sibling,e!==null)){$e=e;return}$e=e=l}while(e!==null);pt=6,$e=null}function fm(e,t,l,s,c,o,m,S,_){e.cancelPendingCommit=null;do si();while(wt!==0);if((Ze&6)!==0)throw Error(d(327));if(t!==null){if(t===e.current)throw Error(d(177));if(o=t.lanes|t.childLanes,o|=Cc,Ob(e,l,o,m,S,_),e===st&&($e=st=null,qe=0),Mn=t,ml=e,Pa=l,zo=o,Lo=c,tm=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ag(Xe,function(){return bm(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=H.T,H.T=null,c=P.p,P.p=2,m=Ze,Ze|=4;try{Yy(e,t,l)}finally{Ze=m,P.p=c,H.T=s}}wt=1,xm(),mm(),pm()}}function xm(){if(wt===1){wt=0;var e=ml,t=Mn,l=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||l){l=H.T,H.T=null;var s=P.p;P.p=2;var c=Ze;Ze|=4;try{Kx(t,e);var o=Jo,m=Fu(e.containerInfo),S=o.focusedElem,_=o.selectionRange;if(m!==S&&S&&S.ownerDocument&&Ju(S.ownerDocument.documentElement,S)){if(_!==null&&Nc(S)){var Y=_.start,Z=_.end;if(Z===void 0&&(Z=Y),"selectionStart"in S)S.selectionStart=Y,S.selectionEnd=Math.min(Z,S.value.length);else{var le=S.ownerDocument||document,Q=le&&le.defaultView||window;if(Q.getSelection){var X=Q.getSelection(),be=S.textContent.length,De=Math.min(_.start,be),lt=_.end===void 0?De:Math.min(_.end,be);!X.extend&&De>lt&&(m=lt,lt=De,De=m);var $=Pu(S,De),L=Pu(S,lt);if($&&L&&(X.rangeCount!==1||X.anchorNode!==$.node||X.anchorOffset!==$.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var I=le.createRange();I.setStart($.node,$.offset),X.removeAllRanges(),De>lt?(X.addRange(I),X.extend(L.node,L.offset)):(I.setEnd(L.node,L.offset),X.addRange(I))}}}}for(le=[],X=S;X=X.parentNode;)X.nodeType===1&&le.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<le.length;S++){var te=le[S];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}bi=!!Po,Jo=Po=null}finally{Ze=c,P.p=s,H.T=l}}e.current=t,wt=2}}function mm(){if(wt===2){wt=0;var e=ml,t=Mn,l=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||l){l=H.T,H.T=null;var s=P.p;P.p=2;var c=Ze;Ze|=4;try{qx(e,t.alternate,t)}finally{Ze=c,P.p=s,H.T=l}}wt=3}}function pm(){if(wt===4||wt===3){wt=0,z();var e=ml,t=Mn,l=Pa,s=tm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?wt=5:(wt=0,Mn=ml=null,hm(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(xl=null),ac(l),t=t.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(yt,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=H.T,c=P.p,P.p=2,H.T=null;try{for(var o=e.onRecoverableError,m=0;m<s.length;m++){var S=s[m];o(S.value,{componentStack:S.stack})}}finally{H.T=t,P.p=c}}(Pa&3)!==0&&si(),Ta(e),c=e.pendingLanes,(l&261930)!==0&&(c&42)!==0?e===Bo?Ts++:(Ts=0,Bo=e):Ts=0,ks(0)}}function hm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ds(t)))}function si(){return xm(),mm(),pm(),bm()}function bm(){if(wt!==5)return!1;var e=ml,t=zo;zo=0;var l=ac(Pa),s=H.T,c=P.p;try{P.p=32>l?32:l,H.T=null,l=Lo,Lo=null;var o=ml,m=Pa;if(wt=0,Mn=ml=null,Pa=0,(Ze&6)!==0)throw Error(d(331));var S=Ze;if(Ze|=4,Fx(o.current),Zx(o,o.current,m,l),Ze=S,ks(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(yt,o)}catch{}return!0}finally{P.p=c,H.T=s,hm(e,t)}}function ym(e,t,l){t=ua(l,t),t=po(e.stateNode,t,2),e=il(e,t,2),e!==null&&(Pn(e,2),Ta(e))}function et(e,t,l){if(e.tag===3)ym(e,e,l);else for(;t!==null;){if(t.tag===3){ym(t,e,l);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(xl===null||!xl.has(s))){e=ua(l,e),l=gx(2),s=il(t,l,2),s!==null&&(vx(l,s,t,e),Pn(s,2),Ta(s));break}}t=t.return}}function Ho(e,t,l){var s=e.pingCache;if(s===null){s=e.pingCache=new Xy;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(l)||(Mo=!0,c.add(l),e=Wy.bind(null,e,t,l),t.then(e,e))}function Wy(e,t,l){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,st===e&&(qe&l)===l&&(pt===4||pt===3&&(qe&62914560)===qe&&300>ee()-Wr?(Ze&2)===0&&Rn(e,0):Ro|=l,On===qe&&(On=0)),Ta(e)}function gm(e,t){t===0&&(t=fu()),e=Rl(e,t),e!==null&&(Pn(e,t),Ta(e))}function eg(e){var t=e.memoizedState,l=0;t!==null&&(l=t.retryLane),gm(e,l)}function tg(e,t){var l=0;switch(e.tag){case 31:case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(l=c.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(d(314))}s!==null&&s.delete(t),gm(e,l)}function ag(e,t){return ut(e,t)}var ri=null,zn=null,Go=!1,ii=!1,qo=!1,hl=0;function Ta(e){e!==zn&&e.next===null&&(zn===null?ri=zn=e:zn=zn.next=e),ii=!0,Go||(Go=!0,ng())}function ks(e,t){if(!qo&&ii){qo=!0;do for(var l=!1,s=ri;s!==null;){if(e!==0){var c=s.pendingLanes;if(c===0)var o=0;else{var m=s.suspendedLanes,S=s.pingedLanes;o=(1<<31-Jt(42|e)+1)-1,o&=c&~(m&~S),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(l=!0,Sm(s,o))}else o=qe,o=ur(s,s===st?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(o&3)===0||Zn(s,o)||(l=!0,Sm(s,o));s=s.next}while(l);qo=!1}}function lg(){vm()}function vm(){ii=Go=!1;var e=0;hl!==0&&mg()&&(e=hl);for(var t=ee(),l=null,s=ri;s!==null;){var c=s.next,o=Nm(s,t);o===0?(s.next=null,l===null?ri=c:l.next=c,c===null&&(zn=l)):(l=s,(e!==0||(o&3)!==0)&&(ii=!0)),s=c}wt!==0&&wt!==5||ks(e),hl!==0&&(hl=0)}function Nm(e,t){for(var l=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var m=31-Jt(o),S=1<<m,_=c[m];_===-1?((S&l)===0||(S&s)!==0)&&(c[m]=kb(S,t)):_<=t&&(e.expiredLanes|=S),o&=~S}if(t=st,l=qe,l=ur(e,e===t?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,l===0||e===t&&(We===2||We===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Pe(s),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||Zn(e,l)){if(t=l&-l,t===e.callbackPriority)return t;switch(s!==null&&Pe(s),ac(l)){case 2:case 8:l=ue;break;case 32:l=Xe;break;case 268435456:l=xt;break;default:l=Xe}return s=jm.bind(null,e),l=ut(l,s),e.callbackPriority=t,e.callbackNode=l,t}return s!==null&&s!==null&&Pe(s),e.callbackPriority=2,e.callbackNode=null,2}function jm(e,t){if(wt!==0&&wt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(si()&&e.callbackNode!==l)return null;var s=qe;return s=ur(e,e===st?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(lm(e,s,t),Nm(e,ee()),e.callbackNode!=null&&e.callbackNode===l?jm.bind(null,e):null)}function Sm(e,t){if(si())return null;lm(e,t,!0)}function ng(){hg(function(){(Ze&6)!==0?ut(Le,lg):vm()})}function Io(){if(hl===0){var e=vn;e===0&&(e=cr,cr<<=1,(cr&261888)===0&&(cr=256)),hl=e}return hl}function wm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:pr(""+e)}function Dm(e,t){var l=t.ownerDocument.createElement("input");return l.name=t.name,l.value=t.value,e.id&&l.setAttribute("form",e.id),t.parentNode.insertBefore(l,t),e=new FormData(e),l.parentNode.removeChild(l),e}function sg(e,t,l,s,c){if(t==="submit"&&l&&l.stateNode===c){var o=wm((c[It]||null).action),m=s.submitter;m&&(t=(t=m[It]||null)?wm(t.formAction):m.getAttribute("formAction"),t!==null&&(o=t,m=null));var S=new gr("action","action",null,s,c);e.push({event:S,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(hl!==0){var _=m?Dm(c,m):new FormData(c);co(l,{pending:!0,data:_,method:c.method,action:o},null,_)}}else typeof o=="function"&&(S.preventDefault(),_=m?Dm(c,m):new FormData(c),co(l,{pending:!0,data:_,method:c.method,action:o},o,_))},currentTarget:c}]})}}for(var Vo=0;Vo<Dc.length;Vo++){var Yo=Dc[Vo],rg=Yo.toLowerCase(),ig=Yo[0].toUpperCase()+Yo.slice(1);Na(rg,"on"+ig)}Na(tf,"onAnimationEnd"),Na(af,"onAnimationIteration"),Na(lf,"onAnimationStart"),Na("dblclick","onDoubleClick"),Na("focusin","onFocus"),Na("focusout","onBlur"),Na(Sy,"onTransitionRun"),Na(wy,"onTransitionStart"),Na(Dy,"onTransitionCancel"),Na(nf,"onTransitionEnd"),sn("onMouseEnter",["mouseout","mouseover"]),sn("onMouseLeave",["mouseout","mouseover"]),sn("onPointerEnter",["pointerout","pointerover"]),sn("onPointerLeave",["pointerout","pointerover"]),Tl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Os));function Cm(e,t){t=(t&4)!==0;for(var l=0;l<e.length;l++){var s=e[l],c=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var m=s.length-1;0<=m;m--){var S=s[m],_=S.instance,Y=S.currentTarget;if(S=S.listener,_!==o&&c.isPropagationStopped())break e;o=S,c.currentTarget=Y;try{o(c)}catch(Z){jr(Z)}c.currentTarget=null,o=_}else for(m=0;m<s.length;m++){if(S=s[m],_=S.instance,Y=S.currentTarget,S=S.listener,_!==o&&c.isPropagationStopped())break e;o=S,c.currentTarget=Y;try{o(c)}catch(Z){jr(Z)}c.currentTarget=null,o=_}}}}function He(e,t){var l=t[lc];l===void 0&&(l=t[lc]=new Set);var s=e+"__bubble";l.has(s)||(Am(t,e,2,!1),l.add(s))}function Qo(e,t,l){var s=0;t&&(s|=4),Am(l,e,s,t)}var ci="_reactListening"+Math.random().toString(36).slice(2);function Ko(e){if(!e[ci]){e[ci]=!0,gu.forEach(function(l){l!=="selectionchange"&&(cg.has(l)||Qo(l,!1,e),Qo(l,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ci]||(t[ci]=!0,Qo("selectionchange",!1,t))}}function Am(e,t,l,s){switch(ap(t)){case 2:var c=Lg;break;case 8:c=Bg;break;default:c=cd}l=c.bind(null,t,l,e),c=void 0,!fc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,l,{capture:!0,passive:c}):e.addEventListener(t,l,!0):c!==void 0?e.addEventListener(t,l,{passive:c}):e.addEventListener(t,l,!1)}function Xo(e,t,l,s,c){var o=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var S=s.stateNode.containerInfo;if(S===c)break;if(m===4)for(m=s.return;m!==null;){var _=m.tag;if((_===3||_===4)&&m.stateNode.containerInfo===c)return;m=m.return}for(;S!==null;){if(m=an(S),m===null)return;if(_=m.tag,_===5||_===6||_===26||_===27){s=o=m;continue e}S=S.parentNode}}s=s.return}Ou(function(){var Y=o,Z=dc(l),le=[];e:{var Q=sf.get(e);if(Q!==void 0){var X=gr,be=e;switch(e){case"keypress":if(br(l)===0)break e;case"keydown":case"keyup":X=ty;break;case"focusin":be="focus",X=hc;break;case"focusout":be="blur",X=hc;break;case"beforeblur":case"afterblur":X=hc;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Ib;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=ny;break;case tf:case af:case lf:X=Qb;break;case nf:X=ry;break;case"scroll":case"scrollend":X=Gb;break;case"wheel":X=cy;break;case"copy":case"cut":case"paste":X=Xb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Lu;break;case"toggle":case"beforetoggle":X=dy}var De=(t&4)!==0,lt=!De&&(e==="scroll"||e==="scrollend"),$=De?Q!==null?Q+"Capture":null:Q;De=[];for(var L=Y,I;L!==null;){var te=L;if(I=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||I===null||$===null||(te=Wn(L,$),te!=null&&De.push(Ms(L,te,I))),lt)break;L=L.return}0<De.length&&(Q=new X(Q,be,null,l,Z),le.push({event:Q,listeners:De}))}}if((t&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",Q&&l!==oc&&(be=l.relatedTarget||l.fromElement)&&(an(be)||be[tn]))break e;if((X||Q)&&(Q=Z.window===Z?Z:(Q=Z.ownerDocument)?Q.defaultView||Q.parentWindow:window,X?(be=l.relatedTarget||l.toElement,X=Y,be=be?an(be):null,be!==null&&(lt=f(be),De=be.tag,be!==lt||De!==5&&De!==27&&De!==6)&&(be=null)):(X=null,be=Y),X!==be)){if(De=_u,te="onMouseLeave",$="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(De=Lu,te="onPointerLeave",$="onPointerEnter",L="pointer"),lt=X==null?Q:Fn(X),I=be==null?Q:Fn(be),Q=new De(te,L+"leave",X,l,Z),Q.target=lt,Q.relatedTarget=I,te=null,an(Z)===Y&&(De=new De($,L+"enter",be,l,Z),De.target=I,De.relatedTarget=lt,te=De),lt=te,X&&be)t:{for(De=og,$=X,L=be,I=0,te=$;te;te=De(te))I++;te=0;for(var we=L;we;we=De(we))te++;for(;0<I-te;)$=De($),I--;for(;0<te-I;)L=De(L),te--;for(;I--;){if($===L||L!==null&&$===L.alternate){De=$;break t}$=De($),L=De(L)}De=null}else De=null;X!==null&&Em(le,Q,X,De,!1),be!==null&&lt!==null&&Em(le,lt,be,De,!0)}}e:{if(Q=Y?Fn(Y):window,X=Q.nodeName&&Q.nodeName.toLowerCase(),X==="select"||X==="input"&&Q.type==="file")var Qe=Vu;else if(qu(Q))if(Yu)Qe=vy;else{Qe=yy;var ve=by}else X=Q.nodeName,!X||X.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?Y&&cc(Y.elementType)&&(Qe=Vu):Qe=gy;if(Qe&&(Qe=Qe(e,Y))){Iu(le,Qe,l,Z);break e}ve&&ve(e,Q,Y),e==="focusout"&&Y&&Q.type==="number"&&Y.memoizedProps.value!=null&&ic(Q,"number",Q.value)}switch(ve=Y?Fn(Y):window,e){case"focusin":(qu(ve)||ve.contentEditable==="true")&&(fn=ve,jc=Y,is=null);break;case"focusout":is=jc=fn=null;break;case"mousedown":Sc=!0;break;case"contextmenu":case"mouseup":case"dragend":Sc=!1,Wu(le,l,Z);break;case"selectionchange":if(jy)break;case"keydown":case"keyup":Wu(le,l,Z)}var Re;if(yc)e:{switch(e){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else un?Hu(e,l)&&(Ie="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Ie="onCompositionStart");Ie&&(Bu&&l.locale!=="ko"&&(un||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&un&&(Re=Mu()):(el=Z,xc="value"in el?el.value:el.textContent,un=!0)),ve=oi(Y,Ie),0<ve.length&&(Ie=new zu(Ie,e,null,l,Z),le.push({event:Ie,listeners:ve}),Re?Ie.data=Re:(Re=Gu(l),Re!==null&&(Ie.data=Re)))),(Re=fy?xy(e,l):my(e,l))&&(Ie=oi(Y,"onBeforeInput"),0<Ie.length&&(ve=new zu("onBeforeInput","beforeinput",null,l,Z),le.push({event:ve,listeners:Ie}),ve.data=Re)),sg(le,e,Y,l,Z)}Cm(le,t)})}function Ms(e,t,l){return{instance:e,listener:t,currentTarget:l}}function oi(e,t){for(var l=t+"Capture",s=[];e!==null;){var c=e,o=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||o===null||(c=Wn(e,l),c!=null&&s.unshift(Ms(e,c,o)),c=Wn(e,t),c!=null&&s.push(Ms(e,c,o))),e.tag===3)return s;e=e.return}return[]}function og(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Em(e,t,l,s,c){for(var o=t._reactName,m=[];l!==null&&l!==s;){var S=l,_=S.alternate,Y=S.stateNode;if(S=S.tag,_!==null&&_===s)break;S!==5&&S!==26&&S!==27||Y===null||(_=Y,c?(Y=Wn(l,o),Y!=null&&m.unshift(Ms(l,Y,_))):c||(Y=Wn(l,o),Y!=null&&m.push(Ms(l,Y,_)))),l=l.return}m.length!==0&&e.push({event:t,listeners:m})}var dg=/\r\n?/g,ug=/\u0000|\uFFFD/g;function Tm(e){return(typeof e=="string"?e:""+e).replace(dg,`
`).replace(ug,"")}function km(e,t){return t=Tm(t),Tm(e)===t}function at(e,t,l,s,c,o){switch(l){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||cn(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&cn(e,""+s);break;case"className":xr(e,"class",s);break;case"tabIndex":xr(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":xr(e,l,s);break;case"style":Tu(e,s,o);break;case"data":if(t!=="object"){xr(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||l!=="href")){e.removeAttribute(l);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=pr(""+s),e.setAttribute(l,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(l==="formAction"?(t!=="input"&&at(e,t,"name",c.name,c,null),at(e,t,"formEncType",c.formEncType,c,null),at(e,t,"formMethod",c.formMethod,c,null),at(e,t,"formTarget",c.formTarget,c,null)):(at(e,t,"encType",c.encType,c,null),at(e,t,"method",c.method,c,null),at(e,t,"target",c.target,c,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=pr(""+s),e.setAttribute(l,s);break;case"onClick":s!=null&&(e.onclick=za);break;case"onScroll":s!=null&&He("scroll",e);break;case"onScrollEnd":s!=null&&He("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(d(61));if(l=s.__html,l!=null){if(c.children!=null)throw Error(d(60));e.innerHTML=l}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}l=pr(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""+s):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":s===!0?e.setAttribute(l,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,s):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(l,s):e.removeAttribute(l);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(l):e.setAttribute(l,s);break;case"popover":He("beforetoggle",e),He("toggle",e),fr(e,"popover",s);break;case"xlinkActuate":_a(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":_a(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":_a(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":_a(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":_a(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":_a(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":_a(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":_a(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":_a(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":fr(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=$b.get(l)||l,fr(e,l,s))}}function Zo(e,t,l,s,c,o){switch(l){case"style":Tu(e,s,o);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(d(61));if(l=s.__html,l!=null){if(c.children!=null)throw Error(d(60));e.innerHTML=l}}break;case"children":typeof s=="string"?cn(e,s):(typeof s=="number"||typeof s=="bigint")&&cn(e,""+s);break;case"onScroll":s!=null&&He("scroll",e);break;case"onScrollEnd":s!=null&&He("scrollend",e);break;case"onClick":s!=null&&(e.onclick=za);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vu.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(c=l.endsWith("Capture"),t=l.slice(2,c?l.length-7:void 0),o=e[It]||null,o=o!=null?o[l]:null,typeof o=="function"&&e.removeEventListener(t,o,c),typeof s=="function")){typeof o!="function"&&o!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(t,s,c);break e}l in e?e[l]=s:s===!0?e.setAttribute(l,""):fr(e,l,s)}}}function zt(e,t,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",e),He("load",e);var s=!1,c=!1,o;for(o in l)if(l.hasOwnProperty(o)){var m=l[o];if(m!=null)switch(o){case"src":s=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:at(e,t,o,m,l,null)}}c&&at(e,t,"srcSet",l.srcSet,l,null),s&&at(e,t,"src",l.src,l,null);return;case"input":He("invalid",e);var S=o=m=c=null,_=null,Y=null;for(s in l)if(l.hasOwnProperty(s)){var Z=l[s];if(Z!=null)switch(s){case"name":c=Z;break;case"type":m=Z;break;case"checked":_=Z;break;case"defaultChecked":Y=Z;break;case"value":o=Z;break;case"defaultValue":S=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(d(137,t));break;default:at(e,t,s,Z,l,null)}}Du(e,o,S,_,Y,m,c,!1);return;case"select":He("invalid",e),s=m=o=null;for(c in l)if(l.hasOwnProperty(c)&&(S=l[c],S!=null))switch(c){case"value":o=S;break;case"defaultValue":m=S;break;case"multiple":s=S;default:at(e,t,c,S,l,null)}t=o,l=m,e.multiple=!!s,t!=null?rn(e,!!s,t,!1):l!=null&&rn(e,!!s,l,!0);return;case"textarea":He("invalid",e),o=c=s=null;for(m in l)if(l.hasOwnProperty(m)&&(S=l[m],S!=null))switch(m){case"value":s=S;break;case"defaultValue":c=S;break;case"children":o=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(d(91));break;default:at(e,t,m,S,l,null)}Au(e,s,c,o);return;case"option":for(_ in l)l.hasOwnProperty(_)&&(s=l[_],s!=null)&&(_==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":at(e,t,_,s,l,null));return;case"dialog":He("beforetoggle",e),He("toggle",e),He("cancel",e),He("close",e);break;case"iframe":case"object":He("load",e);break;case"video":case"audio":for(s=0;s<Os.length;s++)He(Os[s],e);break;case"image":He("error",e),He("load",e);break;case"details":He("toggle",e);break;case"embed":case"source":case"link":He("error",e),He("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(s=l[Y],s!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:at(e,t,Y,s,l,null)}return;default:if(cc(t)){for(Z in l)l.hasOwnProperty(Z)&&(s=l[Z],s!==void 0&&Zo(e,t,Z,s,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(s=l[S],s!=null&&at(e,t,S,s,l,null))}function fg(e,t,l,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,o=null,m=null,S=null,_=null,Y=null,Z=null;for(X in l){var le=l[X];if(l.hasOwnProperty(X)&&le!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":_=le;default:s.hasOwnProperty(X)||at(e,t,X,null,s,le)}}for(var Q in s){var X=s[Q];if(le=l[Q],s.hasOwnProperty(Q)&&(X!=null||le!=null))switch(Q){case"type":o=X;break;case"name":c=X;break;case"checked":Y=X;break;case"defaultChecked":Z=X;break;case"value":m=X;break;case"defaultValue":S=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(d(137,t));break;default:X!==le&&at(e,t,Q,X,s,le)}}rc(e,m,S,_,Y,Z,o,c);return;case"select":X=m=S=Q=null;for(o in l)if(_=l[o],l.hasOwnProperty(o)&&_!=null)switch(o){case"value":break;case"multiple":X=_;default:s.hasOwnProperty(o)||at(e,t,o,null,s,_)}for(c in s)if(o=s[c],_=l[c],s.hasOwnProperty(c)&&(o!=null||_!=null))switch(c){case"value":Q=o;break;case"defaultValue":S=o;break;case"multiple":m=o;default:o!==_&&at(e,t,c,o,s,_)}t=S,l=m,s=X,Q!=null?rn(e,!!l,Q,!1):!!s!=!!l&&(t!=null?rn(e,!!l,t,!0):rn(e,!!l,l?[]:"",!1));return;case"textarea":X=Q=null;for(S in l)if(c=l[S],l.hasOwnProperty(S)&&c!=null&&!s.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:at(e,t,S,null,s,c)}for(m in s)if(c=s[m],o=l[m],s.hasOwnProperty(m)&&(c!=null||o!=null))switch(m){case"value":Q=c;break;case"defaultValue":X=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(d(91));break;default:c!==o&&at(e,t,m,c,s,o)}Cu(e,Q,X);return;case"option":for(var be in l)Q=l[be],l.hasOwnProperty(be)&&Q!=null&&!s.hasOwnProperty(be)&&(be==="selected"?e.selected=!1:at(e,t,be,null,s,Q));for(_ in s)Q=s[_],X=l[_],s.hasOwnProperty(_)&&Q!==X&&(Q!=null||X!=null)&&(_==="selected"?e.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":at(e,t,_,Q,s,X));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in l)Q=l[De],l.hasOwnProperty(De)&&Q!=null&&!s.hasOwnProperty(De)&&at(e,t,De,null,s,Q);for(Y in s)if(Q=s[Y],X=l[Y],s.hasOwnProperty(Y)&&Q!==X&&(Q!=null||X!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(d(137,t));break;default:at(e,t,Y,Q,s,X)}return;default:if(cc(t)){for(var lt in l)Q=l[lt],l.hasOwnProperty(lt)&&Q!==void 0&&!s.hasOwnProperty(lt)&&Zo(e,t,lt,void 0,s,Q);for(Z in s)Q=s[Z],X=l[Z],!s.hasOwnProperty(Z)||Q===X||Q===void 0&&X===void 0||Zo(e,t,Z,Q,s,X);return}}for(var $ in l)Q=l[$],l.hasOwnProperty($)&&Q!=null&&!s.hasOwnProperty($)&&at(e,t,$,null,s,Q);for(le in s)Q=s[le],X=l[le],!s.hasOwnProperty(le)||Q===X||Q==null&&X==null||at(e,t,le,Q,s,X)}function Om(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,l=performance.getEntriesByType("resource"),s=0;s<l.length;s++){var c=l[s],o=c.transferSize,m=c.initiatorType,S=c.duration;if(o&&S&&Om(m)){for(m=0,S=c.responseEnd,s+=1;s<l.length;s++){var _=l[s],Y=_.startTime;if(Y>S)break;var Z=_.transferSize,le=_.initiatorType;Z&&Om(le)&&(_=_.responseEnd,m+=Z*(_<S?1:(S-Y)/(_-Y)))}if(--s,t+=8*(o+m)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Po=null,Jo=null;function di(e){return e.nodeType===9?e:e.ownerDocument}function Mm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Fo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wo=null;function mg(){var e=window.event;return e&&e.type==="popstate"?e===Wo?!1:(Wo=e,!0):(Wo=null,!1)}var _m=typeof setTimeout=="function"?setTimeout:void 0,pg=typeof clearTimeout=="function"?clearTimeout:void 0,zm=typeof Promise=="function"?Promise:void 0,hg=typeof queueMicrotask=="function"?queueMicrotask:typeof zm<"u"?function(e){return zm.resolve(null).then(e).catch(bg)}:_m;function bg(e){setTimeout(function(){throw e})}function bl(e){return e==="head"}function Lm(e,t){var l=t,s=0;do{var c=l.nextSibling;if(e.removeChild(l),c&&c.nodeType===8)if(l=c.data,l==="/$"||l==="/&"){if(s===0){e.removeChild(c),$n(t);return}s--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")s++;else if(l==="html")Rs(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,Rs(l);for(var o=l.firstChild;o;){var m=o.nextSibling,S=o.nodeName;o[Jn]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&o.rel.toLowerCase()==="stylesheet"||l.removeChild(o),o=m}}else l==="body"&&Rs(e.ownerDocument.body);l=c}while(l);$n(t)}function Bm(e,t){var l=e;e=0;do{var s=l.nextSibling;if(l.nodeType===1?t?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(t?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),s&&s.nodeType===8)if(l=s.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=s}while(l)}function ed(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var l=t;switch(t=t.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ed(l),nc(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function yg(e,t,l,s){for(;e.nodeType===1;){var c=l;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Jn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=ha(e.nextSibling),e===null)break}return null}function gg(e,t,l){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=ha(e.nextSibling),e===null))return null;return e}function Um(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ha(e.nextSibling),e===null))return null;return e}function td(e){return e.data==="$?"||e.data==="$~"}function ad(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function vg(e,t){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||l.readyState!=="loading")t();else{var s=function(){t(),l.removeEventListener("DOMContentLoaded",s)};l.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function ha(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var ld=null;function $m(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(t===0)return ha(e.nextSibling);t--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||t++}e=e.nextSibling}return null}function Hm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(t===0)return e;t--}else l!=="/$"&&l!=="/&"||t++}e=e.previousSibling}return null}function Gm(e,t,l){switch(t=di(l),e){case"html":if(e=t.documentElement,!e)throw Error(d(452));return e;case"head":if(e=t.head,!e)throw Error(d(453));return e;case"body":if(e=t.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function Rs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);nc(e)}var ba=new Map,qm=new Set;function ui(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ja=P.d;P.d={f:Ng,r:jg,D:Sg,C:wg,L:Dg,m:Cg,X:Eg,S:Ag,M:Tg};function Ng(){var e=Ja.f(),t=ai();return e||t}function jg(e){var t=ln(e);t!==null&&t.tag===5&&t.type==="form"?sx(t):Ja.r(e)}var Ln=typeof document>"u"?null:document;function Im(e,t,l){var s=Ln;if(s&&typeof t=="string"&&t){var c=oa(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof l=="string"&&(c+='[crossorigin="'+l+'"]'),qm.has(c)||(qm.add(c),e={rel:e,crossOrigin:l,href:t},s.querySelector(c)===null&&(t=s.createElement("link"),zt(t,"link",e),Ct(t),s.head.appendChild(t)))}}function Sg(e){Ja.D(e),Im("dns-prefetch",e,null)}function wg(e,t){Ja.C(e,t),Im("preconnect",e,t)}function Dg(e,t,l){Ja.L(e,t,l);var s=Ln;if(s&&e&&t){var c='link[rel="preload"][as="'+oa(t)+'"]';t==="image"&&l&&l.imageSrcSet?(c+='[imagesrcset="'+oa(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(c+='[imagesizes="'+oa(l.imageSizes)+'"]')):c+='[href="'+oa(e)+'"]';var o=c;switch(t){case"style":o=Bn(e);break;case"script":o=Un(e)}ba.has(o)||(e=g({rel:"preload",href:t==="image"&&l&&l.imageSrcSet?void 0:e,as:t},l),ba.set(o,e),s.querySelector(c)!==null||t==="style"&&s.querySelector(_s(o))||t==="script"&&s.querySelector(zs(o))||(t=s.createElement("link"),zt(t,"link",e),Ct(t),s.head.appendChild(t)))}}function Cg(e,t){Ja.m(e,t);var l=Ln;if(l&&e){var s=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+oa(s)+'"][href="'+oa(e)+'"]',o=c;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Un(e)}if(!ba.has(o)&&(e=g({rel:"modulepreload",href:e},t),ba.set(o,e),l.querySelector(c)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(zs(o)))return}s=l.createElement("link"),zt(s,"link",e),Ct(s),l.head.appendChild(s)}}}function Ag(e,t,l){Ja.S(e,t,l);var s=Ln;if(s&&e){var c=nn(s).hoistableStyles,o=Bn(e);t=t||"default";var m=c.get(o);if(!m){var S={loading:0,preload:null};if(m=s.querySelector(_s(o)))S.loading=5;else{e=g({rel:"stylesheet",href:e,"data-precedence":t},l),(l=ba.get(o))&&nd(e,l);var _=m=s.createElement("link");Ct(_),zt(_,"link",e),_._p=new Promise(function(Y,Z){_.onload=Y,_.onerror=Z}),_.addEventListener("load",function(){S.loading|=1}),_.addEventListener("error",function(){S.loading|=2}),S.loading|=4,fi(m,t,s)}m={type:"stylesheet",instance:m,count:1,state:S},c.set(o,m)}}}function Eg(e,t){Ja.X(e,t);var l=Ln;if(l&&e){var s=nn(l).hoistableScripts,c=Un(e),o=s.get(c);o||(o=l.querySelector(zs(c)),o||(e=g({src:e,async:!0},t),(t=ba.get(c))&&sd(e,t),o=l.createElement("script"),Ct(o),zt(o,"link",e),l.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(c,o))}}function Tg(e,t){Ja.M(e,t);var l=Ln;if(l&&e){var s=nn(l).hoistableScripts,c=Un(e),o=s.get(c);o||(o=l.querySelector(zs(c)),o||(e=g({src:e,async:!0,type:"module"},t),(t=ba.get(c))&&sd(e,t),o=l.createElement("script"),Ct(o),zt(o,"link",e),l.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(c,o))}}function Vm(e,t,l,s){var c=(c=ye.current)?ui(c):null;if(!c)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(t=Bn(l.href),l=nn(c).hoistableStyles,s=l.get(t),s||(s={type:"style",instance:null,count:0,state:null},l.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Bn(l.href);var o=nn(c).hoistableStyles,m=o.get(e);if(m||(c=c.ownerDocument||c,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,m),(o=c.querySelector(_s(e)))&&!o._p&&(m.instance=o,m.state.loading=5),ba.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ba.set(e,l),o||kg(c,e,l,m.state))),t&&s===null)throw Error(d(528,""));return m}if(t&&s!==null)throw Error(d(529,""));return null;case"script":return t=l.async,l=l.src,typeof l=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Un(l),l=nn(c).hoistableScripts,s=l.get(t),s||(s={type:"script",instance:null,count:0,state:null},l.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function Bn(e){return'href="'+oa(e)+'"'}function _s(e){return'link[rel="stylesheet"]['+e+"]"}function Ym(e){return g({},e,{"data-precedence":e.precedence,precedence:null})}function kg(e,t,l,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),zt(t,"link",l),Ct(t),e.head.appendChild(t))}function Un(e){return'[src="'+oa(e)+'"]'}function zs(e){return"script[async]"+e}function Qm(e,t,l){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+oa(l.href)+'"]');if(s)return t.instance=s,Ct(s),s;var c=g({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Ct(s),zt(s,"style",c),fi(s,l.precedence,e),t.instance=s;case"stylesheet":c=Bn(l.href);var o=e.querySelector(_s(c));if(o)return t.state.loading|=4,t.instance=o,Ct(o),o;s=Ym(l),(c=ba.get(c))&&nd(s,c),o=(e.ownerDocument||e).createElement("link"),Ct(o);var m=o;return m._p=new Promise(function(S,_){m.onload=S,m.onerror=_}),zt(o,"link",s),t.state.loading|=4,fi(o,l.precedence,e),t.instance=o;case"script":return o=Un(l.src),(c=e.querySelector(zs(o)))?(t.instance=c,Ct(c),c):(s=l,(c=ba.get(o))&&(s=g({},l),sd(s,c)),e=e.ownerDocument||e,c=e.createElement("script"),Ct(c),zt(c,"link",s),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(d(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,fi(s,l.precedence,e));return t.instance}function fi(e,t,l){for(var s=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=s.length?s[s.length-1]:null,o=c,m=0;m<s.length;m++){var S=s[m];if(S.dataset.precedence===t)o=S;else if(o!==c)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=l.nodeType===9?l.head:l,t.insertBefore(e,t.firstChild))}function nd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function sd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var xi=null;function Km(e,t,l){if(xi===null){var s=new Map,c=xi=new Map;c.set(l,s)}else c=xi,s=c.get(l),s||(s=new Map,c.set(l,s));if(s.has(e))return s;for(s.set(e,null),l=l.getElementsByTagName(e),c=0;c<l.length;c++){var o=l[c];if(!(o[Jn]||o[Ot]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var m=o.getAttribute(t)||"";m=e+m;var S=s.get(m);S?S.push(o):s.set(m,[o])}}return s}function Xm(e,t,l){e=e.ownerDocument||e,e.head.insertBefore(l,t==="title"?e.querySelector("head > title"):null)}function Og(e,t,l){if(l===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Zm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Mg(e,t,l,s){if(l.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var c=Bn(s.href),o=t.querySelector(_s(c));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=mi.bind(e),t.then(e,e)),l.state.loading|=4,l.instance=o,Ct(o);return}o=t.ownerDocument||t,s=Ym(s),(c=ba.get(c))&&nd(s,c),o=o.createElement("link"),Ct(o);var m=o;m._p=new Promise(function(S,_){m.onload=S,m.onerror=_}),zt(o,"link",s),l.instance=o}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,t),(t=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=mi.bind(e),t.addEventListener("load",l),t.addEventListener("error",l))}}var rd=0;function Rg(e,t){return e.stylesheets&&e.count===0&&hi(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var s=setTimeout(function(){if(e.stylesheets&&hi(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4+t);0<e.imgBytes&&rd===0&&(rd=62500*xg());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&hi(e,e.stylesheets),e.unsuspend)){var o=e.unsuspend;e.unsuspend=null,o()}},(e.imgBytes>rd?50:800)+t);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(c)}}:null}function mi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hi(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var pi=null;function hi(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,pi=new Map,t.forEach(_g,e),pi=null,mi.call(e))}function _g(e,t){if(!(t.state.loading&4)){var l=pi.get(e);if(l)var s=l.get(null);else{l=new Map,pi.set(e,l);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<c.length;o++){var m=c[o];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(l.set(m.dataset.precedence,m),s=m)}s&&l.set(null,s)}c=t.instance,m=c.getAttribute("data-precedence"),o=l.get(m)||s,o===s&&l.set(null,c),l.set(m,c),this.count++,s=mi.bind(this),c.addEventListener("load",s),c.addEventListener("error",s),o?o.parentNode.insertBefore(c,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Ls={$$typeof:A,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function zg(e,t,l,s,c,o,m,S,_){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ec(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ec(0),this.hiddenUpdates=ec(null),this.identifierPrefix=s,this.onUncaughtError=c,this.onCaughtError=o,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function Pm(e,t,l,s,c,o,m,S,_,Y,Z,le){return e=new zg(e,t,l,m,_,Y,Z,le,S),t=1,o===!0&&(t|=24),o=Wt(3,null,null,t),e.current=o,o.stateNode=e,t=Uc(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:s,isDehydrated:l,cache:t},qc(o),e}function Jm(e){return e?(e=pn,e):pn}function Fm(e,t,l,s,c,o){c=Jm(c),s.context===null?s.context=c:s.pendingContext=c,s=rl(t),s.payload={element:l},o=o===void 0?null:o,o!==null&&(s.callback=o),l=il(e,s,t),l!==null&&(Zt(l,e,t),ms(l,e,t))}function Wm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<t?l:t}}function id(e,t){Wm(e,t),(e=e.alternate)&&Wm(e,t)}function ep(e){if(e.tag===13||e.tag===31){var t=Rl(e,67108864);t!==null&&Zt(t,e,67108864),id(e,67108864)}}function tp(e){if(e.tag===13||e.tag===31){var t=na();t=tc(t);var l=Rl(e,t);l!==null&&Zt(l,e,t),id(e,t)}}var bi=!0;function Lg(e,t,l,s){var c=H.T;H.T=null;var o=P.p;try{P.p=2,cd(e,t,l,s)}finally{P.p=o,H.T=c}}function Bg(e,t,l,s){var c=H.T;H.T=null;var o=P.p;try{P.p=8,cd(e,t,l,s)}finally{P.p=o,H.T=c}}function cd(e,t,l,s){if(bi){var c=od(s);if(c===null)Xo(e,t,s,yi,l),lp(e,s);else if($g(c,e,t,l,s))s.stopPropagation();else if(lp(e,s),t&4&&-1<Ug.indexOf(e)){for(;c!==null;){var o=ln(c);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var m=El(o.pendingLanes);if(m!==0){var S=o;for(S.pendingLanes|=2,S.entangledLanes|=2;m;){var _=1<<31-Jt(m);S.entanglements[1]|=_,m&=~_}Ta(o),(Ze&6)===0&&(ei=ee()+500,ks(0))}}break;case 31:case 13:S=Rl(o,2),S!==null&&Zt(S,o,2),ai(),id(o,2)}if(o=od(s),o===null&&Xo(e,t,s,yi,l),o===c)break;c=o}c!==null&&s.stopPropagation()}else Xo(e,t,s,null,l)}}function od(e){return e=dc(e),dd(e)}var yi=null;function dd(e){if(yi=null,e=an(e),e!==null){var t=f(e);if(t===null)e=null;else{var l=t.tag;if(l===13){if(e=x(t),e!==null)return e;e=null}else if(l===31){if(e=y(t),e!==null)return e;e=null}else if(l===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return yi=e,null}function ap(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(he()){case Le:return 2;case ue:return 8;case Xe:case Ue:return 32;case xt:return 268435456;default:return 32}default:return 32}}var ud=!1,yl=null,gl=null,vl=null,Bs=new Map,Us=new Map,Nl=[],Ug="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lp(e,t){switch(e){case"focusin":case"focusout":yl=null;break;case"dragenter":case"dragleave":gl=null;break;case"mouseover":case"mouseout":vl=null;break;case"pointerover":case"pointerout":Bs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Us.delete(t.pointerId)}}function $s(e,t,l,s,c,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:l,eventSystemFlags:s,nativeEvent:o,targetContainers:[c]},t!==null&&(t=ln(t),t!==null&&ep(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function $g(e,t,l,s,c){switch(t){case"focusin":return yl=$s(yl,e,t,l,s,c),!0;case"dragenter":return gl=$s(gl,e,t,l,s,c),!0;case"mouseover":return vl=$s(vl,e,t,l,s,c),!0;case"pointerover":var o=c.pointerId;return Bs.set(o,$s(Bs.get(o)||null,e,t,l,s,c)),!0;case"gotpointercapture":return o=c.pointerId,Us.set(o,$s(Us.get(o)||null,e,t,l,s,c)),!0}return!1}function np(e){var t=an(e.target);if(t!==null){var l=f(t);if(l!==null){if(t=l.tag,t===13){if(t=x(l),t!==null){e.blockedOn=t,bu(e.priority,function(){tp(l)});return}}else if(t===31){if(t=y(l),t!==null){e.blockedOn=t,bu(e.priority,function(){tp(l)});return}}else if(t===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var l=od(e.nativeEvent);if(l===null){l=e.nativeEvent;var s=new l.constructor(l.type,l);oc=s,l.target.dispatchEvent(s),oc=null}else return t=ln(l),t!==null&&ep(t),e.blockedOn=l,!1;t.shift()}return!0}function sp(e,t,l){gi(e)&&l.delete(t)}function Hg(){ud=!1,yl!==null&&gi(yl)&&(yl=null),gl!==null&&gi(gl)&&(gl=null),vl!==null&&gi(vl)&&(vl=null),Bs.forEach(sp),Us.forEach(sp)}function vi(e,t){e.blockedOn===t&&(e.blockedOn=null,ud||(ud=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Hg)))}var Ni=null;function rp(e){Ni!==e&&(Ni=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ni===e&&(Ni=null);for(var t=0;t<e.length;t+=3){var l=e[t],s=e[t+1],c=e[t+2];if(typeof s!="function"){if(dd(s||l)===null)continue;break}var o=ln(l);o!==null&&(e.splice(t,3),t-=3,co(o,{pending:!0,data:c,method:l.method,action:s},s,c))}}))}function $n(e){function t(_){return vi(_,e)}yl!==null&&vi(yl,e),gl!==null&&vi(gl,e),vl!==null&&vi(vl,e),Bs.forEach(t),Us.forEach(t);for(var l=0;l<Nl.length;l++){var s=Nl[l];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Nl.length&&(l=Nl[0],l.blockedOn===null);)np(l),l.blockedOn===null&&Nl.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(s=0;s<l.length;s+=3){var c=l[s],o=l[s+1],m=c[It]||null;if(typeof o=="function")m||rp(l);else if(m){var S=null;if(o&&o.hasAttribute("formAction")){if(c=o,m=o[It]||null)S=m.formAction;else if(dd(c)!==null)continue}else S=m.action;typeof S=="function"?l[s+1]=S:(l.splice(s,3),s-=3),rp(l)}}}function ip(){function e(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(m){return c=m})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),s||setTimeout(l,20)}function l(){if(!s&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(l,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function fd(e){this._internalRoot=e}ji.prototype.render=fd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(d(409));var l=t.current,s=na();Fm(l,s,e,t,null,null)},ji.prototype.unmount=fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fm(e.current,2,null,e,null,null),ai(),t[tn]=null}};function ji(e){this._internalRoot=e}ji.prototype.unstable_scheduleHydration=function(e){if(e){var t=hu();e={blockedOn:null,target:e,priority:t};for(var l=0;l<Nl.length&&t!==0&&t<Nl[l].priority;l++);Nl.splice(l,0,e),l===0&&np(e)}};var cp=r.version;if(cp!=="19.2.3")throw Error(d(527,cp,"19.2.3"));P.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=h(t),e=e!==null?N(e):null,e=e===null?null:e.stateNode,e};var Gg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Si=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Si.isDisabled&&Si.supportsFiber)try{yt=Si.inject(Gg),Pt=Si}catch{}}return Gs.createRoot=function(e,t){if(!u(e))throw Error(d(299));var l=!1,s="",c=px,o=hx,m=bx;return t!=null&&(t.unstable_strictMode===!0&&(l=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=Pm(e,1,!1,null,null,l,s,null,c,o,m,ip),e[tn]=t.current,Ko(e),new fd(t)},Gs.hydrateRoot=function(e,t,l){if(!u(e))throw Error(d(299));var s=!1,c="",o=px,m=hx,S=bx,_=null;return l!=null&&(l.unstable_strictMode===!0&&(s=!0),l.identifierPrefix!==void 0&&(c=l.identifierPrefix),l.onUncaughtError!==void 0&&(o=l.onUncaughtError),l.onCaughtError!==void 0&&(m=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.formState!==void 0&&(_=l.formState)),t=Pm(e,1,!0,t,l??null,s,c,_,o,m,S,ip),t.context=Jm(null),l=t.current,s=na(),s=tc(s),c=rl(s),c.callback=null,il(l,c,s),l=s,t.current.lanes=l,Pn(t,l),Ta(t),e[tn]=t.current,Ko(e),new ji(t)},Gs.version="19.2.3",Gs}var yp;function Pg(){if(yp)return pd.exports;yp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),pd.exports=Zg(),pd.exports}var Jg=Pg();const Fg=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wg=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,i,d)=>d?d.toUpperCase():i.toLowerCase()),gp=n=>{const r=Wg(n);return r.charAt(0).toUpperCase()+r.slice(1)},mh=(...n)=>n.filter((r,i,d)=>!!r&&r.trim()!==""&&d.indexOf(r)===i).join(" ").trim(),ev=n=>{for(const r in n)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};var tv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const av=E.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:u="",children:f,iconNode:x,...y},p)=>E.createElement("svg",{ref:p,...tv,width:r,height:r,stroke:n,strokeWidth:d?Number(i)*24/Number(r):i,className:mh("lucide",u),...!f&&!ev(y)&&{"aria-hidden":"true"},...y},[...x.map(([h,N])=>E.createElement(h,N)),...Array.isArray(f)?f:[f]]));const Ce=(n,r)=>{const i=E.forwardRef(({className:d,...u},f)=>E.createElement(av,{ref:f,iconNode:r,className:mh(`lucide-${Fg(gp(n))}`,`lucide-${n}`,d),...u}));return i.displayName=gp(n),i};const lv=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Pl=Ce("activity",lv);const nv=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],wi=Ce("archive",nv);const sv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],rv=Ce("arrow-right",sv);const iv=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],cv=Ce("calculator",iv);const ov=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Oa=Ce("calendar",ov);const dv=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Od=Ce("chart-no-axes-column",dv);const uv=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Md=Ce("chart-pie",uv);const fv=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ra=Ce("chevron-down",fv);const xv=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Zs=Ce("chevron-up",xv);const mv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ri=Ce("circle-alert",mv);const pv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Rd=Ce("circle-check-big",pv);const hv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],bv=Ce("circle-minus",hv);const yv=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Gn=Ce("clipboard-list",yv);const gv=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],vv=Ce("clipboard",gv);const Nv=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Wl=Ce("clock",Nv);const jv=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Sv=Ce("credit-card",jv);const wv=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Dt=Ce("dollar-sign",wv);const Dv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Cv=Ce("eye",Dv);const Av=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Qs=Ce("file-text",Av);const Ev=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ps=Ce("funnel",Ev);const Tv=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],vp=Ce("grip-vertical",Tv);const kv=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Ov=Ce("history",kv);const Mv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Rv=Ce("info",Mv);const _v=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],zv=Ce("list-ordered",_v);const Lv=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Bv=Ce("lock",Lv);const Uv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$v=Ce("log-out",Uv);const Hv=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Np=Ce("map-pin",Hv);const Gv=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],jp=Ce("moon",Gv);const qv=[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],Di=Ce("package-plus",qv);const Iv=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],qn=Ce("package",Iv);const Vv=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],Yv=Ce("piggy-bank",Vv);const Qv=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Kv=Ce("printer",Qv);const Xv=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ft=Ce("refresh-cw",Xv);const Zv=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Fl=Ce("rotate-ccw",Zv);const Pv=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Js=Ce("save",Pv);const Jv=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Tt=Ce("search",Jv);const Fv=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ph=Ce("settings",Fv);const Wv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ka=Ce("shield",Wv);const e0=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Ci=Ce("shopping-cart",e0);const t0=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fs=Ce("square-check-big",t0);const a0=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sp=Ce("sun",a0);const l0=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_i=Ce("trash-2",l0);const n0=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],wl=Ce("trending-up",n0);const s0=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Jl=Ce("triangle-alert",s0);const r0=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],_d=Ce("truck",r0);const i0=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],c0=Ce("user-plus",i0);const o0=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ma=Ce("user",o0);const d0=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],zi=Ce("users",d0);const u0=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Sl=Ce("wallet",u0);const f0=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],x0=Ce("wifi-off",f0),Ee=async(n,r,i,d=null)=>{try{const u=new AbortController,f=setTimeout(()=>u.abort(),3e4),x=await fetch(n,{method:"POST",redirect:"follow",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:r,payload:i,token:d}),signal:u.signal});if(clearTimeout(f),!x.ok)throw new Error(`HTTP error! status: ${x.status}`);const y=await x.json();if(y.error)throw new Error(y.error);return y}catch(u){throw console.error(`API Error [${r}]:`,u),u.name==="AbortError"?new Error(" GAS "):u.message.includes("Load failed")||u.message.includes("Failed to fetch")?new Error(" GAS Anyone CORS "):u}};function m0({onLogin:n,apiUrl:r}){const[i,d]=E.useState(!1),[u,f]=E.useState(""),[x,y]=E.useState(""),[p,h]=E.useState(!1),N=async g=>{g.preventDefault(),h(!0);try{const j=await Ee(r,i?"register":"login",{username:u,password:x});console.log("Login API Result:",j),i?(alert(" ()"),d(!1)):n(j)}catch(b){alert(b.message)}finally{h(!1)}};return a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 bg-slate-50",children:a.jsxs("div",{className:"bg-white border border-slate-200 p-8 w-full max-w-md rounded-2xl shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("img",{src:"/inventory-system/logo.png",alt:"Logo",className:"h-20 w-auto object-contain"})}),a.jsx("p",{className:"text-slate-500",children:i?"":""})]}),a.jsxs("form",{onSubmit:N,className:"space-y-6",children:[a.jsx("div",{children:a.jsxs("div",{className:"relative",children:[a.jsx(Ma,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:20}),a.jsx("input",{required:!0,type:"text",placeholder:"",className:"input-field pl-10 bg-slate-50 border-slate-200 focus:bg-white transition-all",value:u,onChange:g=>f(g.target.value)})]})}),a.jsx("div",{children:a.jsxs("div",{className:"relative",children:[a.jsx(Bv,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:20}),a.jsx("input",{required:!0,type:"password",placeholder:"",className:"input-field pl-10 bg-slate-50 border-slate-200 focus:bg-white transition-all",value:x,onChange:g=>y(g.target.value)})]})}),a.jsxs("button",{type:"submit",disabled:p,className:"btn-primary w-full flex justify-center items-center gap-2 py-3",children:[p?"...":i?"":""," ",a.jsx(rv,{size:18})]})]}),a.jsx("div",{className:"mt-6 text-center text-sm text-slate-500",children:a.jsx("button",{onClick:()=>d(!i),className:"hover:text-blue-400 transition-colors",children:i?"":""})})]})})}var Id=xh();const p0=fh(Id);function qt(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var h0=typeof Symbol=="function"&&Symbol.observable||"@@observable",wp=h0,Dp=()=>Math.random().toString(36).substring(7).split("").join("."),b0={INIT:`@@redux/INIT${Dp()}`,REPLACE:`@@redux/REPLACE${Dp()}`},Cp=b0;function y0(n){if(typeof n!="object"||n===null)return!1;let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r||Object.getPrototypeOf(n)===null}function hh(n,r,i){if(typeof n!="function")throw new Error(qt(2));if(typeof r=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(qt(0));if(typeof r=="function"&&typeof i>"u"&&(i=r,r=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(qt(1));return i(hh)(n,r)}let d=n,u=r,f=new Map,x=f,y=0,p=!1;function h(){x===f&&(x=new Map,f.forEach((v,w)=>{x.set(w,v)}))}function N(){if(p)throw new Error(qt(3));return u}function g(v){if(typeof v!="function")throw new Error(qt(4));if(p)throw new Error(qt(5));let w=!0;h();const C=y++;return x.set(C,v),function(){if(w){if(p)throw new Error(qt(6));w=!1,h(),x.delete(C),f=null}}}function b(v){if(!y0(v))throw new Error(qt(7));if(typeof v.type>"u")throw new Error(qt(8));if(typeof v.type!="string")throw new Error(qt(17));if(p)throw new Error(qt(9));try{p=!0,u=d(u,v)}finally{p=!1}return(f=x).forEach(C=>{C()}),v}function j(v){if(typeof v!="function")throw new Error(qt(10));d=v,b({type:Cp.REPLACE})}function k(){const v=g;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(qt(11));function C(){const B=w;B.next&&B.next(N())}return C(),{unsubscribe:v(C)}},[wp](){return this}}}return b({type:Cp.INIT}),{dispatch:b,subscribe:g,getState:N,replaceReducer:j,[wp]:k}}function Ap(n,r){return function(...i){return r(n.apply(this,i))}}function Ep(n,r){if(typeof n=="function")return Ap(n,r);if(typeof n!="object"||n===null)throw new Error(qt(16));const i={};for(const d in n){const u=n[d];typeof u=="function"&&(i[d]=Ap(u,r))}return i}function bh(...n){return n.length===0?r=>r:n.length===1?n[0]:n.reduce((r,i)=>(...d)=>r(i(...d)))}function g0(...n){return r=>(i,d)=>{const u=r(i,d);let f=()=>{throw new Error(qt(15))};const x={getState:u.getState,dispatch:(p,...h)=>f(p,...h)},y=n.map(p=>p(x));return f=bh(...y)(u.dispatch),{...u,dispatch:f}}}var gd={exports:{}},vd={};var Tp;function v0(){if(Tp)return vd;Tp=1;var n=Yi();function r(p,h){return p===h&&(p!==0||1/p===1/h)||p!==p&&h!==h}var i=typeof Object.is=="function"?Object.is:r,d=n.useSyncExternalStore,u=n.useRef,f=n.useEffect,x=n.useMemo,y=n.useDebugValue;return vd.useSyncExternalStoreWithSelector=function(p,h,N,g,b){var j=u(null);if(j.current===null){var k={hasValue:!1,value:null};j.current=k}else k=j.current;j=x(function(){function v(T){if(!w){if(w=!0,C=T,T=g(T),b!==void 0&&k.hasValue){var D=k.value;if(b(D,T))return A=D}return A=T}if(D=A,i(C,T))return D;var U=g(T);return b!==void 0&&b(D,U)?(C=T,D):(C=T,A=U)}var w=!1,C,A,B=N===void 0?null:N;return[function(){return v(h())},B===null?void 0:function(){return v(B())}]},[h,N,g,b]);var R=d(p,j[0],j[1]);return f(function(){k.hasValue=!0,k.value=R},[R]),y(R),R},vd}var kp;function N0(){return kp||(kp=1,gd.exports=v0()),gd.exports}N0();var j0=E.version.startsWith("19"),S0=Symbol.for(j0?"react.transitional.element":"react.element"),w0=Symbol.for("react.portal"),D0=Symbol.for("react.fragment"),C0=Symbol.for("react.strict_mode"),A0=Symbol.for("react.profiler"),E0=Symbol.for("react.consumer"),T0=Symbol.for("react.context"),yh=Symbol.for("react.forward_ref"),k0=Symbol.for("react.suspense"),O0=Symbol.for("react.suspense_list"),Vd=Symbol.for("react.memo"),M0=Symbol.for("react.lazy"),R0=yh,_0=Vd;function z0(n){if(typeof n=="object"&&n!==null){const{$$typeof:r}=n;switch(r){case S0:switch(n=n.type,n){case D0:case A0:case C0:case k0:case O0:return n;default:switch(n=n&&n.$$typeof,n){case T0:case yh:case M0:case Vd:return n;case E0:return n;default:return r}}case w0:return r}}}function L0(n){return z0(n)===Vd}function B0(n,r,i,d,{areStatesEqual:u,areOwnPropsEqual:f,areStatePropsEqual:x}){let y=!1,p,h,N,g,b;function j(C,A){return p=C,h=A,N=n(p,h),g=r(d,h),b=i(N,g,h),y=!0,b}function k(){return N=n(p,h),r.dependsOnOwnProps&&(g=r(d,h)),b=i(N,g,h),b}function R(){return n.dependsOnOwnProps&&(N=n(p,h)),r.dependsOnOwnProps&&(g=r(d,h)),b=i(N,g,h),b}function v(){const C=n(p,h),A=!x(C,N);return N=C,A&&(b=i(N,g,h)),b}function w(C,A){const B=!f(A,h),T=!u(C,p,A,h);return p=C,h=A,B&&T?k():B?R():T?v():b}return function(A,B){return y?w(A,B):j(A,B)}}function U0(n,{initMapStateToProps:r,initMapDispatchToProps:i,initMergeProps:d,...u}){const f=r(n,u),x=i(n,u),y=d(n,u);return B0(f,x,y,n,u)}function $0(n,r){const i={};for(const d in n){const u=n[d];typeof u=="function"&&(i[d]=(...f)=>r(u(...f)))}return i}function zd(n){return function(i){const d=n(i);function u(){return d}return u.dependsOnOwnProps=!1,u}}function Op(n){return n.dependsOnOwnProps?!!n.dependsOnOwnProps:n.length!==1}function gh(n,r){return function(d,{displayName:u}){const f=function(y,p){return f.dependsOnOwnProps?f.mapToProps(y,p):f.mapToProps(y,void 0)};return f.dependsOnOwnProps=!0,f.mapToProps=function(y,p){f.mapToProps=n,f.dependsOnOwnProps=Op(n);let h=f(y,p);return typeof h=="function"&&(f.mapToProps=h,f.dependsOnOwnProps=Op(h),h=f(y,p)),h},f}}function Yd(n,r){return(i,d)=>{throw new Error(`Invalid value of type ${typeof n} for ${r} argument when connecting component ${d.wrappedComponentName}.`)}}function H0(n){return n&&typeof n=="object"?zd(r=>$0(n,r)):n?typeof n=="function"?gh(n):Yd(n,"mapDispatchToProps"):zd(r=>({dispatch:r}))}function G0(n){return n?typeof n=="function"?gh(n):Yd(n,"mapStateToProps"):zd(()=>({}))}function q0(n,r,i){return{...i,...n,...r}}function I0(n){return function(i,{displayName:d,areMergedPropsEqual:u}){let f=!1,x;return function(p,h,N){const g=n(p,h,N);return f?u(g,x)||(x=g):(f=!0,x=g),x}}}function V0(n){return n?typeof n=="function"?I0(n):Yd(n,"mergeProps"):()=>q0}function Y0(n){n()}function Q0(){let n=null,r=null;return{clear(){n=null,r=null},notify(){Y0(()=>{let i=n;for(;i;)i.callback(),i=i.next})},get(){const i=[];let d=n;for(;d;)i.push(d),d=d.next;return i},subscribe(i){let d=!0;const u=r={callback:i,next:null,prev:r};return u.prev?u.prev.next=u:n=u,function(){!d||n===null||(d=!1,u.next?u.next.prev=u.prev:r=u.prev,u.prev?u.prev.next=u.next:n=u.next)}}}}var Mp={notify(){},get:()=>[]};function vh(n,r){let i,d=Mp,u=0,f=!1;function x(R){N();const v=d.subscribe(R);let w=!1;return()=>{w||(w=!0,v(),g())}}function y(){d.notify()}function p(){k.onStateChange&&k.onStateChange()}function h(){return f}function N(){u++,i||(i=r?r.addNestedSub(p):n.subscribe(p),d=Q0())}function g(){u--,i&&u===0&&(i(),i=void 0,d.clear(),d=Mp)}function b(){f||(f=!0,N())}function j(){f&&(f=!1,g())}const k={addNestedSub:x,notifyNestedSubs:y,handleChangeWrapper:p,isSubscribed:h,trySubscribe:b,tryUnsubscribe:j,getListeners:()=>d};return k}var K0=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",X0=K0(),Z0=()=>typeof navigator<"u"&&navigator.product==="ReactNative",P0=Z0(),J0=()=>X0||P0?E.useLayoutEffect:E.useEffect,Li=J0();function Rp(n,r){return n===r?n!==0||r!==0||1/n===1/r:n!==n&&r!==r}function Nd(n,r){if(Rp(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;const i=Object.keys(n),d=Object.keys(r);if(i.length!==d.length)return!1;for(let u=0;u<i.length;u++)if(!Object.prototype.hasOwnProperty.call(r,i[u])||!Rp(n[i[u]],r[i[u]]))return!1;return!0}var F0={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},W0={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},e1={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Nh={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},t1={[R0]:e1,[_0]:Nh};function _p(n){return L0(n)?Nh:t1[n.$$typeof]||F0}var a1=Object.defineProperty,l1=Object.getOwnPropertyNames,zp=Object.getOwnPropertySymbols,n1=Object.getOwnPropertyDescriptor,s1=Object.getPrototypeOf,Lp=Object.prototype;function Ld(n,r){if(typeof r!="string"){if(Lp){const f=s1(r);f&&f!==Lp&&Ld(n,f)}let i=l1(r);zp&&(i=i.concat(zp(r)));const d=_p(n),u=_p(r);for(let f=0;f<i.length;++f){const x=i[f];if(!W0[x]&&!(u&&u[x])&&!(d&&d[x])){const y=n1(r,x);try{a1(n,x,y)}catch{}}}}return n}var r1=Symbol.for("react-redux-context"),i1=typeof globalThis<"u"?globalThis:{};function c1(){if(!E.createContext)return{};const n=i1[r1]??=new Map;let r=n.get(E.createContext);return r||(r=E.createContext(null),n.set(E.createContext,r)),r}var jh=c1(),o1=[null,null];function d1(n,r,i){Li(()=>n(...r),i)}function u1(n,r,i,d,u,f){n.current=d,i.current=!1,u.current&&(u.current=null,f())}function f1(n,r,i,d,u,f,x,y,p,h,N){if(!n)return()=>{};let g=!1,b=null;const j=()=>{if(g||!y.current)return;const R=r.getState();let v,w;try{v=d(R,u.current)}catch(C){w=C,b=C}w||(b=null),v===f.current?x.current||h():(f.current=v,p.current=v,x.current=!0,N())};return i.onStateChange=j,i.trySubscribe(),j(),()=>{if(g=!0,i.tryUnsubscribe(),i.onStateChange=null,b)throw b}}function x1(n,r){return n===r}function m1(n,r,i,{pure:d,areStatesEqual:u=x1,areOwnPropsEqual:f=Nd,areStatePropsEqual:x=Nd,areMergedPropsEqual:y=Nd,forwardRef:p=!1,context:h=jh}={}){const N=h,g=G0(n),b=H0(r),j=V0(i),k=!!n;return v=>{const w=v.displayName||v.name||"Component",C=`Connect(${w})`,A={shouldHandleStateChanges:k,displayName:C,wrappedComponentName:w,WrappedComponent:v,initMapStateToProps:g,initMapDispatchToProps:b,initMergeProps:j,areStatesEqual:u,areStatePropsEqual:x,areOwnPropsEqual:f,areMergedPropsEqual:y};function B(U){const[V,re,de]=E.useMemo(()=>{const{reactReduxForwardedRef:Be,...Ge}=U;return[U.context,Be,Ge]},[U]),pe=E.useMemo(()=>{let Be=N;return V?.Consumer,Be},[V,N]),W=E.useContext(pe),fe=!!U.store&&!!U.store.getState&&!!U.store.dispatch,ge=!!W&&!!W.store,oe=fe?U.store:W.store,H=ge?W.getServerState:oe.getState,P=E.useMemo(()=>U0(oe.dispatch,A),[oe]),[O,F]=E.useMemo(()=>{if(!k)return o1;const Be=vh(oe,fe?void 0:W.subscription),Ge=Be.notifyNestedSubs.bind(Be);return[Be,Ge]},[oe,fe,W]),ne=E.useMemo(()=>fe?W:{...W,subscription:O},[fe,W,O]),M=E.useRef(void 0),K=E.useRef(de),ae=E.useRef(void 0),se=E.useRef(!1),Ne=E.useRef(!1),ye=E.useRef(void 0);Li(()=>(Ne.current=!0,()=>{Ne.current=!1}),[]);const J=E.useMemo(()=>()=>ae.current&&de===K.current?ae.current:P(oe.getState(),de),[oe,de]),ie=E.useMemo(()=>Ge=>O?f1(k,oe,O,P,K,M,se,Ne,ae,F,Ge):()=>{},[O]);d1(u1,[K,M,se,de,ae,F]);let me;try{me=E.useSyncExternalStore(ie,J,H?()=>P(H(),de):J)}catch(Be){throw ye.current&&(Be.message+=`
The error may be correlated with this previous error:
${ye.current.stack}

`),Be}Li(()=>{ye.current=void 0,ae.current=void 0,M.current=me});const Ae=E.useMemo(()=>E.createElement(v,{...me,ref:re}),[re,v,me]);return E.useMemo(()=>k?E.createElement(pe.Provider,{value:ne},Ae):Ae,[pe,Ae,ne])}const D=E.memo(B);if(D.WrappedComponent=v,D.displayName=B.displayName=C,p){const V=E.forwardRef(function(de,pe){return E.createElement(D,{...de,reactReduxForwardedRef:pe})});return V.displayName=C,V.WrappedComponent=v,Ld(V,v)}return Ld(D,v)}}var Sh=m1;function p1(n){const{children:r,context:i,serverState:d,store:u}=n,f=E.useMemo(()=>{const p=vh(u);return{store:u,subscription:p,getServerState:d?()=>d:void 0}},[u,d]),x=E.useMemo(()=>u.getState(),[u]);Li(()=>{const{subscription:p}=f;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),x!==u.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[f,x]);const y=i||jh;return E.createElement(y.Provider,{value:f},r)}var h1=p1,b1="Invariant failed";function y1(n,r){throw new Error(b1)}var wa=function(r){var i=r.top,d=r.right,u=r.bottom,f=r.left,x=d-f,y=u-i,p={top:i,right:d,bottom:u,left:f,width:x,height:y,x:f,y:i,center:{x:(d+f)/2,y:(u+i)/2}};return p},Qd=function(r,i){return{top:r.top-i.top,left:r.left-i.left,bottom:r.bottom+i.bottom,right:r.right+i.right}},Bp=function(r,i){return{top:r.top+i.top,left:r.left+i.left,bottom:r.bottom-i.bottom,right:r.right-i.right}},g1=function(r,i){return{top:r.top+i.y,left:r.left+i.x,bottom:r.bottom+i.y,right:r.right+i.x}},jd={top:0,right:0,bottom:0,left:0},Kd=function(r){var i=r.borderBox,d=r.margin,u=d===void 0?jd:d,f=r.border,x=f===void 0?jd:f,y=r.padding,p=y===void 0?jd:y,h=wa(Qd(i,u)),N=wa(Bp(i,x)),g=wa(Bp(N,p));return{marginBox:h,borderBox:wa(i),paddingBox:N,contentBox:g,margin:u,border:x,padding:p}},ya=function(r){var i=r.slice(0,-2),d=r.slice(-2);if(d!=="px")return 0;var u=Number(i);return isNaN(u)&&y1(),u},v1=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Bi=function(r,i){var d=r.borderBox,u=r.border,f=r.margin,x=r.padding,y=g1(d,i);return Kd({borderBox:y,border:u,margin:f,padding:x})},Ui=function(r,i){return i===void 0&&(i=v1()),Bi(r,i)},wh=function(r,i){var d={top:ya(i.marginTop),right:ya(i.marginRight),bottom:ya(i.marginBottom),left:ya(i.marginLeft)},u={top:ya(i.paddingTop),right:ya(i.paddingRight),bottom:ya(i.paddingBottom),left:ya(i.paddingLeft)},f={top:ya(i.borderTopWidth),right:ya(i.borderRightWidth),bottom:ya(i.borderBottomWidth),left:ya(i.borderLeftWidth)};return Kd({borderBox:r,margin:d,padding:u,border:f})},Dh=function(r){var i=r.getBoundingClientRect(),d=window.getComputedStyle(r);return wh(i,d)},Ws=function(r){var i=[],d=null,u=function(){for(var x=arguments.length,y=new Array(x),p=0;p<x;p++)y[p]=arguments[p];i=y,!d&&(d=requestAnimationFrame(function(){d=null,r.apply(void 0,i)}))};return u.cancel=function(){d&&(cancelAnimationFrame(d),d=null)},u};function $i(){return $i=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var d in i)({}).hasOwnProperty.call(i,d)&&(n[d]=i[d])}return n},$i.apply(null,arguments)}function Ch(n,r){}Ch.bind(null,"warn");Ch.bind(null,"error");function Dl(){}function N1(n,r){return{...n,...r}}function ga(n,r,i){const d=r.map(u=>{const f=N1(i,u.options);return n.addEventListener(u.eventName,u.fn,f),function(){n.removeEventListener(u.eventName,u.fn,f)}});return function(){d.forEach(f=>{f()})}}const j1="Invariant failed";class Hi extends Error{}Hi.prototype.toString=function(){return this.message};function ce(n,r){throw new Hi(j1)}class S1 extends Je.Component{constructor(...r){super(...r),this.callbacks=null,this.unbind=Dl,this.onWindowError=i=>{const d=this.getCallbacks();d.isDragging()&&d.tryAbort(),i.error instanceof Hi&&i.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=i=>{this.callbacks=i}}componentDidMount(){this.unbind=ga(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(r){if(r instanceof Hi){this.setState({});return}throw r}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const w1=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Gi=n=>n+1,D1=n=>`
  You have lifted an item in position ${Gi(n.source.index)}
`,Ah=(n,r)=>{const i=n.droppableId===r.droppableId,d=Gi(n.index),u=Gi(r.index);return i?`
      You have moved the item from position ${d}
      to position ${u}
    `:`
    You have moved the item from position ${d}
    in list ${n.droppableId}
    to list ${r.droppableId}
    in position ${u}
  `},Eh=(n,r,i)=>r.droppableId===i.droppableId?`
      The item ${n}
      has been combined with ${i.draggableId}`:`
      The item ${n}
      in list ${r.droppableId}
      has been combined with ${i.draggableId}
      in list ${i.droppableId}
    `,C1=n=>{const r=n.destination;if(r)return Ah(n.source,r);const i=n.combine;return i?Eh(n.draggableId,n.source,i):"You are over an area that cannot be dropped on"},Up=n=>`
  The item has returned to its starting position
  of ${Gi(n.index)}
`,A1=n=>{if(n.reason==="CANCEL")return`
      Movement cancelled.
      ${Up(n.source)}
    `;const r=n.destination,i=n.combine;return r?`
      You have dropped the item.
      ${Ah(n.source,r)}
    `:i?`
      You have dropped the item.
      ${Eh(n.draggableId,n.source,i)}
    `:`
    The item has been dropped while not over a drop area.
    ${Up(n.source)}
  `},Mi={dragHandleUsageInstructions:w1,onDragStart:D1,onDragUpdate:C1,onDragEnd:A1};function E1(n,r){return!!(n===r||Number.isNaN(n)&&Number.isNaN(r))}function Th(n,r){if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!E1(n[i],r[i]))return!1;return!0}function Ye(n,r){const i=E.useState(()=>({inputs:r,result:n()}))[0],d=E.useRef(!0),u=E.useRef(i),x=d.current||!!(r&&u.current.inputs&&Th(r,u.current.inputs))?u.current:{inputs:r,result:n()};return E.useEffect(()=>{d.current=!1,u.current=x},[x]),x.result}function je(n,r){return Ye(()=>n,r)}const kt={x:0,y:0},Bt=(n,r)=>({x:n.x+r.x,y:n.y+r.y}),sa=(n,r)=>({x:n.x-r.x,y:n.y-r.y}),Cl=(n,r)=>n.x===r.x&&n.y===r.y,Qn=n=>({x:n.x!==0?-n.x:0,y:n.y!==0?-n.y:0}),en=(n,r,i=0)=>n==="x"?{x:r,y:i}:{x:i,y:r},er=(n,r)=>Math.sqrt((r.x-n.x)**2+(r.y-n.y)**2),$p=(n,r)=>Math.min(...r.map(i=>er(n,i))),kh=n=>r=>({x:n(r.x),y:n(r.y)});var T1=(n,r)=>{const i=wa({top:Math.max(r.top,n.top),right:Math.min(r.right,n.right),bottom:Math.min(r.bottom,n.bottom),left:Math.max(r.left,n.left)});return i.width<=0||i.height<=0?null:i};const rr=(n,r)=>({top:n.top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x}),Hp=n=>[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.left,y:n.bottom},{x:n.right,y:n.bottom}],k1={top:0,right:0,bottom:0,left:0},O1=(n,r)=>r?rr(n,r.scroll.diff.displacement):n,M1=(n,r,i)=>i&&i.increasedBy?{...n,[r.end]:n[r.end]+i.increasedBy[r.line]}:n,R1=(n,r)=>r&&r.shouldClipSubject?T1(r.pageMarginBox,n):wa(n);var In=({page:n,withPlaceholder:r,axis:i,frame:d})=>{const u=O1(n.marginBox,d),f=M1(u,i,r),x=R1(f,d);return{page:n,withPlaceholder:r,active:x}},Xd=(n,r)=>{n.frame||ce();const i=n.frame,d=sa(r,i.scroll.initial),u=Qn(d),f={...i,scroll:{initial:i.scroll.initial,current:r,diff:{value:d,displacement:u},max:i.scroll.max}},x=In({page:n.subject.page,withPlaceholder:n.subject.withPlaceholder,axis:n.axis,frame:f});return{...n,frame:f,subject:x}};function Et(n,r=Th){let i=null;function d(...u){if(i&&i.lastThis===this&&r(u,i.lastArgs))return i.lastResult;const f=n.apply(this,u);return i={lastResult:f,lastArgs:u,lastThis:this},f}return d.clear=function(){i=null},d}const Oh=Et(n=>n.reduce((r,i)=>(r[i.descriptor.id]=i,r),{})),Mh=Et(n=>n.reduce((r,i)=>(r[i.descriptor.id]=i,r),{})),Qi=Et(n=>Object.values(n)),_1=Et(n=>Object.values(n));var Kn=Et((n,r)=>_1(r).filter(d=>n===d.descriptor.droppableId).sort((d,u)=>d.descriptor.index-u.descriptor.index));function Zd(n){return n.at&&n.at.type==="REORDER"?n.at.destination:null}function Ki(n){return n.at&&n.at.type==="COMBINE"?n.at.combine:null}var Xi=Et((n,r)=>r.filter(i=>i.descriptor.id!==n.descriptor.id)),z1=({isMovingForward:n,draggable:r,destination:i,insideDestination:d,previousImpact:u})=>{if(!i.isCombineEnabled||!Zd(u))return null;function x(j){const k={type:"COMBINE",combine:{draggableId:j,droppableId:i.descriptor.id}};return{...u,at:k}}const y=u.displaced.all,p=y.length?y[0]:null;if(n)return p?x(p):null;const h=Xi(r,d);if(!p){if(!h.length)return null;const j=h[h.length-1];return x(j.descriptor.id)}const N=h.findIndex(j=>j.descriptor.id===p);N===-1&&ce();const g=N-1;if(g<0)return null;const b=h[g];return x(b.descriptor.id)},Xn=(n,r)=>n.descriptor.droppableId===r.descriptor.id;const Rh={point:kt,value:0},tr={invisible:{},visible:{},all:[]},L1={displaced:tr,displacedBy:Rh,at:null};var va=(n,r)=>i=>n<=i&&i<=r,_h=n=>{const r=va(n.top,n.bottom),i=va(n.left,n.right);return d=>{if(r(d.top)&&r(d.bottom)&&i(d.left)&&i(d.right))return!0;const f=r(d.top)||r(d.bottom),x=i(d.left)||i(d.right);if(f&&x)return!0;const p=d.top<n.top&&d.bottom>n.bottom,h=d.left<n.left&&d.right>n.right;return p&&h?!0:p&&x||h&&f}},B1=n=>{const r=va(n.top,n.bottom),i=va(n.left,n.right);return d=>r(d.top)&&r(d.bottom)&&i(d.left)&&i(d.right)};const Pd={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},zh={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var U1=n=>r=>{const i=va(r.top,r.bottom),d=va(r.left,r.right);return u=>n===Pd?i(u.top)&&i(u.bottom):d(u.left)&&d(u.right)};const $1=(n,r)=>{const i=r.frame?r.frame.scroll.diff.displacement:kt;return rr(n,i)},H1=(n,r,i)=>r.subject.active?i(r.subject.active)(n):!1,G1=(n,r,i)=>i(r)(n),Jd=({target:n,destination:r,viewport:i,withDroppableDisplacement:d,isVisibleThroughFrameFn:u})=>{const f=d?$1(n,r):n;return H1(f,r,u)&&G1(f,i,u)},q1=n=>Jd({...n,isVisibleThroughFrameFn:_h}),Lh=n=>Jd({...n,isVisibleThroughFrameFn:B1}),I1=n=>Jd({...n,isVisibleThroughFrameFn:U1(n.destination.axis)}),V1=(n,r,i)=>{if(typeof i=="boolean")return i;if(!r)return!0;const{invisible:d,visible:u}=r;if(d[n])return!1;const f=u[n];return f?f.shouldAnimate:!0};function Y1(n,r){const i=n.page.marginBox,d={top:r.point.y,right:0,bottom:0,left:r.point.x};return wa(Qd(i,d))}function ar({afterDragging:n,destination:r,displacedBy:i,viewport:d,forceShouldAnimate:u,last:f}){return n.reduce(function(y,p){const h=Y1(p,i),N=p.descriptor.id;if(y.all.push(N),!q1({target:h,destination:r,viewport:d,withDroppableDisplacement:!0}))return y.invisible[p.descriptor.id]=!0,y;const b=V1(N,f,u),j={draggableId:N,shouldAnimate:b};return y.visible[N]=j,y},{all:[],visible:{},invisible:{}})}function Q1(n,r){if(!n.length)return 0;const i=n[n.length-1].descriptor.index;return r.inHomeList?i:i+1}function Gp({insideDestination:n,inHomeList:r,displacedBy:i,destination:d}){const u=Q1(n,{inHomeList:r});return{displaced:tr,displacedBy:i,at:{type:"REORDER",destination:{droppableId:d.descriptor.id,index:u}}}}function qi({draggable:n,insideDestination:r,destination:i,viewport:d,displacedBy:u,last:f,index:x,forceShouldAnimate:y}){const p=Xn(n,i);if(x==null)return Gp({insideDestination:r,inHomeList:p,displacedBy:u,destination:i});const h=r.find(k=>k.descriptor.index===x);if(!h)return Gp({insideDestination:r,inHomeList:p,displacedBy:u,destination:i});const N=Xi(n,r),g=r.indexOf(h),b=N.slice(g);return{displaced:ar({afterDragging:b,destination:i,displacedBy:u,last:f,viewport:d.frame,forceShouldAnimate:y}),displacedBy:u,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:x}}}}function Al(n,r){return!!r.effected[n]}var K1=({isMovingForward:n,destination:r,draggables:i,combine:d,afterCritical:u})=>{if(!r.isCombineEnabled)return null;const f=d.draggableId,y=i[f].descriptor.index;return Al(f,u)?n?y:y-1:n?y+1:y},X1=({isMovingForward:n,isInHomeList:r,insideDestination:i,location:d})=>{if(!i.length)return null;const u=d.index,f=n?u+1:u-1,x=i[0].descriptor.index,y=i[i.length-1].descriptor.index,p=r?y:y+1;return f<x||f>p?null:f},Z1=({isMovingForward:n,isInHomeList:r,draggable:i,draggables:d,destination:u,insideDestination:f,previousImpact:x,viewport:y,afterCritical:p})=>{const h=x.at;if(h||ce(),h.type==="REORDER"){const g=X1({isMovingForward:n,isInHomeList:r,location:h.destination,insideDestination:f});return g==null?null:qi({draggable:i,insideDestination:f,destination:u,viewport:y,last:x.displaced,displacedBy:x.displacedBy,index:g})}const N=K1({isMovingForward:n,destination:u,displaced:x.displaced,draggables:d,combine:h.combine,afterCritical:p});return N==null?null:qi({draggable:i,insideDestination:f,destination:u,viewport:y,last:x.displaced,displacedBy:x.displacedBy,index:N})},P1=({displaced:n,afterCritical:r,combineWith:i,displacedBy:d})=>{const u=!!(n.visible[i]||n.invisible[i]);return Al(i,r)?u?kt:Qn(d.point):u?d.point:kt},J1=({afterCritical:n,impact:r,draggables:i})=>{const d=Ki(r);d||ce();const u=d.draggableId,f=i[u].page.borderBox.center,x=P1({displaced:r.displaced,afterCritical:n,combineWith:u,displacedBy:r.displacedBy});return Bt(f,x)};const Bh=(n,r)=>r.margin[n.start]+r.borderBox[n.size]/2,F1=(n,r)=>r.margin[n.end]+r.borderBox[n.size]/2,Fd=(n,r,i)=>r[n.crossAxisStart]+i.margin[n.crossAxisStart]+i.borderBox[n.crossAxisSize]/2,qp=({axis:n,moveRelativeTo:r,isMoving:i})=>en(n.line,r.marginBox[n.end]+Bh(n,i),Fd(n,r.marginBox,i)),Ip=({axis:n,moveRelativeTo:r,isMoving:i})=>en(n.line,r.marginBox[n.start]-F1(n,i),Fd(n,r.marginBox,i)),W1=({axis:n,moveInto:r,isMoving:i})=>en(n.line,r.contentBox[n.start]+Bh(n,i),Fd(n,r.contentBox,i));var eN=({impact:n,draggable:r,draggables:i,droppable:d,afterCritical:u})=>{const f=Kn(d.descriptor.id,i),x=r.page,y=d.axis;if(!f.length)return W1({axis:y,moveInto:d.page,isMoving:x});const{displaced:p,displacedBy:h}=n,N=p.all[0];if(N){const b=i[N];if(Al(N,u))return Ip({axis:y,moveRelativeTo:b.page,isMoving:x});const j=Bi(b.page,h.point);return Ip({axis:y,moveRelativeTo:j,isMoving:x})}const g=f[f.length-1];if(g.descriptor.id===r.descriptor.id)return x.borderBox.center;if(Al(g.descriptor.id,u)){const b=Bi(g.page,Qn(u.displacedBy.point));return qp({axis:y,moveRelativeTo:b,isMoving:x})}return qp({axis:y,moveRelativeTo:g.page,isMoving:x})},Bd=(n,r)=>{const i=n.frame;return i?Bt(r,i.scroll.diff.displacement):r};const tN=({impact:n,draggable:r,droppable:i,draggables:d,afterCritical:u})=>{const f=r.page.borderBox.center,x=n.at;return!i||!x?f:x.type==="REORDER"?eN({impact:n,draggable:r,draggables:d,droppable:i,afterCritical:u}):J1({impact:n,draggables:d,afterCritical:u})};var Zi=n=>{const r=tN(n),i=n.droppable;return i?Bd(i,r):r},Uh=(n,r)=>{const i=sa(r,n.scroll.initial),d=Qn(i);return{frame:wa({top:r.y,bottom:r.y+n.frame.height,left:r.x,right:r.x+n.frame.width}),scroll:{initial:n.scroll.initial,max:n.scroll.max,current:r,diff:{value:i,displacement:d}}}};function Vp(n,r){return n.map(i=>r[i])}function aN(n,r){for(let i=0;i<r.length;i++){const d=r[i].visible[n];if(d)return d}return null}var lN=({impact:n,viewport:r,destination:i,draggables:d,maxScrollChange:u})=>{const f=Uh(r,Bt(r.scroll.current,u)),x=i.frame?Xd(i,Bt(i.frame.scroll.current,u)):i,y=n.displaced,p=ar({afterDragging:Vp(y.all,d),destination:i,displacedBy:n.displacedBy,viewport:f.frame,last:y,forceShouldAnimate:!1}),h=ar({afterDragging:Vp(y.all,d),destination:x,displacedBy:n.displacedBy,viewport:r.frame,last:y,forceShouldAnimate:!1}),N={},g={},b=[y,p,h];return y.all.forEach(k=>{const R=aN(k,b);if(R){g[k]=R;return}N[k]=!0}),{...n,displaced:{all:y.all,invisible:N,visible:g}}},nN=(n,r)=>Bt(n.scroll.diff.displacement,r),Wd=({pageBorderBoxCenter:n,draggable:r,viewport:i})=>{const d=nN(i,n),u=sa(d,r.page.borderBox.center);return Bt(r.client.borderBox.center,u)},$h=({draggable:n,destination:r,newPageBorderBoxCenter:i,viewport:d,withDroppableDisplacement:u,onlyOnMainAxis:f=!1})=>{const x=sa(i,n.page.borderBox.center),p={target:rr(n.page.borderBox,x),destination:r,withDroppableDisplacement:u,viewport:d};return f?I1(p):Lh(p)},sN=({isMovingForward:n,draggable:r,destination:i,draggables:d,previousImpact:u,viewport:f,previousPageBorderBoxCenter:x,previousClientSelection:y,afterCritical:p})=>{if(!i.isEnabled)return null;const h=Kn(i.descriptor.id,d),N=Xn(r,i),g=z1({isMovingForward:n,draggable:r,destination:i,insideDestination:h,previousImpact:u})||Z1({isMovingForward:n,isInHomeList:N,draggable:r,draggables:d,destination:i,insideDestination:h,previousImpact:u,viewport:f,afterCritical:p});if(!g)return null;const b=Zi({impact:g,draggable:r,droppable:i,draggables:d,afterCritical:p});if($h({draggable:r,destination:i,newPageBorderBoxCenter:b,viewport:f.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Wd({pageBorderBoxCenter:b,draggable:r,viewport:f}),impact:g,scrollJumpRequest:null};const k=sa(b,x),R=lN({impact:g,viewport:f,destination:i,draggables:d,maxScrollChange:k});return{clientSelection:y,impact:R,scrollJumpRequest:k}};const Gt=n=>{const r=n.subject.active;return r||ce(),r};var rN=({isMovingForward:n,pageBorderBoxCenter:r,source:i,droppables:d,viewport:u})=>{const f=i.subject.active;if(!f)return null;const x=i.axis,y=va(f[x.start],f[x.end]),p=Qi(d).filter(N=>N!==i).filter(N=>N.isEnabled).filter(N=>!!N.subject.active).filter(N=>_h(u.frame)(Gt(N))).filter(N=>{const g=Gt(N);return n?f[x.crossAxisEnd]<g[x.crossAxisEnd]:g[x.crossAxisStart]<f[x.crossAxisStart]}).filter(N=>{const g=Gt(N),b=va(g[x.start],g[x.end]);return y(g[x.start])||y(g[x.end])||b(f[x.start])||b(f[x.end])}).sort((N,g)=>{const b=Gt(N)[x.crossAxisStart],j=Gt(g)[x.crossAxisStart];return n?b-j:j-b}).filter((N,g,b)=>Gt(N)[x.crossAxisStart]===Gt(b[0])[x.crossAxisStart]);if(!p.length)return null;if(p.length===1)return p[0];const h=p.filter(N=>va(Gt(N)[x.start],Gt(N)[x.end])(r[x.line]));return h.length===1?h[0]:h.length>1?h.sort((N,g)=>Gt(N)[x.start]-Gt(g)[x.start])[0]:p.sort((N,g)=>{const b=$p(r,Hp(Gt(N))),j=$p(r,Hp(Gt(g)));return b!==j?b-j:Gt(N)[x.start]-Gt(g)[x.start]})[0]};const Yp=(n,r)=>{const i=n.page.borderBox.center;return Al(n.descriptor.id,r)?sa(i,r.displacedBy.point):i},iN=(n,r)=>{const i=n.page.borderBox;return Al(n.descriptor.id,r)?rr(i,Qn(r.displacedBy.point)):i};var cN=({pageBorderBoxCenter:n,viewport:r,destination:i,insideDestination:d,afterCritical:u})=>d.filter(x=>Lh({target:iN(x,u),destination:i,viewport:r.frame,withDroppableDisplacement:!0})).sort((x,y)=>{const p=er(n,Bd(i,Yp(x,u))),h=er(n,Bd(i,Yp(y,u)));return p<h?-1:h<p?1:x.descriptor.index-y.descriptor.index})[0]||null,ir=Et(function(r,i){const d=i[r.line];return{value:d,point:en(r.line,d)}});const oN=(n,r,i)=>{const d=n.axis;if(n.descriptor.mode==="virtual")return en(d.line,r[d.line]);const u=n.subject.page.contentBox[d.size],p=Kn(n.descriptor.id,i).reduce((h,N)=>h+N.client.marginBox[d.size],0)+r[d.line]-u;return p<=0?null:en(d.line,p)},Hh=(n,r)=>({...n,scroll:{...n.scroll,max:r}}),Gh=(n,r,i)=>{const d=n.frame;Xn(r,n)&&ce(),n.subject.withPlaceholder&&ce();const u=ir(n.axis,r.displaceBy).point,f=oN(n,u,i),x={placeholderSize:u,increasedBy:f,oldFrameMaxScroll:n.frame?n.frame.scroll.max:null};if(!d){const N=In({page:n.subject.page,withPlaceholder:x,axis:n.axis,frame:n.frame});return{...n,subject:N}}const y=f?Bt(d.scroll.max,f):d.scroll.max,p=Hh(d,y),h=In({page:n.subject.page,withPlaceholder:x,axis:n.axis,frame:p});return{...n,subject:h,frame:p}},dN=n=>{const r=n.subject.withPlaceholder;r||ce();const i=n.frame;if(!i){const x=In({page:n.subject.page,axis:n.axis,frame:null,withPlaceholder:null});return{...n,subject:x}}const d=r.oldFrameMaxScroll;d||ce();const u=Hh(i,d),f=In({page:n.subject.page,axis:n.axis,frame:u,withPlaceholder:null});return{...n,subject:f,frame:u}};var uN=({previousPageBorderBoxCenter:n,moveRelativeTo:r,insideDestination:i,draggable:d,draggables:u,destination:f,viewport:x,afterCritical:y})=>{if(!r){if(i.length)return null;const g={displaced:tr,displacedBy:Rh,at:{type:"REORDER",destination:{droppableId:f.descriptor.id,index:0}}},b=Zi({impact:g,draggable:d,droppable:f,draggables:u,afterCritical:y}),j=Xn(d,f)?f:Gh(f,d,u);return $h({draggable:d,destination:j,newPageBorderBoxCenter:b,viewport:x.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?g:null}const p=n[f.axis.line]<=r.page.borderBox.center[f.axis.line],h=(()=>{const g=r.descriptor.index;return r.descriptor.id===d.descriptor.id||p?g:g+1})(),N=ir(f.axis,d.displaceBy);return qi({draggable:d,insideDestination:i,destination:f,viewport:x,displacedBy:N,last:tr,index:h})},fN=({isMovingForward:n,previousPageBorderBoxCenter:r,draggable:i,isOver:d,draggables:u,droppables:f,viewport:x,afterCritical:y})=>{const p=rN({isMovingForward:n,pageBorderBoxCenter:r,source:d,droppables:f,viewport:x});if(!p)return null;const h=Kn(p.descriptor.id,u),N=cN({pageBorderBoxCenter:r,viewport:x,destination:p,insideDestination:h,afterCritical:y}),g=uN({previousPageBorderBoxCenter:r,destination:p,draggable:i,draggables:u,moveRelativeTo:N,insideDestination:h,viewport:x,afterCritical:y});if(!g)return null;const b=Zi({impact:g,draggable:i,droppable:p,draggables:u,afterCritical:y});return{clientSelection:Wd({pageBorderBoxCenter:b,draggable:i,viewport:x}),impact:g,scrollJumpRequest:null}},ra=n=>{const r=n.at;return r?r.type==="REORDER"?r.destination.droppableId:r.combine.droppableId:null};const xN=(n,r)=>{const i=ra(n);return i?r[i]:null};var mN=({state:n,type:r})=>{const i=xN(n.impact,n.dimensions.droppables),d=!!i,u=n.dimensions.droppables[n.critical.droppable.id],f=i||u,x=f.axis.direction,y=x==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||x==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(y&&!d)return null;const p=r==="MOVE_DOWN"||r==="MOVE_RIGHT",h=n.dimensions.draggables[n.critical.draggable.id],N=n.current.page.borderBoxCenter,{draggables:g,droppables:b}=n.dimensions;return y?sN({isMovingForward:p,previousPageBorderBoxCenter:N,draggable:h,destination:f,draggables:g,viewport:n.viewport,previousClientSelection:n.current.client.selection,previousImpact:n.impact,afterCritical:n.afterCritical}):fN({isMovingForward:p,previousPageBorderBoxCenter:N,draggable:h,isOver:f,draggables:g,droppables:b,viewport:n.viewport,afterCritical:n.afterCritical})};function Zl(n){return n.phase==="DRAGGING"||n.phase==="COLLECTING"}function qh(n){const r=va(n.top,n.bottom),i=va(n.left,n.right);return function(u){return r(u.y)&&i(u.x)}}function pN(n,r){return n.left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top}function hN({pageBorderBox:n,draggable:r,candidates:i}){const d=r.page.borderBox.center,u=i.map(f=>{const x=f.axis,y=en(f.axis.line,n.center[x.line],f.page.borderBox.center[x.crossAxisLine]);return{id:f.descriptor.id,distance:er(d,y)}}).sort((f,x)=>x.distance-f.distance);return u[0]?u[0].id:null}function bN({pageBorderBox:n,draggable:r,droppables:i}){const d=Qi(i).filter(u=>{if(!u.isEnabled)return!1;const f=u.subject.active;if(!f||!pN(n,f))return!1;if(qh(f)(n.center))return!0;const x=u.axis,y=f.center[x.crossAxisLine],p=n[x.crossAxisStart],h=n[x.crossAxisEnd],N=va(f[x.crossAxisStart],f[x.crossAxisEnd]),g=N(p),b=N(h);return!g&&!b?!0:g?p<y:h>y});return d.length?d.length===1?d[0].descriptor.id:hN({pageBorderBox:n,draggable:r,candidates:d}):null}const Ih=(n,r)=>wa(rr(n,r));var yN=(n,r)=>{const i=n.frame;return i?Ih(r,i.scroll.diff.value):r};function Vh({displaced:n,id:r}){return!!(n.visible[r]||n.invisible[r])}function gN({draggable:n,closest:r,inHomeList:i}){return r?i&&r.descriptor.index>n.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var vN=({pageBorderBoxWithDroppableScroll:n,draggable:r,destination:i,insideDestination:d,last:u,viewport:f,afterCritical:x})=>{const y=i.axis,p=ir(i.axis,r.displaceBy),h=p.value,N=n[y.start],g=n[y.end],j=Xi(r,d).find(R=>{const v=R.descriptor.id,w=R.page.borderBox.center[y.line],C=Al(v,x),A=Vh({displaced:u,id:v});return C?A?g<=w:N<w-h:A?g<=w+h:N<w})||null,k=gN({draggable:r,closest:j,inHomeList:Xn(r,i)});return qi({draggable:r,insideDestination:d,destination:i,viewport:f,last:u,displacedBy:p,index:k})};const NN=4;var jN=({draggable:n,pageBorderBoxWithDroppableScroll:r,previousImpact:i,destination:d,insideDestination:u,afterCritical:f})=>{if(!d.isCombineEnabled)return null;const x=d.axis,y=ir(d.axis,n.displaceBy),p=y.value,h=r[x.start],N=r[x.end],b=Xi(n,u).find(k=>{const R=k.descriptor.id,v=k.page.borderBox,C=v[x.size]/NN,A=Al(R,f),B=Vh({displaced:i.displaced,id:R});return A?B?N>v[x.start]+C&&N<v[x.end]-C:h>v[x.start]-p+C&&h<v[x.end]-p-C:B?N>v[x.start]+p+C&&N<v[x.end]+p-C:h>v[x.start]+C&&h<v[x.end]-C});return b?{displacedBy:y,displaced:i.displaced,at:{type:"COMBINE",combine:{draggableId:b.descriptor.id,droppableId:d.descriptor.id}}}:null},Yh=({pageOffset:n,draggable:r,draggables:i,droppables:d,previousImpact:u,viewport:f,afterCritical:x})=>{const y=Ih(r.page.borderBox,n),p=bN({pageBorderBox:y,draggable:r,droppables:d});if(!p)return L1;const h=d[p],N=Kn(h.descriptor.id,i),g=yN(h,y);return jN({pageBorderBoxWithDroppableScroll:g,draggable:r,previousImpact:u,destination:h,insideDestination:N,afterCritical:x})||vN({pageBorderBoxWithDroppableScroll:g,draggable:r,destination:h,insideDestination:N,last:u.displaced,viewport:f,afterCritical:x})},eu=(n,r)=>({...n,[r.descriptor.id]:r});const SN=({previousImpact:n,impact:r,droppables:i})=>{const d=ra(n),u=ra(r);if(!d||d===u)return i;const f=i[d];if(!f.subject.withPlaceholder)return i;const x=dN(f);return eu(i,x)};var wN=({draggable:n,draggables:r,droppables:i,previousImpact:d,impact:u})=>{const f=SN({previousImpact:d,impact:u,droppables:i}),x=ra(u);if(!x)return f;const y=i[x];if(Xn(n,y)||y.subject.withPlaceholder)return f;const p=Gh(y,n,r);return eu(f,p)},Ks=({state:n,clientSelection:r,dimensions:i,viewport:d,impact:u,scrollJumpRequest:f})=>{const x=d||n.viewport,y=i||n.dimensions,p=r||n.current.client.selection,h=sa(p,n.initial.client.selection),N={offset:h,selection:p,borderBoxCenter:Bt(n.initial.client.borderBoxCenter,h)},g={selection:Bt(N.selection,x.scroll.current),borderBoxCenter:Bt(N.borderBoxCenter,x.scroll.current),offset:Bt(N.offset,x.scroll.diff.value)},b={client:N,page:g};if(n.phase==="COLLECTING")return{...n,dimensions:y,viewport:x,current:b};const j=y.draggables[n.critical.draggable.id],k=u||Yh({pageOffset:g.offset,draggable:j,draggables:y.draggables,droppables:y.droppables,previousImpact:n.impact,viewport:x,afterCritical:n.afterCritical}),R=wN({draggable:j,impact:k,previousImpact:n.impact,draggables:y.draggables,droppables:y.droppables});return{...n,current:b,dimensions:{draggables:y.draggables,droppables:R},impact:k,viewport:x,scrollJumpRequest:f||null,forceShouldAnimate:f?!1:null}};function DN(n,r){return n.map(i=>r[i])}var Qh=({impact:n,viewport:r,draggables:i,destination:d,forceShouldAnimate:u})=>{const f=n.displaced,x=DN(f.all,i),y=ar({afterDragging:x,destination:d,displacedBy:n.displacedBy,viewport:r.frame,forceShouldAnimate:u,last:f});return{...n,displaced:y}},Kh=({impact:n,draggable:r,droppable:i,draggables:d,viewport:u,afterCritical:f})=>{const x=Zi({impact:n,draggable:r,draggables:d,droppable:i,afterCritical:f});return Wd({pageBorderBoxCenter:x,draggable:r,viewport:u})},Xh=({state:n,dimensions:r,viewport:i})=>{n.movementMode!=="SNAP"&&ce();const d=n.impact,u=i||n.viewport,f=r||n.dimensions,{draggables:x,droppables:y}=f,p=x[n.critical.draggable.id],h=ra(d);h||ce();const N=y[h],g=Qh({impact:d,viewport:u,destination:N,draggables:x}),b=Kh({impact:g,draggable:p,droppable:N,draggables:x,viewport:u,afterCritical:n.afterCritical});return Ks({impact:g,clientSelection:b,state:n,dimensions:f,viewport:u})},CN=n=>({index:n.index,droppableId:n.droppableId}),Zh=({draggable:n,home:r,draggables:i,viewport:d})=>{const u=ir(r.axis,n.displaceBy),f=Kn(r.descriptor.id,i),x=f.indexOf(n);x===-1&&ce();const y=f.slice(x+1),p=y.reduce((b,j)=>(b[j.descriptor.id]=!0,b),{}),h={inVirtualList:r.descriptor.mode==="virtual",displacedBy:u,effected:p};return{impact:{displaced:ar({afterDragging:y,destination:r,displacedBy:u,last:null,viewport:d.frame,forceShouldAnimate:!1}),displacedBy:u,at:{type:"REORDER",destination:CN(n.descriptor)}},afterCritical:h}},AN=(n,r)=>({draggables:n.draggables,droppables:eu(n.droppables,r)}),EN=({draggable:n,offset:r,initialWindowScroll:i})=>{const d=Bi(n.client,r),u=Ui(d,i);return{...n,placeholder:{...n.placeholder,client:d},client:d,page:u}},TN=n=>{const r=n.frame;return r||ce(),r},kN=({additions:n,updatedDroppables:r,viewport:i})=>{const d=i.scroll.diff.value;return n.map(u=>{const f=u.descriptor.droppableId,x=r[f],p=TN(x).scroll.diff.value,h=Bt(d,p);return EN({draggable:u,offset:h,initialWindowScroll:i.scroll.initial})})},ON=({state:n,published:r})=>{const i=r.modified.map(w=>{const C=n.dimensions.droppables[w.droppableId];return Xd(C,w.scroll)}),d={...n.dimensions.droppables,...Oh(i)},u=Mh(kN({additions:r.additions,updatedDroppables:d,viewport:n.viewport})),f={...n.dimensions.draggables,...u};r.removals.forEach(w=>{delete f[w]});const x={droppables:d,draggables:f},y=ra(n.impact),p=y?x.droppables[y]:null,h=x.draggables[n.critical.draggable.id],N=x.droppables[n.critical.droppable.id],{impact:g,afterCritical:b}=Zh({draggable:h,home:N,draggables:f,viewport:n.viewport}),j=p&&p.isCombineEnabled?n.impact:g,k=Yh({pageOffset:n.current.page.offset,draggable:x.draggables[n.critical.draggable.id],draggables:x.draggables,droppables:x.droppables,previousImpact:j,viewport:n.viewport,afterCritical:b}),R={...n,phase:"DRAGGING",impact:k,onLiftImpact:g,dimensions:x,afterCritical:b,forceShouldAnimate:!1};return n.phase==="COLLECTING"?R:{...R,phase:"DROP_PENDING",reason:n.reason,isWaiting:!1}};const Ud=n=>n.movementMode==="SNAP",Sd=(n,r,i)=>{const d=AN(n.dimensions,r);return!Ud(n)||i?Ks({state:n,dimensions:d}):Xh({state:n,dimensions:d})};function wd(n){return n.isDragging&&n.movementMode==="SNAP"?{...n,scrollJumpRequest:null}:n}const Qp={phase:"IDLE",completed:null,shouldFlush:!1};var MN=(n=Qp,r)=>{if(r.type==="FLUSH")return{...Qp,shouldFlush:!0};if(r.type==="INITIAL_PUBLISH"){n.phase!=="IDLE"&&ce();const{critical:i,clientSelection:d,viewport:u,dimensions:f,movementMode:x}=r.payload,y=f.draggables[i.draggable.id],p=f.droppables[i.droppable.id],h={selection:d,borderBoxCenter:y.client.borderBox.center,offset:kt},N={client:h,page:{selection:Bt(h.selection,u.scroll.initial),borderBoxCenter:Bt(h.selection,u.scroll.initial),offset:Bt(h.selection,u.scroll.diff.value)}},g=Qi(f.droppables).every(R=>!R.isFixedOnPage),{impact:b,afterCritical:j}=Zh({draggable:y,home:p,draggables:f.draggables,viewport:u});return{phase:"DRAGGING",isDragging:!0,critical:i,movementMode:x,dimensions:f,initial:N,current:N,isWindowScrollAllowed:g,impact:b,afterCritical:j,onLiftImpact:b,viewport:u,scrollJumpRequest:null,forceShouldAnimate:null}}if(r.type==="COLLECTION_STARTING")return n.phase==="COLLECTING"||n.phase==="DROP_PENDING"?n:(n.phase!=="DRAGGING"&&ce(),{...n,phase:"COLLECTING"});if(r.type==="PUBLISH_WHILE_DRAGGING")return n.phase==="COLLECTING"||n.phase==="DROP_PENDING"||ce(),ON({state:n,published:r.payload});if(r.type==="MOVE"){if(n.phase==="DROP_PENDING")return n;Zl(n)||ce();const{client:i}=r.payload;return Cl(i,n.current.client.selection)?n:Ks({state:n,clientSelection:i,impact:Ud(n)?n.impact:null})}if(r.type==="UPDATE_DROPPABLE_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="COLLECTING")return wd(n);Zl(n)||ce();const{id:i,newScroll:d}=r.payload,u=n.dimensions.droppables[i];if(!u)return n;const f=Xd(u,d);return Sd(n,f,!1)}if(r.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(n.phase==="DROP_PENDING")return n;Zl(n)||ce();const{id:i,isEnabled:d}=r.payload,u=n.dimensions.droppables[i];u||ce(),u.isEnabled===d&&ce();const f={...u,isEnabled:d};return Sd(n,f,!0)}if(r.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(n.phase==="DROP_PENDING")return n;Zl(n)||ce();const{id:i,isCombineEnabled:d}=r.payload,u=n.dimensions.droppables[i];u||ce(),u.isCombineEnabled===d&&ce();const f={...u,isCombineEnabled:d};return Sd(n,f,!0)}if(r.type==="MOVE_BY_WINDOW_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="DROP_ANIMATING")return n;Zl(n)||ce(),n.isWindowScrollAllowed||ce();const i=r.payload.newScroll;if(Cl(n.viewport.scroll.current,i))return wd(n);const d=Uh(n.viewport,i);return Ud(n)?Xh({state:n,viewport:d}):Ks({state:n,viewport:d})}if(r.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Zl(n))return n;const i=r.payload.maxScroll;if(Cl(i,n.viewport.scroll.max))return n;const d={...n.viewport,scroll:{...n.viewport.scroll,max:i}};return{...n,viewport:d}}if(r.type==="MOVE_UP"||r.type==="MOVE_DOWN"||r.type==="MOVE_LEFT"||r.type==="MOVE_RIGHT"){if(n.phase==="COLLECTING"||n.phase==="DROP_PENDING")return n;n.phase!=="DRAGGING"&&ce();const i=mN({state:n,type:r.type});return i?Ks({state:n,impact:i.impact,clientSelection:i.clientSelection,scrollJumpRequest:i.scrollJumpRequest}):n}if(r.type==="DROP_PENDING"){const i=r.payload.reason;return n.phase!=="COLLECTING"&&ce(),{...n,phase:"DROP_PENDING",isWaiting:!0,reason:i}}if(r.type==="DROP_ANIMATE"){const{completed:i,dropDuration:d,newHomeClientOffset:u}=r.payload;return n.phase==="DRAGGING"||n.phase==="DROP_PENDING"||ce(),{phase:"DROP_ANIMATING",completed:i,dropDuration:d,newHomeClientOffset:u,dimensions:n.dimensions}}if(r.type==="DROP_COMPLETE"){const{completed:i}=r.payload;return{phase:"IDLE",completed:i,shouldFlush:!1}}return n};function Fe(n,r){return n instanceof Object&&"type"in n&&n.type===r}const RN=n=>({type:"BEFORE_INITIAL_CAPTURE",payload:n}),_N=n=>({type:"LIFT",payload:n}),zN=n=>({type:"INITIAL_PUBLISH",payload:n}),LN=n=>({type:"PUBLISH_WHILE_DRAGGING",payload:n}),BN=()=>({type:"COLLECTION_STARTING",payload:null}),UN=n=>({type:"UPDATE_DROPPABLE_SCROLL",payload:n}),$N=n=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:n}),HN=n=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:n}),Ph=n=>({type:"MOVE",payload:n}),GN=n=>({type:"MOVE_BY_WINDOW_SCROLL",payload:n}),qN=n=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:n}),IN=()=>({type:"MOVE_UP",payload:null}),VN=()=>({type:"MOVE_DOWN",payload:null}),YN=()=>({type:"MOVE_RIGHT",payload:null}),QN=()=>({type:"MOVE_LEFT",payload:null}),tu=()=>({type:"FLUSH",payload:null}),KN=n=>({type:"DROP_ANIMATE",payload:n}),au=n=>({type:"DROP_COMPLETE",payload:n}),Jh=n=>({type:"DROP",payload:n}),XN=n=>({type:"DROP_PENDING",payload:n}),Fh=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var ZN=n=>({getState:r,dispatch:i})=>d=>u=>{if(!Fe(u,"LIFT")){d(u);return}const{id:f,clientSelection:x,movementMode:y}=u.payload,p=r();p.phase==="DROP_ANIMATING"&&i(au({completed:p.completed})),r().phase!=="IDLE"&&ce(),i(tu()),i(RN({draggableId:f,movementMode:y}));const N={draggableId:f,scrollOptions:{shouldPublishImmediately:y==="SNAP"}},{critical:g,dimensions:b,viewport:j}=n.startPublishing(N);i(zN({critical:g,dimensions:b,clientSelection:x,movementMode:y,viewport:j}))},PN=n=>()=>r=>i=>{Fe(i,"INITIAL_PUBLISH")&&n.dragging(),Fe(i,"DROP_ANIMATE")&&n.dropping(i.payload.completed.result.reason),(Fe(i,"FLUSH")||Fe(i,"DROP_COMPLETE"))&&n.resting(),r(i)};const lu={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},lr={opacity:{drop:0,combining:.7},scale:{drop:.75}},Wh={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Ql=`${Wh.outOfTheWay}s ${lu.outOfTheWay}`,Xs={fluid:`opacity ${Ql}`,snap:`transform ${Ql}, opacity ${Ql}`,drop:n=>{const r=`${n}s ${lu.drop}`;return`transform ${r}, opacity ${r}`},outOfTheWay:`transform ${Ql}`,placeholder:`height ${Ql}, width ${Ql}, margin ${Ql}`},Kp=n=>Cl(n,kt)?void 0:`translate(${n.x}px, ${n.y}px)`,$d={moveTo:Kp,drop:(n,r)=>{const i=Kp(n);if(i)return r?`${i} scale(${lr.scale.drop})`:i}},{minDropTime:Hd,maxDropTime:eb}=Wh,JN=eb-Hd,Xp=1500,FN=.6;var WN=({current:n,destination:r,reason:i})=>{const d=er(n,r);if(d<=0)return Hd;if(d>=Xp)return eb;const u=d/Xp,f=Hd+JN*u,x=i==="CANCEL"?f*FN:f;return Number(x.toFixed(2))},ej=({impact:n,draggable:r,dimensions:i,viewport:d,afterCritical:u})=>{const{draggables:f,droppables:x}=i,y=ra(n),p=y?x[y]:null,h=x[r.descriptor.droppableId],N=Kh({impact:n,draggable:r,draggables:f,afterCritical:u,droppable:p||h,viewport:d});return sa(N,r.client.borderBox.center)},tj=({draggables:n,reason:r,lastImpact:i,home:d,viewport:u,onLiftImpact:f})=>!i.at||r!=="DROP"?{impact:Qh({draggables:n,impact:f,destination:d,viewport:u,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:i.at.type==="REORDER"?{impact:i,didDropInsideDroppable:!0}:{impact:{...i,displaced:tr},didDropInsideDroppable:!0};const aj=({getState:n,dispatch:r})=>i=>d=>{if(!Fe(d,"DROP")){i(d);return}const u=n(),f=d.payload.reason;if(u.phase==="COLLECTING"){r(XN({reason:f}));return}if(u.phase==="IDLE")return;u.phase==="DROP_PENDING"&&u.isWaiting&&ce(),u.phase==="DRAGGING"||u.phase==="DROP_PENDING"||ce();const y=u.critical,p=u.dimensions,h=p.draggables[u.critical.draggable.id],{impact:N,didDropInsideDroppable:g}=tj({reason:f,lastImpact:u.impact,afterCritical:u.afterCritical,onLiftImpact:u.onLiftImpact,home:u.dimensions.droppables[u.critical.droppable.id],viewport:u.viewport,draggables:u.dimensions.draggables}),b=g?Zd(N):null,j=g?Ki(N):null,k={index:y.draggable.index,droppableId:y.droppable.id},R={draggableId:h.descriptor.id,type:h.descriptor.type,source:k,reason:f,mode:u.movementMode,destination:b,combine:j},v=ej({impact:N,draggable:h,dimensions:p,viewport:u.viewport,afterCritical:u.afterCritical}),w={critical:u.critical,afterCritical:u.afterCritical,result:R,impact:N};if(!(!Cl(u.current.client.offset,v)||!!R.combine)){r(au({completed:w}));return}const A=WN({current:u.current.client.offset,destination:v,reason:f});r(KN({newHomeClientOffset:v,dropDuration:A,completed:w}))};var tb=()=>({x:window.pageXOffset,y:window.pageYOffset});function lj(n){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:r=>{r.target!==window&&r.target!==window.document||n()}}}function nj({onWindowScroll:n}){function r(){n(tb())}const i=Ws(r),d=lj(i);let u=Dl;function f(){return u!==Dl}function x(){f()&&ce(),u=ga(window,[d])}function y(){f()||ce(),i.cancel(),u(),u=Dl}return{start:x,stop:y,isActive:f}}const sj=n=>Fe(n,"DROP_COMPLETE")||Fe(n,"DROP_ANIMATE")||Fe(n,"FLUSH"),rj=n=>{const r=nj({onWindowScroll:i=>{n.dispatch(GN({newScroll:i}))}});return i=>d=>{!r.isActive()&&Fe(d,"INITIAL_PUBLISH")&&r.start(),r.isActive()&&sj(d)&&r.stop(),i(d)}};var ij=n=>{let r=!1,i=!1;const d=setTimeout(()=>{i=!0}),u=f=>{r||i||(r=!0,n(f),clearTimeout(d))};return u.wasCalled=()=>r,u},cj=()=>{const n=[],r=u=>{const f=n.findIndex(y=>y.timerId===u);f===-1&&ce();const[x]=n.splice(f,1);x.callback()};return{add:u=>{const f=setTimeout(()=>r(f)),x={timerId:f,callback:u};n.push(x)},flush:()=>{if(!n.length)return;const u=[...n];n.length=0,u.forEach(f=>{clearTimeout(f.timerId),f.callback()})}}};const oj=(n,r)=>n==null&&r==null?!0:n==null||r==null?!1:n.droppableId===r.droppableId&&n.index===r.index,dj=(n,r)=>n==null&&r==null?!0:n==null||r==null?!1:n.draggableId===r.draggableId&&n.droppableId===r.droppableId,uj=(n,r)=>{if(n===r)return!0;const i=n.draggable.id===r.draggable.id&&n.draggable.droppableId===r.draggable.droppableId&&n.draggable.type===r.draggable.type&&n.draggable.index===r.draggable.index,d=n.droppable.id===r.droppable.id&&n.droppable.type===r.droppable.type;return i&&d},qs=(n,r)=>{r()},Ai=(n,r)=>({draggableId:n.draggable.id,type:n.droppable.type,source:{droppableId:n.droppable.id,index:n.draggable.index},mode:r});function Dd(n,r,i,d){if(!n){i(d(r));return}const u=ij(i);n(r,{announce:u}),u.wasCalled()||i(d(r))}var fj=(n,r)=>{const i=cj();let d=null;const u=(g,b)=>{d&&ce(),qs("onBeforeCapture",()=>{const j=n().onBeforeCapture;j&&j({draggableId:g,mode:b})})},f=(g,b)=>{d&&ce(),qs("onBeforeDragStart",()=>{const j=n().onBeforeDragStart;j&&j(Ai(g,b))})},x=(g,b)=>{d&&ce();const j=Ai(g,b);d={mode:b,lastCritical:g,lastLocation:j.source,lastCombine:null},i.add(()=>{qs("onDragStart",()=>Dd(n().onDragStart,j,r,Mi.onDragStart))})},y=(g,b)=>{const j=Zd(b),k=Ki(b);d||ce();const R=!uj(g,d.lastCritical);R&&(d.lastCritical=g);const v=!oj(d.lastLocation,j);v&&(d.lastLocation=j);const w=!dj(d.lastCombine,k);if(w&&(d.lastCombine=k),!R&&!v&&!w)return;const C={...Ai(g,d.mode),combine:k,destination:j};i.add(()=>{qs("onDragUpdate",()=>Dd(n().onDragUpdate,C,r,Mi.onDragUpdate))})},p=()=>{d||ce(),i.flush()},h=g=>{d||ce(),d=null,qs("onDragEnd",()=>Dd(n().onDragEnd,g,r,Mi.onDragEnd))};return{beforeCapture:u,beforeStart:f,start:x,update:y,flush:p,drop:h,abort:()=>{if(!d)return;const g={...Ai(d.lastCritical,d.mode),combine:null,destination:null,reason:"CANCEL"};h(g)}}},xj=(n,r)=>{const i=fj(n,r);return d=>u=>f=>{if(Fe(f,"BEFORE_INITIAL_CAPTURE")){i.beforeCapture(f.payload.draggableId,f.payload.movementMode);return}if(Fe(f,"INITIAL_PUBLISH")){const y=f.payload.critical;i.beforeStart(y,f.payload.movementMode),u(f),i.start(y,f.payload.movementMode);return}if(Fe(f,"DROP_COMPLETE")){const y=f.payload.completed.result;i.flush(),u(f),i.drop(y);return}if(u(f),Fe(f,"FLUSH")){i.abort();return}const x=d.getState();x.phase==="DRAGGING"&&i.update(x.critical,x.impact)}};const mj=n=>r=>i=>{if(!Fe(i,"DROP_ANIMATION_FINISHED")){r(i);return}const d=n.getState();d.phase!=="DROP_ANIMATING"&&ce(),n.dispatch(au({completed:d.completed}))},pj=n=>{let r=null,i=null;function d(){i&&(cancelAnimationFrame(i),i=null),r&&(r(),r=null)}return u=>f=>{if((Fe(f,"FLUSH")||Fe(f,"DROP_COMPLETE")||Fe(f,"DROP_ANIMATION_FINISHED"))&&d(),u(f),!Fe(f,"DROP_ANIMATE"))return;const x={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){n.getState().phase==="DROP_ANIMATING"&&n.dispatch(Fh())}};i=requestAnimationFrame(()=>{i=null,r=ga(window,[x])})}};var hj=n=>()=>r=>i=>{(Fe(i,"DROP_COMPLETE")||Fe(i,"FLUSH")||Fe(i,"DROP_ANIMATE"))&&n.stopPublishing(),r(i)},bj=n=>{let r=!1;return()=>i=>d=>{if(Fe(d,"INITIAL_PUBLISH")){r=!0,n.tryRecordFocus(d.payload.critical.draggable.id),i(d),n.tryRestoreFocusRecorded();return}if(i(d),!!r){if(Fe(d,"FLUSH")){r=!1,n.tryRestoreFocusRecorded();return}if(Fe(d,"DROP_COMPLETE")){r=!1;const u=d.payload.completed.result;u.combine&&n.tryShiftRecord(u.draggableId,u.combine.draggableId),n.tryRestoreFocusRecorded()}}}};const yj=n=>Fe(n,"DROP_COMPLETE")||Fe(n,"DROP_ANIMATE")||Fe(n,"FLUSH");var gj=n=>r=>i=>d=>{if(yj(d)){n.stop(),i(d);return}if(Fe(d,"INITIAL_PUBLISH")){i(d);const u=r.getState();u.phase!=="DRAGGING"&&ce(),n.start(u);return}i(d),n.scroll(r.getState())};const vj=n=>r=>i=>{if(r(i),!Fe(i,"PUBLISH_WHILE_DRAGGING"))return;const d=n.getState();d.phase==="DROP_PENDING"&&(d.isWaiting||n.dispatch(Jh({reason:d.reason})))},Nj=bh;var jj=({dimensionMarshal:n,focusMarshal:r,styleMarshal:i,getResponders:d,announce:u,autoScroller:f})=>hh(MN,Nj(g0(PN(i),hj(n),ZN(n),aj,mj,pj,vj,gj(f),rj,bj(r),xj(d,u))));const Cd=()=>({additions:{},removals:{},modified:{}});function Sj({registry:n,callbacks:r}){let i=Cd(),d=null;const u=()=>{d||(r.collectionStarting(),d=requestAnimationFrame(()=>{d=null;const{additions:p,removals:h,modified:N}=i,g=Object.keys(p).map(k=>n.draggable.getById(k).getDimension(kt)).sort((k,R)=>k.descriptor.index-R.descriptor.index),b=Object.keys(N).map(k=>{const v=n.droppable.getById(k).callbacks.getScrollWhileDragging();return{droppableId:k,scroll:v}}),j={additions:g,removals:Object.keys(h),modified:b};i=Cd(),r.publish(j)}))};return{add:p=>{const h=p.descriptor.id;i.additions[h]=p,i.modified[p.descriptor.droppableId]=!0,i.removals[h]&&delete i.removals[h],u()},remove:p=>{const h=p.descriptor;i.removals[h.id]=!0,i.modified[h.droppableId]=!0,i.additions[h.id]&&delete i.additions[h.id],u()},stop:()=>{d&&(cancelAnimationFrame(d),d=null,i=Cd())}}}var ab=({scrollHeight:n,scrollWidth:r,height:i,width:d})=>{const u=sa({x:r,y:n},{x:d,y:i});return{x:Math.max(0,u.x),y:Math.max(0,u.y)}},lb=()=>{const n=document.documentElement;return n||ce(),n},nb=()=>{const n=lb();return ab({scrollHeight:n.scrollHeight,scrollWidth:n.scrollWidth,width:n.clientWidth,height:n.clientHeight})},wj=()=>{const n=tb(),r=nb(),i=n.y,d=n.x,u=lb(),f=u.clientWidth,x=u.clientHeight,y=d+f,p=i+x;return{frame:wa({top:i,left:d,right:y,bottom:p}),scroll:{initial:n,current:n,max:r,diff:{value:kt,displacement:kt}}}},Dj=({critical:n,scrollOptions:r,registry:i})=>{const d=wj(),u=d.scroll.current,f=n.droppable,x=i.droppable.getAllByType(f.type).map(N=>N.callbacks.getDimensionAndWatchScroll(u,r)),y=i.draggable.getAllByType(n.draggable.type).map(N=>N.getDimension(u));return{dimensions:{draggables:Mh(y),droppables:Oh(x)},critical:n,viewport:d}};function Zp(n,r,i){return!(i.descriptor.id===r.id||i.descriptor.type!==r.type||n.droppable.getById(i.descriptor.droppableId).descriptor.mode!=="virtual")}var Cj=(n,r)=>{let i=null;const d=Sj({callbacks:{publish:r.publishWhileDragging,collectionStarting:r.collectionStarting},registry:n}),u=(b,j)=>{n.droppable.exists(b)||ce(),i&&r.updateDroppableIsEnabled({id:b,isEnabled:j})},f=(b,j)=>{i&&(n.droppable.exists(b)||ce(),r.updateDroppableIsCombineEnabled({id:b,isCombineEnabled:j}))},x=(b,j)=>{i&&(n.droppable.exists(b)||ce(),r.updateDroppableScroll({id:b,newScroll:j}))},y=(b,j)=>{i&&n.droppable.getById(b).callbacks.scroll(j)},p=()=>{if(!i)return;d.stop();const b=i.critical.droppable;n.droppable.getAllByType(b.type).forEach(j=>j.callbacks.dragStopped()),i.unsubscribe(),i=null},h=b=>{i||ce();const j=i.critical.draggable;b.type==="ADDITION"&&Zp(n,j,b.value)&&d.add(b.value),b.type==="REMOVAL"&&Zp(n,j,b.value)&&d.remove(b.value)};return{updateDroppableIsEnabled:u,updateDroppableIsCombineEnabled:f,scrollDroppable:y,updateDroppableScroll:x,startPublishing:b=>{i&&ce();const j=n.draggable.getById(b.draggableId),k=n.droppable.getById(j.descriptor.droppableId),R={draggable:j.descriptor,droppable:k.descriptor},v=n.subscribe(h);return i={critical:R,unsubscribe:v},Dj({critical:R,registry:n,scrollOptions:b.scrollOptions})},stopPublishing:p}},sb=(n,r)=>n.phase==="IDLE"?!0:n.phase!=="DROP_ANIMATING"||n.completed.result.draggableId===r?!1:n.completed.result.reason==="DROP",Aj=n=>{window.scrollBy(n.x,n.y)};const Ej=Et(n=>Qi(n).filter(r=>!(!r.isEnabled||!r.frame))),Tj=(n,r)=>Ej(r).find(d=>(d.frame||ce(),qh(d.frame.pageMarginBox)(n)))||null;var kj=({center:n,destination:r,droppables:i})=>{if(r){const u=i[r];return u.frame?u:null}return Tj(n,i)};const nr={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:n=>n**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Oj=(n,r,i=()=>nr)=>{const d=i(),u=n[r.size]*d.startFromPercentage,f=n[r.size]*d.maxScrollAtPercentage;return{startScrollingFrom:u,maxScrollValueAt:f}},rb=({startOfRange:n,endOfRange:r,current:i})=>{const d=r-n;return d===0?0:(i-n)/d},nu=1,Mj=(n,r,i=()=>nr)=>{const d=i();if(n>r.startScrollingFrom)return 0;if(n<=r.maxScrollValueAt)return d.maxPixelScroll;if(n===r.startScrollingFrom)return nu;const f=1-rb({startOfRange:r.maxScrollValueAt,endOfRange:r.startScrollingFrom,current:n}),x=d.maxPixelScroll*d.ease(f);return Math.ceil(x)},Rj=(n,r,i)=>{const d=i(),u=d.durationDampening.accelerateAt,f=d.durationDampening.stopDampeningAt,x=r,y=f,h=Date.now()-x;if(h>=f)return n;if(h<u)return nu;const N=rb({startOfRange:u,endOfRange:y,current:h}),g=n*d.ease(N);return Math.ceil(g)},Pp=({distanceToEdge:n,thresholds:r,dragStartTime:i,shouldUseTimeDampening:d,getAutoScrollerOptions:u})=>{const f=Mj(n,r,u);return f===0?0:d?Math.max(Rj(f,i,u),nu):f},Jp=({container:n,distanceToEdges:r,dragStartTime:i,axis:d,shouldUseTimeDampening:u,getAutoScrollerOptions:f})=>{const x=Oj(n,d,f);return r[d.end]<r[d.start]?Pp({distanceToEdge:r[d.end],thresholds:x,dragStartTime:i,shouldUseTimeDampening:u,getAutoScrollerOptions:f}):-1*Pp({distanceToEdge:r[d.start],thresholds:x,dragStartTime:i,shouldUseTimeDampening:u,getAutoScrollerOptions:f})},_j=({container:n,subject:r,proposedScroll:i})=>{const d=r.height>n.height,u=r.width>n.width;return!u&&!d?i:u&&d?null:{x:u?0:i.x,y:d?0:i.y}};const zj=kh(n=>n===0?0:n);var ib=({dragStartTime:n,container:r,subject:i,center:d,shouldUseTimeDampening:u,getAutoScrollerOptions:f})=>{const x={top:d.y-r.top,right:r.right-d.x,bottom:r.bottom-d.y,left:d.x-r.left},y=Jp({container:r,distanceToEdges:x,dragStartTime:n,axis:Pd,shouldUseTimeDampening:u,getAutoScrollerOptions:f}),p=Jp({container:r,distanceToEdges:x,dragStartTime:n,axis:zh,shouldUseTimeDampening:u,getAutoScrollerOptions:f}),h=zj({x:p,y});if(Cl(h,kt))return null;const N=_j({container:r,subject:i,proposedScroll:h});return N?Cl(N,kt)?null:N:null};const Lj=kh(n=>n===0?0:n>0?1:-1),su=(()=>{const n=(r,i)=>r<0?r:r>i?r-i:0;return({current:r,max:i,change:d})=>{const u=Bt(r,d),f={x:n(u.x,i.x),y:n(u.y,i.y)};return Cl(f,kt)?null:f}})(),cb=({max:n,current:r,change:i})=>{const d={x:Math.max(r.x,n.x),y:Math.max(r.y,n.y)},u=Lj(i),f=su({max:d,current:r,change:u});return!f||u.x!==0&&f.x===0||u.y!==0&&f.y===0},ru=(n,r)=>cb({current:n.scroll.current,max:n.scroll.max,change:r}),Bj=(n,r)=>{if(!ru(n,r))return null;const i=n.scroll.max,d=n.scroll.current;return su({current:d,max:i,change:r})},iu=(n,r)=>{const i=n.frame;return i?cb({current:i.scroll.current,max:i.scroll.max,change:r}):!1},Uj=(n,r)=>{const i=n.frame;return!i||!iu(n,r)?null:su({current:i.scroll.current,max:i.scroll.max,change:r})};var $j=({viewport:n,subject:r,center:i,dragStartTime:d,shouldUseTimeDampening:u,getAutoScrollerOptions:f})=>{const x=ib({dragStartTime:d,container:n.frame,subject:r,center:i,shouldUseTimeDampening:u,getAutoScrollerOptions:f});return x&&ru(n,x)?x:null},Hj=({droppable:n,subject:r,center:i,dragStartTime:d,shouldUseTimeDampening:u,getAutoScrollerOptions:f})=>{const x=n.frame;if(!x)return null;const y=ib({dragStartTime:d,container:x.pageMarginBox,subject:r,center:i,shouldUseTimeDampening:u,getAutoScrollerOptions:f});return y&&iu(n,y)?y:null},Fp=({state:n,dragStartTime:r,shouldUseTimeDampening:i,scrollWindow:d,scrollDroppable:u,getAutoScrollerOptions:f})=>{const x=n.current.page.borderBoxCenter,p=n.dimensions.draggables[n.critical.draggable.id].page.marginBox;if(n.isWindowScrollAllowed){const g=n.viewport,b=$j({dragStartTime:r,viewport:g,subject:p,center:x,shouldUseTimeDampening:i,getAutoScrollerOptions:f});if(b){d(b);return}}const h=kj({center:x,destination:ra(n.impact),droppables:n.dimensions.droppables});if(!h)return;const N=Hj({dragStartTime:r,droppable:h,subject:p,center:x,shouldUseTimeDampening:i,getAutoScrollerOptions:f});N&&u(h.descriptor.id,N)},Gj=({scrollWindow:n,scrollDroppable:r,getAutoScrollerOptions:i=()=>nr})=>{const d=Ws(n),u=Ws(r);let f=null;const x=h=>{f||ce();const{shouldUseTimeDampening:N,dragStartTime:g}=f;Fp({state:h,scrollWindow:d,scrollDroppable:u,dragStartTime:g,shouldUseTimeDampening:N,getAutoScrollerOptions:i})};return{start:h=>{f&&ce();const N=Date.now();let g=!1;const b=()=>{g=!0};Fp({state:h,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:b,scrollDroppable:b,getAutoScrollerOptions:i}),f={dragStartTime:N,shouldUseTimeDampening:g},g&&x(h)},stop:()=>{f&&(d.cancel(),u.cancel(),f=null)},scroll:x}},qj=({move:n,scrollDroppable:r,scrollWindow:i})=>{const d=(y,p)=>{const h=Bt(y.current.client.selection,p);n({client:h})},u=(y,p)=>{if(!iu(y,p))return p;const h=Uj(y,p);if(!h)return r(y.descriptor.id,p),null;const N=sa(p,h);return r(y.descriptor.id,N),sa(p,N)},f=(y,p,h)=>{if(!y||!ru(p,h))return h;const N=Bj(p,h);if(!N)return i(h),null;const g=sa(h,N);return i(g),sa(h,g)};return y=>{const p=y.scrollJumpRequest;if(!p)return;const h=ra(y.impact);h||ce();const N=u(y.dimensions.droppables[h],p);if(!N)return;const g=y.viewport,b=f(y.isWindowScrollAllowed,g,N);b&&d(y,b)}},Ij=({scrollDroppable:n,scrollWindow:r,move:i,getAutoScrollerOptions:d})=>{const u=Gj({scrollWindow:r,scrollDroppable:n,getAutoScrollerOptions:d}),f=qj({move:i,scrollWindow:r,scrollDroppable:n});return{scroll:p=>{if(!(d().disabled||p.phase!=="DRAGGING")){if(p.movementMode==="FLUID"){u.scroll(p);return}p.scrollJumpRequest&&f(p)}},start:u.start,stop:u.stop}};const Vn="data-rfd",Yn=(()=>{const n=`${Vn}-drag-handle`;return{base:n,draggableId:`${n}-draggable-id`,contextId:`${n}-context-id`}})(),Gd=(()=>{const n=`${Vn}-draggable`;return{base:n,contextId:`${n}-context-id`,id:`${n}-id`}})(),Vj=(()=>{const n=`${Vn}-droppable`;return{base:n,contextId:`${n}-context-id`,id:`${n}-id`}})(),Wp={contextId:`${Vn}-scroll-container-context-id`},Yj=n=>r=>`[${r}="${n}"]`,Is=(n,r)=>n.map(i=>{const d=i.styles[r];return d?`${i.selector} { ${d} }`:""}).join(" "),Qj="pointer-events: none;";var Kj=n=>{const r=Yj(n),i=(()=>{const y=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:r(Yn.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:y,dragging:Qj,dropAnimating:y}}})(),d=(()=>{const y=`
      transition: ${Xs.outOfTheWay};
    `;return{selector:r(Gd.contextId),styles:{dragging:y,dropAnimating:y,userCancel:y}}})(),u={selector:r(Vj.contextId),styles:{always:"overflow-anchor: none;"}},x=[d,i,u,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Is(x,"always"),resting:Is(x,"resting"),dragging:Is(x,"dragging"),dropAnimating:Is(x,"dropAnimating"),userCancel:Is(x,"userCancel")}};const ia=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?E.useLayoutEffect:E.useEffect,Ad=()=>{const n=document.querySelector("head");return n||ce(),n},eh=n=>{const r=document.createElement("style");return n&&r.setAttribute("nonce",n),r.type="text/css",r};function Xj(n,r){const i=Ye(()=>Kj(n),[n]),d=E.useRef(null),u=E.useRef(null),f=je(Et(g=>{const b=u.current;b||ce(),b.textContent=g}),[]),x=je(g=>{const b=d.current;b||ce(),b.textContent=g},[]);ia(()=>{!d.current&&!u.current||ce();const g=eh(r),b=eh(r);return d.current=g,u.current=b,g.setAttribute(`${Vn}-always`,n),b.setAttribute(`${Vn}-dynamic`,n),Ad().appendChild(g),Ad().appendChild(b),x(i.always),f(i.resting),()=>{const j=k=>{const R=k.current;R||ce(),Ad().removeChild(R),k.current=null};j(d),j(u)}},[r,x,f,i.always,i.resting,n]);const y=je(()=>f(i.dragging),[f,i.dragging]),p=je(g=>{if(g==="DROP"){f(i.dropAnimating);return}f(i.userCancel)},[f,i.dropAnimating,i.userCancel]),h=je(()=>{u.current&&f(i.resting)},[f,i.resting]);return Ye(()=>({dragging:y,dropping:p,resting:h}),[y,p,h])}function ob(n,r){return Array.from(n.querySelectorAll(r))}var db=n=>n&&n.ownerDocument&&n.ownerDocument.defaultView?n.ownerDocument.defaultView:window;function Pi(n){return n instanceof db(n).HTMLElement}function Zj(n,r){const i=`[${Yn.contextId}="${n}"]`,d=ob(document,i);if(!d.length)return null;const u=d.find(f=>f.getAttribute(Yn.draggableId)===r);return!u||!Pi(u)?null:u}function Pj(n){const r=E.useRef({}),i=E.useRef(null),d=E.useRef(null),u=E.useRef(!1),f=je(function(b,j){const k={id:b,focus:j};return r.current[b]=k,function(){const v=r.current;v[b]!==k&&delete v[b]}},[]),x=je(function(b){const j=Zj(n,b);j&&j!==document.activeElement&&j.focus()},[n]),y=je(function(b,j){i.current===b&&(i.current=j)},[]),p=je(function(){d.current||u.current&&(d.current=requestAnimationFrame(()=>{d.current=null;const b=i.current;b&&x(b)}))},[x]),h=je(function(b){i.current=null;const j=document.activeElement;j&&j.getAttribute(Yn.draggableId)===b&&(i.current=b)},[]);return ia(()=>(u.current=!0,function(){u.current=!1;const b=d.current;b&&cancelAnimationFrame(b)}),[]),Ye(()=>({register:f,tryRecordFocus:h,tryRestoreFocusRecorded:p,tryShiftRecord:y}),[f,h,p,y])}function Jj(){const n={draggables:{},droppables:{}},r=[];function i(g){return r.push(g),function(){const j=r.indexOf(g);j!==-1&&r.splice(j,1)}}function d(g){r.length&&r.forEach(b=>b(g))}function u(g){return n.draggables[g]||null}function f(g){const b=u(g);return b||ce(),b}const x={register:g=>{n.draggables[g.descriptor.id]=g,d({type:"ADDITION",value:g})},update:(g,b)=>{const j=n.draggables[b.descriptor.id];j&&j.uniqueId===g.uniqueId&&(delete n.draggables[b.descriptor.id],n.draggables[g.descriptor.id]=g)},unregister:g=>{const b=g.descriptor.id,j=u(b);j&&g.uniqueId===j.uniqueId&&(delete n.draggables[b],n.droppables[g.descriptor.droppableId]&&d({type:"REMOVAL",value:g}))},getById:f,findById:u,exists:g=>!!u(g),getAllByType:g=>Object.values(n.draggables).filter(b=>b.descriptor.type===g)};function y(g){return n.droppables[g]||null}function p(g){const b=y(g);return b||ce(),b}const h={register:g=>{n.droppables[g.descriptor.id]=g},unregister:g=>{const b=y(g.descriptor.id);b&&g.uniqueId===b.uniqueId&&delete n.droppables[g.descriptor.id]},getById:p,findById:y,exists:g=>!!y(g),getAllByType:g=>Object.values(n.droppables).filter(b=>b.descriptor.type===g)};function N(){n.draggables={},n.droppables={},r.length=0}return{draggable:x,droppable:h,subscribe:i,clean:N}}function Fj(){const n=Ye(Jj,[]);return E.useEffect(()=>function(){n.clean()},[n]),n}var cu=Je.createContext(null),Ii=()=>{const n=document.body;return n||ce(),n};const Wj={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},e2=n=>`rfd-announcement-${n}`;function t2(n){const r=Ye(()=>e2(n),[n]),i=E.useRef(null);return E.useEffect(function(){const f=document.createElement("div");return i.current=f,f.id=r,f.setAttribute("aria-live","assertive"),f.setAttribute("aria-atomic","true"),$i(f.style,Wj),Ii().appendChild(f),function(){setTimeout(function(){const p=Ii();p.contains(f)&&p.removeChild(f),f===i.current&&(i.current=null)})}},[r]),je(u=>{const f=i.current;if(f){f.textContent=u;return}},[])}const a2={separator:"::"};function ou(n,r=a2){const i=Je.useId();return Ye(()=>`${n}${r.separator}${i}`,[r.separator,n,i])}function l2({contextId:n,uniqueId:r}){return`rfd-hidden-text-${n}-${r}`}function n2({contextId:n,text:r}){const i=ou("hidden-text",{separator:"-"}),d=Ye(()=>l2({contextId:n,uniqueId:i}),[i,n]);return E.useEffect(function(){const f=document.createElement("div");return f.id=d,f.textContent=r,f.style.display="none",Ii().appendChild(f),function(){const y=Ii();y.contains(f)&&y.removeChild(f)}},[d,r]),d}var Ji=Je.createContext(null);function ub(n){const r=E.useRef(n);return E.useEffect(()=>{r.current=n}),r}function s2(){let n=null;function r(){return!!n}function i(x){return x===n}function d(x){n&&ce();const y={abandon:x};return n=y,y}function u(){n||ce(),n=null}function f(){n&&(n.abandon(),u())}return{isClaimed:r,isActive:i,claim:d,release:u,tryAbandon:f}}function sr(n){return n.phase==="IDLE"||n.phase==="DROP_ANIMATING"?!1:n.isDragging}const r2=9,i2=13,du=27,fb=32,c2=33,o2=34,d2=35,u2=36,f2=37,x2=38,m2=39,p2=40,h2={[i2]:!0,[r2]:!0};var xb=n=>{h2[n.keyCode]&&n.preventDefault()};const Fi=(()=>{const n="visibilitychange";return typeof document>"u"?n:[n,`ms${n}`,`webkit${n}`,`moz${n}`,`o${n}`].find(d=>`on${d}`in document)||n})(),mb=0,th=5;function b2(n,r){return Math.abs(r.x-n.x)>=th||Math.abs(r.y-n.y)>=th}const ah={type:"IDLE"};function y2({cancel:n,completed:r,getPhase:i,setPhase:d}){return[{eventName:"mousemove",fn:u=>{const{button:f,clientX:x,clientY:y}=u;if(f!==mb)return;const p={x,y},h=i();if(h.type==="DRAGGING"){u.preventDefault(),h.actions.move(p);return}h.type!=="PENDING"&&ce();const N=h.point;if(!b2(N,p))return;u.preventDefault();const g=h.actions.fluidLift(p);d({type:"DRAGGING",actions:g})}},{eventName:"mouseup",fn:u=>{const f=i();if(f.type!=="DRAGGING"){n();return}u.preventDefault(),f.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:u=>{i().type==="DRAGGING"&&u.preventDefault(),n()}},{eventName:"keydown",fn:u=>{if(i().type==="PENDING"){n();return}if(u.keyCode===du){u.preventDefault(),n();return}xb(u)}},{eventName:"resize",fn:n},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{i().type==="PENDING"&&n()}},{eventName:"webkitmouseforcedown",fn:u=>{const f=i();if(f.type==="IDLE"&&ce(),f.actions.shouldRespectForcePress()){n();return}u.preventDefault()}},{eventName:Fi,fn:n}]}function g2(n){const r=E.useRef(ah),i=E.useRef(Dl),d=Ye(()=>({eventName:"mousedown",fn:function(g){if(g.defaultPrevented||g.button!==mb||g.ctrlKey||g.metaKey||g.shiftKey||g.altKey)return;const b=n.findClosestDraggableId(g);if(!b)return;const j=n.tryGetLock(b,x,{sourceEvent:g});if(!j)return;g.preventDefault();const k={x:g.clientX,y:g.clientY};i.current(),h(j,k)}}),[n]),u=Ye(()=>({eventName:"webkitmouseforcewillbegin",fn:N=>{if(N.defaultPrevented)return;const g=n.findClosestDraggableId(N);if(!g)return;const b=n.findOptionsForDraggable(g);b&&(b.shouldRespectForcePress||n.canGetLock(g)&&N.preventDefault())}}),[n]),f=je(function(){const g={passive:!1,capture:!0};i.current=ga(window,[u,d],g)},[u,d]),x=je(()=>{r.current.type!=="IDLE"&&(r.current=ah,i.current(),f())},[f]),y=je(()=>{const N=r.current;x(),N.type==="DRAGGING"&&N.actions.cancel({shouldBlockNextClick:!0}),N.type==="PENDING"&&N.actions.abort()},[x]),p=je(function(){const g={capture:!0,passive:!1},b=y2({cancel:y,completed:x,getPhase:()=>r.current,setPhase:j=>{r.current=j}});i.current=ga(window,b,g)},[y,x]),h=je(function(g,b){r.current.type!=="IDLE"&&ce(),r.current={type:"PENDING",point:b,actions:g},p()},[p]);ia(function(){return f(),function(){i.current()}},[f])}function v2(){}const N2={[o2]:!0,[c2]:!0,[u2]:!0,[d2]:!0};function j2(n,r){function i(){r(),n.cancel()}function d(){r(),n.drop()}return[{eventName:"keydown",fn:u=>{if(u.keyCode===du){u.preventDefault(),i();return}if(u.keyCode===fb){u.preventDefault(),d();return}if(u.keyCode===p2){u.preventDefault(),n.moveDown();return}if(u.keyCode===x2){u.preventDefault(),n.moveUp();return}if(u.keyCode===m2){u.preventDefault(),n.moveRight();return}if(u.keyCode===f2){u.preventDefault(),n.moveLeft();return}if(N2[u.keyCode]){u.preventDefault();return}xb(u)}},{eventName:"mousedown",fn:i},{eventName:"mouseup",fn:i},{eventName:"click",fn:i},{eventName:"touchstart",fn:i},{eventName:"resize",fn:i},{eventName:"wheel",fn:i,options:{passive:!0}},{eventName:Fi,fn:i}]}function S2(n){const r=E.useRef(v2),i=Ye(()=>({eventName:"keydown",fn:function(f){if(f.defaultPrevented||f.keyCode!==fb)return;const x=n.findClosestDraggableId(f);if(!x)return;const y=n.tryGetLock(x,N,{sourceEvent:f});if(!y)return;f.preventDefault();let p=!0;const h=y.snapLift();r.current();function N(){p||ce(),p=!1,r.current(),d()}r.current=ga(window,j2(h,N),{capture:!0,passive:!1})}}),[n]),d=je(function(){const f={passive:!1,capture:!0};r.current=ga(window,[i],f)},[i]);ia(function(){return d(),function(){r.current()}},[d])}const Ed={type:"IDLE"},w2=120,D2=.15;function C2({cancel:n,getPhase:r}){return[{eventName:"orientationchange",fn:n},{eventName:"resize",fn:n},{eventName:"contextmenu",fn:i=>{i.preventDefault()}},{eventName:"keydown",fn:i=>{if(r().type!=="DRAGGING"){n();return}i.keyCode===du&&i.preventDefault(),n()}},{eventName:Fi,fn:n}]}function A2({cancel:n,completed:r,getPhase:i}){return[{eventName:"touchmove",options:{capture:!1},fn:d=>{const u=i();if(u.type!=="DRAGGING"){n();return}u.hasMoved=!0;const{clientX:f,clientY:x}=d.touches[0],y={x:f,y:x};d.preventDefault(),u.actions.move(y)}},{eventName:"touchend",fn:d=>{const u=i();if(u.type!=="DRAGGING"){n();return}d.preventDefault(),u.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:d=>{if(i().type!=="DRAGGING"){n();return}d.preventDefault(),n()}},{eventName:"touchforcechange",fn:d=>{const u=i();u.type==="IDLE"&&ce();const f=d.touches[0];if(!f||!(f.force>=D2))return;const y=u.actions.shouldRespectForcePress();if(u.type==="PENDING"){y&&n();return}if(y){if(u.hasMoved){d.preventDefault();return}n();return}d.preventDefault()}},{eventName:Fi,fn:n}]}function E2(n){const r=E.useRef(Ed),i=E.useRef(Dl),d=je(function(){return r.current},[]),u=je(function(j){r.current=j},[]),f=Ye(()=>({eventName:"touchstart",fn:function(j){if(j.defaultPrevented)return;const k=n.findClosestDraggableId(j);if(!k)return;const R=n.tryGetLock(k,y,{sourceEvent:j});if(!R)return;const v=j.touches[0],{clientX:w,clientY:C}=v,A={x:w,y:C};i.current(),g(R,A)}}),[n]),x=je(function(){const j={capture:!0,passive:!1};i.current=ga(window,[f],j)},[f]),y=je(()=>{const b=r.current;b.type!=="IDLE"&&(b.type==="PENDING"&&clearTimeout(b.longPressTimerId),u(Ed),i.current(),x())},[x,u]),p=je(()=>{const b=r.current;y(),b.type==="DRAGGING"&&b.actions.cancel({shouldBlockNextClick:!0}),b.type==="PENDING"&&b.actions.abort()},[y]),h=je(function(){const j={capture:!0,passive:!1},k={cancel:p,completed:y,getPhase:d},R=ga(window,A2(k),j),v=ga(window,C2(k),j);i.current=function(){R(),v()}},[p,d,y]),N=je(function(){const j=d();j.type!=="PENDING"&&ce();const k=j.actions.fluidLift(j.point);u({type:"DRAGGING",actions:k,hasMoved:!1})},[d,u]),g=je(function(j,k){d().type!=="IDLE"&&ce();const R=setTimeout(N,w2);u({type:"PENDING",point:k,actions:j,longPressTimerId:R}),h()},[h,d,u,N]);ia(function(){return x(),function(){i.current();const k=d();k.type==="PENDING"&&(clearTimeout(k.longPressTimerId),u(Ed))}},[d,x,u]),ia(function(){return ga(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const T2=["input","button","textarea","select","option","optgroup","video","audio"];function pb(n,r){if(r==null)return!1;if(T2.includes(r.tagName.toLowerCase()))return!0;const d=r.getAttribute("contenteditable");return d==="true"||d===""?!0:r===n?!1:pb(n,r.parentElement)}function k2(n,r){const i=r.target;return Pi(i)?pb(n,i):!1}var O2=n=>wa(n.getBoundingClientRect()).center;function M2(n){return n instanceof db(n).Element}const R2=(()=>{const n="matches";return typeof document>"u"?n:[n,"msMatchesSelector","webkitMatchesSelector"].find(d=>d in Element.prototype)||n})();function hb(n,r){return n==null?null:n[R2](r)?n:hb(n.parentElement,r)}function _2(n,r){return n.closest?n.closest(r):hb(n,r)}function z2(n){return`[${Yn.contextId}="${n}"]`}function L2(n,r){const i=r.target;if(!M2(i))return null;const d=z2(n),u=_2(i,d);return!u||!Pi(u)?null:u}function B2(n,r){const i=L2(n,r);return i?i.getAttribute(Yn.draggableId):null}function U2(n,r){const i=`[${Gd.contextId}="${n}"]`,u=ob(document,i).find(f=>f.getAttribute(Gd.id)===r);return!u||!Pi(u)?null:u}function $2(n){n.preventDefault()}function Ei({expected:n,phase:r,isLockActive:i,shouldWarn:d}){return!(!i()||n!==r)}function bb({lockAPI:n,store:r,registry:i,draggableId:d}){if(n.isClaimed())return!1;const u=i.draggable.findById(d);return!(!u||!u.options.isEnabled||!sb(r.getState(),d))}function H2({lockAPI:n,contextId:r,store:i,registry:d,draggableId:u,forceSensorStop:f,sourceEvent:x}){if(!bb({lockAPI:n,store:i,registry:d,draggableId:u}))return null;const p=d.draggable.getById(u),h=U2(r,p.descriptor.id);if(!h||x&&!p.options.canDragInteractiveElements&&k2(h,x))return null;const N=n.claim(f||Dl);let g="PRE_DRAG";function b(){return p.options.shouldRespectForcePress}function j(){return n.isActive(N)}function k(T,D){Ei({expected:T,phase:g,isLockActive:j,shouldWarn:!0})&&i.dispatch(D())}const R=k.bind(null,"DRAGGING");function v(T){function D(){n.release(),g="COMPLETED"}g!=="PRE_DRAG"&&(D(),ce()),i.dispatch(_N(T.liftActionArgs)),g="DRAGGING";function U(V,re={shouldBlockNextClick:!1}){if(T.cleanup(),re.shouldBlockNextClick){const de=ga(window,[{eventName:"click",fn:$2,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(de)}D(),i.dispatch(Jh({reason:V}))}return{isActive:()=>Ei({expected:"DRAGGING",phase:g,isLockActive:j,shouldWarn:!1}),shouldRespectForcePress:b,drop:V=>U("DROP",V),cancel:V=>U("CANCEL",V),...T.actions}}function w(T){const D=Ws(V=>{R(()=>Ph({client:V}))});return{...v({liftActionArgs:{id:u,clientSelection:T,movementMode:"FLUID"},cleanup:()=>D.cancel(),actions:{move:D}}),move:D}}function C(){const T={moveUp:()=>R(IN),moveRight:()=>R(YN),moveDown:()=>R(VN),moveLeft:()=>R(QN)};return v({liftActionArgs:{id:u,clientSelection:O2(h),movementMode:"SNAP"},cleanup:Dl,actions:T})}function A(){Ei({expected:"PRE_DRAG",phase:g,isLockActive:j,shouldWarn:!0})&&n.release()}return{isActive:()=>Ei({expected:"PRE_DRAG",phase:g,isLockActive:j,shouldWarn:!1}),shouldRespectForcePress:b,fluidLift:w,snapLift:C,abort:A}}const G2=[g2,S2,E2];function q2({contextId:n,store:r,registry:i,customSensors:d,enableDefaultSensors:u}){const f=[...u?G2:[],...d||[]],x=E.useState(()=>s2())[0],y=je(function(v,w){sr(v)&&!sr(w)&&x.tryAbandon()},[x]);ia(function(){let v=r.getState();return r.subscribe(()=>{const C=r.getState();y(v,C),v=C})},[x,r,y]),ia(()=>x.tryAbandon,[x.tryAbandon]);const p=je(R=>bb({lockAPI:x,registry:i,store:r,draggableId:R}),[x,i,r]),h=je((R,v,w)=>H2({lockAPI:x,registry:i,contextId:n,store:r,draggableId:R,forceSensorStop:v||null,sourceEvent:w&&w.sourceEvent?w.sourceEvent:null}),[n,x,i,r]),N=je(R=>B2(n,R),[n]),g=je(R=>{const v=i.draggable.findById(R);return v?v.options:null},[i.draggable]),b=je(function(){x.isClaimed()&&(x.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(tu()))},[x,r]),j=je(()=>x.isClaimed(),[x]),k=Ye(()=>({canGetLock:p,tryGetLock:h,findClosestDraggableId:N,findOptionsForDraggable:g,tryReleaseLock:b,isLockClaimed:j}),[p,h,N,g,b,j]);for(let R=0;R<f.length;R++)f[R](k)}const I2=n=>({onBeforeCapture:r=>{const i=()=>{n.onBeforeCapture&&n.onBeforeCapture(r)};Id.flushSync(i)},onBeforeDragStart:n.onBeforeDragStart,onDragStart:n.onDragStart,onDragEnd:n.onDragEnd,onDragUpdate:n.onDragUpdate}),V2=n=>({...nr,...n.autoScrollerOptions,durationDampening:{...nr.durationDampening,...n.autoScrollerOptions}});function Vs(n){return n.current||ce(),n.current}function Y2(n){const{contextId:r,setCallbacks:i,sensors:d,nonce:u,dragHandleUsageInstructions:f}=n,x=E.useRef(null),y=ub(n),p=je(()=>I2(y.current),[y]),h=je(()=>V2(y.current),[y]),N=t2(r),g=n2({contextId:r,text:f}),b=Xj(r,u),j=je(de=>{Vs(x).dispatch(de)},[]),k=Ye(()=>Ep({publishWhileDragging:LN,updateDroppableScroll:UN,updateDroppableIsEnabled:$N,updateDroppableIsCombineEnabled:HN,collectionStarting:BN},j),[j]),R=Fj(),v=Ye(()=>Cj(R,k),[R,k]),w=Ye(()=>Ij({scrollWindow:Aj,scrollDroppable:v.scrollDroppable,getAutoScrollerOptions:h,...Ep({move:Ph},j)}),[v.scrollDroppable,j,h]),C=Pj(r),A=Ye(()=>jj({announce:N,autoScroller:w,dimensionMarshal:v,focusMarshal:C,getResponders:p,styleMarshal:b}),[N,w,v,C,p,b]);x.current=A;const B=je(()=>{const de=Vs(x);de.getState().phase!=="IDLE"&&de.dispatch(tu())},[]),T=je(()=>{const de=Vs(x).getState();return de.phase==="DROP_ANIMATING"?!0:de.phase==="IDLE"?!1:de.isDragging},[]),D=Ye(()=>({isDragging:T,tryAbort:B}),[T,B]);i(D);const U=je(de=>sb(Vs(x).getState(),de),[]),V=je(()=>Zl(Vs(x).getState()),[]),re=Ye(()=>({marshal:v,focus:C,contextId:r,canLift:U,isMovementAllowed:V,dragHandleUsageInstructionsId:g,registry:R}),[r,v,g,C,U,V,R]);return q2({contextId:r,store:A,registry:R,customSensors:d||null,enableDefaultSensors:n.enableDefaultSensors!==!1}),E.useEffect(()=>B,[B]),Je.createElement(Ji.Provider,{value:re},Je.createElement(h1,{context:cu,store:A},n.children))}function Q2(){return Je.useId()}function K2(n){const r=Q2(),i=n.dragHandleUsageInstructions||Mi.dragHandleUsageInstructions;return Je.createElement(S1,null,d=>Je.createElement(Y2,{nonce:n.nonce,contextId:r,setCallbacks:d,dragHandleUsageInstructions:i,enableDefaultSensors:n.enableDefaultSensors,sensors:n.sensors,onBeforeCapture:n.onBeforeCapture,onBeforeDragStart:n.onBeforeDragStart,onDragStart:n.onDragStart,onDragUpdate:n.onDragUpdate,onDragEnd:n.onDragEnd,autoScrollerOptions:n.autoScrollerOptions},n.children))}const lh={dragging:5e3,dropAnimating:4500},X2=(n,r)=>r?Xs.drop(r.duration):n?Xs.snap:Xs.fluid,Z2=(n,r)=>{if(n)return r?lr.opacity.drop:lr.opacity.combining},P2=n=>n.forceShouldAnimate!=null?n.forceShouldAnimate:n.mode==="SNAP";function J2(n){const i=n.dimension.client,{offset:d,combineWith:u,dropping:f}=n,x=!!u,y=P2(n),p=!!f,h=p?$d.drop(d,x):$d.moveTo(d);return{position:"fixed",top:i.marginBox.top,left:i.marginBox.left,boxSizing:"border-box",width:i.borderBox.width,height:i.borderBox.height,transition:X2(y,f),transform:h,opacity:Z2(x,p),zIndex:p?lh.dropAnimating:lh.dragging,pointerEvents:"none"}}function F2(n){return{transform:$d.moveTo(n.offset),transition:n.shouldAnimateDisplacement?void 0:"none"}}function W2(n){return n.type==="DRAGGING"?J2(n):F2(n)}function eS(n,r,i=kt){const d=window.getComputedStyle(r),u=r.getBoundingClientRect(),f=wh(u,d),x=Ui(f,i),y={client:f,tagName:r.tagName.toLowerCase(),display:d.display},p={x:f.marginBox.width,y:f.marginBox.height};return{descriptor:n,placeholder:y,displaceBy:p,client:f,page:x}}function tS(n){const r=ou("draggable"),{descriptor:i,registry:d,getDraggableRef:u,canDragInteractiveElements:f,shouldRespectForcePress:x,isEnabled:y}=n,p=Ye(()=>({canDragInteractiveElements:f,shouldRespectForcePress:x,isEnabled:y}),[f,y,x]),h=je(j=>{const k=u();return k||ce(),eS(i,k,j)},[i,u]),N=Ye(()=>({uniqueId:r,descriptor:i,options:p,getDimension:h}),[i,h,p,r]),g=E.useRef(N),b=E.useRef(!0);ia(()=>(d.draggable.register(g.current),()=>d.draggable.unregister(g.current)),[d.draggable]),ia(()=>{if(b.current){b.current=!1;return}const j=g.current;g.current=N,d.draggable.update(N,j)},[N,d.draggable])}var uu=Je.createContext(null);function Vi(n){const r=E.useContext(n);return r||ce(),r}function aS(n){n.preventDefault()}const lS=n=>{const r=E.useRef(null),i=je((D=null)=>{r.current=D},[]),d=je(()=>r.current,[]),{contextId:u,dragHandleUsageInstructionsId:f,registry:x}=Vi(Ji),{type:y,droppableId:p}=Vi(uu),h=Ye(()=>({id:n.draggableId,index:n.index,type:y,droppableId:p}),[n.draggableId,n.index,y,p]),{children:N,draggableId:g,isEnabled:b,shouldRespectForcePress:j,canDragInteractiveElements:k,isClone:R,mapped:v,dropAnimationFinished:w}=n;if(!R){const D=Ye(()=>({descriptor:h,registry:x,getDraggableRef:d,canDragInteractiveElements:k,shouldRespectForcePress:j,isEnabled:b}),[h,x,d,k,j,b]);tS(D)}const C=Ye(()=>b?{tabIndex:0,role:"button","aria-describedby":f,"data-rfd-drag-handle-draggable-id":g,"data-rfd-drag-handle-context-id":u,draggable:!1,onDragStart:aS}:null,[u,f,g,b]),A=je(D=>{v.type==="DRAGGING"&&v.dropping&&D.propertyName==="transform"&&Id.flushSync(w)},[w,v]),B=Ye(()=>{const D=W2(v),U=v.type==="DRAGGING"&&v.dropping?A:void 0;return{innerRef:i,draggableProps:{"data-rfd-draggable-context-id":u,"data-rfd-draggable-id":g,style:D,onTransitionEnd:U},dragHandleProps:C}},[u,C,g,v,A,i]),T=Ye(()=>({draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}),[h.droppableId,h.id,h.index,h.type]);return Je.createElement(Je.Fragment,null,N(B,v.snapshot,T))};var yb=(n,r)=>n===r,gb=n=>{const{combine:r,destination:i}=n;return i?i.droppableId:r?r.droppableId:null};const nS=n=>n.combine?n.combine.draggableId:null,sS=n=>n.at&&n.at.type==="COMBINE"?n.at.combine.draggableId:null;function rS(){const n=Et((u,f)=>({x:u,y:f})),r=Et((u,f,x=null,y=null,p=null)=>({isDragging:!0,isClone:f,isDropAnimating:!!p,dropAnimation:p,mode:u,draggingOver:x,combineWith:y,combineTargetFor:null})),i=Et((u,f,x,y,p=null,h=null,N=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:p,combineWith:h,mode:f,offset:u,dimension:x,forceShouldAnimate:N,snapshot:r(f,y,p,h,null)}}));return(u,f)=>{if(sr(u)){if(u.critical.draggable.id!==f.draggableId)return null;const x=u.current.client.offset,y=u.dimensions.draggables[f.draggableId],p=ra(u.impact),h=sS(u.impact),N=u.forceShouldAnimate;return i(n(x.x,x.y),u.movementMode,y,f.isClone,p,h,N)}if(u.phase==="DROP_ANIMATING"){const x=u.completed;if(x.result.draggableId!==f.draggableId)return null;const y=f.isClone,p=u.dimensions.draggables[f.draggableId],h=x.result,N=h.mode,g=gb(h),b=nS(h),k={duration:u.dropDuration,curve:lu.drop,moveTo:u.newHomeClientOffset,opacity:b?lr.opacity.drop:null,scale:b?lr.scale.drop:null};return{mapped:{type:"DRAGGING",offset:u.newHomeClientOffset,dimension:p,dropping:k,draggingOver:g,combineWith:b,mode:N,forceShouldAnimate:null,snapshot:r(N,y,g,b,k)}}}return null}}function vb(n=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:n,combineWith:null}}const iS={mapped:{type:"SECONDARY",offset:kt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:vb(null)}};function cS(){const n=Et((x,y)=>({x,y})),r=Et(vb),i=Et((x,y=null,p)=>({mapped:{type:"SECONDARY",offset:x,combineTargetFor:y,shouldAnimateDisplacement:p,snapshot:r(y)}})),d=x=>x?i(kt,x,!0):null,u=(x,y,p,h)=>{const N=p.displaced.visible[x],g=!!(h.inVirtualList&&h.effected[x]),b=Ki(p),j=b&&b.draggableId===x?y:null;if(!N){if(!g)return d(j);if(p.displaced.invisible[x])return null;const v=Qn(h.displacedBy.point),w=n(v.x,v.y);return i(w,j,!0)}if(g)return d(j);const k=p.displacedBy.point,R=n(k.x,k.y);return i(R,j,N.shouldAnimate)};return(x,y)=>{if(sr(x))return x.critical.draggable.id===y.draggableId?null:u(y.draggableId,x.critical.draggable.id,x.impact,x.afterCritical);if(x.phase==="DROP_ANIMATING"){const p=x.completed;return p.result.draggableId===y.draggableId?null:u(y.draggableId,p.result.draggableId,p.impact,p.afterCritical)}return null}}const oS=()=>{const n=rS(),r=cS();return(d,u)=>n(d,u)||r(d,u)||iS},dS={dropAnimationFinished:Fh},uS=Sh(oS,dS,null,{context:cu,areStatePropsEqual:yb})(lS);function Nb(n){return Vi(uu).isUsingCloneFor===n.draggableId&&!n.isClone?null:Je.createElement(uS,n)}function nh(n){const r=typeof n.isDragDisabled=="boolean"?!n.isDragDisabled:!0,i=!!n.disableInteractiveElementBlocking,d=!!n.shouldRespectForcePress;return Je.createElement(Nb,$i({},n,{isClone:!1,isEnabled:r,canDragInteractiveElements:i,shouldRespectForcePress:d}))}const jb=n=>r=>n===r,fS=jb("scroll"),xS=jb("auto"),sh=(n,r)=>r(n.overflowX)||r(n.overflowY),mS=n=>{const r=window.getComputedStyle(n),i={overflowX:r.overflowX,overflowY:r.overflowY};return sh(i,fS)||sh(i,xS)},pS=()=>!1,Sb=n=>n==null?null:n===document.body?pS()?n:null:n===document.documentElement?null:mS(n)?n:Sb(n.parentElement);var qd=n=>({x:n.scrollLeft,y:n.scrollTop});const wb=n=>n?window.getComputedStyle(n).position==="fixed"?!0:wb(n.parentElement):!1;var hS=n=>{const r=Sb(n),i=wb(n);return{closestScrollable:r,isFixedOnPage:i}},bS=({descriptor:n,isEnabled:r,isCombineEnabled:i,isFixedOnPage:d,direction:u,client:f,page:x,closest:y})=>{const p=(()=>{if(!y)return null;const{scrollSize:b,client:j}=y,k=ab({scrollHeight:b.scrollHeight,scrollWidth:b.scrollWidth,height:j.paddingBox.height,width:j.paddingBox.width});return{pageMarginBox:y.page.marginBox,frameClient:j,scrollSize:b,shouldClipSubject:y.shouldClipSubject,scroll:{initial:y.scroll,current:y.scroll,max:k,diff:{value:kt,displacement:kt}}}})(),h=u==="vertical"?Pd:zh,N=In({page:x,withPlaceholder:null,axis:h,frame:p});return{descriptor:n,isCombineEnabled:i,isFixedOnPage:d,axis:h,isEnabled:r,client:f,page:x,frame:p,subject:N}};const yS=(n,r)=>{const i=Dh(n);if(!r||n!==r)return i;const d=i.paddingBox.top-r.scrollTop,u=i.paddingBox.left-r.scrollLeft,f=d+r.scrollHeight,x=u+r.scrollWidth,p=Qd({top:d,right:x,bottom:f,left:u},i.border);return Kd({borderBox:p,margin:i.margin,border:i.border,padding:i.padding})};var gS=({ref:n,descriptor:r,env:i,windowScroll:d,direction:u,isDropDisabled:f,isCombineEnabled:x,shouldClipSubject:y})=>{const p=i.closestScrollable,h=yS(n,p),N=Ui(h,d),g=(()=>{if(!p)return null;const j=Dh(p),k={scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth};return{client:j,page:Ui(j,d),scroll:qd(p),scrollSize:k,shouldClipSubject:y}})();return bS({descriptor:r,isEnabled:!f,isCombineEnabled:x,isFixedOnPage:i.isFixedOnPage,direction:u,client:h,page:N,closest:g})};const vS={passive:!1},NS={passive:!0};var rh=n=>n.shouldPublishImmediately?vS:NS;const Ti=n=>n&&n.env.closestScrollable||null;function jS(n){const r=E.useRef(null),i=Vi(Ji),d=ou("droppable"),{registry:u,marshal:f}=i,x=ub(n),y=Ye(()=>({id:n.droppableId,type:n.type,mode:n.mode}),[n.droppableId,n.mode,n.type]),p=E.useRef(y),h=Ye(()=>Et((B,T)=>{r.current||ce();const D={x:B,y:T};f.updateDroppableScroll(y.id,D)}),[y.id,f]),N=je(()=>{const B=r.current;return!B||!B.env.closestScrollable?kt:qd(B.env.closestScrollable)},[]),g=je(()=>{const B=N();h(B.x,B.y)},[N,h]),b=Ye(()=>Ws(g),[g]),j=je(()=>{const B=r.current,T=Ti(B);if(B&&T||ce(),B.scrollOptions.shouldPublishImmediately){g();return}b()},[b,g]),k=je((B,T)=>{r.current&&ce();const D=x.current,U=D.getDroppableRef();U||ce();const V=hS(U),re={ref:U,descriptor:y,env:V,scrollOptions:T};r.current=re;const de=gS({ref:U,descriptor:y,env:V,windowScroll:B,direction:D.direction,isDropDisabled:D.isDropDisabled,isCombineEnabled:D.isCombineEnabled,shouldClipSubject:!D.ignoreContainerClipping}),pe=V.closestScrollable;return pe&&(pe.setAttribute(Wp.contextId,i.contextId),pe.addEventListener("scroll",j,rh(re.scrollOptions))),de},[i.contextId,y,j,x]),R=je(()=>{const B=r.current,T=Ti(B);return B&&T||ce(),qd(T)},[]),v=je(()=>{const B=r.current;B||ce();const T=Ti(B);r.current=null,T&&(b.cancel(),T.removeAttribute(Wp.contextId),T.removeEventListener("scroll",j,rh(B.scrollOptions)))},[j,b]),w=je(B=>{const T=r.current;T||ce();const D=Ti(T);D||ce(),D.scrollTop+=B.y,D.scrollLeft+=B.x},[]),C=Ye(()=>({getDimensionAndWatchScroll:k,getScrollWhileDragging:R,dragStopped:v,scroll:w}),[v,k,R,w]),A=Ye(()=>({uniqueId:d,descriptor:y,callbacks:C}),[C,y,d]);ia(()=>(p.current=A.descriptor,u.droppable.register(A),()=>{r.current&&v(),u.droppable.unregister(A)}),[C,y,v,A,f,u.droppable]),ia(()=>{r.current&&f.updateDroppableIsEnabled(p.current.id,!n.isDropDisabled)},[n.isDropDisabled,f]),ia(()=>{r.current&&f.updateDroppableIsCombineEnabled(p.current.id,n.isCombineEnabled)},[n.isCombineEnabled,f])}function Td(){}const ih={width:0,height:0,margin:k1},SS=({isAnimatingOpenOnMount:n,placeholder:r,animate:i})=>n||i==="close"?ih:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin},wS=({isAnimatingOpenOnMount:n,placeholder:r,animate:i})=>{const d=SS({isAnimatingOpenOnMount:n,placeholder:r,animate:i});return{display:r.display,boxSizing:"border-box",width:d.width,height:d.height,marginTop:d.margin.top,marginRight:d.margin.right,marginBottom:d.margin.bottom,marginLeft:d.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:i!=="none"?Xs.placeholder:null}},DS=n=>{const r=E.useRef(null),i=je(()=>{r.current&&(clearTimeout(r.current),r.current=null)},[]),{animate:d,onTransitionEnd:u,onClose:f,contextId:x}=n,[y,p]=E.useState(n.animate==="open");E.useEffect(()=>y?d!=="open"?(i(),p(!1),Td):r.current?Td:(r.current=setTimeout(()=>{r.current=null,p(!1)}),i):Td,[d,y,i]);const h=je(g=>{g.propertyName==="height"&&(u(),d==="close"&&f())},[d,f,u]),N=wS({isAnimatingOpenOnMount:y,animate:n.animate,placeholder:n.placeholder});return Je.createElement(n.placeholder.tagName,{style:N,"data-rfd-placeholder-context-id":x,onTransitionEnd:h,ref:n.innerRef})};var CS=Je.memo(DS);class AS extends Je.PureComponent{constructor(...r){super(...r),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(r,i){return r.shouldAnimate?r.on?{isVisible:!0,data:r.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!r.on,data:r.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const r={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(r)}}const ES=n=>{const r=E.useContext(Ji);r||ce();const{contextId:i,isMovementAllowed:d}=r,u=E.useRef(null),f=E.useRef(null),{children:x,droppableId:y,type:p,mode:h,direction:N,ignoreContainerClipping:g,isDropDisabled:b,isCombineEnabled:j,snapshot:k,useClone:R,updateViewportMaxScroll:v,getContainerForClone:w}=n,C=je(()=>u.current,[]),A=je((pe=null)=>{u.current=pe},[]);je(()=>f.current,[]);const B=je((pe=null)=>{f.current=pe},[]),T=je(()=>{d()&&v({maxScroll:nb()})},[d,v]);jS({droppableId:y,type:p,mode:h,direction:N,isDropDisabled:b,isCombineEnabled:j,ignoreContainerClipping:g,getDroppableRef:C});const D=Ye(()=>Je.createElement(AS,{on:n.placeholder,shouldAnimate:n.shouldAnimatePlaceholder},({onClose:pe,data:W,animate:fe})=>Je.createElement(CS,{placeholder:W,onClose:pe,innerRef:B,animate:fe,contextId:i,onTransitionEnd:T})),[i,T,n.placeholder,n.shouldAnimatePlaceholder,B]),U=Ye(()=>({innerRef:A,placeholder:D,droppableProps:{"data-rfd-droppable-id":y,"data-rfd-droppable-context-id":i}}),[i,y,D,A]),V=R?R.dragging.draggableId:null,re=Ye(()=>({droppableId:y,type:p,isUsingCloneFor:V}),[y,V,p]);function de(){if(!R)return null;const{dragging:pe,render:W}=R,fe=Je.createElement(Nb,{draggableId:pe.draggableId,index:pe.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(ge,oe)=>W(ge,oe,pe));return p0.createPortal(fe,w())}return Je.createElement(uu.Provider,{value:re},x(U,k),de())};function TS(){return document.body||ce(),document.body}const ch={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:TS},Db=n=>{let r={...n},i;for(i in ch)n[i]===void 0&&(r={...r,[i]:ch[i]});return r},kd=(n,r)=>n===r.droppable.type,oh=(n,r)=>r.draggables[n.draggable.id],kS=()=>{const n={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r={...n,shouldAnimatePlaceholder:!1},i=Et(f=>({draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}})),d=Et((f,x,y,p,h,N)=>{const g=h.descriptor.id;if(h.descriptor.droppableId===f){const k=N?{render:N,dragging:i(h.descriptor)}:null,R={isDraggingOver:y,draggingOverWith:y?g:null,draggingFromThisWith:g,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!1,snapshot:R,useClone:k}}if(!x)return r;if(!p)return n;const j={isDraggingOver:y,draggingOverWith:g,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!0,snapshot:j,useClone:null}});return(f,x)=>{const y=Db(x),p=y.droppableId,h=y.type,N=!y.isDropDisabled,g=y.renderClone;if(sr(f)){const b=f.critical;if(!kd(h,b))return r;const j=oh(b,f.dimensions),k=ra(f.impact)===p;return d(p,N,k,k,j,g)}if(f.phase==="DROP_ANIMATING"){const b=f.completed;if(!kd(h,b.critical))return r;const j=oh(b.critical,f.dimensions);return d(p,N,gb(b.result)===p,ra(b.impact)===p,j,g)}if(f.phase==="IDLE"&&f.completed&&!f.shouldFlush){const b=f.completed;if(!kd(h,b.critical))return r;const j=ra(b.impact)===p,k=!!(b.impact.at&&b.impact.at.type==="COMBINE"),R=b.critical.droppable.id===p;return j?k?n:r:R?n:r}return r}},OS={updateViewportMaxScroll:qN},dh=Sh(kS,OS,(n,r,i)=>({...Db(i),...n,...r}),{context:cu,areStatePropsEqual:yb})(ES),uh={1L:75,1L:80,2L:155,1L:80,2L:155,:90,:20,:20,:20,:20,:18.3,:20,:16.7,:20,:18.3,:45,:70,:70,:70,:70,:55,471:30,1795:75,:27.5,:25,:25,:30,:30,:27.5,:25,:20,:10,:20,:20,:25,:20,:20,:20,:20,:10,:20,:20,:20,:20,:20,:16.7,:20,1L:70,2L:140,:50,:70,:50,:20,400:16.7,1000:25,1000:40,2000:40,2000:60,1000:60,2000:100,500:50,1000:60},ki={1L:20,1L:20,2L:12,1L:20,2L:12,:20,:70,:70,:70,:12,:24,:20,:108,:40,:40,:15,:4,:4,:4,:4,:16,471:30,1795:9,:60,:20,:24,:15,:15,:24,:25,:15,:15,:15,:15,:24,:24,:24,:24,:15,:15,:15,:15,:15,:15,:15,:24,:15},Wi=(n,r)=>[...n].sort((i,d)=>{const u=i.sortWeight!==void 0&&i.sortWeight!==null?Number(i.sortWeight):NaN,f=d.sortWeight!==void 0&&d.sortWeight!==null?Number(d.sortWeight):NaN,x=!isNaN(u),y=!isNaN(f);return x&&y&&u!==f?u-f:x&&!y?-1:!x&&y?1:String(i[r]||"").localeCompare(String(d[r]||""),"zh-Hant")}),nt=(n=new Date)=>{const r=new Date(n);return`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`},Oi=n=>{if(typeof n!="string"||!n.trim().startsWith("="))return n;try{const i=n.trim().substring(1).replace(/[^0-9+\-*/(). ]/g,"");if(!i.trim())return n;const d=new Function(`return ${i}`)();return typeof d=="number"&&isFinite(d)?Number(d.toFixed(2)).toString():n}catch(r){return console.warn("Formula evaluation failed:",r),n}},Lt=n=>{if(typeof n=="string"&&n.trim().startsWith("="))return 0;const r=Number(n);return isNaN(r)?0:r};function MS({user:n,apiUrl:r,logActivity:i}){const[d,u]=E.useState([]),[f,x]=E.useState({1e3:0,500:0,100:0,50:0,10:0,5:0,1:0}),[y,p]=E.useState(5e3),[h,N]=E.useState({stall:0,cleaning:0,electricity:0,gas:0,parking:0,goods:0,bags:0,others:0,linePay:0,serviceFee:0}),[g,b]=E.useState(""),[j,k]=E.useState("CASH"),[R,v]=E.useState(!1),[w,C]=E.useState(!1),[A,B]=E.useState(!1),[T,D]=E.useState(null),[U,V]=E.useState([]),[re,de]=E.useState(!1),[pe,W]=E.useState(null),[fe,ge]=E.useState(!1);E.useEffect(()=>{p(j==="CASH"?5e3:0)},[j]);const oe=E.useCallback(async()=>{try{const q=await Ee(r,"getProducts",{},n.token);if(console.log("Sales Page - Raw Products Data:",q),Array.isArray(q)){const z=q.filter(he=>(Number(he.stock)||0)>0||(Number(he.originalStock)||0)>0),ee=Wi(z,"name");u(ee.map(he=>{const Le=Number(he.price)||0,ue=uh[he.name]!==void 0?uh[he.name]:null,Xe=`last_price_${he.id}`,Ue=localStorage.getItem(Xe);let xt=Le;return ue!==null&&(xt=ue),Ue!==null&&(xt=Number(Ue)),{id:he.id,name:he.name,stock:Number(he.stock)||0,originalStock:Number(he.originalStock)||0,picked:0,original:0,returns:0,sold:0,price:xt,subtotal:0,sortWeight:he.sortWeight,fromSheet:he._fromSheet}}))}else console.error("Sales Page - Data is not an array:",q)}catch(q){console.error("Fetch products failed",q),alert(": "+q.message)}},[r,n.token]),H=E.useCallback(async()=>{try{const q=await Ee(r,"getRecentSalesForCorrection",{},n.token);Array.isArray(q)&&V(q)}catch(q){console.error("Failed to load recent sales history:",q)}},[r,n.token]);E.useEffect(()=>{(async()=>n?.token&&(await oe(),await H()))()},[n.token,oe,H]);const P=(q,z,ee)=>{u(he=>he.map(Le=>{if(Le.id!==q)return Le;if(typeof ee=="string"&&ee.trim().startsWith("="))return{...Le,[z]:ee};let ue=Number(ee);isNaN(ue)&&(ue=0);let Xe=z==="picked"?ue:Lt(Le.picked),Ue=z==="original"?ue:Lt(Le.original),xt=z==="returns"?ue:Lt(Le.returns),St=z==="price"?ue:Lt(Le.price);z==="price"&&localStorage.setItem(`last_price_${q}`,St.toString()),Xe>Le.stock&&(Xe=Le.stock),Xe<0&&(Xe=0),Ue>Le.originalStock&&(Ue=Le.originalStock),Ue<0&&(Ue=0);const Da=Xe+Ue;xt>Da&&(xt=Da),xt<0&&(xt=0);const yt={...Le,picked:Xe,original:Ue,returns:xt,price:St};return yt.sold=yt.picked+yt.original-yt.returns,yt.subtotal=yt.sold*(yt.price||0),yt}))},O=(q,z,ee)=>{if(typeof ee=="string"&&ee.trim().startsWith("=")){const he=Oi(ee);P(q,z,he)}},F=(q,z)=>{x(ee=>({...ee,[q]:typeof z=="string"&&z.trim().startsWith("=")?z:Number(z)||0}))},ne=(q,z)=>{if(typeof z=="string"&&z.trim().startsWith("=")){const ee=Oi(z);F(q,ee)}},M=q=>{p(typeof q=="string"&&q.trim().startsWith("=")?q:Number(q)||0)},K=q=>{if(typeof q=="string"&&q.trim().startsWith("=")){const z=Oi(q);M(z)}},ae=(q,z)=>{N(ee=>({...ee,[q]:typeof z=="string"&&z.trim().startsWith("=")?z:Number(z)||0}))},se=(q,z)=>{if(typeof z=="string"&&z.trim().startsWith("=")){const ee=Oi(z);ae(q,ee)}},Ne=async q=>{if(!q.destination)return;const z=Array.from(d),[ee]=z.splice(q.source.index,1);z.splice(q.destination.index,0,ee),u(z);try{const he=z.map(ue=>ue.id),Le=await Ee(r,"updateProductSortOrder",{productIds:he},n.token);console.log("Sort order synced:",Le),Le.success&&alert(`( ${Le.updateCount} )`)}catch(he){console.error("Failed to sync sort order:",he),alert(""+he.message)}},ye=q=>{const z=document.getElementById(q);z&&(z.focus(),z.select?.(),z.scrollIntoView({block:"nearest",behavior:"smooth"}))},J=q=>{if(!T)return;const z=document.getElementById(T.id);if(z){const ee=z.selectionStart,he=z.selectionEnd,Le=z.value,ue=Le.substring(0,ee),Xe=Le.substring(he,Le.length),Ue=ue+q+Xe;T.type==="row"?P(T.rowId,T.field,Ue):T.type==="cash"?F(T.denom,Ue):T.type==="expense"?ae(T.key,Ue):T.type==="reserve"&&M(Ue);const xt=ee+q.length;setTimeout(()=>{z.selectionStart=z.selectionEnd=xt,z.focus()},0)}},ie=({inputId:q})=>a.jsx("div",{className:"flex gap-1 mb-2 overflow-x-auto pb-1 no-scrollbar",children:["=","+","-","*",""].map(z=>a.jsx("button",{onMouseDown:ee=>ee.preventDefault(),onClick:()=>J(z===""?"/":z),className:"flex-1 h-10 min-w-[44px] rounded-lg bg-white border border-gray-200 text-[#800020] font-bold text-2xl active:bg-gray-100 shadow-sm transition-all flex items-center justify-center pt-0.5",children:z},z))}),me=(q,z,ee,he="input-")=>{if(!["Enter","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(q.key))return;q.key.startsWith("Arrow")&&q.preventDefault();const ue=["picked","original","returns","price"],Xe=ue.indexOf(ee);if(q.key==="Enter"){q.preventDefault();const xt=["picked","original","returns","price"],St=xt.indexOf(ee);if(St<xt.length-1&&St!==-1){const Da=xt[St+1];ye(`${he}${z}-${Da}`)}else z<d.length-1?ye(`${he}${z+1}-picked`):ye("input-cash-1000");return}let Ue=null;q.key==="ArrowUp"?z>0&&(Ue=`${he}${z-1}-${ee}`):q.key==="ArrowDown"?z<d.length-1?Ue=`${he}${z+1}-${ee}`:Ue="input-cash-1000":q.key==="ArrowLeft"?Xe>0?Ue=`${he}${z}-${ue[Xe-1]}`:z>0&&(Ue=`${he}${z-1}-price`):q.key==="ArrowRight"&&(Xe<ue.length-1?Ue=`${he}${z}-${ue[Xe+1]}`:z<d.length-1?Ue=`${he}${z+1}-picked`:Ue="input-cash-1000"),Ue&&ye(Ue)},Ae=(q,z={})=>{const{next:ee,prev:he,up:Le,down:ue,left:Xe,right:Ue}=z;if(!["Enter","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(q.key))return;q.key.startsWith("Arrow")&&q.preventDefault();let St=null;q.key==="Enter"?(q.preventDefault(),St=ee):q.key==="ArrowDown"?St=ue||ee:q.key==="ArrowUp"?St=Le||he:q.key==="ArrowLeft"?St=Xe||he:q.key==="ArrowRight"&&(St=Ue||ee),St?ye(St):(q.key==="ArrowUp"||q.key==="ArrowLeft")&&d.length>0&&ye(`input-${d.length-1}-price`)},xe=d.reduce((q,z)=>q+(z.subtotal||0),0),Ge=Object.entries(f).reduce((q,[z,ee])=>q+Number(z)*Lt(ee),0)-Lt(y),ze=Lt(h.stall)+Lt(h.cleaning)+Lt(h.electricity)+Lt(h.gas)+Lt(h.parking)+Lt(h.goods)+Lt(h.bags)+Lt(h.others)+Lt(h.linePay),it=j==="CREDIT",G=it?xe:Ge+ze+Lt(h.serviceFee)-xe,Se=q=>{const z={};q.details.forEach(ee=>{z[ee.productId]={...ee,newPicked:ee.oldPicked,newOriginal:ee.oldOriginal,newReturns:ee.oldReturns,newPrice:ee.oldUnitPrice}}),W({sale:q,adjustments:z,reason:""})},_e=(q,z,ee)=>{W(he=>({...he,adjustments:{...he.adjustments,[q]:{...he.adjustments[q],[z]:ee}}}))},Te=async()=>{if(!pe.reason.trim()){alert("");return}const q={saleId:pe.sale.saleId,reason:pe.reason,adjustments:Object.values(pe.adjustments).map(z=>({productId:z.productId,newPicked:Number(z.newPicked),newOriginal:Number(z.newOriginal),newReturns:Number(z.newReturns),newPrice:Number(z.newPrice),oldSold:z.oldSold,oldUnitPrice:z.oldUnitPrice}))};ge(!0);try{const z=await Ee(r,"applySalesAdjustment",q,n.token);if(z.error)throw new Error(z.error);alert(""),W(null),await oe(),await H()}catch(z){alert(": "+z.message)}finally{ge(!1)}},ut=async()=>{if(!g.trim()){alert("");const z=document.getElementById("input-location");z&&z.focus();return}const q={salesRep:n.username,customer:g,paymentMethod:j,salesData:d.map(z=>({productId:z.id,picked:z.picked,original:z.original,returns:z.returns,sold:z.sold,unitPrice:z.price})),cashData:{totalCash:j==="CREDIT"?0:Ge,reserve:y},expenseData:{...h,finalTotal:G}};v(!0);try{await Ee(r,"saveSales",q,n.token),i&&i({actionType:"DATA_EDIT",page:"",details:JSON.stringify({customer:g,paymentMethod:j,totalAmount:it?xe:G,productCount:d.filter(z=>z.sold>0).length})}),alert(" Google Sheet"),window.location.reload()}catch(z){alert(": "+z.message)}finally{v(!1)}},Pe=async()=>{if(d.length===0){alert("");return}C(!0);try{const q={templateId:"Template_",data:{date:new Date().toISOString(),location:g,salesRep:n.username,totalSalesAmount:it?xe:G,totalCashCalc:Ge,finalTotal:G,reserve:y,expenses:h,expenses:h,rows:d.map(ee=>({name:ee.name,stock:ee.stock,originalStock:ee.originalStock,picked:ee.picked,original:ee.original,returns:ee.returns,sold:ee.sold,price:ee.price,subtotal:ee.subtotal}))}},z=await Ee(r,"generatePdf",q,n.token);if(z.success&&z.pdfBase64){const ee=atob(z.pdfBase64),he=new Array(ee.length);for(let Ue=0;Ue<ee.length;Ue++)he[Ue]=ee.charCodeAt(Ue);const Le=new Uint8Array(he),ue=new Blob([Le],{type:"application/pdf"}),Xe=URL.createObjectURL(ue);window.open(Xe,"_blank")}else throw new Error(z.error||"Unknown error")}catch(q){console.error("Print failed:",q),alert(": "+q.message)}finally{C(!1)}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 h-full overflow-y-auto xl:overflow-hidden",children:[R&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)]",children:"..."})]}),a.jsxs("div",{className:"xl:col-span-2 glass-panel p-6 overflow-hidden flex flex-col h-auto min-h-[60vh] xl:h-[calc(100vh-10rem)]",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[a.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-[var(--text-primary)]",children:[a.jsx(ft,{size:20,className:"text-[var(--accent-blue)]"})," "]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-4 w-full md:w-auto",children:[a.jsxs("div",{className:"flex bg-[var(--bg-tertiary)] rounded-lg p-1 border border-[var(--border-primary)] self-start md:self-auto",children:[a.jsx("button",{onClick:()=>k("CASH"),className:`px-3 py-1 text-xs font-bold rounded-md transition-all ${j==="CASH"?"bg-emerald-500 text-white shadow-sm":"text-[var(--text-tertiary)] hover:text-[var(--text-secondary)]"}`,children:""}),a.jsx("button",{onClick:()=>k("CREDIT"),className:`px-3 py-1 text-xs font-bold rounded-md transition-all ${j==="CREDIT"?"bg-amber-500 text-white shadow-sm":"text-[var(--text-tertiary)] hover:text-[var(--text-secondary)]"}`,children:""})]}),a.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[a.jsx("label",{className:"text-sm text-[var(--text-secondary)] font-bold whitespace-nowrap",children:":"}),a.jsx("input",{id:"input-location",type:"text",className:"input-field py-1 px-3 w-full md:w-48",placeholder:"...",value:g,onChange:q=>b(q.target.value),onKeyDown:q=>{q.key==="Enter"&&(q.preventDefault(),ye("input-m-0-picked")||ye("input-0-picked"))}})]}),a.jsxs("button",{onClick:()=>B(!A),className:`flex items-center gap-2 px-3 py-1 text-xs font-bold rounded-lg border transition-all ${A?"bg-indigo-500 text-white border-indigo-500":"bg-[var(--bg-secondary)] text-[var(--text-secondary)] border-[var(--border-primary)] hover:border-[var(--accent-blue)]"}`,children:[a.jsx(zv,{size:16}),A?"":""]}),a.jsxs("button",{onClick:Pe,disabled:w,className:`flex items-center gap-2 px-3 py-1 text-xs font-bold rounded-lg border transition-all ${w?"bg-gray-400 text-white cursor-not-allowed":"bg-[var(--bg-secondary)] text-[var(--text-secondary)] border-[var(--border-primary)] hover:border-[var(--accent-blue)]"}`,children:[a.jsx(Kv,{size:16}),w?"...":""]})]})]}),a.jsx("div",{className:"flex-1 overflow-auto",children:a.jsxs(K2,{onDragEnd:Ne,children:[a.jsx(dh,{droppableId:"mobile-rows",isDropDisabled:!A,children:q=>a.jsxs("div",{...q.droppableProps,ref:q.innerRef,className:"md:hidden space-y-4",children:[d.map((z,ee)=>a.jsx(nh,{draggableId:String(z.id),index:ee,isDragDisabled:!A,children:(he,Le)=>a.jsxs("div",{ref:he.innerRef,...he.draggableProps,className:`bg-[var(--bg-secondary)] rounded-xl p-4 border border-[var(--border-primary)] ${Le.isDragging?"shadow-2xl z-50 ring-2 ring-indigo-500":""}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[A&&a.jsx("div",{...he.dragHandleProps,className:"text-[var(--text-tertiary)] cursor-grab active:cursor-grabbing",children:a.jsx(vp,{size:20})}),a.jsx("div",{className:"font-bold text-[var(--text-primary)] text-lg leading-tight",children:z.name})]}),a.jsxs("div",{className:"text-[10px] font-mono bg-[var(--bg-tertiary)] px-2 py-1 rounded border border-[var(--border-primary)] whitespace-nowrap",children:[a.jsx("span",{className:"text-blue-500 font-bold",children:z.stock}),a.jsx("span",{className:"text-[var(--text-tertiary)] mx-0.5",children:"/"}),a.jsx("span",{className:"text-orange-500 font-bold",children:z.originalStock||0})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 mb-3 border border-gray-100 min-h-[120px]",children:[a.jsx(ie,{}),a.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[a.jsxs("div",{className:"flex flex-col gap-1 min-h-[56px]",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] text-center font-bold",children:""}),a.jsx("input",{id:`input-m-${ee}-picked`,type:"text",inputMode:"decimal",className:"input-field text-center p-2 text-base font-bold bg-white",value:z.picked||"",onChange:ue=>P(z.id,"picked",ue.target.value),onBlur:ue=>O(z.id,"picked",ue.target.value),onFocus:()=>D({id:`input-m-${ee}-picked`,type:"row",rowId:z.id,field:"picked"}),onKeyDown:ue=>me(ue,ee,"picked","input-m-"),disabled:A})]}),a.jsxs("div",{className:"flex flex-col gap-1 min-h-[56px]",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] text-center font-bold",children:""}),a.jsx("input",{id:`input-m-${ee}-original`,type:"text",inputMode:"decimal",className:"input-field text-center p-2 text-base font-bold bg-white",value:z.original||"",onChange:ue=>P(z.id,"original",ue.target.value),onBlur:ue=>O(z.id,"original",ue.target.value),onFocus:()=>D({id:`input-m-${ee}-original`,type:"row",rowId:z.id,field:"original"}),onKeyDown:ue=>me(ue,ee,"original","input-m-"),disabled:A})]}),a.jsxs("div",{className:"flex flex-col gap-1 min-h-[56px]",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] text-center font-bold",children:""}),a.jsx("input",{id:`input-m-${ee}-returns`,type:"text",inputMode:"decimal",className:"input-field text-center p-2 text-base font-bold text-red-600 bg-white",value:z.returns||"",onChange:ue=>P(z.id,"returns",ue.target.value),onBlur:ue=>O(z.id,"returns",ue.target.value),onFocus:()=>D({id:`input-m-${ee}-returns`,type:"row",rowId:z.id,field:"returns"}),onKeyDown:ue=>me(ue,ee,"returns","input-m-"),disabled:A})]}),a.jsxs("div",{className:"flex flex-col gap-1 min-h-[56px]",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] text-center font-bold",children:""}),a.jsx("input",{id:`input-m-${ee}-price`,type:"text",inputMode:"decimal",className:"input-field text-center p-2 text-base font-bold bg-white",value:z.price,onChange:ue=>P(z.id,"price",ue.target.value),onBlur:ue=>O(z.id,"price",ue.target.value),onFocus:()=>D({id:`input-m-${ee}-price`,type:"row",rowId:z.id,field:"price"}),onKeyDown:ue=>me(ue,ee,"price","input-m-"),disabled:A})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-[var(--border-primary)]",children:[a.jsxs("div",{className:"text-xs text-[var(--text-secondary)]",children:[": ",a.jsx("span",{className:"font-bold text-blue-500 text-sm ml-1",children:z.sold})]}),a.jsxs("div",{className:"text-sm font-bold text-rose-600 font-mono",children:[a.jsx("span",{className:"text-xs text-[var(--text-tertiary)] font-normal mr-1",children:""}),"$",z.subtotal?.toLocaleString()]})]})]})},`${z.id}-${ee}`)),q.placeholder]})}),a.jsxs("table",{className:"hidden md:table w-full text-left border-collapse",children:[a.jsx("thead",{className:"sticky top-0 bg-[var(--bg-secondary)] z-10 text-[var(--text-secondary)] text-xs uppercase font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 w-10"}),a.jsx("th",{className:"p-3",children:""}),a.jsx("th",{className:"p-3 w-20",children:""}),a.jsx("th",{className:"p-3 w-24",children:"(+)"}),a.jsx("th",{className:"p-3 w-24",children:"(+)"}),a.jsx("th",{className:"p-3 w-24",children:"(-)"}),a.jsx("th",{className:"p-3 w-20 text-center",children:""}),a.jsx("th",{className:"p-3 w-24",children:""}),a.jsx("th",{className:"p-3 w-28 text-right",children:""})]})}),a.jsx(dh,{droppableId:"desktop-rows",isDropDisabled:!A,children:q=>a.jsxs("tbody",{...q.droppableProps,ref:q.innerRef,className:"divide-y divide-[var(--border-primary)]",children:[d.map((z,ee)=>a.jsx(nh,{draggableId:String(z.id),index:ee,isDragDisabled:!A,children:(he,Le)=>a.jsxs("tr",{ref:he.innerRef,...he.draggableProps,className:`hover:bg-[var(--bg-hover)] transition-colors ${Le.isDragging?"bg-[var(--bg-tertiary)] shadow-xl z-50":""}`,children:[a.jsx("td",{className:"p-3",children:A&&a.jsx("div",{...he.dragHandleProps,className:"text-[var(--text-tertiary)] cursor-grab active:cursor-grabbing",children:a.jsx(vp,{size:16})})}),a.jsx("td",{className:"p-3 font-medium text-[var(--text-primary)]",children:z.name}),a.jsxs("td",{className:"p-3 text-[var(--text-secondary)] font-mono tracking-wider",children:[a.jsx("span",{className:"text-blue-500",children:z.stock}),a.jsx("span",{className:"text-[var(--text-tertiary)] mx-1",children:"/"}),a.jsx("span",{className:"text-orange-500",children:z.originalStock||0})]}),a.jsx("td",{className:"p-3",children:a.jsx("input",{id:`input-${ee}-picked`,type:"text",className:"input-field text-center p-1",value:z.picked||"",onChange:ue=>P(z.id,"picked",ue.target.value),onBlur:ue=>O(z.id,"picked",ue.target.value),onKeyDown:ue=>me(ue,ee,"picked"),disabled:A})}),a.jsx("td",{className:"p-3",children:a.jsx("input",{id:`input-${ee}-original`,type:"text",className:"input-field text-center p-1",value:z.original||"",onChange:ue=>P(z.id,"original",ue.target.value),onBlur:ue=>O(z.id,"original",ue.target.value),onKeyDown:ue=>me(ue,ee,"original"),disabled:A})}),a.jsx("td",{className:"p-3",children:a.jsx("input",{id:`input-${ee}-returns`,type:"text",className:"input-field text-center p-1 text-red-600",value:z.returns||"",onChange:ue=>P(z.id,"returns",ue.target.value),onBlur:ue=>O(z.id,"returns",ue.target.value),onKeyDown:ue=>me(ue,ee,"returns"),disabled:A})}),a.jsx("td",{className:"p-3 text-center font-bold text-blue-500",children:z.sold}),a.jsx("td",{className:"p-3",children:a.jsx("input",{id:`input-${ee}-price`,type:"text",className:"input-field text-center p-1 w-20",value:z.price,onChange:ue=>P(z.id,"price",ue.target.value),onBlur:ue=>O(z.id,"price",ue.target.value),onKeyDown:ue=>me(ue,ee,"price"),disabled:A})}),a.jsxs("td",{className:"p-3 text-right font-mono text-rose-600",children:["$",z.subtotal?.toLocaleString()]})]})},`${z.id}-${ee}`)),q.placeholder]})})]})]})}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-primary)] flex justify-between items-center bg-[var(--bg-secondary)] p-4 rounded-lg",children:[a.jsx("span",{className:"text-[var(--text-secondary)]",children:" ()"}),a.jsxs("span",{className:"text-2xl font-bold text-rose-600",children:["$",xe.toLocaleString()]})]})]}),a.jsxs("div",{className:"flex flex-col h-auto xl:h-[calc(100vh-10rem)] gap-6",children:[a.jsxs("div",{className:`flex-1 xl:overflow-y-auto pr-0 xl:pr-2 space-y-6 transition-opacity ${it?"opacity-50 pointer-events-none grayscale":""}`,children:[a.jsxs("div",{className:"glass-panel p-6 relative",children:[it&&a.jsx("div",{className:"absolute inset-0 z-50 cursor-not-allowed"}),a.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2 text-[var(--text-primary)]",children:[a.jsx(cv,{size:20,className:"text-amber-500"})," "]}),a.jsxs("div",{className:"space-y-3",children:[[1e3,500,100,50,10,5,1].map((q,z,ee)=>{const he=`input-cash-${q}`,Le=z<ee.length-1?`input-cash-${ee[z+1]}`:"input-reserve",ue=z>0?`input-cash-${ee[z-1]}`:null;return a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"w-12 text-[var(--text-secondary)] font-mono text-right",children:q}),a.jsx("span",{className:"text-[var(--text-tertiary)]",children:"x"}),a.jsx("input",{id:he,type:"text",inputMode:"decimal",className:"input-field flex-1",placeholder:"0",value:f[q]||"",onChange:Xe=>F(q,Xe.target.value),onBlur:Xe=>ne(q,Xe.target.value),onFocus:()=>D({id:he,type:"cash",denom:q}),onKeyDown:Xe=>Ae(Xe,{next:Le,prev:ue,right:Le,left:ue}),disabled:it}),a.jsxs("span",{className:"w-20 text-right font-mono text-[var(--text-secondary)]",children:["$",(q*Lt(f[q])).toLocaleString()]})]},q)}),a.jsxs("div",{className:"border-t border-[var(--border-primary)] my-2 pt-2 flex items-center gap-4 text-red-500",children:[a.jsx("span",{className:"w-12 text-right",children:""}),a.jsx("span",{className:"text-[var(--text-tertiary)]",children:"-"}),a.jsx("input",{id:"input-reserve",type:"text",inputMode:"decimal",className:"input-field flex-1 border-red-900/50 focus:ring-red-500",value:y,onChange:q=>M(q.target.value),onBlur:q=>K(q.target.value),onFocus:()=>D({id:"input-reserve",type:"reserve"}),onKeyDown:q=>Ae(q,{next:"input-expense-stall",prev:"input-cash-1",right:"input-expense-stall",left:"input-cash-1"}),disabled:it})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-3 rounded flex justify-between items-center border border-[var(--border-primary)]",children:[a.jsx("span",{className:"text-[var(--text-secondary)]",children:""}),a.jsxs("span",{className:"text-xl font-bold text-amber-500",children:["$",(it?0:Ge).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"glass-panel p-6 relative",children:[it&&a.jsx("div",{className:"absolute inset-0 z-50 cursor-not-allowed"}),a.jsx("h2",{className:"text-lg font-bold mb-4 text-rose-500",children:""}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:["stall:","cleaning:","electricity:","gas:","parking:","goods:","bags:","others:"].map((q,z,ee)=>{const[he,Le]=q.split(":"),ue=`input-expense-${he}`,Ue=`input-expense-${z<ee.length-1?ee[z+1].split(":")[0]:"linePay"}`,xt=z>0?`input-expense-${ee[z-1].split(":")[0]}`:"input-reserve",St=z>=2?ee[z-2].split(":")[0]:null,Da=z<ee.length-2?ee[z+2].split(":")[0]:"linePay";return a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1",children:Le}),a.jsx("input",{id:ue,type:"text",inputMode:"decimal",className:"input-field text-sm",value:h[he]||"",onChange:yt=>ae(he,yt.target.value),onBlur:yt=>se(he,yt.target.value),onFocus:()=>D({id:ue,type:"expense",key:he}),onKeyDown:yt=>Ae(yt,{next:Ue,prev:xt,right:Ue,left:xt,up:St?`input-expense-${St}`:"input-reserve",down:Da.startsWith("input-")?Da:`input-expense-${Da}`}),disabled:it})]},he)})}),a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1",children:"Line Pay ()"}),a.jsx("input",{id:"input-expense-linePay",type:"text",inputMode:"decimal",className:"input-field border-green-200 text-green-600",value:h.linePay||"",onChange:q=>ae("linePay",q.target.value),onBlur:q=>se("linePay",q.target.value),onFocus:()=>D({id:"input-expense-linePay",type:"expense",key:"linePay"}),onKeyDown:q=>Ae(q,{next:"input-expense-serviceFee",prev:"input-expense-others",right:"input-expense-serviceFee",left:"input-expense-others",up:"input-expense-bags"}),disabled:it})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1",children:" ()"}),a.jsx("input",{id:"input-expense-serviceFee",type:"text",inputMode:"decimal",className:"input-field border-red-200 text-red-600",value:h.serviceFee||"",onChange:q=>ae("serviceFee",q.target.value),onBlur:q=>se("serviceFee",q.target.value),onFocus:()=>D({id:"input-expense-serviceFee",type:"expense",key:"serviceFee"}),disabled:it,onKeyDown:q=>Ae(q,{next:"btn-save-data",prev:"input-expense-linePay",right:"btn-save-data",left:"input-expense-linePay",up:"input-expense-others"})})]})]})]})]}),a.jsxs("div",{className:"p-6 glass-panel shadow-lg border-t-4 border-t-blue-600 opacity-100 pointer-events-auto",children:[a.jsx("div",{className:"text-sm text-[var(--text-secondary)] mb-1 font-bold",children:" ()"}),a.jsxs("div",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-700 to-indigo-700",children:["$",(it?xe:G).toLocaleString()]}),a.jsxs("button",{id:"btn-save-data",onClick:ut,className:"btn-primary w-full mt-6 flex justify-center items-center gap-2 py-4 text-lg",children:[a.jsx(Js,{size:20})," "]})]})]})]}),a.jsxs("div",{className:"mt-8 mb-20 px-1",children:[a.jsxs("button",{onClick:()=>de(!re),className:"w-full glass-panel p-4 flex justify-between items-center hover:bg-[var(--bg-secondary)] transition-all",children:[a.jsxs("div",{className:"flex items-center gap-2 font-bold text-lg text-[var(--text-primary)]",children:[a.jsx(Ov,{size:20,className:"text-blue-500"}),"  ()",a.jsx("span",{className:"bg-blue-100 text-blue-600 text-xs px-2 py-0.5 rounded-full",children:U.length})]}),re?a.jsx(Zs,{size:20}):a.jsx(Ra,{size:20})]}),re&&a.jsx("div",{className:"mt-2 space-y-3 animate-in fade-in slide-in-from-top-2 duration-300",children:U.length===0?a.jsx("div",{className:"text-center py-10 text-[var(--text-tertiary)] italic glass-panel",children:""}):U.map(q=>a.jsxs("div",{className:"glass-panel p-4 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsxs("div",{className:"text-xs text-[var(--text-tertiary)] flex items-center gap-1",children:[a.jsx(Wl,{size:12})," ",new Date(q.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),a.jsx("div",{className:"font-bold text-[var(--text-primary)]",children:q.customer}),q.status==="CORRECTED"&&a.jsx("span",{className:"text-[10px] bg-amber-100 text-amber-600 px-1.5 py-0.5 rounded border border-amber-200",children:""})]}),a.jsx("div",{className:"text-sm text-[var(--text-secondary)] truncate max-w-md",children:q.details.map(z=>`${z.productName}x${z.oldSold}`).join(", ")})]}),a.jsxs("div",{className:"flex items-center gap-6 w-full md:w-auto border-t md:border-t-0 pt-3 md:pt-0",children:[a.jsxs("div",{className:"text-xl font-bold text-rose-600 font-mono",children:["$",q.totalAmount.toLocaleString()]}),a.jsxs("button",{onClick:()=>Se(q),className:"flex items-center gap-1 px-4 py-2 bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 transition-all font-bold text-sm",children:[a.jsx(Fl,{size:16})," "]})]})]},q.saleId))})]}),pe&&a.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-4 border-b border-[var(--border-primary)] flex justify-between items-center bg-[var(--bg-secondary)]",children:[a.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[a.jsx(Fl,{size:20,className:"text-indigo-600"})," "]}),a.jsx("button",{onClick:()=>W(null),className:"p-2 hover:bg-gray-200 rounded-full transition-all",children:a.jsx(Ra,{size:24})})]}),a.jsxs("div",{className:"p-4 overflow-y-auto space-y-6",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-3 rounded-lg flex items-center gap-3",children:[a.jsx(Ma,{size:18,className:"text-blue-500"}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs text-blue-600 font-bold",children:["",pe.sale.customer]}),a.jsxs("div",{className:"text-xs text-blue-400",children:["",new Date(pe.sale.date).toLocaleString()]})]})]}),a.jsx("div",{className:"space-y-4",children:Object.values(pe.adjustments).map(q=>a.jsxs("div",{className:"border border-[var(--border-primary)] rounded-xl p-3 bg-[var(--bg-secondary)]",children:[a.jsx("div",{className:"font-bold mb-3 pb-2 border-b border-[var(--border-primary)] text-sm",children:q.productName}),a.jsx("div",{className:"grid grid-cols-4 gap-4",children:[{label:"",field:"newPicked",old:"oldPicked"},{label:"",field:"newOriginal",old:"oldOriginal"},{label:"",field:"newReturns",old:"oldReturns"},{label:"",field:"newPrice",old:"oldUnitPrice"}].map(z=>a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] block mb-1",children:z.label}),a.jsx("input",{type:"text",className:"w-full bg-white border border-[var(--border-primary)] rounded p-2 text-center font-bold text-sm",value:q[z.field],onChange:ee=>_e(q.productId,z.field,ee.target.value)}),a.jsxs("div",{className:"text-[9px] text-gray-400 text-center mt-1",children:[": ",q[z.old]]})]},z.field))})]},q.productId))}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-bold text-rose-500 flex items-center gap-1",children:" ()*"}),a.jsx("textarea",{className:"w-full bg-white border border-rose-200 rounded-lg p-3 text-sm focus:ring-2 focus:ring-rose-500 outline-none",placeholder:"...",rows:"2",value:pe.reason,onChange:q=>W({...pe,reason:q.target.value})})]})]}),a.jsxs("div",{className:"p-4 border-t border-[var(--border-primary)] bg-[var(--bg-secondary)] flex gap-3",children:[a.jsx("button",{onClick:()=>W(null),className:"flex-1 py-3 font-bold text-[var(--text-secondary)] rounded-xl border border-[var(--border-primary)] active:scale-95 transition-all",children:""}),a.jsx("button",{onClick:Te,disabled:fe,className:"flex-[2] py-3 bg-indigo-600 text-white font-bold rounded-xl shadow-lg shadow-indigo-200 active:scale-95 transition-all flex justify-center items-center gap-2",children:fe?a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsx(a.Fragment,{children:""})})]})]})})]})}function RS({user:n,apiUrl:r,logActivity:i}){const[d,u]=E.useState([]),[f,x]=E.useState(!0),[y,p]=E.useState(""),[h,N]=E.useState(!1),[g,b]=E.useState(null),[j,k]=E.useState("SCRAP"),[R,v]=E.useState(""),[w,C]=E.useState(""),[A,B]=E.useState({}),[T,D]=E.useState({}),[U,V]=E.useState({}),[re,de]=E.useState(!1),pe=E.useCallback(async()=>{x(!0);try{const J=await Ee(r,"getInventory",{},n.token);if(console.log("Inventory API Response:",J),Array.isArray(J)){const ie=J.filter(Ae=>{const xe=Number(Ae.quantity);return!isNaN(xe)&&xe>0});console.log("Filtered Inventory:",ie);const me=Wi(ie,"productName");console.log("Sorted Inventory:",me),u(me)}else console.error("Inventory data is not an array:",J),u([])}catch(J){console.error("Failed to fetch inventory:",J),alert(": "+J.message),u([])}finally{x(!1)}},[r,n.token]);E.useEffect(()=>{(async()=>{if(n?.token){await pe();const ie=localStorage.getItem("safetyStocks");ie&&B(JSON.parse(ie));const me=localStorage.getItem("customCaseSizes");me&&V(JSON.parse(me))}})()},[n.token,pe]);const W=J=>{if(!J)return"-";const ie=new Date(J);return isNaN(ie.getTime())?String(J):ie.toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"})},fe=J=>{b(J),v(""),C(""),N(!0)},ge=async()=>{if(!R||Number(R)<=0){alert("");return}if(!w.trim()){alert("");return}de(!0);try{await Ee(r,"adjustInventory",{batchId:g.batchId,type:j,quantity:Number(R),note:w},n.token),i&&i({actionType:"DATA_EDIT",page:"",details:JSON.stringify({type:"ADJUSTMENT",product:g.productName,adjustType:j,quantity:Number(R),note:w})}),alert(""),N(!1),pe()}catch(J){alert(": "+J.message)}finally{de(!1)}},oe=(J,ie)=>{const me={...A,[J]:Number(ie)||0};B(me),localStorage.setItem("safetyStocks",JSON.stringify(me))},H=(J,ie)=>{D({...T,[J]:ie})},P=J=>{const ie=T[J];ie!==void 0&&oe(J,ie)},O=(J,ie)=>{const me={...U,[J]:Number(ie)||0};V(me),localStorage.setItem("customCaseSizes",JSON.stringify(me))},F=J=>{const ie=document.getElementById(J);ie&&(ie.focus(),ie.select?.(),ie.scrollIntoView({block:"nearest",behavior:"smooth"}))},ne=(J,ie,me,Ae,xe=!1)=>{const Be=Ae[ie],Ge=xe?"m-":"";if(J.key==="Enter"||J.key==="ArrowRight"){if(J.preventDefault(),me==="case")F(`${Ge}safety-input-${Be.productName}-${Be.batchId}`);else if(ie<Ae.length-1){const ze=Ae[ie+1];F(`${Ge}case-input-${ze.productName}-${ze.batchId}`)}}else if(J.key==="ArrowLeft"){if(J.preventDefault(),me==="safety")F(`${Ge}case-input-${Be.productName}-${Be.batchId}`);else if(ie>0){const ze=Ae[ie-1];F(`${Ge}safety-input-${ze.productName}-${ze.batchId}`)}}else if(J.key==="ArrowDown"){if(J.preventDefault(),ie<Ae.length-1){const ze=Ae[ie+1];F(`${Ge}${me}-input-${ze.productName}-${ze.batchId}`)}}else if(J.key==="ArrowUp"&&(J.preventDefault(),ie>0)){const ze=Ae[ie-1];F(`${Ge}${me}-input-${ze.productName}-${ze.batchId}`)}},M=d.filter(J=>{const ie=String(J.productName||"").toLowerCase(),me=y.toLowerCase();return ie.includes(me)?!0:me.length>6?String(J.batchId||"").toLowerCase().includes(me):!1}),K=M.filter(J=>J.type==="STOCK"),ae=M.filter(J=>J.type!=="STOCK"),se={};d.forEach(J=>{se[J.productName]||(se[J.productName]=0),se[J.productName]+=Number(J.quantity)});const Ne=(J,ie,me,Ae)=>a.jsxs("div",{className:"hidden md:flex bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] p-6 flex-col shadow-sm",children:[a.jsxs("h3",{className:`text-lg font-bold mb-4 flex items-center gap-2 ${Ae}`,children:[a.jsx(me,{size:20})," ",ie]}),a.jsx("div",{className:"rounded-lg border border-[var(--border-primary)] overflow-hidden",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-sm uppercase",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-center",children:" / "}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:f?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-6 text-center text-[var(--text-secondary)]",children:"..."})}):J.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-6 text-center text-[var(--text-secondary)]",children:""})}):J.map((xe,Be)=>{const Ge=A[xe.productName]||0,ze=U[xe.productName],it=ze!==void 0&&ze!==0?ze:ki[xe.productName]||0,G=se[xe.productName]||0,Se=Ge>0&&G<=Ge,_e=xe.expiry?new Date(xe.expiry):null,Te=new Date;Te.setHours(0,0,0,0);const ut=new Date(Te);ut.setDate(Te.getDate()+3);const Pe=_e&&_e>=Te&&_e<=ut,q=_e&&_e<Te;return a.jsxs("tr",{className:`hover:bg-[var(--bg-hover)] transition-colors ${Se?"bg-red-50/10":""} ${q?"bg-rose-50/10":Pe?"bg-amber-50/10":""}`,children:[a.jsx("td",{className:"p-4 font-medium text-[var(--text-primary)]",children:a.jsxs("div",{className:"flex items-center gap-2",children:[Se&&a.jsx(Jl,{size:16,className:"text-red-400"}),xe.productName]})}),a.jsx("td",{className:"p-4 text-center",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"font-mono text-emerald-600 font-bold text-lg",children:xe.quantity}),it>0&&a.jsxs("span",{className:"text-blue-600 font-mono text-sm",children:["",(xe.quantity/it).toFixed(1)]})]})}),a.jsx("td",{className:"p-4 text-sm whitespace-nowrap",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:q?"text-rose-500 line-through":Pe?"text-amber-500 font-bold":"text-[var(--text-secondary)]",children:W(xe.expiry)}),Pe&&a.jsxs("span",{className:"text-[10px] bg-amber-100 text-amber-700 border border-amber-200 px-1.5 py-0.5 rounded self-start flex items-center gap-1 font-bold",children:[a.jsx(Wl,{size:10})," "]}),q&&a.jsxs("span",{className:"text-[10px] bg-rose-100 text-rose-700 border border-rose-200 px-1.5 py-0.5 rounded self-start flex items-center gap-1 font-bold",children:[a.jsx(Jl,{size:10})," "]})]})}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("input",{id:`case-input-${xe.productName}-${xe.batchId}`,type:"number",className:"input-field w-16 text-center text-xs p-1 border-blue-200/30",value:ze!==void 0?ze:ki[xe.productName]||"",onChange:z=>O(xe.productName,z.target.value),onKeyDown:z=>ne(z,Be,"case",J),placeholder:""})}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("input",{id:`safety-input-${xe.productName}-${xe.batchId}`,type:"number",className:"input-field w-16 text-center text-xs p-1 border-amber-200/30",value:T[xe.productName]!==void 0?T[xe.productName]:A[xe.productName]||"",onChange:z=>H(xe.productName,z.target.value),onBlur:()=>P(xe.productName),onKeyDown:z=>ne(z,Be,"safety",J),placeholder:""})}),a.jsx("td",{className:"p-4 text-center",children:a.jsxs("button",{onClick:()=>fe(xe),className:"btn-secondary text-xs px-3 py-1 flex items-center gap-1 mx-auto",children:[a.jsx(_i,{size:14})," "]})})]},Be)})})]})})]}),ye=(J,ie,me,Ae)=>a.jsxs("div",{className:"md:hidden flex flex-col gap-4",children:[a.jsxs("h3",{className:`text-lg font-bold flex items-center gap-2 ${Ae} px-1`,children:[a.jsx(me,{size:20})," ",ie]}),a.jsx("div",{className:"space-y-4",children:f?a.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)]",children:"..."}):J.length===0?a.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:""}):J.map((xe,Be)=>{const Ge=A[xe.productName]||0,ze=U[xe.productName],it=ze!==void 0&&ze!==0?ze:ki[xe.productName]||0,G=se[xe.productName]||0,Se=Ge>0&&G<=Ge,_e=xe.expiry?new Date(xe.expiry):null,Te=new Date;Te.setHours(0,0,0,0);const ut=new Date(Te);ut.setDate(Te.getDate()+3);const Pe=_e&&_e>=Te&&_e<=ut,q=_e&&_e<Te;return a.jsxs("div",{className:`bg-[var(--bg-secondary)] rounded-xl p-4 border shadow-sm ${Se?"border-red-500/30 bg-red-500/5":"border-[var(--border-primary)]"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-3 border-b border-[var(--border-primary)] pb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[Se&&a.jsx(Jl,{size:18,className:"text-red-500"}),a.jsx("span",{className:"font-bold text-[var(--text-primary)] text-lg",children:xe.productName})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-2xl font-bold text-emerald-600 font-mono",children:xe.quantity}),it>0&&a.jsxs("div",{className:"text-xs text-blue-600 font-mono",children:["",(xe.quantity/it).toFixed(1)]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-2 rounded-lg",children:[a.jsx("span",{className:"text-[10px] text-[var(--text-tertiary)] uppercase font-bold block mb-1",children:""}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:`text-sm font-medium ${q?"text-rose-600 line-through":Pe?"text-amber-600 font-bold":"text-slate-600"}`,children:W(xe.expiry)}),Pe&&a.jsxs("span",{className:"text-[10px] text-amber-600 flex items-center gap-1 mt-0.5",children:[a.jsx(Wl,{size:10})," "]}),q&&a.jsxs("span",{className:"text-[10px] text-rose-600 flex items-center gap-1 mt-0.5",children:[a.jsx(Jl,{size:10})," "]})]})]}),a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-2 rounded-lg flex flex-col justify-between",children:[a.jsxs("div",{className:"flex items-center justify-between gap-1 mb-1",children:[a.jsx("span",{className:"text-[10px] text-[var(--text-tertiary)] uppercase font-bold",children:""}),a.jsx("input",{id:`m-case-input-${xe.productName}-${xe.batchId}`,type:"number",className:"w-12 text-center text-xs p-0.5 rounded border border-[var(--border-primary)] bg-[var(--bg-primary)] text-[var(--text-primary)]",value:ze!==void 0?ze:ki[xe.productName]||"",onChange:z=>O(xe.productName,z.target.value),onKeyDown:z=>ne(z,Be,"case",J,!0)})]}),a.jsxs("div",{className:"flex items-center justify-between gap-1",children:[a.jsx("span",{className:"text-[10px] text-[var(--text-tertiary)] uppercase font-bold",children:""}),a.jsx("input",{id:`m-safety-input-${xe.productName}-${xe.batchId}`,type:"number",className:"w-12 text-center text-xs p-0.5 rounded border border-[var(--border-primary)] bg-[var(--bg-primary)] text-[var(--text-primary)]",value:T[xe.productName]!==void 0?T[xe.productName]:A[xe.productName]||"",onChange:z=>H(xe.productName,z.target.value),onBlur:()=>P(xe.productName),onKeyDown:z=>ne(z,Be,"safety",J,!0)})]})]})]}),a.jsxs("button",{onClick:()=>fe(xe),className:"w-full btn-secondary py-2 flex items-center justify-center gap-2 text-sm",children:[a.jsx(_i,{size:16})," "]})]},Be)})})]});return a.jsxs("div",{className:"max-w-6xl mx-auto h-[calc(100vh-6rem)] flex flex-col p-4 gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-stretch md:items-center bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] shadow-sm gap-4",children:[a.jsxs("h2",{className:"text-xl md:text-2xl font-bold flex items-center gap-2 text-[var(--text-primary)]",children:[a.jsx(qn,{className:"text-blue-600"})," "]}),a.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[a.jsxs("div",{className:"relative flex-1 md:flex-none",children:[a.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full md:w-64",value:y,onChange:J=>p(J.target.value)})]}),a.jsx("button",{onClick:pe,className:"btn-secondary p-2 whitespace-nowrap",title:"",children:a.jsx(ft,{size:20})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto flex flex-col gap-6 pb-6",children:[Ne(K,"",qn,"text-blue-600"),ye(K,"",qn,"text-blue-600"),Ne(ae,"/",Ri,"text-orange-600"),ye(ae,"/",Ri,"text-orange-600")]}),h&&a.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:[re&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-lg font-bold text-slate-800",children:"..."})]}),a.jsxs("div",{className:"glass-panel p-6 w-96 max-w-[90vw]",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:""}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-[var(--text-secondary)] block mb-1",children:""}),a.jsxs("div",{className:"flex justify-between items-center p-2 bg-[var(--bg-tertiary)] rounded-lg border border-[var(--border-primary)]",children:[a.jsx("div",{className:"text-[var(--text-primary)] font-bold",children:g?.productName}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-400",children:":"}),a.jsx("span",{className:"text-emerald-600 font-mono font-bold text-lg",children:g?.quantity})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-slate-400 block mb-1",children:""}),a.jsxs("select",{className:"input-field w-full",value:j,onChange:J=>k(J.target.value),children:[a.jsx("option",{value:"SCRAP",children:""}),a.jsx("option",{value:"RETURN",children:""}),a.jsx("option",{value:"LOSS",children:""}),a.jsx("option",{value:"OTHER",children:""})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-slate-400 block mb-1",children:""}),a.jsx("input",{id:"adjustment-qty-input",type:"number",className:"input-field w-full",value:R,onChange:J=>v(J.target.value),onKeyDown:J=>{(J.key==="Enter"||J.key==="ArrowDown")&&(J.preventDefault(),document.getElementById("adjustment-note-input")?.focus())},placeholder:"",autoFocus:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-sm text-slate-400 block mb-1",children:[" ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("textarea",{id:"adjustment-note-input",className:"input-field w-full",rows:"3",value:w,onChange:J=>C(J.target.value),onKeyDown:J=>{J.key==="Enter"?(J.preventDefault(),ge()):J.key==="ArrowUp"&&(J.preventDefault(),document.getElementById("adjustment-qty-input")?.focus())},placeholder:"..."})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:ge,className:"btn-primary flex-1",children:""}),a.jsx("button",{onClick:()=>N(!1),className:"btn-secondary flex-1",children:""})]})]})]})]})]})}function _S({user:n,apiUrl:r,logActivity:i}){const d=new Date().getFullYear().toString(),[u,f]=E.useState([{id:Date.now(),vendor:"",productName:"",quantity:"",unitPrice:"",expiryYear:d,expiryMonth:"",expiryDay:"",paymentMethod:"CASH"}]),[x,y]=E.useState({vendors:[],vendorProductMap:{}}),[p,h]=E.useState(!1);E.useEffect(()=>{const C=async()=>{try{const A=await Ee(r,"getPurchaseSuggestions",{},n.token);A.vendors&&y(A)}catch(A){console.error("Failed to fetch suggestions",A)}};n?.token&&C()},[n.token,r]),E.useEffect(()=>{f(C=>C.map(A=>{const B=x.vendorDefaults?.[A.vendor];return B&&A.paymentMethod!==B?{...A,paymentMethod:B}:A}))},[x.vendorDefaults,u.map(C=>C.vendor).join(",")]);const N=async C=>{if(C.vendor)try{await Ee(r,"saveVendorDefault",{vendor:C.vendor,method:C.paymentMethod},n.token),alert(`${C.vendor}${C.paymentMethod==="CASH"?"":""}`),y(A=>({...A,vendorDefaults:{...A.vendorDefaults,[C.vendor]:C.paymentMethod}}))}catch(A){alert(": "+A.message)}},g=C=>{if(C&&x.vendorProductMap[C])return x.vendorProductMap[C];const A=new Set;return Object.values(x.vendorProductMap||{}).forEach(B=>B.forEach(T=>A.add(T))),Array.from(A)},b=(C,A,B)=>{f(T=>T.map(D=>D.id===C?{...D,[A]:B}:D))},j=()=>{f(C=>[...C,{id:Date.now()+Math.random(),vendor:"",productName:"",quantity:"",unitPrice:"",expiryYear:d,expiryMonth:"",expiryDay:"",paymentMethod:"CASH"}])},k=C=>{u.length>1&&f(A=>A.filter(B=>B.id!==C))},R=C=>{const A=document.getElementById(C);A&&(A.focus(),A.select?.(),A.scrollIntoView({block:"nearest",behavior:"smooth"}))},v=(C,A,B)=>{const D=C.target.id.includes("-m-")?"item-m-":"item-",U=["vendor","product","qty","price","year","month","day"],V=U.indexOf(B);C.key==="Enter"||C.key==="ArrowRight"?(C.preventDefault(),V<U.length-1?R(`${D}${A}-${U[V+1]}`):A<u.length-1?R(`${D}${A+1}-vendor`):C.key==="Enter"&&(j(),setTimeout(()=>R(`${D}${A+1}-vendor`),50))):C.key==="ArrowLeft"?(C.preventDefault(),V>0?R(`${D}${A}-${U[V-1]}`):A>0&&R(`${D}${A-1}-day`)):C.key==="ArrowDown"?(C.preventDefault(),A<u.length-1&&R(`${D}${A+1}-${B}`)):C.key==="ArrowUp"&&(C.preventDefault(),A>0&&R(`${D}${A-1}-${B}`))},w=async C=>{C.preventDefault();for(let B=0;B<u.length;B++){const T=u[B];if(!T.vendor.trim()||!T.productName.trim()||!T.quantity||!T.unitPrice||!T.expiryYear||!T.expiryMonth||!T.expiryDay){alert(` ${B+1} 
`);return}}h(!0);const A=u.map(B=>{const T=B.expiryMonth.padStart(2,"0"),D=B.expiryDay.padStart(2,"0");return{vendor:B.vendor,productName:B.productName,quantity:Number(B.quantity),price:Number(B.unitPrice),expiry:`${B.expiryYear}-${T}-${D}`,paymentMethod:B.paymentMethod}});try{const B=await Ee(r,"addPurchase",{items:A,operator:n.username},n.token);if(i){const T=Array.from(new Set(A.map(D=>D.paymentMethod)));i({actionType:"DATA_EDIT",page:"",details:JSON.stringify({vendorCount:new Set(A.map(D=>D.vendor)).size,productCount:A.length,totalPrice:A.reduce((D,U)=>D+U.quantity*U.price,0),paymentMethods:T.join(", ")})})}alert(` ${B.count} `),f([{id:Date.now(),vendor:"",productName:"",quantity:"",unitPrice:"",expiryYear:d,expiryMonth:"",expiryDay:"",paymentMethod:"CASH"}])}catch(B){alert(": "+B.message)}finally{h(!1)}};return a.jsxs("div",{className:"max-w-[90rem] mx-auto p-4",children:[p&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)]",children:"..."})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsx("h2",{className:"text-2xl font-bold flex items-center gap-2 text-[var(--text-primary)]",children:""})}),a.jsxs("form",{onSubmit:w,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-2",children:[a.jsx("h3",{className:"text-sm font-semibold text-[var(--text-secondary)] uppercase tracking-wider",children:""}),a.jsxs("span",{className:"text-xs text-[var(--text-tertiary)]",children:[" ",u.length," "]})]}),a.jsx("datalist",{id:"vendors-list",children:x.vendors.map((C,A)=>a.jsx("option",{value:C},A))}),u.map((C,A)=>{const B=g(C.vendor);return a.jsxs("div",{className:"group relative p-0 md:p-4 bg-transparent md:bg-[var(--bg-tertiary)] rounded-none md:rounded-xl border-b md:border border-[var(--border-primary)] hover:md:shadow-lg transition-all duration-200 mb-6 md:mb-0",children:[a.jsxs("div",{className:"md:absolute md:-left-2 md:top-1/2 md:-translate-y-1/2 mb-2 md:mb-0 flex items-center justify-between md:block",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-5 h-5 rounded-full bg-emerald-500/10 border border-emerald-500/30 flex items-center justify-center",children:a.jsxs("span",{className:"text-[10px] font-bold text-emerald-600",children:[" ",A+1]})}),a.jsx("span",{className:"md:hidden text-sm font-bold text-[var(--text-secondary)]",children:""})]}),C.vendor&&a.jsx("button",{type:"button",onClick:()=>N(C),className:"md:hidden text-[10px] px-2 py-1 rounded-md bg-slate-100 text-slate-500 border border-slate-200",children:" "})]}),a.jsxs("div",{className:"md:hidden space-y-3 pb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{id:`item-m-${A}-vendor`,list:"vendors-list",className:"input-field flex-1 py-1.5 px-3",placeholder:"",value:C.vendor,onChange:T=>b(C.id,"vendor",T.target.value),onKeyDown:T=>v(T,A,"vendor")})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{id:`item-m-${A}-product`,list:`products-list-${A}`,className:"input-field flex-1 py-1.5 px-3",placeholder:"",value:C.productName,onChange:T=>b(C.id,"productName",T.target.value),onKeyDown:T=>v(T,A,"product")}),a.jsx("datalist",{id:`products-list-${A}`,children:B.map((T,D)=>a.jsx("option",{value:T},D))})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{id:`item-m-${A}-qty`,type:"number",className:"input-field flex-1 py-1.5 px-3",placeholder:"0",value:C.quantity,onChange:T=>b(C.id,"quantity",T.target.value),onKeyDown:T=>v(T,A,"qty")})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{id:`item-m-${A}-price`,type:"number",className:"input-field flex-1 py-1.5 px-3",placeholder:"0",value:C.unitPrice,onChange:T=>b(C.id,"unitPrice",T.target.value),onKeyDown:T=>v(T,A,"price")})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsxs("div",{className:"flex bg-slate-100 p-0.5 rounded-lg border border-slate-200 flex-1",children:[a.jsx("button",{type:"button",onClick:()=>b(C.id,"paymentMethod","CASH"),className:`flex-1 py-1 text-[10px] font-bold rounded-md transition-all ${C.paymentMethod==="CASH"?"bg-emerald-500 text-white":"text-slate-400"}`,children:""}),a.jsx("button",{type:"button",onClick:()=>b(C.id,"paymentMethod","CREDIT"),className:`flex-1 py-1 text-[10px] font-bold rounded-md transition-all ${C.paymentMethod==="CREDIT"?"bg-purple-600 text-white":"text-slate-400"}`,children:""})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsxs("div",{className:"flex flex-1 gap-1 items-center",children:[a.jsx("input",{id:`item-m-${A}-year`,type:"number",className:"input-field flex-[2] py-1.5 px-1 text-center",placeholder:"YYYY",value:C.expiryYear,onChange:T=>b(C.id,"expiryYear",T.target.value),onKeyDown:T=>v(T,A,"year")}),a.jsx("span",{className:"text-slate-300",children:"/"}),a.jsx("input",{id:`item-m-${A}-month`,type:"number",className:"input-field flex-1 py-1.5 px-1 text-center",placeholder:"MM",value:C.expiryMonth,onChange:T=>b(C.id,"expiryMonth",T.target.value),onKeyDown:T=>v(T,A,"month")}),a.jsx("span",{className:"text-slate-300",children:"/"}),a.jsx("input",{id:`item-m-${A}-day`,type:"number",className:"input-field flex-1 py-1.5 px-1 text-center",placeholder:"DD",value:C.expiryDay,onChange:T=>b(C.id,"expiryDay",T.target.value),onKeyDown:T=>v(T,A,"day")}),u.length>1&&a.jsx("button",{type:"button",onClick:()=>k(C.id),className:"w-8 h-8 ml-1 rounded-lg bg-red-500/10 text-red-500 flex items-center justify-center border border-red-500/20",children:""})]})]})]}),a.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-12 gap-3 items-end",children:[a.jsxs("div",{className:"col-span-12 md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-[var(--text-secondary)] mb-1 uppercase",children:""}),a.jsx("input",{id:`item-${A}-vendor`,list:"vendors-list",className:"input-field w-full py-1.5 px-2 text-sm",placeholder:"",value:C.vendor,onChange:T=>b(C.id,"vendor",T.target.value),onKeyDown:T=>v(T,A,"vendor"),autoFocus:A===u.length-1})]}),a.jsxs("div",{className:"col-span-12 md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-[var(--text-secondary)] mb-1 uppercase",children:""}),a.jsx("input",{id:`item-${A}-product`,list:`products-list-${A}`,className:"input-field w-full py-1.5 px-2 text-sm",placeholder:"",value:C.productName,onChange:T=>b(C.id,"productName",T.target.value),onKeyDown:T=>v(T,A,"product")})]}),a.jsxs("div",{className:"col-span-6 md:col-span-1",children:[a.jsx("label",{className:"text-[10px] font-bold text-[var(--text-secondary)] mb-1 text-center block uppercase",children:""}),a.jsx("input",{id:`item-${A}-qty`,type:"number",className:"input-field w-full py-1.5 px-1 text-center text-sm",placeholder:"0",value:C.quantity,onChange:T=>b(C.id,"quantity",T.target.value),onKeyDown:T=>v(T,A,"qty")})]}),a.jsxs("div",{className:"col-span-6 md:col-span-1",children:[a.jsx("label",{className:"text-[10px] font-bold text-[var(--text-secondary)] mb-1 text-center block uppercase",children:""}),a.jsx("input",{id:`item-${A}-price`,type:"number",className:"input-field w-full py-1.5 px-1 text-center text-sm",placeholder:"0",value:C.unitPrice,onChange:T=>b(C.id,"unitPrice",T.target.value),onKeyDown:T=>v(T,A,"price")})]}),a.jsx("div",{className:"col-span-12 md:col-span-3 flex items-end gap-1",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-[10px] font-bold text-[var(--text-secondary)] mb-1 uppercase",children:""}),a.jsxs("div",{className:"grid grid-cols-[1.5fr_auto_1fr_auto_1fr] gap-1 items-center",children:[a.jsx("input",{id:`item-${A}-year`,className:"input-field py-1.5 px-0.5 text-center text-sm font-mono",placeholder:"YYYY",value:C.expiryYear,onChange:T=>b(C.id,"expiryYear",T.target.value),onKeyDown:T=>v(T,A,"year")}),a.jsx("span",{className:"text-[var(--text-tertiary)] text-[10px]",children:"/"}),a.jsx("input",{id:`item-${A}-month`,className:"input-field py-1.5 px-0.5 text-center text-sm font-mono",placeholder:"MM",value:C.expiryMonth,onChange:T=>b(C.id,"expiryMonth",T.target.value),onKeyDown:T=>v(T,A,"month")}),a.jsx("span",{className:"text-[var(--text-tertiary)] text-[10px]",children:"/"}),a.jsx("input",{id:`item-${A}-day`,className:"input-field py-1.5 px-0.5 text-center text-sm font-mono",placeholder:"DD",value:C.expiryDay,onChange:T=>b(C.id,"expiryDay",T.target.value),onKeyDown:T=>v(T,A,"day")})]})]})}),a.jsxs("div",{className:"col-span-12 md:col-span-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("label",{className:"text-[10px] font-bold text-[var(--text-secondary)] uppercase",children:""}),C.vendor&&a.jsx("button",{type:"button",onClick:()=>N(C),className:"text-[9px] text-emerald-600 hover:text-emerald-700 font-bold transition-colors flex items-center gap-0.5",children:" "})]}),a.jsxs("div",{className:"flex bg-[var(--bg-primary)] p-0.5 rounded-lg border border-[var(--border-primary)] shadow-sm h-8",children:[a.jsx("button",{type:"button",onClick:()=>b(C.id,"paymentMethod","CASH"),className:`flex-1 py-0.5 text-[10px] font-bold rounded-md transition-all ${C.paymentMethod==="CASH"?"bg-emerald-500 text-white":"text-[var(--text-tertiary)] hover:bg-slate-50"}`,children:""}),a.jsx("button",{type:"button",onClick:()=>b(C.id,"paymentMethod","CREDIT"),className:`flex-1 py-0.5 text-[10px] font-bold rounded-md transition-all ${C.paymentMethod==="CREDIT"?"bg-purple-600 text-white":"text-[var(--text-tertiary)] hover:bg-slate-50"}`,children:""})]})]}),a.jsx("div",{className:"col-span-12 md:col-span-1 flex items-end justify-center",children:u.length>1&&a.jsx("button",{type:"button",onClick:()=>k(C.id),className:"w-8 h-8 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-all flex items-center justify-center mb-[2px]",title:"",children:""})})]})]},C.id)})]}),a.jsxs("div",{className:"flex gap-4 mt-8 pt-6 border-t border-[var(--border-primary)]",children:[a.jsxs("button",{type:"button",onClick:j,className:"btn-secondary flex-1 py-4 text-base font-semibold flex items-center justify-center gap-2 hover:scale-105 transition-transform",children:[a.jsx("span",{className:"text-xl",children:""})," "]}),a.jsx("button",{type:"submit",disabled:p,className:"btn-primary flex-[2] py-4 text-lg font-bold shadow-lg shadow-emerald-100 hover:shadow-xl hover:shadow-emerald-200 hover:scale-105 transition-all flex items-center justify-center gap-2",children:p?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-spin",children:""})," ..."]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-xl",children:""})," "]})})]})]})]})]})}const Hn=n=>n.toFixed(1).replace(/\.0$/,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),Ys=n=>{const i=Hn(n).length;return i<=6?"text-xs md:text-xl":i<=9?"text-[10px] md:text-lg":"text-[8px] md:text-base"};function zS({user:n,apiUrl:r}){const[i,d]=E.useState(nt()),[u,f]=E.useState(nt()),[x,y]=E.useState(""),[p,h]=E.useState(""),[N,g]=E.useState(!1),[b,j]=E.useState([]),[k,R]=E.useState([]),[v,w]=E.useState("SALES"),[C,A]=E.useState(null),[B,T]=E.useState(!1),D=E.useCallback(async()=>{if(!(!i||!u)){g(!0);try{const O={startDate:i,endDate:u},F=n.role==="BOSS"||n.permissions&&n.permissions.includes("finance"),ne=[Ee(r,"getSalesHistory",O,n.token)];F&&ne.push(Ee(r,"getExpenditures",O,n.token));const M=await Promise.all(ne),K=M[0],ae=F?M[1]:[];let se=Array.isArray(K)?K:[];const Ne=x.trim().toLowerCase(),ye=p.trim().toLowerCase();Ne&&(se=se.filter(ie=>String(ie.location||"").toLowerCase().includes(Ne))),ye&&(se=se.filter(ie=>String(ie.salesRep||"").toLowerCase().includes(ye))),j(se);let J=Array.isArray(ae)?ae:[];Ne&&(J=J.filter(ie=>String(ie.customer||"").toLowerCase().includes(Ne)||String(ie.note||"").toLowerCase().includes(Ne))),ye&&(J=J.filter(ie=>String(ie.salesRep||"").toLowerCase().includes(ye))),J.forEach(ie=>{const me=Number(ie.stall||0)+Number(ie.cleaning||0)+Number(ie.electricity||0)+Number(ie.gas||0)+Number(ie.parking||0)+Number(ie.goods||0)+Number(ie.bags||0)+Number(ie.others||0)+Number(ie.vehicleMaintenance||0)+Number(ie.salary||0)+Number(ie.linePay||0)+Number(ie.serviceFee||0)+Number(ie.reserve||0);ie.rowTotal=me,ie.salaryAmount=Number(ie.salary||0);const Ae=Object.keys(ie).find(Be=>{const Ge=Be.toLowerCase().trim();return Ge==="finaltotal"||Ge.includes("")||Ge.includes("")||Ge.includes("")||Ge.includes("")}),xe=Number(Ae?ie[Ae]:ie.finalTotal||0);ie.displayFinalTotal=xe}),R(J)}catch(O){console.error(O),alert(": "+O.message)}finally{g(!1)}}},[i,u,x,p,n.token,r]),U=O=>{const F={[O.productId]:{productId:O.productId,productName:O.productName,oldPicked:O.picked,oldOriginal:O.original,oldReturns:O.returns,oldSold:O.soldQty,oldUnitPrice:O.unitPrice,newPicked:O.picked,newOriginal:O.original,newReturns:O.returns,newPrice:O.unitPrice}};A({sale:O,adjustments:F,reason:""})},V=(O,F,ne)=>{A(M=>({...M,adjustments:{...M.adjustments,[O]:{...M.adjustments[O],[F]:ne}}}))},re=async()=>{if(!C.reason.trim()){alert("");return}const O={saleId:C.sale.saleId,reason:C.reason,adjustments:Object.values(C.adjustments).map(F=>({productId:F.productId,newPicked:Number(F.newPicked),newOriginal:Number(F.newOriginal),newReturns:Number(F.newReturns),newPrice:Number(F.newPrice),oldSold:F.oldSold,oldUnitPrice:F.oldUnitPrice}))};T(!0);try{const F=await Ee(r,"applySalesAdjustment",O,n.token);if(F.error)throw new Error(F.error);alert(""),A(null),D()}catch(F){alert(": "+F.message)}finally{T(!1)}};Je.useEffect(()=>{D()},[D]);const de=O=>{O.preventDefault(),D()},pe=b?.reduce((O,F)=>O+(Number(F.totalAmount)||0),0)||0,W=b?.reduce((O,F)=>O+(Number(F.soldQty)||0),0)||0,fe=k?.reduce((O,F)=>O+(F.rowTotal||0)-(F.salaryAmount||0),0)||0,ge=k?.reduce((O,F)=>O+(Number(F.displayFinalTotal)||0),0)||0,oe=pe-fe+ge,H=b?.reduce((O,F)=>{const ne=F.productName;return O[ne]||(O[ne]={name:F.productName,qty:0,amount:0}),O[ne].qty+=F.soldQty,O[ne].amount+=F.totalAmount,O},{}),P=H?Object.values(H).sort((O,F)=>F.qty-O.qty):[];return a.jsxs("div",{className:"max-w-[90rem] mx-auto p-4",children:[a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-6 border-b border-[var(--border-primary)] pb-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Qs,{className:"text-blue-600"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),b&&a.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2 md:gap-3 w-full md:w-auto",children:[a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-amber-500/10 border border-amber-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:`${Ys(oe)} font-bold text-amber-700 text-center whitespace-nowrap`,children:["$",Hn(oe)]})]}),a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-emerald-500/10 border border-emerald-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:`${Ys(pe)} font-bold text-emerald-700 text-center whitespace-nowrap`,children:["$",Hn(pe)]})]}),a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-rose-500/10 border border-rose-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:`${Ys(fe)} font-bold text-rose-700 text-center whitespace-nowrap`,children:["$",Hn(fe)]})]}),a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-cyan-500/10 border border-cyan-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:`${Ys(ge)} font-bold text-cyan-700 text-center whitespace-nowrap`,children:["$",Hn(ge)]})]}),a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-blue-500/10 border border-blue-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsx("p",{className:`${Ys(W)} font-bold text-blue-700 text-center whitespace-nowrap`,children:Hn(W)})]}),a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-purple-500/10 border border-purple-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsx("p",{className:"text-xs md:text-xl font-bold text-purple-700 text-center whitespace-nowrap",children:b.length})]})]})]}),a.jsxs("form",{onSubmit:de,className:"md:hidden mb-6 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{type:"date",required:!0,className:"input-field flex-1 py-1.5 px-3",value:i,onChange:O=>d(O.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{type:"date",required:!0,className:"input-field flex-1 py-1.5 px-3",value:u,onChange:O=>f(O.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field flex-1 py-1.5 px-3",value:x,onChange:O=>y(O.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsxs("div",{className:"flex flex-1 gap-2",children:[a.jsx("input",{type:"text",placeholder:"...",className:"input-field flex-1 py-1.5 px-3",value:p,onChange:O=>h(O.target.value)}),a.jsx("button",{type:"submit",disabled:N,className:"btn-primary px-4 py-1.5 flex items-center justify-center rounded-lg shadow-sm active:scale-95 transition-transform",children:a.jsx(Tt,{size:18})})]})]})]}),a.jsx("form",{onSubmit:de,className:"hidden md:block mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)] shadow-sm",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 md:contents",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase px-1",children:""}),a.jsx("input",{type:"date",required:!0,className:"input-field w-full",value:i,onChange:O=>d(O.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase px-1",children:""}),a.jsx("input",{type:"date",required:!0,className:"input-field w-full",value:u,onChange:O=>f(O.target.value)})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase px-1",children:""}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full",value:x,onChange:O=>y(O.target.value)})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"space-y-1 flex-1",children:[a.jsx("label",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase px-1",children:""}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full",value:p,onChange:O=>h(O.target.value)})]}),a.jsxs("button",{type:"submit",disabled:N,className:"btn-primary py-2 px-6 flex items-center justify-center gap-2 self-end h-[42px] min-w-[100px]",children:[N?"...":a.jsx(Tt,{size:18})," "]})]})]})}),b&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"rounded-xl border border-[var(--border-primary)] overflow-hidden",children:[a.jsx("div",{className:"px-4 py-3 bg-[var(--bg-tertiary)] border-b border-[var(--border-primary)]",children:a.jsxs("h3",{className:"font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(qn,{size:16,className:"text-blue-600"})," "]})}),a.jsx("div",{className:"overflow-x-auto max-h-60",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-secondary)]",children:P.length>0?P.map((O,F)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-4 text-[var(--text-primary)]",children:O.name}),a.jsx("td",{className:"p-4 text-right text-[var(--text-tertiary)]",children:O.qty}),a.jsxs("td",{className:"p-4 text-right text-emerald-600",children:["$",O.amount.toLocaleString()]})]},F)):a.jsx("tr",{children:a.jsx("td",{colSpan:"3",className:"p-8 text-center text-[var(--text-secondary)]",children:""})})})]})})]}),a.jsxs("div",{className:"rounded-xl border border-[var(--border-primary)] overflow-hidden flex flex-col h-[600px]",children:[a.jsxs("div",{className:"px-4 py-3 bg-[var(--bg-tertiary)] border-b border-[var(--border-primary)] flex gap-4",children:[a.jsxs("button",{onClick:()=>w("SALES"),className:`font-bold flex items-center gap-2 pb-2 border-b-2 transition-colors ${v==="SALES"?"text-blue-600 border-blue-600":"text-[var(--text-secondary)] border-transparent hover:text-[var(--text-primary)]"}`,children:[a.jsx(wl,{size:16}),"  (",b.length,")"]}),a.jsxs("button",{onClick:()=>w("EXPENSES"),className:`font-bold flex items-center gap-2 pb-2 border-b-2 transition-colors ${v==="EXPENSES"?"text-rose-600 border-rose-600":"text-[var(--text-secondary)] border-transparent hover:text-[var(--text-primary)]"}`,children:[a.jsx(Dt,{size:16}),"  (",k.length,")"]})]}),a.jsx("div",{className:"overflow-auto flex-1",children:v==="SALES"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:b.map((O,F)=>a.jsxs("div",{className:"p-4 space-y-3 bg-[var(--bg-secondary)] hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{className:"text-xs font-mono text-[var(--text-tertiary)]",children:new Date(O.date).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}),a.jsxs("div",{className:"text-emerald-600 font-bold font-mono text-lg",children:["$",O.totalAmount]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1 bg-blue-500/10 text-blue-700 px-2 py-0.5 rounded-md",children:[a.jsx(Np,{size:12})," ",a.jsx("span",{className:"font-medium",children:O.location})]}),a.jsxs("div",{className:"flex items-center gap-1 bg-[var(--bg-tertiary)] text-[var(--text-secondary)] px-2 py-0.5 rounded-md",children:[a.jsx(Ma,{size:12})," ",a.jsx("span",{children:O.salesRep})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-[var(--border-primary)]",children:[a.jsx("div",{className:"font-bold text-[var(--text-primary)]",children:O.productName}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-[var(--text-secondary)] text-sm",children:[": ",a.jsx("span",{className:"font-bold text-[var(--text-primary)]",children:O.soldQty})]}),a.jsxs("button",{onClick:()=>U(O),className:"flex items-center gap-1 px-2 py-1 bg-indigo-50 text-indigo-600 rounded border border-indigo-100 font-bold text-xs",children:[a.jsx(Fl,{size:14})," "]})]})]})]},F))}),a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 font-medium w-48",children:""}),a.jsx("th",{className:"p-3 font-medium w-32",children:""}),a.jsx("th",{className:"p-3 font-medium w-32",children:""}),a.jsx("th",{className:"p-3 font-medium",children:""}),a.jsx("th",{className:"p-3 font-medium text-right w-24",children:""}),a.jsx("th",{className:"p-3 font-medium text-right w-32",children:""}),a.jsx("th",{className:"p-3 font-medium text-center w-24",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] text-[var(--text-secondary)] bg-[var(--bg-secondary)]",children:b.map((O,F)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-3 text-[var(--text-tertiary)]",children:new Date(O.date).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}),a.jsx("td",{className:"p-3",children:O.location}),a.jsx("td",{className:"p-3",children:O.salesRep}),a.jsx("td",{className:"p-3 text-[var(--text-primary)]",children:O.productName}),a.jsx("td",{className:"p-3 text-right",children:O.soldQty}),a.jsxs("td",{className:"p-3 text-right",children:["$",O.totalAmount]}),a.jsx("td",{className:"p-3 text-center",children:a.jsxs("button",{onClick:()=>U(O),className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-50 text-indigo-600 rounded border border-indigo-100 font-bold text-xs hover:bg-indigo-100 transition-colors",children:[a.jsx(Fl,{size:14})," "]})})]},F))})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:k.map((O,F)=>{const ne=[];return O.stall&&ne.push(` $${O.stall}`),O.cleaning&&ne.push(` $${O.cleaning}`),O.electricity&&ne.push(` $${O.electricity}`),O.gas&&ne.push(` $${O.gas}`),O.parking&&ne.push(` $${O.parking}`),O.goods&&ne.push(` $${O.goods}`),O.bags&&ne.push(` $${O.bags}`),O.others&&ne.push(` $${O.others}`),O.linePay&&ne.push(`Line Pay $${O.linePay}`),O.serviceFee&&ne.push(` $${O.serviceFee}`),O.reserve&&ne.push(` $${O.reserve}`),O.vehicleMaintenance&&ne.push(` $${O.vehicleMaintenance}`),O.salary&&ne.push(` $${O.salary}`),a.jsxs("div",{className:"p-4 space-y-3 bg-[var(--bg-secondary)] hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{className:"text-xs font-mono text-[var(--text-tertiary)]",children:new Date(O.date).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsxs("div",{className:"text-emerald-600 font-bold font-mono text-lg",children:["$",Number(O.displayFinalTotal).toLocaleString()]}),a.jsxs("div",{className:"text-[10px] text-[var(--text-tertiary)] font-mono",children:[": $",Number(O.rowTotal).toLocaleString()]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1 bg-amber-500/10 text-amber-700 px-2 py-0.5 rounded-md",children:[a.jsx(Np,{size:12})," ",a.jsx("span",{className:"font-medium",children:O.customer||O.note||"-"})]}),a.jsxs("div",{className:"flex items-center gap-1 bg-[var(--bg-tertiary)] text-[var(--text-secondary)] px-2 py-0.5 rounded-md",children:[a.jsx(Ma,{size:12})," ",a.jsx("span",{children:O.salesRep})]})]}),a.jsxs("div",{className:"pt-2 border-t border-[var(--border-primary)]",children:[a.jsx("p",{className:"text-[10px] uppercase font-bold text-[var(--text-tertiary)] mb-1",children:""}),a.jsx("div",{className:"flex flex-wrap gap-1",children:ne.map((M,K)=>a.jsx("span",{className:"text-[10px] bg-[var(--bg-tertiary)] text-[var(--text-secondary)] px-1.5 py-0.5 rounded border border-[var(--border-primary)]",children:M},K))})]})]},F)})}),a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 font-medium w-48",children:""}),a.jsx("th",{className:"p-3 font-medium w-32",children:"/"}),a.jsx("th",{className:"p-3 font-medium w-32",children:""}),a.jsx("th",{className:"p-3 font-medium",children:""}),a.jsx("th",{className:"p-3 font-medium text-right w-28",children:""}),a.jsx("th",{className:"p-3 font-medium text-right w-28 text-emerald-600",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] text-[var(--text-secondary)] bg-[var(--bg-secondary)]",children:k.map((O,F)=>{const ne=[];return O.stall&&ne.push(` $${O.stall}`),O.cleaning&&ne.push(` $${O.cleaning}`),O.electricity&&ne.push(` $${O.electricity}`),O.gas&&ne.push(` $${O.gas}`),O.parking&&ne.push(` $${O.parking}`),O.goods&&ne.push(` $${O.goods}`),O.bags&&ne.push(` $${O.bags}`),O.others&&ne.push(` $${O.others}`),O.linePay&&ne.push(`Line Pay $${O.linePay}`),O.serviceFee&&ne.push(` $${O.serviceFee}`),O.reserve&&ne.push(` $${O.reserve}`),O.vehicleMaintenance&&ne.push(` $${O.vehicleMaintenance}`),O.salary&&ne.push(` $${O.salary}`),a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-3 text-[var(--text-tertiary)]",children:new Date(O.date).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}),a.jsx("td",{className:"p-3 font-bold text-[var(--text-primary)]",children:O.customer||O.note||"-"}),a.jsx("td",{className:"p-3",children:O.salesRep}),a.jsx("td",{className:"p-3 text-xs text-[var(--text-tertiary)]",children:ne.join(", ")}),a.jsxs("td",{className:"p-3 text-right font-mono text-rose-600",children:["$",(O.rowTotal||0).toLocaleString()]}),a.jsxs("td",{className:"p-3 text-right font-mono font-bold text-emerald-600",children:["$",(Number(O.displayFinalTotal)||0).toLocaleString()]})]},F)})})]})]})})]})]})]}),C&&a.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-4 border-b border-[var(--border-primary)] flex justify-between items-center bg-[var(--bg-secondary)]",children:[a.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[a.jsx(Fl,{size:20,className:"text-indigo-600"}),"  ()"]}),a.jsx("button",{onClick:()=>A(null),className:"p-2 hover:bg-gray-200 rounded-full transition-all",children:a.jsx(Ra,{size:24})})]}),a.jsxs("div",{className:"p-4 overflow-y-auto space-y-6",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-3 rounded-lg flex items-center gap-3",children:[a.jsx(Ma,{size:18,className:"text-blue-500"}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs text-blue-600 font-bold",children:["",C.sale.location]}),a.jsxs("div",{className:"text-xs text-blue-400",children:["",C.sale.salesRep," | ",new Date(C.sale.date).toLocaleString()]})]})]}),a.jsx("div",{className:"space-y-4",children:Object.values(C.adjustments).map(O=>a.jsxs("div",{className:"border border-[var(--border-primary)] rounded-xl p-4 bg-[var(--bg-secondary)]",children:[a.jsx("div",{className:"font-bold mb-4 pb-2 border-b border-[var(--border-primary)] text-base",children:O.productName}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[{label:"",field:"newPicked",old:"oldPicked"},{label:"",field:"newOriginal",old:"oldOriginal"},{label:"",field:"newReturns",old:"oldReturns"},{label:"",field:"newPrice",old:"oldUnitPrice"}].map(F=>a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1 font-bold",children:F.label}),a.jsx("input",{type:"text",className:"w-full bg-white border border-[var(--border-primary)] rounded-lg p-2 text-center font-bold text-lg shadow-sm focus:ring-2 focus:ring-indigo-500 outline-none",value:O[F.field],onChange:ne=>V(O.productId,F.field,ne.target.value)}),a.jsxs("div",{className:"text-[10px] text-gray-400 text-center mt-1",children:[": ",O[F.old]]})]},F.field))})]},O.productId))}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-bold text-rose-500 flex items-center gap-1",children:" ()*"}),a.jsx("textarea",{className:"w-full bg-white border border-rose-200 rounded-lg p-3 text-sm focus:ring-2 focus:ring-rose-500 outline-none",placeholder:"...",rows:"2",value:C.reason,onChange:O=>A({...C,reason:O.target.value})})]})]}),a.jsxs("div",{className:"p-4 border-t border-[var(--border-primary)] bg-[var(--bg-secondary)] flex gap-3",children:[a.jsx("button",{onClick:()=>A(null),className:"flex-1 py-3 font-bold text-[var(--text-secondary)] rounded-xl border border-[var(--border-primary)] active:scale-95 transition-all",children:""}),a.jsx("button",{onClick:re,disabled:B,className:"flex-[2] py-3 bg-indigo-600 text-white font-bold rounded-xl shadow-lg shadow-indigo-200 active:scale-95 transition-all flex justify-center items-center gap-2",children:B?a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsx(a.Fragment,{children:""})})]})]})})]})}function LS({user:n,apiUrl:r}){const[i,d]=E.useState([]),[u,f]=E.useState(!1),[x,y]=E.useState(""),[p,h]=E.useState(""),[N,g]=E.useState(nt()),[b,j]=E.useState(nt()),k=Je.useCallback(async()=>{f(!0);try{const w=await Ee(r,"getPurchaseHistory",{startDate:N,endDate:b},n.token);Array.isArray(w)&&d(w)}catch(w){console.error("Failed to fetch purchase history:",w)}finally{f(!1)}},[r,n.token,N,b]);E.useEffect(()=>{k()},[k]);const R=i.filter(w=>{const C=String(w.productName||"").toLowerCase(),A=String(w.vendorName||w.vendor||"").toLowerCase(),B=x.toLowerCase(),T=p.toLowerCase();return C.includes(B)&&A.includes(T)}),v=R.reduce((w,C)=>w+(Number(C.totalPrice)||0),0);return a.jsx("div",{className:"max-w-[90rem] mx-auto p-4",children:a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("div",{className:"flex flex-row justify-between items-center mb-6 gap-2 md:gap-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(_d,{className:"text-[var(--accent-blue)] w-6 h-6 md:w-auto md:h-auto"}),a.jsx("span",{className:"whitespace-nowrap",children:""})]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-xs md:text-sm mt-1 hidden md:block",children:""})]}),a.jsxs("div",{className:"px-3 md:px-5 py-2 md:py-3 rounded-xl border border-[var(--border-primary)] bg-[var(--bg-secondary)] flex items-center gap-2 md:gap-3",children:[a.jsx("div",{className:"p-1.5 md:p-2 rounded-full bg-[var(--bg-tertiary)] text-emerald-500",children:a.jsx(Dt,{size:16,className:"md:w-5 md:h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold whitespace-nowrap",children:""}),a.jsxs("p",{className:"text-base md:text-xl font-bold text-emerald-500",children:["$",v.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"md:hidden mb-6 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{type:"date",className:"input-field flex-1 py-1.5 px-3",value:N,onChange:w=>g(w.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{type:"date",className:"input-field flex-1 py-1.5 px-3",value:b,onChange:w=>j(w.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("div",{className:"relative flex-1",children:a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full py-1.5 px-3",value:p,onChange:w=>h(w.target.value)})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("div",{className:"relative flex-1",children:a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full py-1.5 px-3",value:x,onChange:w=>y(w.target.value)})})]}),a.jsxs("button",{onClick:k,disabled:u,className:"btn-secondary w-full py-2 flex items-center justify-center gap-2 mt-2",children:[u?a.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-slate-500 border-t-transparent rounded-full"}):a.jsx(ft,{size:18}),""]})]}),a.jsx("div",{className:"hidden md:block mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[a.jsxs("div",{className:"flex-1 space-y-1.5 w-full",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:x,onChange:w=>y(w.target.value)})]})]}),a.jsxs("div",{className:"flex-1 space-y-1.5 w-full",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:p,onChange:w=>h(w.target.value)})]})]}),a.jsxs("div",{className:"w-full md:w-40 space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full text-sm",value:N,onChange:w=>g(w.target.value)})]}),a.jsxs("div",{className:"w-full md:w-40 space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full text-sm",value:b,onChange:w=>j(w.target.value)})]}),a.jsxs("button",{onClick:k,disabled:u,className:"btn-secondary h-[42px] flex items-center gap-2 whitespace-nowrap px-6",children:[a.jsx(ft,{size:18,className:u?"animate-spin":""})," "]})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:u?a.jsx("div",{className:"text-center py-10 text-[var(--text-secondary)]",children:"..."}):R.length>0?R.map((w,C)=>a.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-xl p-4 border border-[var(--border-primary)] shadow-sm space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-[var(--text-secondary)]",children:[a.jsx(Oa,{size:14,className:"text-[var(--accent-blue)]"}),a.jsx("span",{className:"font-medium text-[var(--text-primary)]",children:w.date?new Date(w.date).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}):"-"}),a.jsx("span",{className:"text-xs text-[var(--text-tertiary)]",children:w.date?new Date(w.date).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"}):""})]}),a.jsxs("div",{className:"text-lg font-bold text-emerald-600 font-mono",children:["$",(Number(w.totalPrice)||0).toLocaleString()]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-y-3 gap-x-2 text-sm",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-xs text-[var(--text-tertiary)] block mb-0.5",children:""}),a.jsx("span",{className:"font-medium text-[var(--text-primary)]",children:w.vendorName||w.vendor||"-"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-xs text-[var(--text-tertiary)] block mb-0.5",children:""}),a.jsx("span",{className:"font-bold text-[var(--text-primary)] text-base",children:w.productName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-[var(--text-tertiary)] block mb-0.5",children:""}),a.jsx("span",{className:"font-mono text-blue-500 font-bold",children:w.quantity})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-[var(--text-tertiary)] block mb-0.5",children:""}),a.jsxs("span",{className:"font-mono text-[var(--text-secondary)]",children:["$",(Number(w.unitPrice)||0).toLocaleString()]})]})]}),a.jsxs("div",{className:"pt-2 border-t border-[var(--border-primary)] flex justify-between items-center text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1 text-[var(--text-tertiary)] bg-[var(--bg-tertiary)] px-2 py-1 rounded",children:[a.jsx("span",{children:":"}),a.jsx("span",{className:"font-mono text-[var(--text-secondary)]",children:w.expiry?new Date(w.expiry).toLocaleDateString("zh-TW"):"-"})]}),a.jsxs("div",{className:"flex items-center gap-1 text-[var(--text-tertiary)]",children:[a.jsx(Ma,{size:12}),a.jsx("span",{children:w.operator||"-"})]})]})]},C)):a.jsx("div",{className:"text-center py-10 text-[var(--text-secondary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:""})}),a.jsx("div",{className:"hidden md:block rounded-xl border border-[var(--border-primary)] overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase tracking-wider sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"p-20 text-center text-[var(--text-secondary)]",children:"..."})}):R.length>0?R.map((w,C)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2 text-[var(--text-secondary)]",children:[a.jsx(Oa,{size:14,className:"text-[var(--text-tertiary)] group-hover:text-[var(--accent-blue)] transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium text-[var(--text-secondary)]",children:w.date?new Date(w.date).toLocaleDateString("zh-TW"):"-"}),a.jsx("span",{className:"text-xs text-[var(--text-tertiary)]",children:w.date?new Date(w.date).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"}):""})]})]})}),a.jsx("td",{className:"p-4 text-[var(--text-secondary)]",children:w.vendorName||w.vendor||"-"}),a.jsx("td",{className:"p-4 font-medium text-[var(--text-primary)]",children:w.productName}),a.jsx("td",{className:"p-4 text-right font-mono text-blue-500",children:w.quantity}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:["$",(Number(w.unitPrice)||0).toLocaleString()]}),a.jsxs("td",{className:"p-4 text-right font-mono font-bold text-emerald-500",children:["$",(Number(w.totalPrice)||0).toLocaleString()]}),a.jsx("td",{className:"p-4 text-[var(--text-tertiary)] text-xs",children:w.expiry?new Date(w.expiry).toLocaleDateString("zh-TW"):"-"}),a.jsx("td",{className:"p-4 text-[var(--text-tertiary)]",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ma,{size:12})," ",w.operator||"-"]})})]},C)):a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"p-20 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(Ps,{size:32,className:"text-[var(--text-secondary)]"}),a.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]})})})})]})})})]})})}function BS({user:n,apiUrl:r}){const[i,d]=E.useState([]),[u,f]=E.useState(!1),[x,y]=E.useState(""),[p,h]=E.useState("ALL"),[N,g]=E.useState(nt()),[b,j]=E.useState(nt()),k=Je.useCallback(async()=>{f(!0);try{const v=await Ee(r,"getAdjustmentHistory",{startDate:N,endDate:b,productName:x},n.token);Array.isArray(v)&&d(v)}catch(v){console.error("Failed to fetch adjustment history:",v)}finally{f(!1)}},[r,n.token,N,b,x]);E.useEffect(()=>{k()},[k]);const R=i.filter(v=>{const w=String(v.productName||"").toLowerCase().includes(x.toLowerCase()),C=p==="ALL"||v.type===p;return w&&C});return a.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-6 animate-in fade-in duration-500",children:a.jsxs("div",{className:"glass-panel p-4 md:p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-6 pb-6 border-b border-[var(--border-primary)] gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-500/10 flex items-center justify-center shrink-0",children:a.jsx(Gn,{className:"text-blue-500",size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[var(--text-primary)]",children:""}),a.jsx("p",{className:"text-[var(--text-tertiary)] text-xs mt-0.5",children:""})]})]}),a.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[a.jsxs("div",{className:"flex-1 md:flex-none glass-panel px-4 py-2 bg-[var(--bg-secondary)] border-[var(--border-primary)] flex flex-col items-center justify-center",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] uppercase font-bold tracking-wider",children:""}),a.jsx("p",{className:"text-xl font-bold text-blue-500",children:R.length})]}),a.jsxs("button",{onClick:k,disabled:u,className:"btn-secondary h-[46px] px-6 flex items-center justify-center gap-2 whitespace-nowrap",children:[a.jsx(ft,{size:18,className:u?"animate-spin":""}),a.jsx("span",{children:""})]})]})]}),a.jsx("div",{className:"mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:16}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-9 w-full h-10",value:x,onChange:v=>y(v.target.value)})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsxs("select",{value:p,onChange:v=>h(v.target.value),className:"input-field w-full h-10 px-2",children:[a.jsx("option",{value:"ALL",children:""}),a.jsx("option",{value:"SCRAP",children:""}),a.jsx("option",{value:"RETURN",children:""}),a.jsx("option",{value:"LOSS",children:""}),a.jsx("option",{value:"OTHER",children:""})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10",value:N,onChange:v=>g(v.target.value)})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10",value:b,onChange:v=>j(v.target.value)})]})]})}),a.jsx("div",{className:"hidden md:block rounded-xl border border-[var(--border-primary)] overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-tertiary)] text-[10px] uppercase tracking-wider sticky top-0 font-bold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3",children:"/"}),a.jsx("th",{className:"px-4 py-3",children:""}),a.jsx("th",{className:"px-4 py-3",children:""}),a.jsx("th",{className:"px-4 py-3 text-right",children:""}),a.jsx("th",{className:"px-4 py-3",children:"/"}),a.jsx("th",{className:"px-4 py-3",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-20 text-center text-[var(--text-tertiary)]",children:"..."})}):R.length>0?R.map((v,w)=>{const C={SCRAP:"",RETURN:"",LOSS:"",OTHER:""};return a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-[var(--text-secondary)] font-medium",children:[a.jsx(Oa,{size:12,className:"text-[var(--text-tertiary)]"}),a.jsx("span",{children:v.date?new Date(v.date).toLocaleDateString("zh-TW"):"-"})]}),a.jsx("span",{className:"text-[11px] text-[var(--text-tertiary)] font-mono ml-4.5",children:v.date?new Date(v.date).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"}):""})]})}),a.jsx("td",{className:"px-4 py-3 font-bold text-[var(--text-primary)]",children:v.productName}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${v.type==="SCRAP"?"bg-rose-50 text-rose-600 border border-rose-100":v.type==="RETURN"?"bg-blue-50 text-blue-600 border border-blue-100":v.type==="LOSS"?"bg-amber-50 text-amber-600 border border-amber-100":"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] border border-[var(--border-primary)]"}`,children:C[v.type]||v.type})}),a.jsxs("td",{className:"px-4 py-3 text-right font-mono font-bold text-rose-500",children:["-",v.quantity]}),a.jsx("td",{className:"px-4 py-3 text-[var(--text-secondary)] text-xs max-w-xs truncate",title:v.note,children:v.note||"-"}),a.jsx("td",{className:"px-4 py-3 text-[var(--text-tertiary)] text-xs font-medium",children:v.operator||"-"})]},w)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-20 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(Ps,{size:32,className:"text-[var(--text-tertiary)] opacity-30"}),a.jsx("p",{className:"text-[var(--text-secondary)] font-medium",children:""})]})})})})]})})}),a.jsx("div",{className:"md:hidden space-y-3",children:u?a.jsx("div",{className:"text-center py-10 text-[var(--text-tertiary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:"..."}):R.length>0?R.map((v,w)=>{const C={SCRAP:"",RETURN:"",LOSS:"",OTHER:""};return a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] p-3 shadow-sm flex flex-col gap-2",children:[a.jsxs("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:[a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsxs("span",{className:"text-[var(--text-tertiary)] text-[10px] font-mono flex items-center gap-1",children:[a.jsx(Oa,{size:10}),v.date?new Date(v.date).toLocaleDateString("zh-TW"):"-",a.jsx("span",{className:"ml-1",children:v.date?new Date(v.date).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"}):""})]}),a.jsx("span",{className:`self-start px-2 py-0.5 rounded text-[10px] font-bold mt-1 ${v.type==="SCRAP"?"bg-rose-50 text-rose-600 border border-rose-100":v.type==="RETURN"?"bg-blue-50 text-blue-600 border border-blue-100":v.type==="LOSS"?"bg-amber-50 text-amber-600 border border-amber-100":"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] border border-[var(--border-primary)]"}`,children:C[v.type]||v.type})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase tracking-tighter",children:""}),a.jsxs("div",{className:"font-mono font-bold text-rose-500 text-base",children:["-",v.quantity]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-bold text-[var(--text-primary)]",children:v.productName}),a.jsxs("div",{className:"flex justify-between items-end gap-3",children:[a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-2 rounded-lg flex-1 min-w-0",children:[a.jsx("span",{className:"text-[9px] text-[var(--text-tertiary)] font-bold uppercase block mb-0.5 tracking-wider",children:"/"}),a.jsx("p",{className:"text-xs text-[var(--text-secondary)] truncate",children:v.note||"-"})]}),a.jsxs("div",{className:"text-right shrink-0",children:[a.jsx("span",{className:"text-[9px] text-[var(--text-tertiary)] font-bold uppercase block mb-0.5 tracking-wider",children:""}),a.jsx("span",{className:"text-xs font-bold text-[var(--text-secondary)]",children:v.operator||"-"})]})]})]})]},w)}):a.jsxs("div",{className:"text-center py-10 text-[var(--text-tertiary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:[a.jsx(Ps,{size:24,className:"mx-auto mb-2 opacity-30"}),a.jsx("p",{className:"text-sm font-medium",children:""})]})})]})})}function US({user:n,apiUrl:r}){const[i,d]=E.useState([]),[u,f]=E.useState(!1),[x,y]=E.useState(""),p=async()=>{f(!0);try{const b=await Ee(r,"getInventoryValuation",{},n.token);if(console.log("Inventory Valuation Data:",b),Array.isArray(b)){const j=Wi(b,"name");d(j)}else console.error("Valuation data is not an array:",b),d([])}catch(b){console.error("Failed to fetch valuation:",b),alert(": "+b.message)}finally{f(!1)}};E.useEffect(()=>{n?.token&&p()},[n.token,r]);const h=i.filter(b=>String(b.name||"").toLowerCase().includes(x.toLowerCase())),N=h.reduce((b,j)=>b+(Number(j.totalValue)||0),0),g=h.reduce((b,j)=>b+(Number(j.totalQty)||0),0);return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Dt,{className:"text-amber-500"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),a.jsxs("div",{className:"flex w-full md:w-auto gap-3",children:[a.jsxs("div",{className:"flex-1 bg-[var(--bg-secondary)] px-3 py-3 border border-[var(--border-primary)] rounded-xl shadow-sm text-center",children:[a.jsx("p",{className:"text-xs text-[var(--text-secondary)] uppercase font-bold",children:""}),a.jsxs("p",{className:"text-xl md:text-2xl font-bold text-amber-500 flex justify-center items-baseline gap-1",children:[a.jsx("span",{className:"text-sm opacity-50",children:"$"}),N.toLocaleString()]})]}),a.jsxs("div",{className:"flex-1 bg-[var(--bg-secondary)] px-3 py-3 border border-[var(--border-primary)] rounded-xl shadow-sm text-center",children:[a.jsx("p",{className:"text-xs text-[var(--text-secondary)] uppercase font-bold",children:""}),a.jsx("p",{className:"text-xl md:text-2xl font-bold text-blue-500",children:g.toLocaleString()})]})]})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] flex gap-4 items-center shadow-sm",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full bg-[var(--bg-primary)]",value:x,onChange:b=>y(b.target.value)})]}),a.jsxs("button",{onClick:p,disabled:u,className:"btn-secondary h-[42px] px-4 flex items-center gap-2",children:[a.jsx(ft,{size:18,className:u?"animate-spin":""})," "]})]}),a.jsx("div",{className:"hidden md:block bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] overflow-hidden shadow-sm",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase tracking-wider sticky top-0 font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-secondary)]",children:"..."})}):h.length>0?h.map((b,j)=>{const k=Number(b.totalQty)||0,R=Number(b.totalValue)||0,v=k>0?R/k:0,w=N>0?R/N*100:0;return a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-4 font-medium text-[var(--text-primary)]",children:b.name}),a.jsx("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:k.toLocaleString()}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:["$",v.toFixed(2)]}),a.jsxs("td",{className:"p-4 text-right font-mono font-bold text-amber-500",children:["$",R.toLocaleString()]}),a.jsx("td",{className:"p-4 text-right w-24",children:a.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[a.jsxs("span",{className:"text-xs text-[var(--text-secondary)] w-8",children:[w.toFixed(1),"%"]}),a.jsx("div",{className:"w-12 h-1.5 bg-[var(--bg-tertiary)] rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-amber-500",style:{width:`${Math.min(w,100)}%`}})})]})})]},j)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(wl,{size:32,className:"text-[var(--text-secondary)]"}),a.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]})})})})]})})}),a.jsx("div",{className:"md:hidden space-y-4",children:u?a.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)]",children:"..."}):h.length>0?h.map((b,j)=>{const k=Number(b.totalQty)||0,R=Number(b.totalValue)||0,v=k>0?R/k:0,w=N>0?R/N*100:0;return a.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] p-4 shadow-sm flex flex-col gap-3",children:[a.jsxs("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:[a.jsx("h3",{className:"font-bold text-[var(--text-primary)] text-lg",children:b.name}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)]",children:""}),a.jsxs("div",{className:"font-bold text-amber-500 text-lg font-mono",children:["$",R.toLocaleString()]})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-sm",children:[a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-2 rounded-lg",children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)] mb-1",children:""}),a.jsx("div",{className:"font-mono font-bold text-[var(--text-primary)]",children:k.toLocaleString()})]}),a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-2 rounded-lg",children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)] mb-1",children:""}),a.jsxs("div",{className:"font-mono text-[var(--text-secondary)]",children:["$",v.toFixed(0)]})]}),a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-2 rounded-lg",children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)] mb-1",children:""}),a.jsxs("div",{className:"font-mono text-[var(--text-secondary)]",children:[w.toFixed(1),"%"]})]})]}),a.jsx("div",{className:"w-full h-1.5 bg-[var(--bg-tertiary)] rounded-full overflow-hidden mt-1",children:a.jsx("div",{className:"h-full bg-amber-500 transition-all duration-500",style:{width:`${Math.min(w,100)}%`}})})]},j)}):a.jsxs("div",{className:"text-center py-8 text-[var(--text-secondary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:[a.jsx(wl,{size:24,className:"mx-auto mb-2 text-[var(--text-tertiary)]"}),a.jsx("p",{children:""})]})})]})}function $S({user:n,apiUrl:r,logActivity:i}){const[d,u]=E.useState([]),[f,x]=E.useState({}),[y,p]=E.useState(!0),[h,N]=E.useState(!1),[g,b]=E.useState(""),[j,k]=E.useState(!1),R=E.useCallback(W=>`${W.id}-${W.batchId||"no-batch"}`,[]),v=E.useCallback(async()=>{p(!0);try{const W=await Ee(r,"getInventory",{},n.token);if(Array.isArray(W)){const fe=Wi(W,"productName");u(fe);const ge={};fe.forEach(oe=>{oe.type==="STOCK"&&(ge[R(oe)]={physicalQty:"",reason:"",accountability:""})}),x(ge)}}catch(W){console.error("Failed to fetch inventory for stocktake:",W),alert("")}finally{p(!1)}},[r,n.token,R]);E.useEffect(()=>{n?.token&&v()},[n.token,v]);const w=(W,fe,ge)=>{x(oe=>({...oe,[W]:{...oe[W],[fe]:ge}}))},C=W=>{const fe=document.getElementById(W);fe&&(fe.focus(),fe.select?.(),fe.scrollIntoView({block:"nearest",behavior:"smooth"}))},A=(W,fe,ge,oe,H=!1)=>{const P=oe[fe],O=R(P),F=f[O]||{},ne=B(P.quantity,F.physicalQty),M=F.physicalQty!==""&&ne!==0,K=["qty","reason","acc"],ae=K.indexOf(ge),se=H?"m-":"";W.key==="ArrowRight"||W.key==="Enter"&&!W.shiftKey?(W.preventDefault(),ge==="qty"&&!M?fe<oe.length-1&&C(`${se}qty-${R(oe[fe+1])}`):ae<K.length-1?C(`${se}${K[ae+1]}-${O}`):fe<oe.length-1&&C(`${se}qty-${R(oe[fe+1])}`)):W.key==="ArrowLeft"?(W.preventDefault(),ae>0&&C(`${se}${K[ae-1]}-${O}`)):W.key==="ArrowDown"?(W.preventDefault(),fe<oe.length-1&&C(`${se}${ge}-${R(oe[fe+1])}`)):W.key==="ArrowUp"&&(W.preventDefault(),fe>0&&C(`${se}${ge}-${R(oe[fe-1])}`))},B=(W,fe)=>fe===""||fe===void 0?0:Number(fe)-Number(W),T=()=>d.filter(W=>{if(W.type!=="STOCK")return!1;const fe=f[R(W)];return fe&&fe.physicalQty!==""}).map(W=>{const fe=f[R(W)],ge=B(W.quantity,fe.physicalQty);return{productId:W.id,productName:W.productName,bookQty:Number(W.quantity),physicalQty:Number(fe.physicalQty),diff:ge,reason:fe.reason,accountability:fe.accountability,batchId:W.batchId||""}}),D=async()=>{const W=d.filter(oe=>{if(oe.type!=="STOCK"||Number(oe.quantity)===0)return!1;const H=R(oe),P=f[H];return!P||P.physicalQty===""||P.physicalQty===void 0});if(W.length>0){alert(` ${W.length} 
`);const oe=R(W[0]);C(`qty-${oe}`);return}const fe=T();fe.length===0&&d.some(oe=>oe.type==="STOCK");const ge=fe.find(oe=>oe.diff!==0&&(!oe.reason||!oe.accountability));if(ge){alert(`${ge.productName}`);const oe=R(ge);f[oe].reason?document.getElementById(`acc-${oe}`)?.focus():document.getElementById(`reason-${oe}`)?.focus();return}if(confirm(` ${fe.length} `)){N(!0);try{await Ee(r,"saveStocktake",{date:nt(),items:fe,operator:n.username},n.token),i&&i({actionType:"DATA_EDIT",page:"",details:JSON.stringify({itemCount:fe.length,hasDifferences:fe.some(oe=>oe.diff!==0),totalDiff:fe.reduce((oe,H)=>oe+Math.abs(H.diff),0)})}),alert(""),x({}),await v()}catch(oe){console.error("Stocktake submit failed:",oe),alert(": "+oe.message)}finally{N(!1)}}},U=d.filter(W=>!W||!j&&(Number(W.quantity)||0)===0?!1:String(W.productName||"").toLowerCase().includes(g.toLowerCase())),V=U.filter(W=>W.type==="STOCK"),re=U.filter(W=>W.type!=="STOCK"),de=(W,fe,ge,oe,H)=>a.jsxs("div",{className:"hidden md:flex bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] p-6 flex-col shadow-sm",children:[a.jsxs("h3",{className:`text-lg font-bold mb-4 flex items-center gap-2 ${oe}`,children:[a.jsx(ge,{size:20})," ",fe,!H&&a.jsx("span",{className:"text-xs text-[var(--text-secondary)] font-normal ml-2",children:""})]}),a.jsx("div",{className:"rounded-lg border border-[var(--border-primary)] overflow-hidden",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),H&&a.jsxs(a.Fragment,{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4",children:""})]})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:y?a.jsx("tr",{children:a.jsx("td",{colSpan:H?"6":"2",className:"p-6 text-center text-[var(--text-secondary)]",children:"..."})}):W.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:H?"6":"2",className:"p-6 text-center text-[var(--text-secondary)]",children:""})}):W.map((P,O)=>{if(!P)return null;const F=R(P),ne=f[F]||{physicalQty:"",reason:"",accountability:n.username||""},M=B(P.quantity,ne.physicalQty),K=!H&&Number(P.quantity)>0;return a.jsxs("tr",{className:`hover:bg-[var(--bg-hover)] transition-colors ${H&&M!==0&&ne.physicalQty!==""?"bg-amber-500/10":K?"bg-orange-500/10 border-l-4 border-orange-500":""}`,children:[a.jsx("td",{className:`p-4 font-medium ${K?"text-orange-600 font-bold":"text-[var(--text-primary)]"}`,children:P.productName||""}),a.jsx("td",{className:`p-4 text-right font-mono ${K?"text-orange-500 font-bold text-lg":"text-[var(--text-secondary)]"}`,children:P.quantity}),H&&a.jsxs(a.Fragment,{children:[a.jsx("td",{className:"p-4",children:a.jsx("input",{id:`qty-${F}`,type:"number",className:`input-field w-full text-right font-mono ${M!==0&&ne.physicalQty!==""?"border-red-500 text-red-500":""}`,placeholder:"0",value:ne.physicalQty,onChange:ae=>w(F,"physicalQty",ae.target.value),onKeyDown:ae=>A(ae,O,"qty",W),onWheel:ae=>ae.target.blur()})}),a.jsx("td",{className:"p-4 text-center",children:a.jsxs("span",{className:`inline-flex items-center gap-1 font-mono font-bold ${ne.physicalQty===""||M===0?"text-green-500":"text-red-500 underline"}`,children:[ne.physicalQty!==""?M>0?`+${M}`:M:0,ne.physicalQty!==""&&M!==0&&a.jsx(Jl,{size:12})]})}),a.jsx("td",{className:"p-4",children:a.jsx("input",{id:`reason-${F}`,type:"text",disabled:ne.physicalQty===""||M===0,className:`input-field w-full text-xs transition-all ${ne.physicalQty!==""&&M!==0?"":"bg-[var(--bg-tertiary)] cursor-not-allowed opacity-50"}`,placeholder:M!==0&&ne.physicalQty!==""?"...":"-",value:ne.reason,onChange:ae=>w(F,"reason",ae.target.value),onKeyDown:ae=>A(ae,O,"reason",W)})}),a.jsx("td",{className:"p-4",children:a.jsx("input",{id:`acc-${F}`,type:"text",disabled:ne.physicalQty===""||M===0,className:`input-field w-full text-xs transition-all ${ne.physicalQty!==""&&M!==0?"":"bg-[var(--bg-tertiary)] cursor-not-allowed opacity-50"}`,placeholder:M!==0&&ne.physicalQty!==""?"...":"-",value:ne.accountability,onChange:ae=>w(F,"accountability",ae.target.value),onKeyDown:ae=>A(ae,O,"acc",W)})})]})]},F)})})]})})]}),pe=(W,fe,ge,oe,H)=>a.jsxs("div",{className:"md:hidden flex flex-col gap-4",children:[a.jsxs("h3",{className:`text-lg font-bold flex items-center gap-2 ${oe} px-1`,children:[a.jsx(ge,{size:20})," ",fe,!H&&a.jsx("span",{className:"text-xs text-slate-500 font-normal ml-2",children:""})]}),a.jsx("div",{className:"space-y-4",children:y?a.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)]",children:"..."}):W.length===0?a.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:""}):W.map((P,O)=>{if(!P)return null;const F=R(P),ne=f[F]||{physicalQty:"",reason:"",accountability:n.username||""},M=B(P.quantity,ne.physicalQty),K=ne.physicalQty!==""&&M!==0,ae=!H&&Number(P.quantity)>0;return a.jsxs("div",{className:`bg-[var(--bg-secondary)] rounded-xl p-4 border shadow-sm space-y-3 ${H&&K?"border-amber-500/30 bg-amber-500/5":ae?"border-orange-500/30 bg-orange-500/5":"border-[var(--border-primary)]"}`,children:[a.jsxs("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:[a.jsx("span",{className:`font-bold text-lg ${ae?"text-orange-600":"text-[var(--text-primary)]"}`,children:P.productName||""}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("span",{className:"text-xs text-[var(--text-secondary)]",children:""}),a.jsx("span",{className:`font-mono text-lg font-bold ${ae?"text-orange-500":"text-[var(--text-secondary)]"}`,children:P.quantity})]})]}),H&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] min-w-[70px]",children:":"}),a.jsx("input",{id:`m-qty-${F}`,type:"number",className:`input-field flex-1 text-right font-mono py-2 ${K?"border-red-500 text-red-500":""}`,placeholder:"",value:ne.physicalQty,onChange:se=>w(F,"physicalQty",se.target.value),onKeyDown:se=>A(se,O,"qty",W,!0)}),a.jsx("div",{className:"w-12 text-right",children:a.jsx("span",{className:`font-mono font-bold ${ne.physicalQty===""||!K?"text-slate-300":"text-red-500"}`,children:ne.physicalQty!==""?M>0?`+${M}`:M:"-"})})]}),K&&a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-3 rounded-lg border border-amber-500/20 space-y-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-xs font-bold text-[var(--text-secondary)]",children:""}),a.jsx("input",{id:`m-reason-${F}`,type:"text",className:"input-field w-full text-sm",placeholder:"...",value:ne.reason,onChange:se=>w(F,"reason",se.target.value),onKeyDown:se=>A(se,O,"reason",W,!0)})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),a.jsx("input",{id:`m-acc-${F}`,type:"text",className:"input-field w-full text-sm",placeholder:"",value:ne.accountability,onChange:se=>w(F,"accountability",se.target.value),onKeyDown:se=>A(se,O,"acc",W,!0)})]})]})]})]},F)})})]});return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)] relative",children:[h&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)]",children:"..."})]}),a.jsxs("div",{className:"hidden md:flex flex-col gap-6 shrink-0",children:[a.jsxs("div",{className:"flex justify-between items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Fs,{className:"text-blue-600"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:v,className:"btn-secondary h-[42px] px-4",title:"",children:a.jsx(Fl,{size:18})}),a.jsx("button",{onClick:D,disabled:h,className:"btn-primary h-[42px] px-6 flex items-center gap-2",children:h?"...":a.jsxs(a.Fragment,{children:[a.jsx(Js,{size:18})," "]})})]})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] flex gap-4 items-center",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:g,onChange:W=>b(W.target.value)})]}),a.jsx("div",{className:"flex items-center gap-3 bg-[var(--bg-primary)] p-2 px-4 rounded-xl border border-[var(--border-primary)] shadow-sm shrink-0",children:a.jsxs("label",{className:"text-sm font-bold text-[var(--text-secondary)] flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500",checked:j,onChange:W=>k(W.target.checked)})," 0 "]})})]})]}),a.jsxs("div",{className:"md:hidden flex flex-col gap-3 shrink-0",children:[a.jsxs("h1",{className:"text-xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Fs,{className:"text-blue-600"})," "]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:g,onChange:W=>b(W.target.value)})]}),a.jsx("button",{onClick:v,className:"btn-secondary px-3 flex items-center justify-center shrink-0",title:"",children:a.jsx(Fl,{size:20})})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 bg-[var(--bg-secondary)] px-3 py-2 rounded-xl border border-[var(--border-primary)] shadow-sm",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500",checked:j,onChange:W=>k(W.target.checked)}),a.jsx("span",{className:"text-xs font-bold text-[var(--text-secondary)]",children:" 0 "})]}),a.jsx("button",{onClick:D,disabled:h,className:"btn-primary flex-1 py-2 flex items-center justify-center gap-2 text-sm",children:h?"...":a.jsxs(a.Fragment,{children:[a.jsx(Js,{size:16})," "]})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto flex flex-col gap-6 pb-6 w-full",children:[de(V,"",qn,"text-blue-600",!0),pe(V,"",qn,"text-blue-600",!0),de(re,"/",Ri,"text-orange-600",!1),pe(re,"/",Ri,"text-orange-600",!1)]})]})}function HS({user:n,apiUrl:r}){const[i,d]=E.useState([]),[u,f]=E.useState(!1),[x,y]=E.useState(""),[p,h]=E.useState(!0),[N,g]=E.useState(nt()),[b,j]=E.useState(nt()),k=Je.useCallback(async()=>{f(!0);try{const A=await Ee(r,"getStocktakeHistory",{startDate:N,endDate:b,productName:x,diffOnly:p},n.token);Array.isArray(A)&&d(A)}catch(A){console.error("Failed to fetch stocktake history:",A)}finally{f(!1)}},[r,n.token,N,b,x,p]);E.useEffect(()=>{k()},[k]),E.useEffect(()=>{const A=()=>{if(document.hidden)return;const B=nt();if(N===b&&N!==B){const T=new Date;T.setDate(T.getDate()-1);const D=`${T.getFullYear()}-${String(T.getMonth()+1).padStart(2,"0")}-${String(T.getDate()).padStart(2,"0")}`;N===D&&(console.log("Detected stale date (yesterday), auto-updating to today:",B),g(B),j(B))}};return window.addEventListener("focus",A),document.addEventListener("visibilitychange",A),()=>{window.removeEventListener("focus",A),document.removeEventListener("visibilitychange",A)}},[N,b]);const R=i.filter(A=>String(A.productName||"").toLowerCase().includes(x.toLowerCase())),v=R.length,w=R.filter(A=>A.diff!==0).length,C=R.filter(A=>A.diff===0).length;return a.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-6 animate-in fade-in duration-500",children:a.jsxs("div",{className:"glass-panel p-4 md:p-6 text-[var(--text-primary)]",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-6 border-b border-[var(--border-primary)] pb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-500/10 flex items-center justify-center shrink-0",children:a.jsx(Gn,{className:"text-blue-500",size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[var(--text-primary)]",children:""}),a.jsx("p",{className:"text-[var(--text-tertiary)] text-xs mt-0.5",children:""})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full md:w-auto md:flex md:gap-3",children:[a.jsxs("div",{className:"px-3 py-2 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)] flex flex-col items-center justify-center min-w-[80px]",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] uppercase font-bold tracking-wider",children:""}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)]",children:v})]}),a.jsxs("div",{className:"px-3 py-2 rounded-xl bg-rose-50 border border-rose-100 flex flex-col items-center justify-center min-w-[80px]",children:[a.jsx("p",{className:"text-[10px] text-rose-500 uppercase font-bold tracking-wider",children:""}),a.jsx("p",{className:"text-lg font-bold text-rose-600",children:w})]}),a.jsxs("div",{className:"px-3 py-2 rounded-xl bg-emerald-50 border border-emerald-100 flex flex-col items-center justify-center min-w-[80px]",children:[a.jsx("p",{className:"text-[10px] text-emerald-500 uppercase font-bold tracking-wider",children:""}),a.jsx("p",{className:"text-lg font-bold text-emerald-600",children:C})]})]})]}),a.jsx("div",{className:"mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 gap-4 items-end",children:[a.jsxs("div",{className:"md:col-span-2 lg:col-span-4 space-y-1.5 w-full",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:16}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full h-10",value:x,onChange:A=>y(A.target.value)})]})]}),a.jsxs("div",{className:"md:col-span-1 lg:col-span-2 space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10",value:N,onChange:A=>g(A.target.value)})]}),a.jsxs("div",{className:"md:col-span-1 lg:col-span-2 space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10",value:b,onChange:A=>j(A.target.value)})]}),a.jsxs("div",{className:"md:col-span-2 lg:col-span-3 flex items-center gap-2",children:[a.jsxs("label",{className:"flex-1 flex items-center gap-2 px-3 py-2 rounded-xl bg-[var(--bg-primary)] border border-[var(--border-primary)] cursor-pointer hover:bg-[var(--bg-hover)] transition-colors h-10",children:[a.jsx("input",{type:"checkbox",checked:p,onChange:A=>h(A.target.checked),className:"w-4 h-4 rounded border-[var(--border-primary)] text-blue-500 focus:ring-blue-500"}),a.jsx("span",{className:"text-[11px] text-[var(--text-secondary)] font-bold whitespace-nowrap",children:""})]}),a.jsxs("button",{onClick:k,disabled:u,className:"btn-secondary h-10 px-4 flex items-center gap-2 whitespace-nowrap",children:[a.jsx(ft,{size:16,className:u?"animate-spin":""})," "]})]})]})}),a.jsx("div",{className:"hidden md:block rounded-xl border border-[var(--border-primary)] overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-tertiary)] text-[10px] uppercase tracking-wider sticky top-0 font-bold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3",children:""}),a.jsx("th",{className:"px-4 py-3",children:""}),a.jsx("th",{className:"px-4 py-3 text-right",children:"/"}),a.jsx("th",{className:"px-4 py-3 text-center",children:""}),a.jsx("th",{className:"px-4 py-3",children:"/"}),a.jsx("th",{className:"px-4 py-3",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-20 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(ft,{className:"animate-spin text-blue-500"}),a.jsx("span",{className:"text-[var(--text-tertiary)] text-sm",children:"..."})]})})}):R.length>0?R.map((A,B)=>a.jsxs("tr",{className:`hover:bg-[var(--bg-hover)] transition-colors group ${A.diff!==0?"bg-amber-50/30":""}`,children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-1.5 text-[var(--text-tertiary)] font-mono text-[11px]",children:[a.jsx(Oa,{size:10}),A.date]})}),a.jsx("td",{className:"px-4 py-3 font-bold text-[var(--text-primary)]",children:A.productName}),a.jsx("td",{className:"px-4 py-3 text-right",children:a.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[a.jsxs("span",{className:"text-[10px] text-[var(--text-tertiary)] font-mono",children:[": ",A.bookQty]}),a.jsxs("span",{className:"text-sm text-blue-600 font-bold font-mono",children:[": ",A.physicalQty]})]})}),a.jsx("td",{className:"px-4 py-3 text-center",children:A.diff===0?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-600 text-[10px] font-bold border border-emerald-100",children:[a.jsx(Rd,{size:10})," 0"]}):a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold border ${A.diff>0?"bg-blue-50 text-blue-600 border-blue-100":"bg-rose-50 text-rose-600 border-rose-100"}`,children:[a.jsx(Jl,{size:10}),A.diff>0?`+${A.diff}`:A.diff]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex flex-col gap-0.5 max-w-[150px]",children:[a.jsx("p",{className:"text-[11px] text-[var(--text-secondary)] truncate",title:A.reason,children:A.reason||"-"}),a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold",children:A.accountability||"-"})]})}),a.jsx("td",{className:"px-4 py-3 text-[var(--text-tertiary)] text-xs font-medium",children:A.operator||"-"})]},B)):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-20 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(Ps,{size:32,className:"text-[var(--text-tertiary)] opacity-30"}),a.jsx("p",{className:"text-[var(--text-secondary)] font-medium",children:""})]})})})})]})})}),a.jsx("div",{className:"md:hidden space-y-3",children:u?a.jsx("div",{className:"text-center py-10 text-[var(--text-tertiary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:"..."}):R.length>0?R.map((A,B)=>a.jsxs("div",{className:`bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] p-3 shadow-sm flex flex-col gap-2 ${A.diff!==0?"bg-amber-50/20":""}`,children:[a.jsxs("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:[a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[var(--text-tertiary)] font-mono uppercase tracking-wider",children:[a.jsx(Oa,{size:10}),A.date]}),a.jsx("h3",{className:"font-bold text-[var(--text-primary)] text-base",children:A.productName})]}),a.jsx("div",{className:"text-right",children:a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold border ${A.diff===0?"bg-emerald-50 text-emerald-600 border-emerald-100":A.diff>0?"bg-blue-50 text-blue-600 border-blue-100":"bg-rose-50 text-rose-600 border-rose-100"}`,children:[A.diff===0?a.jsx(Rd,{size:10}):a.jsx(Jl,{size:10}),A.diff>0?`+${A.diff}`:A.diff]})})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center bg-[var(--bg-secondary)] p-2 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[9px] text-[var(--text-tertiary)] font-bold uppercase tracking-wider",children:""}),a.jsx("div",{className:"font-mono font-medium text-[var(--text-secondary)]",children:A.bookQty})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[9px] text-[var(--text-tertiary)] font-bold uppercase tracking-wider",children:""}),a.jsx("div",{className:"font-mono font-bold text-blue-600 tracking-tighter",children:A.physicalQty})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[9px] text-[var(--text-tertiary)] font-bold uppercase tracking-wider",children:""}),a.jsx("div",{className:`font-mono font-bold ${A.diff===0?"text-emerald-600":"text-rose-600"}`,children:A.diff})]})]}),(A.reason||A.accountability)&&a.jsxs("div",{className:"text-xs bg-[var(--bg-secondary)] p-2 rounded-lg text-[var(--text-secondary)] space-y-1 border border-[var(--border-primary)]",children:[A.reason&&a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)] font-bold mr-2 uppercase text-[9px]",children:":"}),A.reason]}),A.accountability&&a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)] font-bold mr-2 uppercase text-[9px]",children:":"}),A.accountability]})]}),a.jsx("div",{className:"flex justify-between items-center text-[10px] text-[var(--text-tertiary)] pt-1",children:a.jsxs("span",{className:"flex items-center gap-1 font-medium",children:[": ",a.jsx("span",{className:"text-[var(--text-secondary)] font-bold",children:A.operator||"-"})]})})]},B)):a.jsxs("div",{className:"text-center py-10 text-[var(--text-tertiary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:[a.jsx(Ps,{size:24,className:"mx-auto mb-2 opacity-30"}),a.jsx("p",{className:"text-sm font-medium",children:""})]})})]})})}function GS({user:n,apiUrl:r}){const[i,d]=E.useState([]),[u,f]=E.useState(!1),[x,y]=E.useState(nt()),[p,h]=E.useState(nt()),[N,g]=E.useState(""),[b,j]=E.useState(""),[k,R]=E.useState(new Set),v=Je.useCallback(async()=>{f(!0);try{const D={};x&&(D.startDate=x),p&&(D.endDate=p);const U=await Ee(r,"getReceivables",D,n.token);if(Array.isArray(U)){const V=U.sort((re,de)=>new Date(de.date)-new Date(re.date));d(V)}}catch(D){console.error("Failed to fetch data:",D),alert(": "+D.message)}finally{f(!1)}},[r,n.token,x,p]);E.useEffect(()=>{v()},[v]);const w=async D=>{if(confirm("")){f(!0);try{await Ee(r,"markAsPaid",{recordId:D},n.token),alert(""),v()}catch(U){console.error("Failed to mark as paid:",U),alert(": "+U.message)}finally{f(!1)}}},C=D=>{const U=new Set(k);U.has(D)?U.delete(D):U.add(D),R(U)},A=D=>[D.salesRep,D.salesPerson,D.operator,D.Operator,D.buyer].find(re=>re&&String(re).toLowerCase()!=="unknown")||"-",B=i.filter(D=>{const U=String(D.clientName||D.customer||D.location||"").toLowerCase(),V=String(A(D)).toLowerCase(),re=!N||U.includes(N.toLowerCase()),de=!b||V.includes(b.toLowerCase());return re&&de}),T=B.reduce((D,U)=>D+(Number(U.amount)||Number(U.total)||0),0);return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-row justify-between items-center gap-4",children:[a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2 truncate",children:[a.jsx(Sl,{className:"text-emerald-500 w-6 h-6 shrink-0"}),a.jsx("span",{className:"truncate",children:""})]})}),a.jsxs("div",{className:"glass-panel px-3 py-2 border-[var(--border-primary)] bg-[var(--bg-secondary)] shrink-0 flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase tracking-wider",children:""}),a.jsxs("p",{className:"text-lg md:text-xl font-bold text-emerald-500",children:["$",T.toLocaleString()]})]})]}),a.jsx("div",{className:"mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)]",value:x,onChange:D=>y(D.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)]",value:p,onChange:D=>h(D.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:"/"}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full h-10",value:N,onChange:D=>g(D.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full h-10",value:b,onChange:D=>j(D.target.value)})]}),a.jsxs("button",{onClick:v,className:"btn-secondary h-10 px-6 flex items-center gap-2 justify-center w-full md:w-auto",children:[a.jsx(ft,{size:18})," "]})]})}),a.jsx("div",{className:"hidden md:block rounded-xl border border-[var(--border-primary)] overflow-hidden",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-10"}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-10 text-center text-[var(--text-secondary)]",children:"..."})}):B.length>0?B.map((D,U)=>a.jsxs(Je.Fragment,{children:[a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)] transition-colors cursor-pointer",onClick:()=>C(U),children:[a.jsx("td",{className:"p-4 text-[var(--text-tertiary)]",children:k.has(U)?a.jsx(Zs,{size:16}):a.jsx(Ra,{size:16})}),a.jsx("td",{className:"p-4 text-[var(--text-secondary)]",children:(()=>{const V=D.serverTimestamp||D.timestamp||D.date,re=new Date(V);return isNaN(re.getTime())?"-":re.toLocaleDateString("zh-TW")})()}),a.jsx("td",{className:"p-4 font-medium text-[var(--text-primary)]",children:D.clientName||D.customer||D.location||"-"}),a.jsxs("td",{className:"p-4 text-right font-mono font-bold text-emerald-500",children:["$",(Number(D.amount)||Number(D.total)||0).toLocaleString()]}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${D.status==="PAID"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-rose-50 text-rose-600 border border-rose-100"}`,children:D.status==="PAID"?"":""})}),a.jsx("td",{className:"p-4 text-center",onClick:V=>V.stopPropagation(),children:D.status!=="PAID"&&a.jsx("button",{onClick:()=>w(D.id),className:"btn-primary text-xs py-1 px-3",children:""})})]}),k.has(U)&&a.jsx("tr",{className:"bg-[var(--bg-secondary)]/50",children:a.jsx("td",{colSpan:"6",className:"p-4 pl-12",children:a.jsx("div",{className:"bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-lg overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] border-b border-[var(--border-primary)]",children:[a.jsx("th",{className:"py-2 px-4 text-left font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-left font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-right font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-center font-medium",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:(D.items||D.products||D.salesData||[]).length>0?(D.items||D.products||D.salesData||[]).map((V,re)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)]",children:[a.jsx("td",{className:"py-3 px-4 text-[var(--text-secondary)]",children:A(D)}),a.jsx("td",{className:"py-3 px-4 text-[var(--text-primary)] font-medium",children:V.productName||V.name||"-"}),a.jsxs("td",{className:"py-3 px-4 text-right text-[var(--text-secondary)] font-mono",children:["$",(Number(V.price)||Number(V.unitPrice)||0).toLocaleString()]}),a.jsx("td",{className:"py-3 px-4 text-center text-[var(--text-secondary)] font-mono",children:V.qty||V.soldQty||1})]},re)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"py-4 text-center text-[var(--text-secondary)] italic",children:""})})})]})})})})]},U)):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-10 text-center text-[var(--text-secondary)]",children:""})})})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:u?a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:"..."}):B.length>0?B.map((D,U)=>a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] p-4 shadow-sm",onClick:()=>C(U),children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)] mb-1",children:(()=>{const V=D.serverTimestamp||D.timestamp||D.date,re=new Date(V);return isNaN(re.getTime())?"-":re.toLocaleDateString("zh-TW")})()}),a.jsx("div",{className:"font-bold text-[var(--text-primary)] text-lg",children:D.clientName||D.customer||D.location||""}),a.jsxs("div",{className:"text-xs text-[var(--text-secondary)] mt-1",children:[": ",A(D)]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-xl font-black font-mono text-emerald-500",children:["$",(Number(D.amount)||Number(D.total)||0).toLocaleString()]}),a.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded-full text-[10px] font-bold ${D.status==="PAID"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-rose-50 text-rose-600 border border-rose-100"}`,children:D.status==="PAID"?"":""})]})]}),a.jsxs("div",{className:"pt-3 border-t border-[var(--border-primary)] flex items-center justify-between",children:[a.jsxs("button",{className:"text-[var(--text-tertiary)] flex items-center gap-1 text-xs",children:[k.has(U)?a.jsx(Zs,{size:14}):a.jsx(Ra,{size:14}),""]}),D.status!=="PAID"&&a.jsx("button",{onClick:V=>{V.stopPropagation(),w(D.id)},className:"btn-primary text-xs py-1.5 px-4",children:""})]}),k.has(U)&&a.jsxs("div",{className:"mt-3 bg-[var(--bg-secondary)] rounded-lg p-3 text-sm space-y-2 animate-in fade-in slide-in-from-top-2 duration-200",children:[(D.items||D.products||D.salesData||[]).map((V,re)=>a.jsxs("div",{className:"flex justify-between items-center border-b border-[var(--border-primary)] last:border-0 pb-2 last:pb-0",children:[a.jsx("span",{className:"text-[var(--text-primary)]",children:V.productName||V.name}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"text-[var(--text-primary)] font-mono",children:["$",(Number(V.price)||0).toLocaleString()," x ",V.qty||1]})})]},re)),!D.items&&!D.products&&!D.salesData&&a.jsx("div",{className:"text-[var(--text-tertiary)] text-center py-2 italic",children:""})]})]},U)):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:""})})]})}function qS({user:n,apiUrl:r}){const[i,d]=E.useState([]),[u,f]=E.useState(!1),[x,y]=E.useState(nt()),[p,h]=E.useState(nt()),[N,g]=E.useState(""),[b,j]=E.useState(""),[k,R]=E.useState(new Set),v=Je.useCallback(async()=>{f(!0);try{const D={};x&&(D.startDate=x),p&&(D.endDate=p);const U=await Ee(r,"getPayables",D,n.token);if(Array.isArray(U)){const V=U.sort((re,de)=>new Date(de.date)-new Date(re.date));d(V)}}catch(D){console.error("Failed to fetch payables:",D)}finally{f(!1)}},[r,n.token,x,p]);E.useEffect(()=>{v()},[v]);const w=async D=>{if(confirm("")){f(!0);try{await Ee(r,"markPayableAsPaid",{recordId:D},n.token),alert(""),v()}catch(U){console.error("Failed to mark as paid:",U),alert(": "+U.message)}finally{f(!1)}}},C=D=>{const U=new Set(k);U.has(D)?U.delete(D):U.add(D),R(U)},A=D=>D.operator||D.Operator||D.buyer||D.salesRep||D.salesPerson||"-",B=i.filter(D=>{const U=String(D.vendorName||D.vendor||"").toLowerCase(),V=String(A(D)).toLowerCase(),re=!N||U.includes(N.toLowerCase()),de=!b||V.includes(b.toLowerCase());return re&&de}),T=B.reduce((D,U)=>D+(Number(U.amount)||Number(U.total)||0),0);return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-row justify-between items-center gap-4",children:[a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2 truncate",children:[a.jsx(Sl,{className:"text-rose-600 w-6 h-6 shrink-0"}),a.jsx("span",{className:"truncate",children:""})]})}),a.jsxs("div",{className:"glass-panel px-3 py-2 border-[var(--border-primary)] bg-[var(--bg-secondary)] shrink-0 flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase tracking-wider",children:""}),a.jsxs("p",{className:"text-lg md:text-xl font-bold text-rose-500",children:["$",T.toLocaleString()]})]})]}),a.jsx("div",{className:"mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)]",value:x,onChange:D=>y(D.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)]",value:p,onChange:D=>h(D.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full h-10",value:N,onChange:D=>g(D.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full h-10",value:b,onChange:D=>j(D.target.value)})]}),a.jsxs("button",{onClick:v,className:"btn-secondary h-10 px-6 flex items-center gap-2 justify-center w-full md:w-auto",children:[a.jsx(ft,{size:18})," "]})]})}),a.jsx("div",{className:"hidden md:block rounded-xl border border-[var(--border-primary)] overflow-hidden",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-10"}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-10 text-center text-[var(--text-secondary)]",children:"..."})}):B.length>0?B.map((D,U)=>a.jsxs(Je.Fragment,{children:[a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)] transition-colors cursor-pointer",onClick:()=>C(U),children:[a.jsx("td",{className:"p-4 text-[var(--text-tertiary)]",children:k.has(U)?a.jsx(Zs,{size:16}):a.jsx(Ra,{size:16})}),a.jsx("td",{className:"p-4 text-[var(--text-secondary)] text-center",children:(()=>{const V=D.serverTimestamp||D.timestamp||D.date,re=new Date(V);return isNaN(re.getTime())?"-":re.toLocaleDateString("zh-TW")})()}),a.jsx("td",{className:"p-4 font-medium text-[var(--text-primary)]",children:D.vendorName||D.vendor||"-"}),a.jsxs("td",{className:"p-4 text-right font-mono font-bold text-rose-500",children:["$",(Number(D.amount)||Number(D.total)||0).toLocaleString()]}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${D.status==="PAID"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-rose-50 text-rose-600 border border-rose-100"}`,children:D.status==="PAID"?"":""})}),a.jsx("td",{className:"p-4 text-center",onClick:V=>V.stopPropagation(),children:D.status!=="PAID"&&a.jsx("button",{onClick:()=>w(D.id),className:"btn-primary text-xs py-1 px-3",children:""})})]}),k.has(U)&&a.jsx("tr",{className:"bg-[var(--bg-secondary)]/50",children:a.jsx("td",{colSpan:"6",className:"p-4 pl-12",children:a.jsx("div",{className:"bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-lg overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] border-b border-[var(--border-primary)]",children:[a.jsx("th",{className:"py-2 px-4 text-left font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-left font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-right font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-center font-medium",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:(D.items||D.products||[]).length>0?(D.items||D.products||[]).map((V,re)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)]",children:[a.jsx("td",{className:"py-3 px-4 text-[var(--text-secondary)]",children:A(D)}),a.jsx("td",{className:"py-3 px-4 text-[var(--text-primary)] font-medium",children:V.productName||V.name||"-"}),a.jsxs("td",{className:"py-3 px-4 text-right text-[var(--text-secondary)] font-mono",children:["$",(Number(V.price)||Number(V.unitPrice)||0).toLocaleString()]}),a.jsx("td",{className:"py-3 px-4 text-center text-[var(--text-secondary)] font-mono",children:V.qty||V.quantity||1})]},re)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"py-4 text-center text-[var(--text-secondary)] italic",children:""})})})]})})})})]},U)):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-10 text-center text-[var(--text-secondary)]",children:""})})})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:u?a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:"..."}):B.length>0?B.map((D,U)=>a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] p-4 shadow-sm",onClick:()=>C(U),children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)] mb-1",children:(()=>{const V=D.serverTimestamp||D.timestamp||D.date,re=new Date(V);return isNaN(re.getTime())?"-":re.toLocaleDateString("zh-TW")})()}),a.jsx("div",{className:"font-bold text-[var(--text-primary)] text-lg",children:D.vendorName||D.vendor||""}),a.jsxs("div",{className:"text-xs text-[var(--text-secondary)] mt-1",children:[": ",A(D)]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-xl font-black font-mono text-rose-500",children:["$",(Number(D.amount)||Number(D.total)||0).toLocaleString()]}),a.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded-full text-[10px] font-bold ${D.status==="PAID"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-rose-50 text-rose-600 border border-rose-100"}`,children:D.status==="PAID"?"":""})]})]}),a.jsxs("div",{className:"pt-3 border-t border-[var(--border-primary)] flex items-center justify-between",children:[a.jsxs("button",{className:"text-[var(--text-tertiary)] flex items-center gap-1 text-xs",children:[k.has(U)?a.jsx(Zs,{size:14}):a.jsx(Ra,{size:14}),""]}),D.status!=="PAID"&&a.jsx("button",{onClick:V=>{V.stopPropagation(),w(D.id)},className:"btn-primary text-xs py-1.5 px-4",children:""})]}),k.has(U)&&a.jsxs("div",{className:"mt-3 bg-[var(--bg-secondary)] rounded-lg p-3 text-sm space-y-2 animate-in fade-in slide-in-from-top-2 duration-200",children:[(D.items||D.products||[]).map((V,re)=>a.jsxs("div",{className:"flex justify-between items-center border-b border-[var(--border-primary)] last:border-0 pb-2 last:pb-0",children:[a.jsx("span",{className:"text-[var(--text-primary)]",children:V.productName||V.name}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"text-[var(--text-primary)] font-mono",children:["$",(Number(V.price)||0).toLocaleString()," x ",V.qty||1]})})]},re)),!D.items&&!D.products&&a.jsx("div",{className:"text-[var(--text-tertiary)] text-center py-2 italic",children:""})]})]},U)):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:""})})]})}function IS({user:n,apiUrl:r}){const[i,d]=E.useState([]),[u,f]=E.useState({}),[x,y]=E.useState(!1),[p,h]=E.useState(nt()),[N,g]=E.useState(nt()),[b,j]=E.useState(""),k=async()=>{y(!0);try{const v=await Ee(r,"getProducts",{},n.token),w={};Array.isArray(v)&&(v.forEach(A=>{w[A.id]=A.name}),f(w));const C=await Ee(r,"getSalesRanking",{startDate:p,endDate:N},n.token);Array.isArray(C)?d(C):d([])}catch(v){console.error("Failed to fetch sales ranking:",v),alert("")}finally{y(!1)}};E.useEffect(()=>{n?.token&&k()},[n.token,r]);const R=i.filter(v=>{const w=u[v.productName]||v.productName;return String(w||"").toLowerCase().includes(b.toLowerCase())});return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)]",children:[a.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Od,{className:"text-[var(--accent-blue)]"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),a.jsx("button",{onClick:k,disabled:x,className:"btn-secondary p-2 rounded-xl",children:a.jsx(ft,{size:20,className:x?"animate-spin":""})})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] shrink-0 grid grid-cols-1 md:grid-cols-3 gap-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"date",className:"input-field flex-1 text-sm bg-[var(--bg-tertiary)]",value:p,onChange:v=>h(v.target.value)}),a.jsx("span",{className:"text-[var(--text-secondary)] font-bold hidden md:inline",children:""}),a.jsx("input",{type:"date",className:"input-field flex-1 text-sm bg-[var(--bg-tertiary)]",value:N,onChange:v=>g(v.target.value)})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full bg-[var(--bg-tertiary)]",value:b,onChange:v=>j(v.target.value)})]}),a.jsxs("button",{onClick:k,className:"btn-primary flex items-center justify-center gap-2 h-[42px]",children:[a.jsx(Tt,{size:18})," "]})]}),a.jsx("div",{className:"bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] overflow-hidden flex-1 flex flex-col shadow-sm",children:a.jsxs("div",{className:"overflow-y-auto flex-1",children:[a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-10 font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-16 text-center",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:x?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-tertiary)]",children:"..."})}):R.length>0?R.map((v,w)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-4 text-center font-mono",children:w<3?a.jsx("span",{className:`w-6 h-6 rounded-full inline-flex items-center justify-center text-[10px] font-bold shadow-sm ${w===0?"bg-amber-100 text-amber-700 border border-amber-200":w===1?"bg-slate-100 text-slate-600 border border-slate-200":"bg-orange-100 text-orange-700 border border-orange-200"}`,children:w+1}):w+1}),a.jsx("td",{className:"p-4 font-bold text-[var(--text-primary)]",children:u[v.productName]||v.productName}),a.jsx("td",{className:"p-4 text-right font-mono text-emerald-500",children:v.totalQty.toLocaleString()}),a.jsxs("td",{className:"p-4 text-right font-mono text-blue-500",children:["$",v.totalAmount.toLocaleString()]}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:["$",(v.totalAmount/v.totalQty).toFixed(1)]})]},w)):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-secondary)]",children:""})})})]}),a.jsx("div",{className:"md:hidden divide-y divide-slate-100",children:x?a.jsx("div",{className:"p-10 text-center text-slate-500",children:"..."}):R.length>0?R.map((v,w)=>a.jsxs("div",{className:"p-4 bg-[var(--bg-secondary)] active:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("div",{className:"flex justify-between items-start mb-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold shrink-0 shadow-sm ${w===0?"bg-amber-100 text-amber-700":w===1?"bg-slate-100 text-slate-600":w===2?"bg-orange-100 text-orange-700":"bg-slate-50 text-slate-400 border border-slate-100"}`,children:w+1}),a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)]",children:u[v.productName]||v.productName})]})}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 pl-9",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:""}),a.jsx("p",{className:"text-xs font-mono font-bold text-emerald-600",children:v.totalQty.toLocaleString()})]}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:""}),a.jsxs("p",{className:"text-xs font-mono font-bold text-blue-600",children:["$",v.totalAmount.toLocaleString()]})]}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:""}),a.jsxs("p",{className:"text-xs font-mono font-bold text-slate-500",children:["$",(v.totalAmount/v.totalQty).toFixed(1)]})]})]})]},w)):a.jsx("div",{className:"p-10 text-center text-slate-500",children:""})})]})})]})}function VS({user:n,apiUrl:r}){const[i,d]=E.useState([]),[u,f]=E.useState(!1),[x,y]=E.useState(nt()),[p,h]=E.useState(nt()),[N,g]=E.useState(""),b=async()=>{f(!0);try{const k=await Ee(r,"getCustomerRanking",{startDate:x,endDate:p},n.token);Array.isArray(k)?d(k):d([])}catch(k){console.error("Failed to fetch customer ranking:",k),alert("")}finally{f(!1)}};E.useEffect(()=>{n?.token&&b()},[n.token,r]);const j=i.filter(k=>String(k.customerName||"").toLowerCase().includes(N.toLowerCase()));return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)]",children:[a.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(zi,{className:"text-purple-600"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),a.jsx("button",{onClick:b,disabled:u,className:"btn-secondary p-2 rounded-xl",children:a.jsx(ft,{size:20,className:u?"animate-spin":""})})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] shrink-0 grid grid-cols-1 md:grid-cols-3 gap-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:x,onChange:k=>y(k.target.value)}),a.jsx("span",{className:"text-[var(--text-secondary)] font-bold hidden md:inline",children:""}),a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:p,onChange:k=>h(k.target.value)})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:N,onChange:k=>g(k.target.value)})]}),a.jsxs("button",{onClick:b,className:"btn-primary flex items-center justify-center gap-2 h-[42px]",children:[a.jsx(Tt,{size:18})," "]})]}),a.jsx("div",{className:"bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] overflow-hidden flex-1 flex flex-col shadow-sm",children:a.jsxs("div",{className:"overflow-y-auto flex-1",children:[a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-10 font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-16 text-center",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-secondary)]",children:"..."})}):j.length>0?j.map((k,R)=>{const v=i.reduce((C,A)=>C+A.totalAmount,0),w=k.totalAmount/v*100;return a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-4 text-center font-mono text-[var(--text-secondary)]",children:R+1}),a.jsx("td",{className:"p-4 font-bold text-[var(--text-primary)]",children:k.customerName}),a.jsx("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:k.transactionCount.toLocaleString()}),a.jsxs("td",{className:"p-4 text-right font-mono text-purple-700 font-bold",children:["$",k.totalAmount.toLocaleString()]}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsxs("span",{className:"text-xs text-[var(--text-tertiary)]",children:[w.toFixed(1),"%"]}),a.jsx("div",{className:"w-16 h-1.5 bg-[var(--bg-tertiary)] rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-500",style:{width:`${w}%`}})})]})})]},R)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-slate-500",children:""})})})]}),a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:u?a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:"..."}):j.length>0?j.map((k,R)=>{const v=i.reduce((C,A)=>C+A.totalAmount,0),w=k.totalAmount/v*100;return a.jsxs("div",{className:"p-4 bg-[var(--bg-secondary)] active:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-[var(--bg-tertiary)] border border-[var(--border-primary)] flex items-center justify-center text-[10px] font-bold text-[var(--text-tertiary)] shrink-0 shadow-sm",children:R+1}),a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)]",children:k.customerName})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsxs("span",{className:"text-xs font-mono font-bold text-purple-700",children:["$",k.totalAmount.toLocaleString()]}),a.jsxs("span",{className:"text-[10px] text-[var(--text-tertiary)] font-bold",children:[w.toFixed(1),"%"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between pl-9 mt-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsx("span",{className:"text-xs font-mono text-[var(--text-secondary)]",children:k.transactionCount.toLocaleString()})]}),a.jsx("div",{className:"w-24 h-1 bg-[var(--bg-tertiary)] rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-500",style:{width:`${w}%`}})})]})]},R)}):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:""})})]})})]})}function YS({user:n,apiUrl:r}){const[i,d]=E.useState([]),[u,f]=E.useState({}),[x,y]=E.useState(!1),[p,h]=E.useState(nt()),[N,g]=E.useState(nt()),[b,j]=E.useState(""),k=async()=>{y(!0);try{const B=await Ee(r,"getProducts",{},n.token),T={};Array.isArray(B)&&(B.forEach(U=>{T[U.id]=U.name}),f(T));const D=await Ee(r,"getProfitAnalysis",{startDate:p,endDate:N},n.token);Array.isArray(D)?d(D):d([])}catch(B){console.error("Failed to fetch profit analysis:",B),alert("")}finally{y(!1)}};E.useEffect(()=>{n?.token&&k()},[n.token,r]);const R=i.filter(B=>{const T=u[B.productName]||B.productName;return String(T||"").toLowerCase().includes(b.toLowerCase())}),v=R.reduce((B,T)=>B+T.revenue,0),w=R.reduce((B,T)=>B+T.cost,0),C=v-w,A=v>0?C/v*100:0;return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)]",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(wl,{className:"text-emerald-600"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),a.jsxs("div",{className:"flex gap-2 md:gap-4",children:[a.jsxs("div",{className:"bg-emerald-50/10 px-3 py-1.5 md:px-4 md:py-2 border border-emerald-200/20 rounded-xl shadow-sm flex-1",children:[a.jsx("p",{className:"text-[8px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:"text-sm md:text-xl font-bold text-emerald-600 text-center",children:["$",C.toLocaleString()]})]}),a.jsxs("div",{className:"bg-blue-50/10 px-3 py-1.5 md:px-4 md:py-2 border border-blue-200/20 rounded-xl shadow-sm flex-1",children:[a.jsx("p",{className:"text-[8px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:"text-sm md:text-xl font-bold text-blue-600 text-center",children:[A.toFixed(1),"%"]})]})]})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] shrink-0 grid grid-cols-1 md:grid-cols-3 gap-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:p,onChange:B=>h(B.target.value)}),a.jsx("span",{className:"text-[var(--text-secondary)] font-bold hidden md:inline",children:""}),a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:N,onChange:B=>g(B.target.value)})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:b,onChange:B=>j(B.target.value)})]}),a.jsxs("button",{onClick:k,className:"btn-primary flex items-center justify-center gap-2 h-[42px]",children:[a.jsx(ft,{size:18,className:x?"animate-spin":""})," "]})]}),a.jsx("div",{className:"bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] overflow-hidden flex-1 flex flex-col shadow-sm",children:a.jsxs("div",{className:"overflow-y-auto flex-1",children:[a.jsxs("table",{className:"hidden md:table w-full text-left text-sm border-collapse",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-10 font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 whitespace-nowrap",children:""}),a.jsx("th",{className:"p-4 text-right whitespace-nowrap",children:""}),a.jsx("th",{className:"p-4 text-right whitespace-nowrap",children:""}),a.jsx("th",{className:"p-4 text-right whitespace-nowrap",children:""}),a.jsx("th",{className:"p-4 text-right whitespace-nowrap",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:x?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-secondary)]",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(ft,{className:"animate-spin text-emerald-500"}),a.jsx("span",{children:"..."})]})})}):R.length>0?R.map((B,T)=>{const D=B.revenue-B.cost,U=B.revenue>0?D/B.revenue*100:0,V=u[B.productName]||B.productName;return a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"p-4 font-bold text-[var(--text-primary)]",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:V}),u[B.productName]&&a.jsxs("span",{className:"text-[10px] text-[var(--text-tertiary)] font-normal mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:["ID: ",B.productName.substring(0,8),"..."]})]})}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:["$",Math.round(B.revenue).toLocaleString()]}),a.jsxs("td",{className:"p-4 text-right font-mono text-rose-600/80",children:["$",Math.round(B.cost).toLocaleString()]}),a.jsxs("td",{className:`p-4 text-right font-mono font-bold ${D>=0?"text-emerald-700":"text-rose-600"}`,children:[D<0?"-":"","$",Math.abs(Math.round(D)).toLocaleString()]}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold min-w-[50px] text-center ${U>=30?"bg-emerald-100 text-emerald-700 border border-emerald-200":U>=10?"bg-blue-100 text-blue-700 border border-blue-200":"bg-rose-100 text-rose-700 border border-rose-200"}`,children:[U.toFixed(1),"%"]})})]},T)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-slate-500",children:""})})})]}),a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:x?a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)] italic",children:"..."}):R.length>0?R.map((B,T)=>{const D=B.revenue-B.cost,U=B.revenue>0?D/B.revenue*100:0,V=u[B.productName]||B.productName;return a.jsxs("div",{className:"p-4 bg-[var(--bg-secondary)] active:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)] max-w-[65%] leading-tight",children:V}),a.jsxs("span",{className:`inline-block px-2 py-0.5 rounded text-[10px] font-bold ${U>=30?"bg-emerald-100 text-emerald-700":U>=10?"bg-blue-100 text-blue-700":"bg-rose-100 text-rose-700"}`,children:[U.toFixed(1),"%"]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:"text-xs font-mono font-bold text-[var(--text-secondary)]",children:["$",Math.round(B.revenue).toLocaleString()]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:"text-xs font-mono font-bold text-rose-500/80",children:["$",Math.round(B.cost).toLocaleString()]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:`text-xs font-mono font-bold ${D>=0?"text-emerald-600":"text-rose-600"}`,children:["$",Math.abs(Math.round(D)).toLocaleString()]})]})]})]},T)}):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:""})})]})})]})}function QS({user:n,apiUrl:r}){const[i,d]=E.useState([]),[u,f]=E.useState({}),[x,y]=E.useState(!1),[p,h]=E.useState(nt()),[N,g]=E.useState(nt()),[b,j]=E.useState(""),k=async()=>{y(!0);try{const v=await Ee(r,"getProducts",{},n.token),w={};Array.isArray(v)&&(v.forEach(A=>{w[A.id]=A.name}),f(w));const C=await Ee(r,"getTurnoverRate",{startDate:p,endDate:N},n.token);Array.isArray(C)?d(C):d([])}catch(v){console.error("Failed to fetch turnover rate:",v),alert("")}finally{y(!1)}};E.useEffect(()=>{n?.token&&k()},[n.token,r]);const R=i.filter(v=>{const w=u[v.productName]||v.productName;return String(w||"").toLowerCase().includes(b.toLowerCase())});return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)]",children:[a.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Pl,{className:"text-orange-600"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:" =  / "})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600 bg-blue-50 px-3 py-1.5 rounded-lg border border-blue-200 shadow-sm font-bold",children:[a.jsx(Rv,{size:14}),a.jsx("span",{children:""})]})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] shrink-0 grid grid-cols-1 md:grid-cols-3 gap-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:p,onChange:v=>h(v.target.value)}),a.jsx("span",{className:"text-[var(--text-secondary)] font-bold hidden md:inline",children:""}),a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:N,onChange:v=>g(v.target.value)})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:b,onChange:v=>j(v.target.value)})]}),a.jsxs("button",{onClick:k,className:"btn-primary flex items-center justify-center gap-2 h-[42px]",children:[a.jsx(ft,{size:18})," "]})]}),a.jsx("div",{className:"bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] overflow-hidden flex-1 flex flex-col shadow-sm",children:a.jsxs("div",{className:"overflow-y-auto flex-1",children:[a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-10 font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:" (COGS)"}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:x?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-secondary)]",children:"..."})}):R.length>0?R.map((v,w)=>{const C=v.avgInventory>0?v.cogs/v.avgInventory:0;return a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-4 font-bold text-[var(--text-primary)]",children:u[v.productName]||v.productName}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)] font-bold",children:["$",v.cogs.toLocaleString()]}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-tertiary)]",children:["$",v.avgInventory.toLocaleString()]}),a.jsxs("td",{className:"p-4 text-right font-mono text-orange-600 font-bold",children:[C.toFixed(2)," "]}),a.jsx("td",{className:"p-4 text-center",children:C>=4?a.jsx("span",{className:"px-2 py-1 rounded text-[10px] font-bold bg-emerald-100 text-emerald-700 border border-emerald-200 uppercase",children:""}):C>=1?a.jsx("span",{className:"px-2 py-1 rounded text-[10px] font-bold bg-blue-100 text-blue-700 border border-blue-200 uppercase",children:""}):a.jsx("span",{className:"px-2 py-1 rounded text-[10px] font-bold bg-rose-100 text-rose-700 border border-rose-200 uppercase",children:""})})]},w)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-slate-500",children:""})})})]}),a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:x?a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:"..."}):R.length>0?R.map((v,w)=>{const C=v.avgInventory>0?v.cogs/v.avgInventory:0;return a.jsxs("div",{className:"p-4 bg-[var(--bg-secondary)] active:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)] leading-tight max-w-[70%]",children:u[v.productName]||v.productName}),C>=4?a.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-bold bg-emerald-100 text-emerald-700 border border-emerald-200",children:""}):C>=1?a.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-bold bg-blue-100 text-blue-700 border border-blue-200",children:""}):a.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-bold bg-rose-100 text-rose-700 border border-rose-200",children:""})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:"text-[11px] font-mono font-bold text-[var(--text-secondary)]",children:["$",v.cogs.toLocaleString()]})]}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:"text-[11px] font-mono font-bold text-[var(--text-tertiary)]",children:["$",v.avgInventory.toLocaleString()]})]}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:"text-[11px] font-mono font-extrabold text-orange-600",children:[C.toFixed(2)," "]})]})]})]},w)}):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:""})})]})})]})}function KS({user:n,apiUrl:r}){const[i,d]=E.useState([]),[u,f]=E.useState(!1),[x,y]=E.useState(nt()),[p,h]=E.useState(nt()),[N,g]=E.useState(""),b=async()=>{f(!0);try{const w=await Ee(r,"getExpenditures",{startDate:x,endDate:p},n.token);Array.isArray(w)?d(w):d([])}catch(w){console.error("Failed to fetch expenditures:",w)}finally{f(!1)}};E.useEffect(()=>{n?.token&&b()},[n.token,r]);const j=i.filter(w=>`${w.customer||""} ${w.salesRep||""} ${w.note||""}`.toLowerCase().includes(N.toLowerCase())),k=j.reduce((w,C)=>(w.stall+=Number(C.stall||0),w.cleaning+=Number(C.cleaning||0),w.electricity+=Number(C.electricity||0),w.gas+=Number(C.gas||0),w.parking+=Number(C.parking||0),w.goods+=Number(C.goods||0),w.bags+=Number(C.bags||0),w.others+=Number(C.others||0),w.serviceFee+=Number(C.serviceFee||0),w.linePay+=Number(C.linePay||0),w.finalTotal+=Number(C.finalTotal||0),w.vehicleMaintenance+=Number(C.vehicleMaintenance||0),w.salary+=Number(C.salary||0),w.reserve+=Number(C.reserve||0),w),{stall:0,cleaning:0,electricity:0,gas:0,parking:0,goods:0,bags:0,others:0,serviceFee:0,linePay:0,finalTotal:0,vehicleMaintenance:0,salary:0,reserve:0}),R=k.stall+k.cleaning+k.electricity+k.gas+k.parking+k.bags+k.others+k.vehicleMaintenance+k.salary+k.serviceFee,v=[{key:"stall",label:"",color:"text-[var(--accent-blue)]"},{key:"cleaning",label:"",color:"text-indigo-600"},{key:"electricity",label:"",color:"text-amber-500"},{key:"gas",label:"",color:"text-orange-600"},{key:"parking",label:"",color:"text-[var(--text-secondary)]"},{key:"bags",label:"",color:"text-teal-600"},{key:"serviceFee",label:"",color:"text-rose-600"},{key:"others",label:"",color:"text-purple-600"},{key:"vehicleMaintenance",label:"",color:"text-indigo-600"},{key:"salary",label:"",color:"text-amber-500"}];return a.jsxs("div",{className:"max-w-7xl mx-auto p-3 md:p-4 space-y-3 md:space-y-4 flex flex-col h-full animate-in fade-in duration-500",children:[a.jsx("div",{className:"flex justify-between items-start gap-4 shrink-0",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-rose-500 shrink-0"}),a.jsx("h1",{className:"text-2xl font-bold text-[var(--text-primary)] whitespace-nowrap",children:""})]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1 pl-8 md:pl-0 truncate",children:"(Cost Calculation) "})]})}),a.jsxs("div",{className:"grid grid-cols-4 gap-2 shrink-0",children:[a.jsxs("div",{className:"glass-panel px-1 py-1.5 md:px-4 bg-[var(--bg-secondary)] border-[var(--border-primary)] flex flex-col justify-center items-center",children:[a.jsx("p",{className:"text-[9px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center leading-tight",children:""}),a.jsxs("p",{className:"text-xs md:text-xl font-bold text-rose-500 text-center text-nowrap mt-0.5 md:mt-1",children:["$",R.toLocaleString()]})]}),a.jsxs("div",{className:"glass-panel px-1 py-1.5 md:px-4 bg-[var(--bg-secondary)] border-[var(--border-primary)] flex flex-col justify-center items-center",children:[a.jsx("p",{className:"text-[9px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center leading-tight",children:""}),a.jsxs("p",{className:"text-xs md:text-xl font-bold text-emerald-500 text-center text-nowrap mt-0.5 md:mt-1",children:["$",k.goods.toLocaleString()]})]}),a.jsxs("div",{className:"glass-panel px-1 py-1.5 md:px-4 bg-[var(--bg-secondary)] border-[var(--border-primary)] flex flex-col justify-center items-center",children:[a.jsx("p",{className:"text-[9px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center leading-tight",children:""}),a.jsxs("p",{className:"text-xs md:text-xl font-bold text-emerald-500 text-center text-nowrap mt-0.5 md:mt-1",children:["$",k.reserve.toLocaleString()]})]}),a.jsxs("div",{className:"glass-panel px-1 py-1.5 md:px-4 bg-[var(--bg-secondary)] border-[var(--border-primary)] flex flex-col justify-center items-center",children:[a.jsx("p",{className:"text-[9px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center leading-tight",children:"Line Pay"}),a.jsxs("p",{className:"text-xs md:text-xl font-bold text-[var(--text-primary)] text-center text-nowrap mt-0.5 md:mt-1",children:["$",k.linePay.toLocaleString()]})]})]}),a.jsxs("div",{className:"p-3 shrink-0 grid grid-cols-1 md:grid-cols-3 gap-3 bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:[a.jsxs("div",{className:"grid grid-cols-2 md:flex md:flex-row md:items-center gap-2 w-full",children:[a.jsx("div",{className:"space-y-1 w-full md:w-auto md:flex-1",children:a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)] text-[var(--text-primary)] text-xs md:text-sm",value:x,onChange:w=>y(w.target.value)})}),a.jsx("span",{className:"text-[var(--text-tertiary)] font-bold text-center md:text-left self-center hidden md:block",children:""}),a.jsx("div",{className:"space-y-1 w-full md:w-auto md:flex-1",children:a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)] text-[var(--text-primary)] text-xs md:text-sm",value:p,onChange:w=>h(w.target.value)})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full h-10 text-[var(--text-primary)] bg-[var(--bg-primary)]",value:N,onChange:w=>g(w.target.value)})]}),a.jsxs("button",{onClick:b,className:"btn-primary w-full md:w-auto h-10 flex items-center justify-center gap-2",children:[a.jsx(ft,{size:18,className:u?"animate-spin":""})," "]})]}),a.jsx("div",{className:"grid grid-cols-5 md:grid-cols-10 gap-1.5 md:gap-2 shrink-0",children:v.map(w=>a.jsxs("div",{className:"p-1 px-0.5 md:p-2 bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-lg shadow-sm flex flex-col justify-center items-center h-12 md:h-14",children:[a.jsx("p",{className:"text-[9px] md:text-[10px] text-[var(--text-secondary)] font-bold uppercase truncate w-full text-center leading-tight",children:w.label}),a.jsxs("p",{className:`text-[10px] md:text-sm font-bold ${w.color} mt-0.5`,children:["$",k[w.key].toLocaleString()]})]},w.key))}),a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-xl shadow-sm p-0 flex-1 border border-[var(--border-primary)] relative overflow-hidden",children:[a.jsx("div",{className:"hidden md:block h-full overflow-y-auto overflow-x-hidden custom-scrollbar",children:a.jsxs("table",{className:"w-full text-left text-[10px] md:text-sm border-separate border-spacing-0",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-30",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-3 border-b border-[var(--border-primary)] bg-[var(--bg-secondary)] whitespace-nowrap",children:"//"}),a.jsx("th",{className:"px-2 py-3 text-right border-b border-[var(--border-primary)]",children:""}),a.jsx("th",{className:"px-2 py-3 text-right border-b border-[var(--border-primary)]",children:""}),a.jsx("th",{className:"px-2 py-3 text-right border-b border-[var(--border-primary)]",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"p-20 text-center text-[var(--text-secondary)] font-medium",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(ft,{className:"animate-spin text-rose-500"}),a.jsx("span",{children:"..."})]})})}):j.length>0?j.map((w,C)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)] transition-colors group",children:[a.jsx("td",{className:"px-2 py-4 bg-[var(--bg-primary)] border-b border-[var(--border-primary)] group-hover:bg-[var(--bg-secondary)] transition-colors",children:a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsxs("div",{className:"text-[var(--text-secondary)] font-mono text-xs flex items-center gap-1.5 mb-1",children:[a.jsx(Wl,{size:12,className:"text-[var(--text-tertiary)]"}),(()=>{const A=w.date||w.serverTimestamp;if(!A)return"";const B=new Date(A);return isNaN(B.getTime())?String(A):B.toLocaleString("zh-TW",{hour12:!1})})()]}),a.jsxs("div",{className:"pl-5 flex flex-col gap-0.5",children:[a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)]",children:w.customer||w.note||""}),a.jsxs("div",{className:"text-[10px] text-[var(--text-secondary)] font-medium",children:[": ",w.salesRep||"-"]})]})]})}),a.jsx("td",{className:"px-2 py-4 text-right align-top",children:a.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-[11px] content-start",children:[a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.stall||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.cleaning||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.electricity||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.gas||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.parking||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.goods||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.bags||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(w.others||0).toLocaleString()]})]})]})}),a.jsx("td",{className:"px-2 py-4 text-right align-top",children:a.jsxs("div",{className:"flex flex-col gap-1.5 items-end",children:[a.jsxs("div",{className:"flex justify-between w-28 bg-[var(--bg-secondary)] px-2 py-0.5 rounded border border-emerald-100",children:[a.jsx("span",{className:"text-[9px] text-emerald-500/70 uppercase font-bold",children:"LP "}),a.jsxs("span",{className:"text-[11px] font-bold text-emerald-500",children:["+$",Number(w.linePay||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between w-28 bg-rose-50 px-2 py-0.5 rounded border border-rose-100",children:[a.jsx("span",{className:"text-[9px] text-rose-600/70 uppercase font-bold",children:""}),a.jsxs("span",{className:"text-[11px] font-bold text-rose-700",children:["-$",Number(w.serviceFee||0).toLocaleString()]})]})]})}),a.jsx("td",{className:"px-2 py-4 text-right align-top",children:a.jsxs("div",{className:"flex flex-col gap-1 text-xs items-end",children:[a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-indigo-600 font-bold",children:["$",Number(w.vehicleMaintenance||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-amber-500 font-bold",children:["$",Number(w.salary||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-purple-600 font-bold",children:["$",Number(w.reserve||0).toLocaleString()]})]})]})})]},C)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"p-20 text-center text-[var(--text-secondary)] font-medium",children:""})})})]})}),a.jsx("div",{className:"md:hidden h-full overflow-y-auto p-3 space-y-3 custom-scrollbar",children:u?a.jsxs("div",{className:"p-10 text-center text-[var(--text-secondary)] font-medium flex flex-col items-center gap-2",children:[a.jsx(ft,{className:"animate-spin text-rose-500"}),a.jsx("span",{children:"..."})]}):j.length>0?j.map((w,C)=>a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] p-3 shadow-sm text-xs space-y-3",children:[a.jsx("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsx("div",{className:"font-bold text-[var(--text-primary)] text-sm",children:w.customer||w.note||""}),a.jsxs("div",{className:"text-[var(--text-secondary)] font-medium text-[10px]",children:[": ",w.salesRep||"-"]}),a.jsxs("div",{className:"text-[var(--text-tertiary)] font-mono text-[9px] flex items-center gap-1 mt-1",children:[a.jsx(Wl,{size:10}),(()=>{const A=w.date||w.serverTimestamp,B=new Date(A);return isNaN(B.getTime())?String(A):B.toLocaleString("zh-TW",{hour12:!1})})()]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("div",{className:"space-y-0.5 text-[var(--text-secondary)]",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.stall||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.cleaning||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.electricity||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.gas||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.parking||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.goods||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.bags||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(w.others||0).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between items-center text-emerald-500 bg-[var(--bg-secondary)] px-1.5 py-0.5 rounded",children:[a.jsx("span",{children:"LP"})," ",a.jsxs("span",{className:"font-bold",children:["+$",Number(w.linePay||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center text-rose-500 bg-[var(--bg-secondary)] px-1.5 py-0.5 rounded",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-bold",children:["-$",Number(w.serviceFee||0).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("div",{className:"space-y-0.5 text-[var(--text-secondary)]",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-indigo-600",children:""})," ",a.jsxs("span",{className:"font-bold text-indigo-600",children:["$",Number(w.vehicleMaintenance||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-amber-500",children:""})," ",a.jsxs("span",{className:"font-bold text-amber-500",children:["$",Number(w.salary||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-600",children:""})," ",a.jsxs("span",{className:"font-bold text-purple-600",children:["$",Number(w.reserve||0).toLocaleString()]})]})]})]})]})]})]},C)):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)] font-medium",children:""})})]})]})}function XS({user:n,apiUrl:r}){const[i,d]=E.useState(!1),[u,f]=E.useState(nt().substring(0,8)+"01"),[x,y]=E.useState(nt()),[p,h]=E.useState({revenue:0,cogs:0,grossProfit:0,expenses:{},totalExpenses:0,netIncome:0}),N=async()=>{d(!0);try{const[j,k]=await Promise.all([Ee(r,"getProfitAnalysis",{startDate:u,endDate:x},n.token),Ee(r,"getExpenditures",{startDate:u,endDate:x},n.token)]);let R=0,v=0;Array.isArray(j)&&j.forEach(A=>{R+=Number(A.revenue||0),v+=Number(A.cost||0)});let w=0;const C={stall:0,cleaning:0,electricity:0,gas:0,parking:0,bags:0,serviceFee:0,others:0,vehicleMaintenance:0,salary:0};Array.isArray(k)&&k.forEach(A=>{C.stall+=Number(A.stall||0),C.cleaning+=Number(A.cleaning||0),C.electricity+=Number(A.electricity||0),C.gas+=Number(A.gas||0),C.parking+=Number(A.parking||0),C.bags+=Number(A.bags||0),C.serviceFee+=Number(A.serviceFee||0),C.others+=Number(A.others||0),C.vehicleMaintenance+=Number(A.vehicleMaintenance||0),C.salary+=Number(A.salary||0)}),Object.values(C).forEach(A=>w+=A),h({revenue:R,cogs:v,grossProfit:R-v,expenses:C,totalExpenses:w,netIncome:R-v-w})}catch(j){console.error("Failed to fetch income statement data:",j),alert("")}finally{d(!1)}};E.useEffect(()=>{n?.token&&N()},[n.token,r]);const g=j=>`$${Math.round(j).toLocaleString()}`,b=(j,k)=>k===0?"0%":`${(j/k*100).toFixed(1)}%`;return a.jsxs("div",{className:"max-w-4xl mx-auto p-2 md:p-6 space-y-2 md:space-y-6 flex flex-col h-[calc(100dvh-6rem)] overflow-hidden",children:[a.jsxs("div",{className:"flex justify-between items-center shrink-0 gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Md,{className:"text-emerald-500 shrink-0 w-5 h-5 md:w-6 md:h-6"}),a.jsx("h1",{className:"text-lg md:text-2xl font-bold text-[var(--text-primary)] whitespace-nowrap",children:""})]}),a.jsxs("div",{className:"hidden md:block",children:[a.jsx("div",{className:"text-[var(--text-tertiary)] text-sm font-medium mt-0.5 inline ml-2",children:"(Income Statement)"}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1 truncate",children:""})]})]}),a.jsx("button",{onClick:N,className:"btn-secondary p-1.5 md:p-2 rounded-lg md:rounded-xl shrink-0",children:a.jsx(ft,{size:16,className:`md:w-5 md:h-5 ${i?"animate-spin":""}`})})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-2 md:p-4 rounded-xl border border-[var(--border-primary)] shrink-0 flex flex-col md:flex-row md:items-center gap-2 md:gap-4 shadow-sm",children:[a.jsx("div",{className:"hidden md:block",children:a.jsx(Oa,{size:18,className:"text-[var(--text-tertiary)]"})}),a.jsxs("div",{className:"grid grid-cols-2 md:flex md:flex-row md:items-center gap-2 flex-1 w-full",children:[a.jsx("div",{className:"w-full md:w-auto md:flex-1",children:a.jsx("input",{type:"date",className:"input-field w-full h-8 md:h-10 appearance-none bg-[var(--bg-primary)] text-xs md:text-sm",value:u,onChange:j=>f(j.target.value)})}),a.jsx("span",{className:"text-[var(--text-secondary)] font-bold text-center md:text-left self-center hidden md:block",children:""}),a.jsx("div",{className:"w-full md:w-auto md:flex-1",children:a.jsx("input",{type:"date",className:"input-field w-full h-8 md:h-10 appearance-none bg-[var(--bg-primary)] text-xs md:text-sm",value:x,onChange:j=>y(j.target.value)})})]}),a.jsx("button",{onClick:N,className:"btn-primary h-8 md:h-10 px-6 w-full md:w-auto text-xs md:text-sm",children:""})]}),a.jsx("div",{className:"bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] overflow-hidden flex-1 flex flex-col shadow-sm min-h-0",children:a.jsx("div",{className:"flex-1 p-3 md:p-8",children:a.jsxs("div",{className:"space-y-4 md:space-y-6 max-w-2xl mx-auto font-mono text-sm md:text-base",children:[a.jsxs("div",{className:"space-y-1 md:space-y-2",children:[a.jsx("h3",{className:"text-emerald-500 font-bold text-base md:text-lg border-b border-[var(--border-primary)] pb-1 md:pb-2 mb-2 md:mb-4",children:" (Revenue)"}),a.jsxs("div",{className:"flex justify-between items-center text-xs md:text-base",children:[a.jsx("span",{className:"text-[var(--text-secondary)]",children:""}),a.jsx("span",{className:"text-[var(--text-primary)] font-bold",children:g(p.revenue)})]}),a.jsxs("div",{className:"flex justify-between items-center text-rose-600 text-xs md:text-base",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(bv,{size:12,className:"md:w-3.5 md:h-3.5"})," "]}),a.jsxs("span",{children:["- ",g(p.cogs)]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-1 md:pt-2 border-t border-[var(--border-primary)] text-xs md:text-base",children:[a.jsx("span",{className:"text-emerald-500 font-bold",children:" (Gross Profit)"}),a.jsx("span",{className:"text-emerald-500 font-bold",children:g(p.grossProfit)})]}),a.jsxs("div",{className:"text-right text-[10px] md:text-xs text-[var(--text-secondary)]",children:[": ",b(p.grossProfit,p.revenue)]})]}),a.jsxs("div",{className:"space-y-1 md:space-y-2 mt-2 md:mt-8",children:[a.jsx("h3",{className:"text-amber-500 font-bold text-base md:text-lg border-b border-amber-200 pb-1 md:pb-2 mb-2 md:mb-4 whitespace-nowrap",children:" (Operating Expenses)"}),a.jsx("div",{className:"grid grid-cols-3 md:grid-cols-1 gap-2 md:gap-0",children:Object.entries(p.expenses).map(([j,k])=>{const R={stall:"",cleaning:"",electricity:"",gas:"",parking:"",bags:"",serviceFee:"",others:"",vehicleMaintenance:"",salary:""};return k===0?null:a.jsxs("div",{className:"flex flex-col md:flex-row justify-center md:justify-between items-center md:items-center text-[var(--text-secondary)] text-[10px] md:text-sm bg-[var(--bg-secondary)] md:bg-transparent p-1 md:p-0 rounded md:rounded-none",children:[a.jsx("span",{className:"font-medium",children:R[j]}),a.jsx("span",{className:"text-[var(--text-primary)] font-bold md:font-normal",children:g(k)})]},j)})}),a.jsxs("div",{className:"flex justify-between items-center pt-1 md:pt-2 border-t border-[var(--border-primary)] text-amber-500 mt-1 text-xs md:text-base",children:[a.jsx("span",{className:"font-bold",children:""}),a.jsxs("span",{className:"font-bold",children:["- ",g(p.totalExpenses)]})]})]}),a.jsxs("div",{className:"mt-2 md:mt-8 pt-2 md:pt-4 border-t-2 border-[var(--border-primary)]",children:[a.jsxs("div",{className:"flex justify-between items-center text-base md:text-xl",children:[a.jsx("span",{className:"text-[var(--text-primary)] font-bold",children:" (Net Income)"}),a.jsx("span",{className:`font-bold ${p.netIncome>=0?"text-emerald-500":"text-rose-600"}`,children:g(p.netIncome)})]}),a.jsxs("div",{className:"text-right text-[10px] md:text-sm text-[var(--text-secondary)] mt-0.5 md:mt-1",children:[": ",b(p.netIncome,p.revenue)]})]})]})})})]})}function ZS({user:n,apiUrl:r}){const[i,d]=E.useState(!1),[u,f]=E.useState({stall:0,cleaning:0,electricity:0,gas:0,parking:0,goods:0,bags:0,others:0,linePay:0,serviceFee:0,vehicleMaintenance:0,salary:0,reserve:0}),[x,y]=E.useState(""),p=async()=>{if(!x.trim()){alert("");const v=document.getElementById("input-expense-note");v&&(v.focus(),v.scrollIntoView({behavior:"smooth",block:"center"}));return}const k=Number(u.stall)+Number(u.cleaning)+Number(u.electricity)+Number(u.gas)+Number(u.parking)+Number(u.goods)+Number(u.bags)+Number(u.others)+Number(u.serviceFee)+Number(u.vehicleMaintenance)+Number(u.salary)+Number(u.reserve)+Number(u.linePay),R={note:x,salesRep:n.username,...u,finalTotal:k};d(!0);try{await Ee(r,"saveExpenditure",R,n.token),alert(" Expenditures "),f({stall:0,cleaning:0,electricity:0,gas:0,parking:0,goods:0,bags:0,others:0,linePay:0,serviceFee:0,vehicleMaintenance:0,salary:0,reserve:0}),y("")}catch(v){alert(": "+v.message)}finally{d(!1)}},h=j=>{const k=document.getElementById(j);k&&(k.focus(),k.select?.(),k.scrollIntoView({block:"nearest",behavior:"smooth"}))},N=(j,k)=>{const R=["note","stall","cleaning","electricity","gas","parking","goods","bags","others","linePay","serviceFee","vehicleMaintenance","salary","reserve"],v=R.indexOf(k);j.key==="Enter"||j.key==="ArrowRight"?(j.preventDefault(),v<R.length-1?h(`input-expense-${R[v+1]}`):j.key==="Enter"&&p()):j.key==="ArrowLeft"?(j.preventDefault(),v>0&&h(`input-expense-${R[v-1]}`)):j.key==="ArrowDown"?(j.preventDefault(),["stall","cleaning","electricity","gas","parking","goods"].includes(k)?h(`input-expense-${{stall:"electricity",cleaning:"gas",electricity:"parking",gas:"goods",parking:"bags",goods:"others"}[k]}`):v<R.length-1&&h(`input-expense-${R[v+1]}`)):j.key==="ArrowUp"&&(j.preventDefault(),["electricity","gas","parking","goods","bags","others"].includes(k)?h(`input-expense-${{electricity:"stall",gas:"cleaning",parking:"electricity",goods:"gas",bags:"parking",others:"goods"}[k]}`):v>0&&h(`input-expense-${R[v-1]}`))},b=Number(u.stall)+Number(u.cleaning)+Number(u.electricity)+Number(u.gas)+Number(u.parking)+Number(u.goods)+Number(u.bags)+Number(u.others)+Number(u.serviceFee)+Number(u.vehicleMaintenance)+Number(u.salary)+Number(u.reserve)+Number(u.linePay);return a.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-6 space-y-6 animate-in fade-in duration-500 relative",children:[i&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-rose-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)]",children:"..."})]}),a.jsxs("div",{className:"flex flex-row justify-between items-center gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2 truncate",children:[a.jsx("div",{className:"p-1.5 md:p-2 bg-rose-100 rounded-lg shrink-0",children:a.jsx(Dt,{className:"text-rose-600 w-5 h-5 md:w-6 md:h-6"})}),""]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-xs md:text-sm mt-1 truncate",children:""})]}),a.jsxs("div",{className:"bg-rose-50 px-3 md:px-6 py-2 md:py-3 border border-rose-200 rounded-xl shadow-sm shrink-0 flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase tracking-wider",children:""}),a.jsxs("p",{className:"text-lg md:text-2xl font-black text-rose-600",children:["$",b.toLocaleString()]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4 text-[var(--accent-blue)] font-bold",children:[a.jsx(vv,{size:18}),a.jsx("span",{children:""})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] font-bold block mb-2",children:" /  *"}),a.jsx("input",{id:"input-expense-note",type:"text",className:"input-field w-full text-lg py-3 bg-[var(--bg-primary)]",placeholder:"1/7 ...",value:x,onChange:j=>y(j.target.value),onKeyDown:j=>N(j,"note")})]})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6 text-emerald-500 font-bold",children:[a.jsx(ph,{size:18}),a.jsx("span",{children:""})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:[{key:"stall",label:"",next:"cleaning"},{key:"cleaning",label:"",next:"electricity",prev:"stall"},{key:"electricity",label:"",next:"gas",prev:"cleaning"},{key:"gas",label:"",next:"parking",prev:"electricity"},{key:"parking",label:"",next:"goods",prev:"gas"},{key:"goods",label:"",next:"bags",prev:"parking"},{key:"bags",label:"",next:"others",prev:"goods"},{key:"others",label:"",next:"linePay",prev:"bags"}].map(j=>a.jsxs("div",{className:"flex items-center justify-between gap-4 p-2 hover:bg-[var(--bg-secondary)] rounded-lg transition-colors border-b border-[var(--border-primary)] last:border-0",children:[a.jsx("label",{className:"text-sm text-[var(--text-secondary)] font-medium whitespace-nowrap",children:j.label}),a.jsx("input",{id:`input-expense-${j.key}`,type:"number",className:"input-field text-right w-32 bg-[var(--bg-primary)]",value:u[j.key]||"",onChange:k=>f({...u,[j.key]:Number(k.target.value)}),onKeyDown:k=>N(k,j.key),onWheel:k=>k.target.blur()})]},j.key))})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"glass-panel p-6 border-[var(--border-primary)]",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6 text-amber-500 font-bold",children:[a.jsx(Sv,{size:18}),a.jsx("span",{children:""})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1",children:"Line Pay "}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"input-expense-linePay",type:"number",className:"input-field w-full pl-8 border-[var(--border-primary)] text-emerald-500 bg-[var(--bg-secondary)]",value:u.linePay||"",onChange:j=>f({...u,linePay:Number(j.target.value)}),onKeyDown:j=>N(j,"linePay"),onWheel:j=>j.target.blur()}),a.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-500 font-bold",children:"+"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"input-expense-serviceFee",type:"number",className:"input-field w-full pl-8 border-rose-200 text-rose-700 bg-rose-50",value:u.serviceFee||"",onChange:j=>f({...u,serviceFee:Number(j.target.value)}),onKeyDown:j=>N(j,"serviceFee"),onWheel:j=>j.target.blur()}),a.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-rose-600 font-bold",children:"-"})]})]})]})]}),a.jsxs("div",{className:"glass-panel p-6 border-indigo-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6 text-indigo-600 font-bold",children:[a.jsx(_d,{size:18}),a.jsx("span",{children:""})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"text-xs text-[var(--text-secondary)] flex items-center gap-2 font-bold",children:[a.jsx(_d,{size:14})," "]}),a.jsx("input",{id:"input-expense-vehicleMaintenance",type:"number",className:"input-field w-28 text-right bg-[var(--bg-primary)]",value:u.vehicleMaintenance||"",onChange:j=>f({...u,vehicleMaintenance:Number(j.target.value)}),onKeyDown:j=>N(j,"vehicleMaintenance"),onWheel:j=>j.target.blur()})]}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"text-xs text-[var(--text-secondary)] flex items-center gap-2 font-bold",children:[a.jsx(zi,{size:14})," "]}),a.jsx("input",{id:"input-expense-salary",type:"number",className:"input-field w-28 text-right bg-[var(--bg-primary)]",value:u.salary||"",onChange:j=>f({...u,salary:Number(j.target.value)}),onKeyDown:j=>N(j,"salary"),onWheel:j=>j.target.blur()})]}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"text-xs text-[var(--text-secondary)] flex items-center gap-2 font-bold",children:[a.jsx(Yv,{size:14})," "]}),a.jsx("input",{id:"input-expense-reserve",type:"number",className:"input-field w-28 text-right bg-[var(--bg-primary)]",value:u.reserve||"",onChange:j=>f({...u,reserve:Number(j.target.value)}),onKeyDown:j=>N(j,"reserve"),onWheel:j=>j.target.blur()})]})]})]}),a.jsxs("button",{onClick:p,className:"btn-primary w-full py-4 text-lg font-black shadow-lg shadow-blue-100 hover:shadow-xl hover:shadow-blue-200 transition-all flex justify-center items-center gap-3 active:scale-95",children:[a.jsx(Js,{size:22})," "]}),a.jsx("p",{className:"text-center text-[var(--text-secondary)] text-[10px] uppercase font-bold tracking-tighter",children:"Data will be saved to Expenditures Sheet"})]})]})]})}function PS({user:n,apiUrl:r}){const[i,d]=E.useState([]),[u,f]=E.useState(!1),[x,y]=E.useState(!1),[p,h]=E.useState(""),[N,g]=E.useState({username:"",password:"",role:"VIEWER"}),[b,j]=E.useState(null),k=[{group:"",items:[{key:"sales_entry",label:""},{key:"sales_report",label:""}]},{group:"",items:[{key:"purchase_entry",label:""},{key:"purchase_history",label:""}]},{group:"",items:[{key:"inventory_adjust",label:""},{key:"inventory_stocktake",label:""},{key:"inventory_valuation",label:""},{key:"inventory_adjust_history",label:""},{key:"inventory_stocktake_history",label:""}]},{group:"",items:[{key:"finance_expenditure",label:""}]},{group:"",items:[{key:"finance_receivable",label:""},{key:"finance_payable",label:""},{key:"finance_income",label:""},{key:"finance_cost",label:""},{key:"finance_payroll",label:""}]},{group:"",items:[{key:"analytics_sales",label:""},{key:"analytics_customer",label:""},{key:"analytics_profit",label:""},{key:"analytics_turnover",label:""}]},{group:"",items:[{key:"system_config",label:""}]}],R=async()=>{if(!N.username||!N.password){alert("");return}y(!0),h(" ...");try{await Ee(r,"addUser",N,n.token),g({username:"",password:"",role:"VIEWER"}),await w(),alert("")}catch(T){alert(": "+T.message)}finally{y(!1)}},v=async T=>{if(window.confirm(` ${T}?`)){y(!0),h(" ...");try{await Ee(r,"deleteUser",{username:T},n.token),await w(),alert("")}catch(D){alert(": "+D.message)}finally{y(!1)}}},w=async()=>{f(!0);try{const T=await Ee(r,"getUsers",{},n.token);if(Array.isArray(T)){const D=T.map(U=>{let V=U.permissions;if(typeof V=="string")try{V=JSON.parse(V)}catch(re){console.error(`Failed to parse permissions for ${U.username}`,re),V=[]}return{...U,permissions:Array.isArray(V)?V:[]}});d(D)}else console.warn("Backend returned non-array for users")}catch(T){console.error("Failed to fetch users:",T),alert("")}finally{f(!1)}};E.useEffect(()=>{n?.token&&w()},[n.token,r]);const C=async()=>{if(b){y(!0),h(" ...");try{await Ee(r,"updateUserPermissions",{username:b.username,permissions:b.permissions},n.token),j(null),await w(),alert("")}catch(T){console.error(T),alert(": "+T.message)}finally{y(!1)}}},A=T=>{if(!b)return;const D=b.permissions||[];D.includes(T)?j({...b,permissions:D.filter(U=>U!==T)}):j({...b,permissions:[...D,T]})},B=T=>{if(!b)return;const D=b.permissions||[],U=T.map(re=>re.key);if(U.every(re=>D.includes(re)))j({...b,permissions:D.filter(re=>!U.includes(re))});else{const re=D.filter(de=>!U.includes(de));j({...b,permissions:[...re,...U]})}};return a.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)]",children:[x&&a.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-[2px] z-[60] flex items-center justify-center animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] p-6 rounded-2xl shadow-xl flex flex-col items-center gap-4 min-w-[200px]",children:[a.jsx(ft,{className:"animate-spin text-[var(--accent-blue)]",size:32}),a.jsx("span",{className:"text-[var(--text-primary)] font-bold text-base",children:p})]})}),a.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("h1",{className:"text-lg md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(ka,{className:"text-rose-500",size:20})," "]}),a.jsx("p",{className:"text-[10px] md:text-sm text-[var(--text-tertiary)] font-medium",children:"(Permission Control)"})]}),a.jsx("button",{onClick:w,className:"btn-secondary p-2 rounded-xl",children:a.jsx(ft,{size:18,className:u?"animate-spin":""})})]}),a.jsxs("div",{className:"glass-panel p-4 md:p-6 border-l-4 border-l-emerald-500 shrink-0",children:[a.jsxs("h3",{className:"font-bold text-base md:text-lg mb-3 flex items-center gap-2 text-[var(--text-primary)]",children:[a.jsx(c0,{size:18,className:"text-emerald-500"})," "]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end relative",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] uppercase font-bold px-1",children:" (Username)"}),a.jsx("input",{id:"input-new-username",type:"text",className:"input-field w-full",value:N.username,onChange:T=>g({...N,username:T.target.value}),onKeyDown:T=>{(T.key==="Enter"||T.key==="ArrowRight")&&(T.preventDefault(),document.getElementById("input-new-password")?.focus())},placeholder:""})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] uppercase font-bold px-1",children:" (Password)"}),a.jsx("input",{id:"input-new-password",type:"password",className:"input-field w-full",value:N.password,onChange:T=>g({...N,password:T.target.value}),onKeyDown:T=>{T.key==="Enter"||T.key==="ArrowRight"?(T.preventDefault(),document.getElementById("input-new-role")?.focus()):T.key==="ArrowLeft"&&(T.preventDefault(),document.getElementById("input-new-username")?.focus())},placeholder:""})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] uppercase font-bold px-1",children:" (Role)"}),a.jsxs("select",{id:"input-new-role",className:"input-field w-full",value:N.role,onChange:T=>g({...N,role:T.target.value}),onKeyDown:T=>{T.key==="Enter"||T.key==="ArrowRight"?(T.preventDefault(),document.getElementById("btn-add-user")?.focus()):T.key==="ArrowLeft"&&(T.preventDefault(),document.getElementById("input-new-password")?.focus())},children:[a.jsx("option",{value:"BOSS",children:" (BOSS)"}),a.jsx("option",{value:"ADMIN",children:" (ADMIN)"}),a.jsx("option",{value:"EMPLOYEE",children:" (EMPLOYEE)"}),a.jsx("option",{value:"VIEWER",children:" (VIEWER)"})]})]}),a.jsxs("button",{id:"btn-add-user",onClick:R,onKeyDown:T=>{T.key==="ArrowLeft"&&(T.preventDefault(),document.getElementById("input-new-role")?.focus())},className:"btn-primary flex justify-center items-center gap-2",disabled:u,children:[a.jsx(Js,{size:18})," "]})]})]}),a.jsx("div",{className:"glass-panel p-0 overflow-hidden flex-1 flex flex-col",children:a.jsxs("div",{className:"overflow-y-auto flex-1",children:[a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:" (Username)"}),a.jsx("th",{className:"p-4",children:" (Role)"}),a.jsx("th",{className:"p-4 text-center",children:" (Status)"}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:i.length>0?i.map((T,D)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)] transition-colors",children:[a.jsx("td",{className:"p-4 text-[var(--text-primary)] font-bold",children:T.username}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold border ${T.role==="BOSS"?"bg-amber-500/10 text-amber-500 border-amber-500/20":T.role==="ADMIN"?"bg-rose-500/10 text-rose-500 border-rose-500/20":T.role==="EMPLOYEE"?"bg-blue-500/10 text-blue-500 border-blue-500/20":(T.role==="VIEWER","bg-slate-500/10 text-[var(--text-secondary)] border-slate-500/20")}`,children:T.role})}),a.jsx("td",{className:"p-4 text-center",children:T.status==="ACTIVE"?a.jsxs("span",{className:"flex items-center justify-center gap-2 text-emerald-500 font-bold text-xs",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.3)]"})," ACTIVE"]}):a.jsxs("span",{className:"flex items-center justify-center gap-2 text-[var(--text-secondary)] font-bold text-xs",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-500"})," ",T.status||"UNKNOWN"]})}),a.jsx("td",{className:"p-4 text-center flex items-center justify-center gap-2",children:T.username!=="admin"&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{let U=Array.isArray(T.permissions)?[...T.permissions]:[];const V={sales:["sales_entry","sales_report"],purchase:["purchase_entry","purchase_history"],inventory:["inventory_adjust","inventory_stocktake","inventory_valuation","inventory_adjust_history","inventory_stocktake_history"],finance:["finance_expenditure","finance_receivable","finance_payable","finance_income","finance_cost"],analytics:["analytics_sales","analytics_customer","analytics_profit","analytics_turnover"],system:["system_config"],inventory_history:["inventory_adjust_history","inventory_stocktake_history"]};Object.keys(V).forEach(re=>{U.includes(re)&&(U=U.filter(de=>de!==re),V[re].forEach(de=>{U.includes(de)||U.push(de)}))}),j({username:T.username,permissions:U})},className:"p-2 text-[var(--text-tertiary)] hover:text-[var(--accent-blue)] transition-colors",title:"",children:a.jsx(ka,{size:16})}),a.jsx("button",{onClick:()=>v(T.username),className:"p-2 text-[var(--text-tertiary)] hover:text-rose-400 transition-colors",title:"",children:a.jsx(_i,{size:16})})]})})]},D)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"p-20 text-center text-[var(--text-secondary)]",children:u?"...":""})})})]}),a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:i.length>0?i.map((T,D)=>a.jsx("div",{className:"p-6 bg-[var(--bg-primary)] hover:bg-[var(--bg-secondary)] transition-colors border-b border-[var(--border-primary)] last:border-0 shadow-sm",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-lg font-extrabold text-[var(--text-primary)] leading-tight",children:T.username}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`px-2.5 py-0.5 rounded text-[11px] font-bold border ${T.role==="BOSS"?"bg-amber-500/10 text-amber-500 border-amber-500/20":T.role==="ADMIN"?"bg-rose-500/10 text-rose-500 border-rose-500/20":T.role==="EMPLOYEE"?"bg-blue-500/10 text-blue-500 border-blue-500/20":"bg-slate-500/10 text-[var(--text-secondary)] border-slate-500/20"}`,children:T.role}),T.status==="ACTIVE"?a.jsxs("span",{className:"flex items-center gap-1.5 text-emerald-500 font-bold text-[11px]",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," ACTIVE"]}):a.jsxs("span",{className:"flex items-center gap-1.5 text-[var(--text-tertiary)] font-bold text-[11px]",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-300"})," ",T.status||"OFF"]})]})]}),T.username!=="admin"&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{let U=Array.isArray(T.permissions)?[...T.permissions]:[];const V={sales:["sales_entry","sales_report"],purchase:["purchase_entry","purchase_history"],inventory:["inventory_adjust","inventory_stocktake","inventory_valuation","inventory_adjust_history","inventory_stocktake_history"],finance:["finance_expenditure","finance_receivable","finance_payable","finance_income","finance_cost"],analytics:["analytics_sales","analytics_customer","analytics_profit","analytics_turnover"],system:["system_config"],inventory_history:["inventory_adjust_history","inventory_stocktake_history"]};Object.keys(V).forEach(re=>{U.includes(re)&&(U=U.filter(de=>de!==re),V[re].forEach(de=>{U.includes(de)||U.push(de)}))}),j({username:T.username,permissions:U})},className:"w-12 h-12 flex items-center justify-center text-[var(--accent-blue)] bg-[var(--bg-secondary)] rounded-xl active:scale-90 transition-transform shadow-sm",children:a.jsx(ka,{size:22})}),a.jsx("button",{onClick:()=>v(T.username),className:"w-12 h-12 flex items-center justify-center text-rose-500 bg-[var(--bg-secondary)] rounded-xl active:scale-90 transition-transform shadow-sm",children:a.jsx(_i,{size:22})})]})]})},D)):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:u?"...":""})})]})}),b&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-2xl w-full max-w-md overflow-hidden shadow-2xl animate-in fade-in zoom-in duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-[var(--border-primary)] bg-[var(--bg-secondary)]",children:[a.jsxs("h3",{className:"text-xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(ka,{className:"text-[var(--accent-blue)]"}),"  (",b.username,")"]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:" (BOSS )"})]}),a.jsx("div",{className:"p-6 space-y-6 max-h-[65vh] overflow-y-auto custom-scrollbar",children:k.map(T=>{const D=T.items.map(V=>V.key),U=D.every(V=>b.permissions?.includes(V));return D.some(V=>b.permissions?.includes(V)),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-1 cursor-pointer group/title",onClick:()=>B(T.items),children:[a.jsx("h4",{className:"text-xs font-bold text-[var(--text-tertiary)] uppercase tracking-widest flex items-center gap-2 group-hover/title:text-[var(--accent-blue)] transition-colors",children:T.group}),a.jsx("span",{className:"text-[10px] text-[var(--accent-blue)] font-bold opacity-0 group-hover/title:opacity-100 transition-opacity",children:U?"":""})]}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.items.map((V,re)=>{const de=`perm-item-${V.key}`,pe=W=>{if(!["Enter"," ","ArrowDown","ArrowUp","ArrowRight","ArrowLeft"].includes(W.key))return;W.preventDefault();const ge=[];k.forEach(H=>{H.items.forEach(P=>ge.push(P.key))});const oe=ge.indexOf(V.key);if(W.key==="Enter"||W.key===" "){if(A(V.key),oe<ge.length-1){const H=ge[oe+1];document.getElementById(`perm-item-${H}`)?.focus()}}else if(W.key==="ArrowDown"||W.key==="ArrowRight"){if(oe<ge.length-1){const H=ge[oe+1];document.getElementById(`perm-item-${H}`)?.focus()}}else if((W.key==="ArrowUp"||W.key==="ArrowLeft")&&oe>0){const H=ge[oe-1];document.getElementById(`perm-item-${H}`)?.focus()}};return a.jsxs("label",{id:de,tabIndex:"0",onKeyDown:pe,className:`flex items-center gap-3 p-3 rounded-xl border transition-all cursor-pointer group outline-none ring-offset-2 focus:ring-2 focus:ring-[var(--accent-blue)]/50 ${b.permissions?.includes(V.key)?"bg-[var(--bg-secondary)] border-[var(--border-primary)] shadow-sm":"bg-[var(--bg-secondary)] border-[var(--border-primary)] hover:bg-[var(--bg-hover)]"}`,children:[a.jsx("div",{className:`w-5 h-5 rounded-lg border flex items-center justify-center transition-all ${b.permissions?.includes(V.key)?"bg-[var(--accent-blue)] border-[var(--accent-blue)] text-white scale-110":"bg-[var(--bg-primary)] border-[var(--border-primary)] group-hover:border-[var(--accent-blue)]/50"}`,children:b.permissions?.includes(V.key)&&a.jsx(Fs,{size:12,fill:"currentColor"})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:b.permissions?.includes(V.key),onChange:()=>A(V.key)}),a.jsx("span",{className:`text-sm transition-colors ${b.permissions?.includes(V.key)?"text-[var(--text-primary)] font-bold":"text-[var(--text-secondary)]"}`,children:V.label})]},V.key)})})]},T.group)})}),a.jsxs("div",{className:"p-6 border-t border-[var(--border-primary)] flex justify-end gap-3 bg-[var(--bg-secondary)]",children:[a.jsx("button",{onClick:()=>j(null),className:"px-4 py-2 rounded-lg text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-black/5 transition-colors",children:""}),a.jsx("button",{onClick:C,className:"btn-primary px-6 py-2",children:""})]})]})})]})}function JS({user:n,apiUrl:r}){const[i,d]=E.useState(new Date().getFullYear()),[u,f]=E.useState(new Date().getMonth()+1),[x,y]=E.useState(n.username),[p,h]=E.useState([]),[N,g]=E.useState(!1),[b,j]=E.useState(null),[k,R]=E.useState(null),[v,w]=E.useState("LEAVE"),[C,A]=E.useState(""),[B,T]=E.useState(""),[D,U]=E.useState(!1),[V,re]=E.useState({baseSalary:0,attendanceBonus:0,insurance:0,monthlyOffDays:8,bonusTiers:"[]"}),[de,pe]=E.useState(!1),[W,fe]=E.useState(!1),[ge,oe]=E.useState({profile:{joinedDate:"",birthday:"",identityId:"",contact:"",note:""},seniorityText:"",estimatedLeaveDays:0}),[H,P]=E.useState({joinedDate:"",birthday:"",identityId:"",contact:"",note:""}),O={baseSalary:E.useRef(null),attendanceBonus:E.useRef(null),monthlyOffDays:E.useRef(null),insurance:E.useRef(null),bonusTiers:E.useRef(null)},F={editValue:E.useRef(null),editNote:E.useRef(null)};E.useEffect(()=>{n.role==="BOSS"&&Ee(r,"getUsers",{},n.token).then(Se=>h(Se)).catch(Se=>console.error(Se))},[n.role,n.token,r]);const ne=E.useCallback(async()=>{g(!0);try{const G=await Ee(r,"getPayrollData",{year:i,month:u,targetUser:x},n.token);G&&!G.error?(j(G),G.config&&re({...G.config,bonusTiers:JSON.stringify(G.config.bonusTiers||[])})):console.error(G?.error)}catch(G){console.error(G),alert(": "+G.message)}finally{g(!1)}},[i,u,x,n.token]),M=E.useCallback(async()=>{try{const G=await Ee(r,"getEmployeeProfile",{targetUser:x},n.token);G&&!G.error&&(oe(G),P(G.profile))}catch(G){console.error(G)}},[x,n.token,r]),K=async()=>{if(!b||!b.summary){alert("");return}const G=` ${x} 

: $${(b.summary.finalSalary||0).toLocaleString()}
: ${i}${u}`;if(confirm(G)){pe(!0);try{await Ee(r,"savePayrollToExpenditure",{targetUser:x,year:i,month:u,finalSalary:b.summary.finalSalary},n.token),alert("")}catch(Se){console.error("Save payroll failed:",Se),alert(": "+Se.message)}finally{pe(!1)}}};E.useEffect(()=>{ne(),M()},[ne,M]);const ae=async()=>{if(k){pe(!0);try{await Ee(r,"saveDailyRecord",{date:k.date,username:x,type:v,value:v==="WORK"||v==="LEAVE"||v==="SPECIAL_LEAVE"||v==="SICK_LEAVE"?1:Number(C),note:B},n.token),R(null),ne()}catch(G){alert(": "+G.message)}finally{pe(!1)}}},se=async()=>{pe(!0);try{await Ee(r,"saveEmployeeProfile",{username:x,...H},n.token),fe(!1),M()}catch(G){alert(": "+G.message)}finally{pe(!1)}},Ne=async()=>{let G=[];try{G=JSON.parse(V.bonusTiers)}catch{alert(" (JSON Error)");return}pe(!0);try{await Ee(r,"savePayrollSettings",{targetUser:x,baseSalary:Number(V.baseSalary),attendanceBonus:Number(V.attendanceBonus),insurance:Number(V.insurance),monthlyOffDays:Number(V.monthlyOffDays),bonusTiers:G},n.token),U(!1),ne()}catch(Se){alert(": "+Se.message)}finally{pe(!1)}},ye=(G,Se)=>{const _e=["baseSalary","attendanceBonus","monthlyOffDays","insurance","bonusTiers"],Te=_e.indexOf(Se);if(!(Se==="bonusTiers")&&(G.key==="ArrowUp"||G.key==="ArrowDown")&&G.preventDefault(),G.key==="Enter"){if(Se==="bonusTiers"&&!G.ctrlKey)return;G.preventDefault();const z=_e[Te+1];z&&O[z].current&&(O[z].current.focus(),O[z].current.select?.());return}const q={baseSalary:{ArrowRight:"attendanceBonus",ArrowDown:"monthlyOffDays"},attendanceBonus:{ArrowLeft:"baseSalary",ArrowDown:"insurance"},monthlyOffDays:{ArrowRight:"insurance",ArrowUp:"baseSalary",ArrowDown:"bonusTiers"},insurance:{ArrowLeft:"monthlyOffDays",ArrowUp:"attendanceBonus",ArrowDown:"bonusTiers"},bonusTiers:{}}[Se]?.[G.key];q&&O[q].current&&(G.preventDefault(),O[q].current.focus(),O[q].current.select?.())},J=(G,Se)=>{if(G.key==="Enter"&&(G.preventDefault(),Se==="editType"?v==="LOSS"?F.editValue.current?.focus():F.editNote.current?.focus():Se==="editValue"?F.editNote.current?.focus():Se==="editNote"&&ae()),Se==="editType"&&(G.key==="ArrowLeft"||G.key==="ArrowRight")){G.preventDefault();const _e=["WORK","LEAVE","SPECIAL_LEAVE","SICK_LEAVE","LOSS"];let Te=_e.indexOf(v);G.key==="ArrowLeft"&&(Te=(Te-1+_e.length)%_e.length),G.key==="ArrowRight"&&(Te=(Te+1)%_e.length),w(_e[Te])}},me=((G,Se)=>{const _e=new Date(G,Se,0).getDate();return Array.from({length:_e},(Te,ut)=>{const Pe=new Date(G,Se-1,ut+1),q=Pe.getTimezoneOffset()*6e4;return{date:new Date(Pe.getTime()-q).toISOString().split("T")[0],day:ut+1,weekday:["","","","","","",""][Pe.getDay()]}})})(i,u),Ae=b?.summary||{};let xe=0,Be=0,Ge=0,ze=0;me.forEach(G=>{const Se=G.date,_e=b?.dailyData?.[Se]||0,Te=b?.dailyRecords?.[Se]||{};_e>0?xe++:Te.isLeave?Be++:Te.isSpecialLeave?Ge++:Te.isSickLeave?ze++:Be++});const it=G=>{if(!G)return"";try{if(G instanceof Date)return`${G.getMonth()+1}${G.getDate()}`;const Se=String(G),_e=new Date(Se);if(!isNaN(_e.getTime()))return`${_e.getMonth()+1}${_e.getDate()}`;const Te=Se.match(/(\d{1,2})[/-](\d{1,2})/);return Te?`${Te[1]}${Te[2]}`:Se.replace(/[/.-]/g,"")+""}catch(Se){return console.error("Format err",Se),String(G)}};return a.jsxs("div",{className:"p-2 md:p-8 space-y-4 md:space-y-6 max-w-7xl mx-auto pb-24",children:[a.jsxs("div",{className:"md:hidden space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center px-1 mb-6",children:[a.jsxs("h1",{className:"text-xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Dt,{className:"text-[var(--accent-blue)]",size:24})," "]}),a.jsx("button",{onClick:ne,className:"btn-secondary py-1 px-3 text-xs h-7 rounded-full border-[var(--border-primary)] text-[var(--text-secondary)]",children:""})]}),a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg border border-[var(--border-primary)] shadow-sm h-10 px-1 flex items-center gap-1 w-full max-w-[340px] justify-center",children:[a.jsx("select",{value:i,onChange:G=>d(Number(G.target.value)),className:"bg-transparent text-sm font-medium text-[var(--text-primary)] h-8 pl-2 pr-1 outline-none text-center",children:[2025,2026,2027].map(G=>a.jsxs("option",{value:G,children:[G,""]},G))}),a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsx("select",{value:u,onChange:G=>f(Number(G.target.value)),className:"bg-transparent text-sm font-bold text-[var(--accent-blue)] h-8 px-1 outline-none text-center w-16",children:Array.from({length:12},(G,Se)=>Se+1).map(G=>a.jsxs("option",{value:G,children:[G,""]},G))}),n.role==="BOSS"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsxs("select",{value:x,onChange:G=>y(G.target.value),className:"bg-transparent text-sm font-medium text-[var(--text-primary)] h-8 pl-1 pr-2 outline-none text-center min-w-[5rem]",children:[p.map(G=>a.jsx("option",{value:G.username,children:G.username},G.userid)),!p.some(G=>G.username===x)&&a.jsx("option",{value:x,children:x})]})]})]})}),n.role==="BOSS"&&a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg border border-[var(--border-primary)] shadow-sm h-10 px-1 flex items-center gap-1 w-full max-w-[340px] justify-center",children:[a.jsxs("button",{onClick:()=>U(!0),className:"h-8 px-2 text-xs font-medium text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] rounded-md flex items-center gap-1",children:[a.jsx(Ma,{size:14})," "]}),a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsxs("button",{onClick:()=>fe(!0),className:"h-8 px-2 text-xs font-medium text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] rounded-md flex items-center gap-1",children:[a.jsx(Oa,{size:14})," "]}),a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsxs("button",{onClick:K,disabled:de||!b,className:"h-8 px-2 text-xs font-medium text-[var(--accent-blue)] hover:bg-[var(--bg-secondary)] rounded-md flex items-center gap-1 disabled:opacity-50",children:[a.jsx(Dt,{size:14})," "]})]})}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-2 px-1 text-[10px]",children:[a.jsxs("span",{className:"bg-[var(--bg-secondary)] text-[var(--accent-blue)] px-2 py-0.5 rounded border border-[var(--border-primary)]",children:[": ",ge.profile.joinedDate||"-"]}),a.jsxs("span",{className:"bg-[var(--bg-secondary)] text-indigo-500 px-2 py-0.5 rounded border border-[var(--border-primary)]",children:[": ",ge.seniorityText]}),a.jsxs("span",{className:"bg-[var(--bg-secondary)] text-emerald-500 px-2 py-0.5 rounded border border-[var(--border-primary)]",children:[": ",ge.estimatedLeaveDays-(b?.totalSpecialLeaveUsed||0),""]})]})]}),a.jsxs("div",{className:"hidden md:flex glass-panel p-6 flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[var(--accent-blue)] to-indigo-500 flex items-center gap-3",children:[a.jsx(Dt,{})," "]}),a.jsx("p",{className:"text-[var(--text-tertiary)] text-sm mt-1",children:""})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("select",{value:i,onChange:G=>d(Number(G.target.value)),className:"input-field w-24",children:[2025,2026,2027].map(G=>a.jsxs("option",{value:G,children:[G,""]},G))}),a.jsx("select",{value:u,onChange:G=>f(Number(G.target.value)),className:"input-field w-20",children:Array.from({length:12},(G,Se)=>Se+1).map(G=>a.jsxs("option",{value:G,children:[G,""]},G))}),n.role==="BOSS"&&a.jsxs("select",{value:x,onChange:G=>y(G.target.value),className:"input-field w-32",children:[p.map(G=>a.jsx("option",{value:G.username,children:G.username},G.userid)),!p.some(G=>G.username===x)&&a.jsx("option",{value:x,children:x})]}),n.role==="BOSS"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>U(!0),className:"btn-secondary flex items-center gap-2",children:[a.jsx(Ma,{size:16})," "]}),a.jsxs("button",{onClick:()=>fe(!0),className:"btn-secondary flex items-center gap-2 border-[var(--border-primary)] text-emerald-500 hover:bg-[var(--bg-secondary)]",children:[a.jsx(Oa,{size:16})," "]}),a.jsxs("button",{onClick:K,disabled:de||!b,className:"btn-secondary flex items-center gap-2 border-[var(--border-primary)] text-blue-700 hover:bg-[var(--bg-secondary)] disabled:opacity-50",children:[a.jsx(Dt,{size:16})," ",de?"...":""]})]}),a.jsx("button",{onClick:ne,className:"btn-primary",children:""})]})]}),a.jsxs("div",{className:"hidden md:flex flex-wrap gap-4 px-2",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-[var(--bg-secondary)] text-[var(--accent-blue)] px-3 py-1.5 rounded-full text-sm font-medium border border-[var(--border-primary)]",children:[a.jsx(Oa,{size:14})," : ",ge.profile.joinedDate||""]}),a.jsxs("div",{className:"flex items-center gap-2 bg-[var(--bg-secondary)] text-indigo-500 px-3 py-1.5 rounded-full text-sm font-medium border border-[var(--border-primary)]",children:[a.jsx(Ma,{size:14})," : ",ge.seniorityText]}),a.jsxs("div",{className:"flex items-center gap-2 bg-[var(--bg-secondary)] text-emerald-500 px-3 py-1.5 rounded-full text-sm font-medium border border-[var(--border-primary)]",children:[a.jsx(Rd,{size:14})," :  ",ge.estimatedLeaveDays,"  /  ",b?.totalSpecialLeaveUsed||0,"  /  ",ge.estimatedLeaveDays-(b?.totalSpecialLeaveUsed||0)," "]})]}),n.role==="BOSS"&&b?.isBirthdayMonth&&a.jsx("div",{className:"px-1 md:px-2",children:a.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-rose-50 border border-pink-100 rounded-xl p-3 md:p-4 flex items-center gap-3 md:gap-4 animate-bounce-subtle",children:[a.jsx("div",{className:"bg-[var(--bg-primary)] p-1.5 md:p-2 rounded-full shadow-sm text-lg md:text-2xl",children:""}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-rose-700 font-bold text-sm md:text-base",children:[" ",ge.profile.birthday?`(${it(ge.profile.birthday)})`:"",""]}),a.jsx("p",{className:"text-rose-600/80 text-xs md:text-sm",children:""})]})]})}),a.jsxs("div",{className:"grid grid-cols-4 gap-2 px-1 md:hidden",children:[a.jsx($t,{title:"",amount:b?.config?.baseSalary,color:"text-[var(--text-primary)]",isMobile:!0}),a.jsx($t,{title:"",amount:0,color:"text-indigo-600",isMobile:!0}),a.jsx($t,{title:"",amount:Ae.insurance,isDeduction:!0,color:"text-red-600",isMobile:!0,hoverContent:a.jsx("div",{className:"flex flex-col items-end",children:a.jsxs("p",{className:"text-xs font-bold text-emerald-500 font-mono",children:["$",(Ae.bonus||0).toLocaleString()]})})}),a.jsx($t,{title:"",amount:Ae.finalSalary,color:"text-[var(--accent-blue)]",isMobile:!0,className:"bg-[var(--bg-secondary)]/50 border-blue-100"})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-2 px-1 mt-2 md:hidden",children:[a.jsx($t,{title:"",amount:Ae.attendanceBonus,color:"text-yellow-600",isMobile:!0,hoverContent:a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] leading-none mb-0.5",children:""}),a.jsxs("p",{className:"text-xs font-bold text-emerald-500",children:[xe," "]})]})}),a.jsx($t,{title:"",amount:Be,isCurrency:!1,suffix:"",color:"text-[var(--text-secondary)]",isMobile:!0,hoverContent:a.jsxs("div",{className:"flex flex-col items-end gap-1",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] leading-none",children:""}),a.jsxs("p",{className:`text-xs font-bold ${(Ae.leaveCompensation||0)>=0?"text-[var(--accent-blue)]":"text-red-600"}`,children:["$",(Ae.leaveCompensation||0).toLocaleString()]})]})}),a.jsx($t,{title:"",amount:Ge,isCurrency:!1,suffix:"",color:"text-emerald-500",isMobile:!0}),a.jsx($t,{title:"",amount:ze,isCurrency:!1,suffix:"",color:"text-amber-500",isMobile:!0,hoverContent:a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] leading-none",children:""}),a.jsxs("p",{className:"text-xs font-bold text-red-600",children:["-$",(ze*500).toLocaleString()]})]})})]}),a.jsxs("div",{className:"hidden md:grid grid-cols-2 lg:grid-cols-4 gap-4 px-2",children:[a.jsx($t,{title:"",amount:b?.config?.baseSalary,color:"text-[var(--text-primary)]"}),a.jsx($t,{title:"",amount:0,subtext:`: $${(Ae.sales||0).toLocaleString()}`,color:"text-indigo-600"}),a.jsx($t,{title:" ()",amount:Ae.insurance,isDeduction:!0,color:"text-red-600",hoverContent:a.jsx("div",{className:"flex flex-col items-end",children:a.jsxs("p",{className:"text-sm font-bold text-emerald-500 font-mono",children:["$",(Ae.bonus||0).toLocaleString()]})})}),a.jsx($t,{title:"",amount:Ae.finalSalary,color:"text-[var(--accent-blue)]",subtext:"/"})]}),a.jsxs("div",{className:"hidden md:grid grid-cols-2 lg:grid-cols-4 gap-4 mt-4 px-2",children:[a.jsx($t,{title:"",amount:Ae.attendanceBonus,color:"text-yellow-600",hoverContent:a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-medium leading-none mb-1",children:""}),a.jsxs("p",{className:"text-sm font-bold text-emerald-500 font-mono",children:[xe," "]})]})}),a.jsx($t,{title:"",amount:Be,isCurrency:!1,suffix:" ",color:"text-[var(--text-secondary)]",hoverContent:a.jsxs("div",{className:"flex flex-col items-end gap-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-medium leading-none mb-1",children:""}),a.jsxs("p",{className:"text-sm font-bold text-emerald-500 font-mono",children:[b?.config?.monthlyOffDays||0," "]})]}),a.jsxs("div",{className:"w-full border-t border-emerald-100 pt-1 mt-0.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-medium leading-none mb-1",children:""}),a.jsxs("p",{className:`text-sm font-bold font-mono ${(Ae.leaveCompensation||0)>=0?"text-[var(--accent-blue)]":"text-red-600"}`,children:[(Ae.leaveCompensation||0)>=0?"+":"-","$",Math.abs(Ae.leaveCompensation||0).toLocaleString()]})]})]})}),a.jsx($t,{title:"",amount:Ge,isCurrency:!1,suffix:" ",color:"text-emerald-500"}),a.jsx($t,{title:"",amount:ze,isCurrency:!1,suffix:" ",color:"text-amber-500",hoverContent:a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-medium leading-none mb-1",children:""}),a.jsxs("p",{className:"text-sm font-bold text-red-600 font-mono",children:["-$",(ze*500).toLocaleString()]})]})})]}),a.jsx("div",{className:"px-1 md:px-2 mt-2 md:mt-4",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] p-3 rounded-lg border border-red-100 flex justify-between items-center shadow-sm",children:[a.jsx("span",{className:"text-sm text-red-600 font-bold",children:"/"}),a.jsxs("span",{className:"text-lg font-bold text-red-600",children:["-$",(Ae.loss||0).toLocaleString()]})]})}),a.jsx("div",{className:"hidden md:block glass-panel overflow-hidden",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-sm",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-32",children:""}),a.jsx("th",{className:"p-4 w-24 text-center",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4 text-right",children:"/"}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:me.map(G=>{const Se=G.date,_e=b?.dailyData?.[Se]||0,Te=b?.dailyRecords?.[Se]||{},ut=_e>0;let Pe="",q="text-yellow-500 bg-yellow-500/10 px-2 rounded font-medium";ut?(Pe=" ()",q="text-green-400 font-bold"):Te.isLeave?(Pe="",q="text-yellow-500 bg-yellow-500/10 px-2 rounded font-medium"):Te.isSpecialLeave?(Pe="",q="text-emerald-500 bg-emerald-500/10 px-2 rounded font-medium"):Te.isSickLeave&&(Pe="",q="text-amber-500 bg-amber-500/10 px-2 rounded font-medium");const z=G.weekday===""||G.weekday==="";return a.jsxs("tr",{className:`hover:bg-[var(--bg-secondary)] transition-colors ${z?"bg-[var(--bg-secondary)]/50":""}`,children:[a.jsx("td",{className:"p-4 font-mono text-[var(--text-secondary)]",children:Se}),a.jsx("td",{className:`p-4 text-center ${G.weekday===""?"text-red-600":"text-[var(--text-secondary)]"}`,children:G.weekday}),a.jsx("td",{className:"p-4 text-right font-mono text-emerald-500",children:Math.abs(_e)>.01?`$${_e.toLocaleString()}`:"-"}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("span",{className:`text-sm ${q}`,children:Pe})}),a.jsxs("td",{className:"p-4 text-right font-mono text-red-600",children:[Math.abs(Te.loss||0)>.01?`-$${Math.abs(Te.loss).toLocaleString()}`:"",Te.note&&a.jsx("span",{className:"block text-xs text-[var(--text-secondary)]",children:Te.note})]}),a.jsx("td",{className:"p-4 text-center",children:n.role==="BOSS"&&a.jsx("button",{onClick:()=>{R(G),w("LEAVE")},className:"text-xs btn-ghost text-blue-400 hover:text-blue-300",children:""})})]},Se)})})]})}),a.jsx("div",{className:"md:hidden space-y-2",children:me.map(G=>{const Se=G.date,_e=Se.split("-"),Te=`${_e[1]}/${_e[2]}`,ut=b?.dailyData?.[Se]||0,Pe=b?.dailyRecords?.[Se]||{},q=ut>0;let z="",ee="bg-yellow-100 text-yellow-700";q?(z="",ee="bg-green-100 text-green-700"):Pe.isLeave?(z="",ee="bg-yellow-100 text-yellow-700"):Pe.isSpecialLeave?(z="",ee="bg-emerald-100 text-emerald-500"):Pe.isSickLeave&&(z="",ee="bg-amber-100 text-amber-700");const he=G.weekday===""||G.weekday==="";return a.jsxs("div",{className:`bg-[var(--bg-primary)] rounded-lg border border-[var(--border-primary)] p-2 flex items-center shadow-sm text-xs ${he?"bg-[var(--bg-secondary)]/50":""}`,children:[a.jsxs("div",{className:"w-14 items-center flex flex-col justify-center border-r border-[var(--border-primary)] pr-2 mr-2",children:[a.jsx("span",{className:`font-bold text-sm ${G.weekday===""?"text-rose-500":"text-[var(--text-primary)]"}`,children:Te}),a.jsxs("span",{className:`text-[10px] ${G.weekday===""?"text-rose-400":"text-[var(--text-tertiary)]"}`,children:["",G.weekday]})]}),a.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-1 items-center",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-[9px] text-[var(--text-tertiary)] mb-0.5",children:""}),a.jsx("p",{className:`font-bold ${ut>0?"text-emerald-500":"text-slate-300"}`,children:ut>0?`$${ut.toLocaleString()}`:"-"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-[9px] text-[var(--text-tertiary)] mb-0.5",children:""}),a.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold ${ee}`,children:z})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-[9px] text-[var(--text-tertiary)] mb-0.5",children:""}),a.jsx("p",{className:`font-bold ${Pe.loss?"text-red-500":"text-slate-300"}`,children:Pe.loss?`-$${Number(Pe.loss).toLocaleString()}`:"-"})]})]}),a.jsx("div",{className:"pl-2 ml-1 border-l border-[var(--border-primary)]",children:n.role==="BOSS"&&a.jsx("button",{onClick:()=>{R(G),w("LEAVE")},className:"w-8 h-8 flex items-center justify-center rounded-full bg-[var(--bg-secondary)] text-[var(--text-tertiary)] hover:bg-[var(--bg-secondary)] hover:text-blue-500",children:a.jsx("span",{className:"text-[10px]",children:""})})})]},Se)})}),k&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"glass-panel w-full max-w-md p-6 animate-fadeIn",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4",children:[k.date," (",k.weekday,") "]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[var(--text-tertiary)] mb-2",children:" ()"}),a.jsx("div",{className:"flex bg-[var(--bg-secondary)] rounded p-1 border border-[var(--border-primary)] outline-none focus-within:ring-2 focus-within:ring-blue-500/20",tabIndex:"0",onKeyDown:G=>J(G,"editType"),children:[{id:"WORK",label:"",color:"bg-blue-600"},{id:"LEAVE",label:"",color:"bg-yellow-600"},{id:"SPECIAL_LEAVE",label:"",color:"bg-emerald-600"},{id:"SICK_LEAVE",label:"",color:"bg-amber-600"},{id:"LOSS",label:"/",color:"bg-red-600"}].map(G=>a.jsx("button",{className:`flex-1 py-2 rounded text-xs transition-all ${v===G.id?`${G.color} text-white shadow-sm`:"text-[var(--text-secondary)] hover:bg-slate-100"}`,onClick:()=>w(G.id),children:G.label},G.id))})]}),v==="LOSS"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[var(--text-tertiary)] mb-1",children:" ()"}),a.jsx("input",{type:"number",className:"input-field w-full",placeholder:"-100",ref:F.editValue,value:C,onChange:G=>A(G.target.value),onKeyDown:G=>J(G,"editValue")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[var(--text-tertiary)] mb-1",children:""}),a.jsx("input",{type:"text",className:"input-field w-full",placeholder:"...",ref:F.editNote,value:B,onChange:G=>T(G.target.value),onKeyDown:G=>J(G,"editNote")})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:()=>R(null),className:"btn-secondary flex-1",disabled:de,children:""}),a.jsx("button",{onClick:ae,className:"btn-primary flex-1",disabled:de,children:de?"...":""})]}),de&&a.jsx("div",{className:"absolute inset-0 bg-[var(--bg-primary)]/60 backdrop-blur-[2px] z-10 flex items-center justify-center rounded-lg",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-sm font-medium text-[var(--accent-blue)]",children:"..."})]})})]})}),D&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"glass-panel w-full max-w-lg p-6 animate-fadeIn max-h-[90vh] overflow-y-auto",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4",children:[" - ",x]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("input",{type:"number",className:"input-field w-full",ref:O.baseSalary,value:V.baseSalary,onChange:G=>re({...V,baseSalary:G.target.value}),onKeyDown:G=>ye(G,"baseSalary")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("input",{type:"number",className:"input-field w-full",ref:O.attendanceBonus,value:V.attendanceBonus,onChange:G=>re({...V,attendanceBonus:G.target.value}),onKeyDown:G=>ye(G,"attendanceBonus")})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("input",{type:"number",className:"input-field w-full",ref:O.monthlyOffDays,value:V.monthlyOffDays,onChange:G=>re({...V,monthlyOffDays:G.target.value}),onKeyDown:G=>ye(G,"monthlyOffDays")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:" ()"}),a.jsx("input",{type:"number",className:"input-field w-full",ref:O.insurance,value:V.insurance,onChange:G=>re({...V,insurance:G.target.value}),onKeyDown:G=>ye(G,"insurance")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:" (JSON)"}),a.jsx("textarea",{className:"input-field w-full font-mono text-xs h-32",ref:O.bonusTiers,value:V.bonusTiers,onChange:G=>re({...V,bonusTiers:G.target.value}),onKeyDown:G=>ye(G,"bonusTiers"),placeholder:'[{"threshold": 50000, "bonus": 1000}]'}),a.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:': `[{"threshold": , "bonus":  }]` ( Enter )'})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:()=>U(!1),className:"btn-secondary flex-1",disabled:de,children:""}),a.jsx("button",{onClick:Ne,className:"btn-primary flex-1",disabled:de,children:de?"...":""})]}),de&&a.jsx("div",{className:"absolute inset-0 bg-[var(--bg-primary)]/60 backdrop-blur-[2px] z-10 flex items-center justify-center rounded-lg text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),a.jsxs("span",{className:"text-sm font-medium text-[var(--accent-blue)] font-bold",children:["",a.jsx("br",{}),a.jsx("span",{className:"text-[10px] opacity-70",children:""})]})]})})]})}),W&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"glass-panel w-full max-w-lg p-6 animate-fadeIn",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold",children:[" - ",x]}),a.jsx("p",{className:"text-sm text-[var(--text-tertiary)] mt-1",children:""})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"block text-xs text-[var(--text-tertiary)] uppercase font-bold tracking-wider",children:""}),a.jsx("span",{className:"text-lg font-bold text-[var(--accent-blue)]",children:ge.seniorityText})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("input",{type:"date",className:"input-field w-full",value:H.joinedDate,onChange:G=>P({...H,joinedDate:G.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:" (/)"}),a.jsx("input",{type:"text",placeholder:"05/20",className:"input-field w-full",value:H.birthday,onChange:G=>P({...H,birthday:G.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"/"}),a.jsx("input",{type:"text",className:"input-field w-full",placeholder:"A123456789",value:H.identityId,onChange:G=>P({...H,identityId:G.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("input",{type:"text",className:"input-field w-full",placeholder:"0912-345-678",value:H.contact,onChange:G=>P({...H,contact:G.target.value})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("textarea",{className:"input-field w-full h-24",placeholder:"...",value:H.note,onChange:G=>P({...H,note:G.target.value})})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] border border-emerald-100 rounded-lg p-3 flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-emerald-800 font-medium",children:""}),a.jsxs("span",{className:"text-xl font-bold text-emerald-500 font-mono",children:[ge.estimatedLeaveDays," "]})]})]}),a.jsxs("div",{className:"flex gap-3 mt-8",children:[a.jsx("button",{onClick:()=>fe(!1),className:"btn-secondary flex-1",disabled:de,children:""}),a.jsx("button",{onClick:se,className:"btn-primary flex-1",disabled:de,children:de?"...":""})]})]})})]})}function $t({title:n,amount:r,subtext:i,color:d,isDeduction:u,isCurrency:f=!0,suffix:x="",hiddenAmount:y,hiddenTitle:p="",hoverContent:h,isMobile:N,className:g=""}){const[b,j]=E.useState(!1),k=()=>{(N||"ontouchstart"in window)&&j(!b)};return a.jsxs("div",{onClick:k,className:`
                relative overflow-hidden transition-all cursor-default border border-[var(--border-primary)] bg-[var(--bg-primary)]
                ${N?"h-16 p-2 rounded-lg flex flex-col justify-center items-center text-center shadow-sm":"h-28 p-4 rounded-xl flex flex-col justify-between glass-panel hover:border-blue-500"}
                ${g}
            `,onMouseEnter:()=>!N&&j(!0),onMouseLeave:()=>!N&&j(!1),children:[a.jsx("div",{className:`flex justify-between items-start z-10 w-full ${N?"justify-center":""}`,children:a.jsx("span",{className:`${N?"text-[10px]":"text-sm"} text-[var(--text-secondary)] font-bold`,children:n})}),a.jsxs("div",{className:`z-10 w-full ${N?"mt-1":""}`,children:[a.jsxs("span",{className:`${N?"text-xs":"text-2xl"} font-bold tracking-tight ${d}`,children:[u&&"-",f&&"$",(r||0).toLocaleString(),x]}),!N&&i&&a.jsx("p",{className:"text-xs text-[var(--text-secondary)] mt-1",children:i})]}),(y!==void 0||h)&&a.jsx("div",{className:`absolute top-0 right-0 p-1 md:p-2 transition-all duration-300 ${b?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,children:a.jsx("div",{className:"bg-[var(--bg-primary)]/95 backdrop-blur shadow-sm border border-emerald-100 rounded px-1.5 py-0.5 text-right",children:h||a.jsxs(a.Fragment,{children:[p&&a.jsx("p",{className:"text-[8px] md:text-xs text-[var(--text-tertiary)] font-medium",children:p}),a.jsxs("p",{className:"text-xs md:text-sm font-bold text-emerald-500 font-mono",children:[f&&"$",(y||0).toLocaleString()]})]})})}),!N&&a.jsx("div",{className:`absolute -right-2 -bottom-2 w-16 h-16 rounded-full opacity-5 ${d?.replace("text-","bg-")||"bg-slate-400"}`})]})}function FS({user:n,apiUrl:r}){const[i,d]=E.useState([]),[u,f]=E.useState(!1),[x,y]=E.useState({startDate:nt(new Date(Date.now()-10080*60*1e3)),endDate:nt(new Date),username:"",actionType:""}),[p,h]=E.useState(null),N=[{value:"",label:""},{value:"LOGIN",label:""},{value:"LOGOUT",label:""},{value:"PAGE_VIEW",label:""},{value:"DATA_EDIT",label:""},{value:"ERROR",label:""}],g=async()=>{f(!0);try{const C=await Ee(r,"getActivityLogs",x,n.token);d(Array.isArray(C)?C:[])}catch(C){console.error("Failed to fetch activity logs:",C),alert("")}finally{f(!1)}};E.useEffect(()=>{g()},[]);const b=C=>new Date(C).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),j={sales:"",inventory:"",purchase:"",report:"",purchaseHistory:"",adjustHistory:"",valuation:"",stocktake:"",stocktakeHistory:"",receivable:"",payable:"",salesRanking:"",customerRanking:"",profitAnalysis:"",turnoverRate:"",costCalculation:"",expenditureManagement:"",incomeStatement:"",permissionControl:"",payroll:"",activityLog:""},k=C=>j[C]||C||"-",R=C=>{if(!C)return"-";try{const A=JSON.parse(C),B={action:"",page:"",customer:"",totalAmount:"",paymentMethod:"",productCount:"",type:"",product:"",quantity:"",adjustType:"",vendorCount:"",totalPrice:"",itemCount:"",hasDifferences:"",totalDiff:"",note:"",recordId:"ID",vendor:"",targetUser:"",role:"",period:"",date:"",value:""};return Object.entries(A).map(([T,D])=>{const U=B[T]||T,V=typeof D=="object"?JSON.stringify(D):String(D);return`${U}: ${V}`}).join(`
`)}catch{return C}},v=C=>{const A=N.find(B=>B.value===C);return A?A.label:C},w=C=>{switch(C){case"LOGIN":return"bg-emerald-50 text-emerald-600 border-emerald-200";case"LOGOUT":return"bg-rose-50 text-rose-600 border-rose-200";case"PAGE_VIEW":return"bg-blue-50 text-blue-600 border-blue-200";case"DATA_EDIT":return"bg-amber-50 text-amber-600 border-amber-200";case"ERROR":return"bg-rose-100 text-rose-700 border-rose-300";default:return"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] border-[var(--border-primary)]"}};return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 h-[calc(100vh-6rem)] flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-lg md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Pl,{className:"text-[var(--accent-blue)]",size:24}),""]}),a.jsx("p",{className:"text-xs md:text-sm text-[var(--text-secondary)] mt-1",children:""})]}),a.jsx("button",{onClick:g,className:"btn-secondary p-2 rounded-xl",disabled:u,children:a.jsx(ft,{size:18,className:u?"animate-spin":""})})]}),a.jsx("div",{className:"glass-panel p-4 shrink-0",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] font-bold block mb-1",children:""}),a.jsx("input",{type:"date",value:x.startDate,onChange:C=>y({...x,startDate:C.target.value}),className:"input-field w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] font-bold block mb-1",children:""}),a.jsx("input",{type:"date",value:x.endDate,onChange:C=>y({...x,endDate:C.target.value}),className:"input-field w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] font-bold block mb-1",children:""}),a.jsx("select",{value:x.actionType,onChange:C=>y({...x,actionType:C.target.value}),className:"input-field w-full",children:N.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))})]}),(n.role==="BOSS"||n.role==="ADMIN")&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] font-bold block mb-1",children:""}),a.jsx("input",{type:"text",value:x.username,onChange:C=>y({...x,username:C.target.value}),placeholder:"",className:"input-field w-full"})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("button",{onClick:g,className:"btn-primary w-full flex items-center justify-center gap-2",disabled:u,children:[a.jsx(Tt,{size:16}),""]})})]})}),a.jsxs("div",{className:"glass-panel flex-1 overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-[var(--border-primary)]",children:a.jsxs("div",{className:"text-sm text-[var(--text-secondary)]",children:[" ",a.jsx("span",{className:"font-bold text-[var(--accent-blue)]",children:i.length})," "]})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:u?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx(ft,{className:"animate-spin text-[var(--accent-blue)]",size:32})}):i.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[var(--text-tertiary)]",children:[a.jsx(Pl,{size:48,className:"mb-2"}),a.jsx("p",{children:""})]}):a.jsx("div",{className:"divide-y divide-[var(--border-primary)]",children:i.map((C,A)=>a.jsxs("div",{className:"p-4 hover:bg-[var(--bg-secondary)] transition-colors cursor-pointer",onClick:()=>h(p===A?null:A),children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold border ${w(C.actionType)}`,children:v(C.actionType)}),a.jsx("span",{className:"text-sm font-bold text-[var(--text-primary)]",children:C.username}),a.jsx("span",{className:"text-xs text-[var(--text-secondary)]",children:b(C.timestamp)})]}),a.jsxs("div",{className:"text-sm text-[var(--text-secondary)]",children:[": ",a.jsx("span",{className:"font-medium text-[var(--text-primary)]",children:k(C.page)})]})]}),a.jsx("button",{className:"text-[var(--text-tertiary)] hover:text-[var(--text-secondary)]",children:a.jsx(Cv,{size:16})})]}),p===A&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-[var(--border-primary)] space-y-2 text-xs",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)]",children:":"}),a.jsx("span",{className:"ml-2 font-medium text-[var(--text-secondary)]",children:C.screenResolution||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)]",children:"IP :"}),a.jsx("span",{className:"ml-2 font-medium text-[var(--text-secondary)]",children:C.ipAddress||"-"})]})]}),C.details&&a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)]",children:":"}),a.jsx("pre",{className:"mt-1 p-2 bg-[var(--bg-tertiary)] text-[var(--text-secondary)] rounded text-xs overflow-x-auto whitespace-pre-wrap border border-[var(--border-primary)]",children:R(C.details)})]}),C.userAgent&&a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)]",children:"User Agent:"}),a.jsx("div",{className:"mt-1 p-2 bg-[var(--bg-tertiary)] text-[var(--text-secondary)] rounded text-xs break-all border border-[var(--border-primary)]",children:C.userAgent})]})]})]},A))})})]})]})}const Cb=E.createContext({theme:"light",actualTheme:"light",setTheme:()=>{},autoSchedule:{lightStart:"06:00",darkStart:"18:00",enabled:!1},setAutoSchedule:()=>{}}),WS=()=>E.useContext(Cb),ew=({children:n})=>{const[r,i]=E.useState(()=>localStorage.getItem("theme")||"light"),[d,u]=E.useState(()=>{const N=localStorage.getItem("themeSchedule");return N?JSON.parse(N):{lightStart:"06:00",darkStart:"18:00",enabled:!1}}),[f,x]=E.useState("light"),y=()=>{if(r==="auto"&&d.enabled){const N=new Date,g=`${String(N.getHours()).padStart(2,"0")}:${String(N.getMinutes()).padStart(2,"0")}`,b=d.lightStart,j=d.darkStart;return g>=b&&g<j?"light":"dark"}return r==="auto"?"light":r},p=N=>{i(N),localStorage.setItem("theme",N)},h=N=>{u(N),localStorage.setItem("themeSchedule",JSON.stringify(N))};return E.useEffect(()=>{const N=y();x(N),document.documentElement.setAttribute("data-theme",N)},[r,d]),E.useEffect(()=>{if(r!=="auto"||!d.enabled)return;const N=setInterval(()=>{const g=y();g!==f&&(x(g),document.documentElement.setAttribute("data-theme",g))},6e4);return()=>clearInterval(N)},[r,d,f]),a.jsx(Cb.Provider,{value:{theme:r,actualTheme:f,setTheme:p,autoSchedule:d,setAutoSchedule:h},children:n})};function tw(){const{theme:n,actualTheme:r,setTheme:i,autoSchedule:d,setAutoSchedule:u}=WS(),[f,x]=E.useState(!1),y=[{value:"light",label:"",icon:Sp},{value:"dark",label:"",icon:jp},{value:"auto",label:"",icon:Wl}],p=(h,N)=>{u({...d,[h]:N})};return a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 rounded-lg p-1",children:[y.map(({value:h,label:N,icon:g})=>a.jsxs("button",{onClick:()=>i(h),className:`px-3 py-1.5 rounded-md text-xs font-medium transition-all flex items-center gap-1.5 ${n===h?"bg-white dark:bg-slate-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,title:N,children:[a.jsx(g,{size:14}),a.jsx("span",{className:"hidden md:inline",children:N})]},h)),n==="auto"&&a.jsx("button",{onClick:()=>x(!f),className:"p-1.5 rounded-md text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-700 transition-all",title:"",children:a.jsx(ph,{size:14})})]}),f&&n==="auto"&&a.jsxs("div",{className:"absolute top-full right-0 mt-2 w-72 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-xl p-4 z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[a.jsx(Wl,{size:16}),""]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:""}),a.jsx("input",{type:"checkbox",checked:d.enabled,onChange:h=>p("enabled",h.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 block mb-1",children:[a.jsx(Sp,{size:12,className:"inline mr-1"}),""]}),a.jsx("input",{type:"time",value:d.lightStart,onChange:h=>p("lightStart",h.target.value),disabled:!d.enabled,className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 disabled:opacity-50 disabled:cursor-not-allowed"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 block mb-1",children:[a.jsx(jp,{size:12,className:"inline mr-1"}),""]}),a.jsx("input",{type:"time",value:d.darkStart,onChange:h=>p("darkStart",h.target.value),disabled:!d.enabled,className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 disabled:opacity-50 disabled:cursor-not-allowed"})]}),a.jsx("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-700",children:a.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[": ",a.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:r==="light"?"":""})]})})]}),a.jsx("button",{onClick:()=>x(!1),className:"mt-3 w-full px-3 py-2 text-xs font-medium text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-all",children:""})]})]})}class aw{constructor(r={}){this.idleTimeout=r.idleTimeout||1800*1e3,this.onLogout=r.onLogout||(()=>{}),this.onIdle=r.onIdle||(()=>{}),this.onOnline=r.onOnline||(()=>{}),this.onOffline=r.onOffline||(()=>{}),this.idleTimer=null,this.lastActivity=Date.now(),this.isOnline=navigator.onLine,this.init()}init(){this.setupActivityListeners(),this.setupNetworkListeners(),this.resetIdleTimer()}setupActivityListeners(){["mousedown","mousemove","keypress","scroll","touchstart","click"].forEach(i=>{document.addEventListener(i,()=>this.handleActivity(),!0)})}handleActivity(){this.lastActivity=Date.now(),this.resetIdleTimer()}resetIdleTimer(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=setTimeout(()=>{this.handleIdle()},this.idleTimeout)}handleIdle(){console.log("",this.idleTimeout/1e3/60,""),this.onIdle(),this.logout("IDLE_TIMEOUT")}setupNetworkListeners(){window.addEventListener("online",()=>{console.log(""),this.isOnline=!0,this.onOnline()}),window.addEventListener("offline",()=>{console.log(""),this.isOnline=!1,this.onOffline()})}setupBeforeUnloadListener(){window.addEventListener("beforeunload",r=>{})}logout(r="MANUAL"){console.log(":",r),this.cleanup(),this.onLogout(r)}cleanup(){this.idleTimer&&clearTimeout(this.idleTimer)}destroy(){this.cleanup()}checkOnlineStatus(){return this.isOnline}getIdleTime(){return Date.now()-this.lastActivity}keepAlive(){this.handleActivity()}}const lw=({user:n,apiUrl:r,enabled:i=!0})=>{const d=E.useRef([]),u=E.useRef(null),f=async(p,h={})=>{if(!i||!n?.token)return;let N=p,g=h;if(typeof p=="object"&&p!==null&&(N=p.actionType,g={...p},typeof g.details=="string"))try{const j=JSON.parse(g.details);Object.assign(g,j),delete g.details}catch{}const b={username:n.username,actionType:N||"UNKNOWN",page:g.page||window.location.pathname,details:JSON.stringify(g),timestamp:new Date().toISOString(),userAgent:navigator.userAgent,screenResolution:`${window.screen.width}x${window.screen.height}`};d.current.push(b),d.current.length>=10?y():x()},x=()=>{u.current||(u.current=setTimeout(()=>{y()},5e3))},y=async()=>{if(d.current.length===0)return;const p=[...d.current];d.current=[],u.current&&(clearTimeout(u.current),u.current=null);try{await Ee(r,"logActivity",{logs:p},n.token)}catch(h){console.error("Failed to log activity:",h),d.current=[...p,...d.current]}};return E.useEffect(()=>{const p=()=>{if(d.current.length>0){const h=JSON.stringify({action:"logActivity",payload:{logs:d.current},token:n?.token});navigator.sendBeacon(r,h)}};return window.addEventListener("beforeunload",p),()=>{window.removeEventListener("beforeunload",p),y()}},[n?.token,r]),{logActivity:f,flushLogs:y,logLogin:()=>f("LOGIN",{timestamp:new Date().toISOString()}),logLogout:p=>f("LOGOUT",{reason:p}),logPageView:p=>f("PAGE_VIEW",{page:p}),logDataEdit:(p,h)=>f("DATA_EDIT",{action:p,data:h}),logError:p=>f("ERROR",{error:p.message,stack:p.stack})}},rt="https://script.google.com/macros/s/AKfycbzIoBBRytN2Qja-AUSILlXwdAnbwnU6nfil9403HYHXJH_KrvDy3lC9rQ_U8dlP9AIt/exec";console.log("---  ---");console.log("Base URL:","/inventory-system/");rt.includes("YOUR_SCRIPT_ID")?(console.error("  VITE_GAS_API_URL "),console.log(" GitHub Settings -> Secrets ")):console.log(" API URL :",rt);console.log("------------------");const Kl=({label:n,icon:r,active:i,children:d,id:u,openDropdown:f,setOpenDropdown:x})=>{const y=f===u;return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:p=>{p.stopPropagation(),x(y?null:u)},className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-all duration-200 ${i?"bg-blue-50 text-blue-600 border border-blue-200 shadow-sm":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)] hover:text-[var(--text-primary)]"}`,children:[a.jsx(r,{size:18}),a.jsx("span",{className:"font-medium",children:n}),a.jsx(Ra,{size:14,className:`transition-transform duration-300 ${y?"rotate-180":""}`})]}),y&&a.jsx("div",{className:"absolute top-full left-0 mt-2 w-48 bg-[var(--bg-secondary)] backdrop-blur-xl border border-[var(--border-primary)] rounded-xl shadow-2xl py-2 z-[100] animate-in fade-in slide-in-from-top-2 duration-200",onClick:p=>p.stopPropagation(),children:a.jsx("div",{className:"flex flex-col gap-1 px-1",children:d})})]})},Me=({label:n,onClick:r,active:i,icon:d})=>a.jsxs("button",{onClick:r,className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-all flex items-center gap-2 ${i?"text-blue-600 bg-blue-50 font-bold":"text-slate-500 hover:text-slate-900 hover:bg-slate-100"}`,children:[d&&a.jsx(d,{size:14}),n]}),Xl=({label:n,icon:r,children:i})=>{const[d,u]=E.useState(!1);return a.jsxs("div",{className:"border-b border-slate-100 last:border-0 border-l-4 border-l-transparent hover:border-l-blue-200 transition-all",children:[a.jsxs("button",{onClick:f=>{f.stopPropagation(),u(!d)},className:"w-full flex items-center justify-between p-3 text-slate-700 font-medium active:bg-slate-50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[r&&a.jsx(r,{size:18,className:"text-slate-400"}),a.jsx("span",{children:n})]}),a.jsx(Ra,{size:16,className:`text-slate-400 transition-transform duration-300 ${d?"rotate-180":""}`})]}),a.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${d?"grid-rows-[1fr] opacity-100 pb-2":"grid-rows-[0fr] opacity-0"}`,children:a.jsx("div",{className:"overflow-hidden bg-slate-50/50 rounded-lg mx-2 border border-slate-100/50",children:i})})]})};function nw(){const[n,r]=E.useState(null),[i,d]=E.useState("sales"),[u,f]=E.useState(null),[x,y]=E.useState(!1),[p,h]=E.useState(!1),[N,g]=E.useState(null),{logActivity:b,logLogin:j,logLogout:k,logPageView:R}=lw({user:n,apiUrl:rt,enabled:!!n});E.useEffect(()=>{if(n){const T=new aw({idleTimeout:18e5,onLogout:D=>{console.log("Session timeout:",D),k(D),B(),D==="IDLE_TIMEOUT"&&alert(",")},onOffline:()=>{h(!0)},onOnline:()=>{h(!1)}});return g(T),()=>T.destroy()}},[n]),E.useEffect(()=>{const T=sessionStorage.getItem("inventory_user");if(T){const U=JSON.parse(T);U&&typeof U.permissions>"u"?(console.warn("Detected stale user data (no permissions). Clearing session."),sessionStorage.removeItem("inventory_user"),r(null)):r(U)}const D=()=>{f(null),y(!1)};return window.addEventListener("click",D),()=>window.removeEventListener("click",D)},[]),E.useEffect(()=>{n&&i&&R(i)},[i,n]);const v=T=>{if(!n)return!1;if(n.role==="BOSS")return!0;let D=n.permissions;if(typeof D>"u"||D===null)D=[];else if(typeof D=="string")try{D=JSON.parse(D)}catch(U){console.error("Failed to parse permissions string:",U),D=[]}switch(Array.isArray(D)||(D=[]),T){case"sales":return D.includes("sales_entry")||D.includes("sales");case"report":return D.includes("sales_report")||D.includes("sales");case"purchase":return D.includes("purchase_entry")||D.includes("purchase");case"purchaseHistory":return D.includes("purchase_history")||D.includes("purchase");case"inventory":return D.includes("inventory_adjust");case"stocktake":return D.includes("inventory_stocktake");case"valuation":return D.includes("inventory_valuation");case"adjustHistory":return D.includes("inventory_adjust_history")||D.includes("inventory_history");case"stocktakeHistory":return D.includes("inventory_stocktake_history")||D.includes("inventory_history");case"expenditureManagement":return D.includes("finance_expenditure")||D.includes("finance");case"receivable":return D.includes("finance_receivable")||D.includes("finance");case"payable":return D.includes("finance_payable")||D.includes("finance");case"incomeStatement":return D.includes("finance_income")||D.includes("finance");case"costCalculation":return D.includes("finance_cost")||D.includes("finance");case"payroll":return D.includes("finance_payroll")||D.includes("finance");case"salesRanking":return D.includes("analytics_sales")||D.includes("analytics");case"customerRanking":return D.includes("analytics_customer")||D.includes("analytics");case"profitAnalysis":return D.includes("analytics_profit")||D.includes("analytics");case"turnoverRate":return D.includes("analytics_turnover")||D.includes("analytics");case"permissionControl":return D.includes("system_config")||D.includes("system");case"activityLog":return D.includes("system_activity_logs")||D.includes("system")||n.role==="BOSS"||n.role==="ADMIN";default:return!0}},w=T=>{v(T)?(d(T),f(null),y(!1)):console.warn(`Access denied for page: ${T}`)},C=T=>{r(T),sessionStorage.setItem("inventory_user",JSON.stringify(T))},A=Je.useRef(n);E.useEffect(()=>{!A.current&&n&&setTimeout(()=>{j&&j()},500),A.current=n},[n,j]);const B=()=>{k&&k("MANUAL"),r(null),sessionStorage.removeItem("inventory_user"),N&&N.destroy()};return rt.includes("YOUR_SCRIPT_ID")?a.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-red-50 text-red-900",children:[a.jsx(ka,{size:64,className:"mb-4 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold mb-2",children:""}),a.jsx("p",{className:"text-center max-w-md mb-6",children:" `VITE_GAS_API_URL`  GitHub Secrets  Actions "}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-red-200 font-mono text-xs w-full max-w-lg",children:[a.jsx("p",{className:"font-bold mb-2",children:""}),a.jsxs("p",{children:["GAS_API_URL: ",String(rt)]}),a.jsxs("p",{children:["Base URL: ","/inventory-system/"]})]})]}):n?a.jsxs("div",{className:"min-h-screen flex flex-col",children:[p&&a.jsxs("div",{className:"bg-yellow-500 text-white text-center py-2 text-sm font-medium flex items-center justify-center gap-2",children:[a.jsx(x0,{size:16}),","]}),a.jsxs("header",{className:"h-16 border-b border-[var(--border-primary)] bg-[var(--bg-secondary)] backdrop-blur-md flex justify-between items-center px-6 sticky top-0 z-[60]",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("img",{src:"/inventory-system/logo.png",alt:"Logo",className:"h-10 w-auto object-contain"})}),a.jsxs("div",{className:"md:hidden relative",onClick:T=>T.stopPropagation(),children:[a.jsxs("button",{onClick:()=>y(!x),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-all ${x?"bg-blue-50 border-blue-200 text-blue-600 ring-2 ring-blue-100":"bg-[var(--bg-secondary)] border-[var(--border-primary)] text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:[a.jsx("span",{className:"font-bold text-sm",children:""}),a.jsx(Ra,{size:16,className:`transition-transform duration-300 ${x?"rotate-180":""}`})]}),x&&a.jsx("div",{className:"fixed top-16 left-0 right-0 mx-auto mt-2 w-[90%] max-w-md bg-[var(--bg-secondary)] backdrop-blur-xl border border-[var(--border-primary)] rounded-2xl shadow-2xl overflow-y-auto max-h-[80vh] animate-in fade-in slide-in-from-top-4 duration-200 z-[100]",children:a.jsxs("div",{className:"p-2 flex flex-col",children:[(n.role==="BOSS"||v("sales")||v("report"))&&a.jsxs(Xl,{label:"",icon:Ci,children:[v("sales")&&a.jsx(Me,{label:"",icon:Ci,onClick:()=>w("sales"),active:i==="sales"}),v("report")&&a.jsx(Me,{label:"",icon:Qs,onClick:()=>w("report"),active:i==="report"})]}),(n.role==="BOSS"||v("purchase")||v("purchaseHistory"))&&a.jsxs(Xl,{label:"",icon:Di,children:[v("purchase")&&a.jsx(Me,{label:"",icon:Di,onClick:()=>w("purchase"),active:i==="purchase"}),v("purchaseHistory")&&a.jsx(Me,{label:"",icon:Gn,onClick:()=>w("purchaseHistory"),active:i==="purchaseHistory"})]}),(n.role==="BOSS"||v("inventory")||v("stocktake")||v("valuation")||v("adjustHistory")||v("stocktakeHistory"))&&a.jsxs(Xl,{label:"",icon:wi,children:[v("inventory")&&a.jsx(Me,{label:"",icon:wi,onClick:()=>w("inventory"),active:i==="inventory"}),v("stocktake")&&a.jsx(Me,{label:"",icon:Fs,onClick:()=>w("stocktake"),active:i==="stocktake"}),v("valuation")&&a.jsx(Me,{label:"",icon:Dt,onClick:()=>w("valuation"),active:i==="valuation"}),v("adjustHistory")&&a.jsx(Me,{label:"",icon:Qs,onClick:()=>w("adjustHistory"),active:i==="adjustHistory"}),v("stocktakeHistory")&&a.jsx(Me,{label:"",icon:Gn,onClick:()=>w("stocktakeHistory"),active:i==="stocktakeHistory"})]}),(n.role==="BOSS"||v("expenditureManagement"))&&a.jsx(Xl,{label:"",icon:Dt,children:a.jsx(Me,{label:"",icon:Dt,onClick:()=>w("expenditureManagement"),active:i==="expenditureManagement"})}),(n.role==="BOSS"||v("receivable")||v("payable")||v("incomeStatement")||v("costCalculation")||v("payroll"))&&a.jsxs(Xl,{label:"",icon:Sl,children:[v("receivable")&&a.jsx(Me,{label:"",icon:Sl,onClick:()=>w("receivable"),active:i==="receivable"}),v("payable")&&a.jsx(Me,{label:"",icon:Sl,onClick:()=>w("payable"),active:i==="payable"}),v("incomeStatement")&&a.jsx(Me,{label:"",icon:Md,onClick:()=>w("incomeStatement"),active:i==="incomeStatement"}),v("costCalculation")&&a.jsx(Me,{label:"",icon:Dt,onClick:()=>w("costCalculation"),active:i==="costCalculation"}),v("payroll")&&a.jsx(Me,{label:"",icon:Dt,onClick:()=>w("payroll"),active:i==="payroll"})]}),(n.role==="BOSS"||v("salesRanking")||v("customerRanking")||v("profitAnalysis")||v("turnoverRate"))&&a.jsxs(Xl,{label:"",icon:wl,children:[v("salesRanking")&&a.jsx(Me,{label:"",icon:Od,onClick:()=>w("salesRanking"),active:i==="salesRanking"}),v("customerRanking")&&a.jsx(Me,{label:"",icon:zi,onClick:()=>w("customerRanking"),active:i==="customerRanking"}),v("profitAnalysis")&&a.jsx(Me,{label:"",icon:wl,onClick:()=>w("profitAnalysis"),active:i==="profitAnalysis"}),v("turnoverRate")&&a.jsx(Me,{label:"",icon:Pl,onClick:()=>w("turnoverRate"),active:i==="turnoverRate"})]}),(n.role==="BOSS"||v("permissionControl")||v("activityLog"))&&a.jsxs(Xl,{label:"",icon:ka,children:[v("permissionControl")&&a.jsx(Me,{label:"",icon:ka,onClick:()=>w("permissionControl"),active:i==="permissionControl"}),v("activityLog")&&a.jsx(Me,{label:"",icon:Pl,onClick:()=>w("activityLog"),active:i==="activityLog"})]})]})})]}),a.jsxs("nav",{className:"hidden md:flex gap-1",children:[(n.role==="BOSS"||v("sales")||v("report"))&&a.jsxs(Kl,{id:"sales",label:"",icon:Ci,openDropdown:u,setOpenDropdown:f,active:["sales","report"].includes(i),children:[v("sales")&&a.jsx(Me,{label:"",icon:Ci,onClick:()=>w("sales"),active:i==="sales"}),v("report")&&a.jsx(Me,{label:"",icon:Qs,onClick:()=>w("report"),active:i==="report"})]}),(n.role==="BOSS"||v("purchase")||v("purchaseHistory"))&&a.jsxs(Kl,{id:"purchase",label:"",icon:Di,openDropdown:u,setOpenDropdown:f,active:["purchase","purchaseHistory"].includes(i),children:[v("purchase")&&a.jsx(Me,{label:"",icon:Di,onClick:()=>w("purchase"),active:i==="purchase"}),v("purchaseHistory")&&a.jsx(Me,{label:"",icon:Gn,onClick:()=>w("purchaseHistory"),active:i==="purchaseHistory"})]}),(n.role==="BOSS"||v("inventory")||v("stocktake")||v("valuation")||v("adjustHistory")||v("stocktakeHistory"))&&a.jsxs(Kl,{id:"inventory",label:"",icon:wi,openDropdown:u,setOpenDropdown:f,active:["inventory","stocktake","valuation","adjustHistory","stocktakeHistory"].includes(i),children:[v("inventory")&&a.jsx(Me,{label:"",icon:wi,onClick:()=>w("inventory"),active:i==="inventory"}),v("stocktake")&&a.jsx(Me,{label:"",icon:Fs,onClick:()=>w("stocktake"),active:i==="stocktake"}),v("valuation")&&a.jsx(Me,{label:"",icon:Dt,onClick:()=>w("valuation"),active:i==="valuation"}),a.jsx("div",{className:"my-1 border-t border-slate-100"}),v("adjustHistory")&&a.jsx(Me,{label:"",icon:Qs,onClick:()=>w("adjustHistory"),active:i==="adjustHistory"}),v("stocktakeHistory")&&a.jsx(Me,{label:"",icon:Gn,onClick:()=>w("stocktakeHistory"),active:i==="stocktakeHistory"})]}),(n.role==="BOSS"||v("expenditureManagement"))&&a.jsx(Kl,{id:"expenditure",label:"",icon:Dt,openDropdown:u,setOpenDropdown:f,active:i==="expenditureManagement",children:a.jsx(Me,{label:"",icon:Dt,onClick:()=>w("expenditureManagement"),active:i==="expenditureManagement"})}),(n.role==="BOSS"||v("receivable")||v("payable")||v("incomeStatement")||v("costCalculation")||v("payroll"))&&a.jsxs(Kl,{id:"accounting",label:"",icon:Sl,openDropdown:u,setOpenDropdown:f,active:["receivable","payable","incomeStatement","costCalculation","payroll"].includes(i),children:[v("receivable")&&a.jsx(Me,{label:"",icon:Sl,onClick:()=>w("receivable"),active:i==="receivable"}),v("payable")&&a.jsx(Me,{label:"",icon:Sl,onClick:()=>w("payable"),active:i==="payable"}),v("incomeStatement")&&a.jsx(Me,{label:"",icon:Md,onClick:()=>w("incomeStatement"),active:i==="incomeStatement"}),a.jsx("div",{className:"my-1 border-t border-slate-100"}),v("costCalculation")&&a.jsx(Me,{label:"",icon:Dt,onClick:()=>w("costCalculation"),active:i==="costCalculation"}),v("payroll")&&a.jsx(Me,{label:"",icon:Dt,onClick:()=>w("payroll"),active:i==="payroll"})]}),(n.role==="BOSS"||v("salesRanking")||v("customerRanking")||v("profitAnalysis")||v("turnoverRate"))&&a.jsxs(Kl,{id:"analytics",label:"",icon:wl,openDropdown:u,setOpenDropdown:f,active:["salesRanking","customerRanking","profitAnalysis","turnoverRate"].includes(i),children:[v("salesRanking")&&a.jsx(Me,{label:"",icon:Od,onClick:()=>w("salesRanking"),active:i==="salesRanking"}),v("customerRanking")&&a.jsx(Me,{label:"",icon:zi,onClick:()=>w("customerRanking"),active:i==="customerRanking"}),v("profitAnalysis")&&a.jsx(Me,{label:"",icon:wl,onClick:()=>w("profitAnalysis"),active:i==="profitAnalysis"}),v("turnoverRate")&&a.jsx(Me,{label:"",icon:Pl,onClick:()=>w("turnoverRate"),active:i==="turnoverRate"})]}),(n.role==="BOSS"||v("permissionControl")||v("activityLog"))&&a.jsxs(Kl,{id:"system",label:"",icon:ka,openDropdown:u,setOpenDropdown:f,active:["permissionControl","activityLog"].includes(i),children:[v("permissionControl")&&a.jsx(Me,{label:"",icon:ka,onClick:()=>w("permissionControl"),active:i==="permissionControl"}),v("activityLog")&&a.jsx(Me,{label:"",icon:Pl,onClick:()=>w("activityLog"),active:i==="activityLog"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(tw,{}),a.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[a.jsx("span",{className:"text-xs font-bold text-blue-600 dark:text-blue-400 leading-none",children:n.username}),a.jsx("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase font-bold tracking-tighter",children:n.role})]}),a.jsx("button",{onClick:B,className:"w-10 h-10 rounded-xl flex items-center justify-center text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all border border-transparent hover:border-red-100 dark:hover:border-red-800",title:"",children:a.jsx($v,{size:20})})]})]}),a.jsx("main",{className:"flex-1 p-4 md:p-6 overflow-hidden",children:v(i)?a.jsxs(a.Fragment,{children:[i==="sales"&&a.jsx(MS,{user:n,apiUrl:rt,logActivity:b}),i==="inventory"&&a.jsx(RS,{user:n,apiUrl:rt,logActivity:b}),i==="purchase"&&a.jsx(_S,{user:n,apiUrl:rt,logActivity:b}),i==="report"&&a.jsx(zS,{user:n,apiUrl:rt,logActivity:b}),i==="purchaseHistory"&&a.jsx(LS,{user:n,apiUrl:rt,logActivity:b}),i==="adjustHistory"&&a.jsx(BS,{user:n,apiUrl:rt,logActivity:b}),i==="valuation"&&a.jsx(US,{user:n,apiUrl:rt,logActivity:b}),i==="stocktake"&&a.jsx($S,{user:n,apiUrl:rt,logActivity:b}),i==="stocktakeHistory"&&a.jsx(HS,{user:n,apiUrl:rt,logActivity:b}),i==="receivable"&&a.jsx(GS,{user:n,apiUrl:rt,logActivity:b}),i==="payable"&&a.jsx(qS,{user:n,apiUrl:rt,logActivity:b}),i==="salesRanking"&&a.jsx(IS,{user:n,apiUrl:rt,logActivity:b}),i==="customerRanking"&&a.jsx(VS,{user:n,apiUrl:rt,logActivity:b}),i==="profitAnalysis"&&a.jsx(YS,{user:n,apiUrl:rt,logActivity:b}),i==="turnoverRate"&&a.jsx(QS,{user:n,apiUrl:rt,logActivity:b}),i==="costCalculation"&&a.jsx(KS,{user:n,apiUrl:rt,logActivity:b}),i==="expenditureManagement"&&a.jsx(ZS,{user:n,apiUrl:rt,logActivity:b}),i==="incomeStatement"&&a.jsx(XS,{user:n,apiUrl:rt,logActivity:b}),i==="permissionControl"&&a.jsx(PS,{user:n,apiUrl:rt,logActivity:b}),i==="payroll"&&a.jsx(JS,{user:n,apiUrl:rt,logActivity:b}),i==="activityLog"&&a.jsx(FS,{user:n,apiUrl:rt})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[a.jsx(ka,{size:64,className:"mb-4 text-slate-200"}),a.jsx("h2",{className:"text-xl font-bold text-slate-800",children:""}),a.jsx("p",{className:"mt-2",children:""}),a.jsx("button",{onClick:()=>d("sales"),className:"mt-6 px-4 py-2 bg-white hover:bg-slate-50 text-blue-600 rounded-lg transition-colors border border-slate-200 shadow-sm",children:""})]})})]}):a.jsx(m0,{onLogin:C,apiUrl:rt})}function sw(){return a.jsx(ew,{children:a.jsx(nw,{})})}Jg.createRoot(document.getElementById("root")).render(a.jsx(E.StrictMode,{children:a.jsx(sw,{})}));

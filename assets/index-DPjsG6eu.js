(function(){const z=document.createElement("link").relList;if(z&&z.supports&&z.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))m(y);new MutationObserver(y=>{for(const $ of y)if($.type==="childList")for(const q of $.addedNodes)q.tagName==="LINK"&&q.rel==="modulepreload"&&m(q)}).observe(document,{childList:!0,subtree:!0});function g(y){const $={};return y.integrity&&($.integrity=y.integrity),y.referrerPolicy&&($.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?$.credentials="include":y.crossOrigin==="anonymous"?$.credentials="omit":$.credentials="same-origin",$}function m(y){if(y.ep)return;y.ep=!0;const $=g(y);fetch(y.href,$)}})();function Qp(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}var Vi={exports:{}},en={};var sf;function Gp(){if(sf)return en;sf=1;var x=Symbol.for("react.transitional.element"),z=Symbol.for("react.fragment");function g(m,y,$){var q=null;if($!==void 0&&(q=""+$),y.key!==void 0&&(q=""+y.key),"key"in y){$={};for(var ae in y)ae!=="key"&&($[ae]=y[ae])}else $=y;return y=$.ref,{$$typeof:x,type:m,key:q,ref:y!==void 0?y:null,props:$}}return en.Fragment=z,en.jsx=g,en.jsxs=g,en}var nf;function Kp(){return nf||(nf=1,Vi.exports=Gp()),Vi.exports}var a=Kp(),Xi={exports:{}},ge={};var rf;function Vp(){if(rf)return ge;rf=1;var x=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),q=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),w=Symbol.iterator;function A(f){return f===null||typeof f!="object"?null:(f=w&&f[w]||f["@@iterator"],typeof f=="function"?f:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,u={};function d(f,Y,ee){this.props=f,this.context=Y,this.refs=u,this.updater=ee||U}d.prototype.isReactComponent={},d.prototype.setState=function(f,Y){if(typeof f!="object"&&typeof f!="function"&&f!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,f,Y,"setState")},d.prototype.forceUpdate=function(f){this.updater.enqueueForceUpdate(this,f,"forceUpdate")};function O(){}O.prototype=d.prototype;function p(f,Y,ee){this.props=f,this.context=Y,this.refs=u,this.updater=ee||U}var D=p.prototype=new O;D.constructor=p,X(D,d.prototype),D.isPureReactComponent=!0;var k=Array.isArray;function o(){}var T={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function ce(f,Y,ee){var se=ee.ref;return{$$typeof:x,type:f,key:Y,ref:se!==void 0?se:null,props:ee}}function ie(f,Y){return ce(f.type,Y,f.props)}function H(f){return typeof f=="object"&&f!==null&&f.$$typeof===x}function J(f){var Y={"=":"=0",":":"=2"};return"$"+f.replace(/[=:]/g,function(ee){return Y[ee]})}var S=/\/+/g;function K(f,Y){return typeof f=="object"&&f!==null&&f.key!=null?J(""+f.key):Y.toString(36)}function Z(f){switch(f.status){case"fulfilled":return f.value;case"rejected":throw f.reason;default:switch(typeof f.status=="string"?f.then(o,o):(f.status="pending",f.then(function(Y){f.status==="pending"&&(f.status="fulfilled",f.value=Y)},function(Y){f.status==="pending"&&(f.status="rejected",f.reason=Y)})),f.status){case"fulfilled":return f.value;case"rejected":throw f.reason}}throw f}function b(f,Y,ee,se,ve){var pe=typeof f;(pe==="undefined"||pe==="boolean")&&(f=null);var te=!1;if(f===null)te=!0;else switch(pe){case"bigint":case"string":case"number":te=!0;break;case"object":switch(f.$$typeof){case x:case z:te=!0;break;case M:return te=f._init,b(te(f._payload),Y,ee,se,ve)}}if(te)return ve=ve(f),te=se===""?"."+K(f,0):se,k(ve)?(ee="",te!=null&&(ee=te.replace(S,"$&/")+"/"),b(ve,Y,ee,"",function(ze){return ze})):ve!=null&&(H(ve)&&(ve=ie(ve,ee+(ve.key==null||f&&f.key===ve.key?"":(""+ve.key).replace(S,"$&/")+"/")+te)),Y.push(ve)),1;te=0;var xe=se===""?".":se+":";if(k(f))for(var ye=0;ye<f.length;ye++)se=f[ye],pe=xe+K(se,ye),te+=b(se,Y,ee,pe,ve);else if(ye=A(f),typeof ye=="function")for(f=ye.call(f),ye=0;!(se=f.next()).done;)se=se.value,pe=xe+K(se,ye++),te+=b(se,Y,ee,pe,ve);else if(pe==="object"){if(typeof f.then=="function")return b(Z(f),Y,ee,se,ve);throw Y=String(f),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return te}function F(f,Y,ee){if(f==null)return f;var se=[],ve=0;return b(f,se,"","",function(pe){return Y.call(ee,pe,ve++)}),se}function le(f){if(f._status===-1){var Y=f._result;Y=Y(),Y.then(function(ee){(f._status===0||f._status===-1)&&(f._status=1,f._result=ee)},function(ee){(f._status===0||f._status===-1)&&(f._status=2,f._result=ee)}),f._status===-1&&(f._status=0,f._result=Y)}if(f._status===1)return f._result.default;throw f._result}var re=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)},ne={map:F,forEach:function(f,Y,ee){F(f,function(){Y.apply(this,arguments)},ee)},count:function(f){var Y=0;return F(f,function(){Y++}),Y},toArray:function(f){return F(f,function(Y){return Y})||[]},only:function(f){if(!H(f))throw Error("React.Children.only expected to receive a single React element child.");return f}};return ge.Activity=Q,ge.Children=ne,ge.Component=d,ge.Fragment=g,ge.Profiler=y,ge.PureComponent=p,ge.StrictMode=m,ge.Suspense=E,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,ge.__COMPILER_RUNTIME={__proto__:null,c:function(f){return T.H.useMemoCache(f)}},ge.cache=function(f){return function(){return f.apply(null,arguments)}},ge.cacheSignal=function(){return null},ge.cloneElement=function(f,Y,ee){if(f==null)throw Error("The argument must be a React element, but you passed "+f+".");var se=X({},f.props),ve=f.key;if(Y!=null)for(pe in Y.key!==void 0&&(ve=""+Y.key),Y)!V.call(Y,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&Y.ref===void 0||(se[pe]=Y[pe]);var pe=arguments.length-2;if(pe===1)se.children=ee;else if(1<pe){for(var te=Array(pe),xe=0;xe<pe;xe++)te[xe]=arguments[xe+2];se.children=te}return ce(f.type,ve,se)},ge.createContext=function(f){return f={$$typeof:q,_currentValue:f,_currentValue2:f,_threadCount:0,Provider:null,Consumer:null},f.Provider=f,f.Consumer={$$typeof:$,_context:f},f},ge.createElement=function(f,Y,ee){var se,ve={},pe=null;if(Y!=null)for(se in Y.key!==void 0&&(pe=""+Y.key),Y)V.call(Y,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ve[se]=Y[se]);var te=arguments.length-2;if(te===1)ve.children=ee;else if(1<te){for(var xe=Array(te),ye=0;ye<te;ye++)xe[ye]=arguments[ye+2];ve.children=xe}if(f&&f.defaultProps)for(se in te=f.defaultProps,te)ve[se]===void 0&&(ve[se]=te[se]);return ce(f,pe,ve)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(f){return{$$typeof:ae,render:f}},ge.isValidElement=H,ge.lazy=function(f){return{$$typeof:M,_payload:{_status:-1,_result:f},_init:le}},ge.memo=function(f,Y){return{$$typeof:v,type:f,compare:Y===void 0?null:Y}},ge.startTransition=function(f){var Y=T.T,ee={};T.T=ee;try{var se=f(),ve=T.S;ve!==null&&ve(ee,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(o,re)}catch(pe){re(pe)}finally{Y!==null&&ee.types!==null&&(Y.types=ee.types),T.T=Y}},ge.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},ge.use=function(f){return T.H.use(f)},ge.useActionState=function(f,Y,ee){return T.H.useActionState(f,Y,ee)},ge.useCallback=function(f,Y){return T.H.useCallback(f,Y)},ge.useContext=function(f){return T.H.useContext(f)},ge.useDebugValue=function(){},ge.useDeferredValue=function(f,Y){return T.H.useDeferredValue(f,Y)},ge.useEffect=function(f,Y){return T.H.useEffect(f,Y)},ge.useEffectEvent=function(f){return T.H.useEffectEvent(f)},ge.useId=function(){return T.H.useId()},ge.useImperativeHandle=function(f,Y,ee){return T.H.useImperativeHandle(f,Y,ee)},ge.useInsertionEffect=function(f,Y){return T.H.useInsertionEffect(f,Y)},ge.useLayoutEffect=function(f,Y){return T.H.useLayoutEffect(f,Y)},ge.useMemo=function(f,Y){return T.H.useMemo(f,Y)},ge.useOptimistic=function(f,Y){return T.H.useOptimistic(f,Y)},ge.useReducer=function(f,Y,ee){return T.H.useReducer(f,Y,ee)},ge.useRef=function(f){return T.H.useRef(f)},ge.useState=function(f){return T.H.useState(f)},ge.useSyncExternalStore=function(f,Y,ee){return T.H.useSyncExternalStore(f,Y,ee)},ge.useTransition=function(){return T.H.useTransition()},ge.version="19.2.3",ge}var cf;function lo(){return cf||(cf=1,Xi.exports=Vp()),Xi.exports}var j=lo();const Sa=Qp(j);var Zi={exports:{}},tn={},Ji={exports:{}},Wi={};var of;function Xp(){return of||(of=1,(function(x){function z(b,F){var le=b.length;b.push(F);e:for(;0<le;){var re=le-1>>>1,ne=b[re];if(0<y(ne,F))b[re]=F,b[le]=ne,le=re;else break e}}function g(b){return b.length===0?null:b[0]}function m(b){if(b.length===0)return null;var F=b[0],le=b.pop();if(le!==F){b[0]=le;e:for(var re=0,ne=b.length,f=ne>>>1;re<f;){var Y=2*(re+1)-1,ee=b[Y],se=Y+1,ve=b[se];if(0>y(ee,le))se<ne&&0>y(ve,ee)?(b[re]=ve,b[se]=le,re=se):(b[re]=ee,b[Y]=le,re=Y);else if(se<ne&&0>y(ve,le))b[re]=ve,b[se]=le,re=se;else break e}}return F}function y(b,F){var le=b.sortIndex-F.sortIndex;return le!==0?le:b.id-F.id}if(x.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var $=performance;x.unstable_now=function(){return $.now()}}else{var q=Date,ae=q.now();x.unstable_now=function(){return q.now()-ae}}var E=[],v=[],M=1,Q=null,w=3,A=!1,U=!1,X=!1,u=!1,d=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;function D(b){for(var F=g(v);F!==null;){if(F.callback===null)m(v);else if(F.startTime<=b)m(v),F.sortIndex=F.expirationTime,z(E,F);else break;F=g(v)}}function k(b){if(X=!1,D(b),!U)if(g(E)!==null)U=!0,o||(o=!0,J());else{var F=g(v);F!==null&&Z(k,F.startTime-b)}}var o=!1,T=-1,V=5,ce=-1;function ie(){return u?!0:!(x.unstable_now()-ce<V)}function H(){if(u=!1,o){var b=x.unstable_now();ce=b;var F=!0;try{e:{U=!1,X&&(X=!1,O(T),T=-1),A=!0;var le=w;try{t:{for(D(b),Q=g(E);Q!==null&&!(Q.expirationTime>b&&ie());){var re=Q.callback;if(typeof re=="function"){Q.callback=null,w=Q.priorityLevel;var ne=re(Q.expirationTime<=b);if(b=x.unstable_now(),typeof ne=="function"){Q.callback=ne,D(b),F=!0;break t}Q===g(E)&&m(E),D(b)}else m(E);Q=g(E)}if(Q!==null)F=!0;else{var f=g(v);f!==null&&Z(k,f.startTime-b),F=!1}}break e}finally{Q=null,w=le,A=!1}F=void 0}}finally{F?J():o=!1}}}var J;if(typeof p=="function")J=function(){p(H)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,K=S.port2;S.port1.onmessage=H,J=function(){K.postMessage(null)}}else J=function(){d(H,0)};function Z(b,F){T=d(function(){b(x.unstable_now())},F)}x.unstable_IdlePriority=5,x.unstable_ImmediatePriority=1,x.unstable_LowPriority=4,x.unstable_NormalPriority=3,x.unstable_Profiling=null,x.unstable_UserBlockingPriority=2,x.unstable_cancelCallback=function(b){b.callback=null},x.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<b?Math.floor(1e3/b):5},x.unstable_getCurrentPriorityLevel=function(){return w},x.unstable_next=function(b){switch(w){case 1:case 2:case 3:var F=3;break;default:F=w}var le=w;w=F;try{return b()}finally{w=le}},x.unstable_requestPaint=function(){u=!0},x.unstable_runWithPriority=function(b,F){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var le=w;w=b;try{return F()}finally{w=le}},x.unstable_scheduleCallback=function(b,F,le){var re=x.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?re+le:re):le=re,b){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=le+ne,b={id:M++,callback:F,priorityLevel:b,startTime:le,expirationTime:ne,sortIndex:-1},le>re?(b.sortIndex=le,z(v,b),g(E)===null&&b===g(v)&&(X?(O(T),T=-1):X=!0,Z(k,le-re))):(b.sortIndex=ne,z(E,b),U||A||(U=!0,o||(o=!0,J()))),b},x.unstable_shouldYield=ie,x.unstable_wrapCallback=function(b){var F=w;return function(){var le=w;w=F;try{return b.apply(this,arguments)}finally{w=le}}}})(Wi)),Wi}var df;function Zp(){return df||(df=1,Ji.exports=Xp()),Ji.exports}var Fi={exports:{}},gt={};var uf;function Jp(){if(uf)return gt;uf=1;var x=lo();function z(E){var v="https://react.dev/errors/"+E;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var M=2;M<arguments.length;M++)v+="&args[]="+encodeURIComponent(arguments[M])}return"Minified React error #"+E+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function g(){}var m={d:{f:g,r:function(){throw Error(z(522))},D:g,C:g,L:g,m:g,X:g,S:g,M:g},p:0,findDOMNode:null},y=Symbol.for("react.portal");function $(E,v,M){var Q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:y,key:Q==null?null:""+Q,children:E,containerInfo:v,implementation:M}}var q=x.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ae(E,v){if(E==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=m,gt.createPortal=function(E,v){var M=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(z(299));return $(E,v,null,M)},gt.flushSync=function(E){var v=q.T,M=m.p;try{if(q.T=null,m.p=2,E)return E()}finally{q.T=v,m.p=M,m.d.f()}},gt.preconnect=function(E,v){typeof E=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,m.d.C(E,v))},gt.prefetchDNS=function(E){typeof E=="string"&&m.d.D(E)},gt.preinit=function(E,v){if(typeof E=="string"&&v&&typeof v.as=="string"){var M=v.as,Q=ae(M,v.crossOrigin),w=typeof v.integrity=="string"?v.integrity:void 0,A=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;M==="style"?m.d.S(E,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:Q,integrity:w,fetchPriority:A}):M==="script"&&m.d.X(E,{crossOrigin:Q,integrity:w,fetchPriority:A,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},gt.preinitModule=function(E,v){if(typeof E=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var M=ae(v.as,v.crossOrigin);m.d.M(E,{crossOrigin:M,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&m.d.M(E)},gt.preload=function(E,v){if(typeof E=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var M=v.as,Q=ae(M,v.crossOrigin);m.d.L(E,M,{crossOrigin:Q,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},gt.preloadModule=function(E,v){if(typeof E=="string")if(v){var M=ae(v.as,v.crossOrigin);m.d.m(E,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:M,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else m.d.m(E)},gt.requestFormReset=function(E){m.d.r(E)},gt.unstable_batchedUpdates=function(E,v){return E(v)},gt.useFormState=function(E,v,M){return q.H.useFormState(E,v,M)},gt.useFormStatus=function(){return q.H.useHostTransitionStatus()},gt.version="19.2.3",gt}var xf;function Wp(){if(xf)return Fi.exports;xf=1;function x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x)}catch(z){console.error(z)}}return x(),Fi.exports=Jp(),Fi.exports}var ff;function Fp(){if(ff)return tn;ff=1;var x=Zp(),z=lo(),g=Wp();function m(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)t+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function y(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $(e){var t=e,l=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(l=t.return),e=t.return;while(e)}return t.tag===3?l:null}function q(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ae(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function E(e){if($(e)!==e)throw Error(m(188))}function v(e){var t=e.alternate;if(!t){if(t=$(e),t===null)throw Error(m(188));return t!==e?null:e}for(var l=e,s=t;;){var n=l.return;if(n===null)break;var r=n.alternate;if(r===null){if(s=n.return,s!==null){l=s;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===l)return E(n),e;if(r===s)return E(n),t;r=r.sibling}throw Error(m(188))}if(l.return!==s.return)l=n,s=r;else{for(var c=!1,i=n.child;i;){if(i===l){c=!0,l=n,s=r;break}if(i===s){c=!0,s=n,l=r;break}i=i.sibling}if(!c){for(i=r.child;i;){if(i===l){c=!0,l=r,s=n;break}if(i===s){c=!0,s=r,l=n;break}i=i.sibling}if(!c)throw Error(m(189))}}if(l.alternate!==s)throw Error(m(190))}if(l.tag!==3)throw Error(m(188));return l.stateNode.current===l?e:t}function M(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=M(e),t!==null)return t;e=e.sibling}return null}var Q=Object.assign,w=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),p=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),o=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),ce=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function J(e){return e===null||typeof e!="object"?null:(e=H&&e[H]||e["@@iterator"],typeof e=="function"?e:null)}var S=Symbol.for("react.client.reference");function K(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===S?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case X:return"Fragment";case d:return"Profiler";case u:return"StrictMode";case k:return"Suspense";case o:return"SuspenseList";case ce:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case U:return"Portal";case p:return e.displayName||"Context";case O:return(e._context.displayName||"Context")+".Consumer";case D:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case T:return t=e.displayName||null,t!==null?t:K(e.type)||"Memo";case V:t=e._payload,e=e._init;try{return K(e(t))}catch{}}return null}var Z=Array.isArray,b=z.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=g.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},re=[],ne=-1;function f(e){return{current:e}}function Y(e){0>ne||(e.current=re[ne],re[ne]=null,ne--)}function ee(e,t){ne++,re[ne]=e.current,e.current=t}var se=f(null),ve=f(null),pe=f(null),te=f(null);function xe(e,t){switch(ee(pe,t),ee(ve,e),ee(se,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?kx(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=kx(t),e=Cx(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Y(se),ee(se,e)}function ye(){Y(se),Y(ve),Y(pe)}function ze(e){e.memoizedState!==null&&ee(te,e);var t=se.current,l=Cx(t,e.type);t!==l&&(ee(ve,e),ee(se,l))}function ue(e){ve.current===e&&(Y(se),Y(ve)),te.current===e&&(Y(te),Ws._currentValue=le)}var et,ot;function ke(e){if(et===void 0)try{throw Error()}catch(l){var t=l.stack.trim().match(/\n( *(at )?)/);et=t&&t[1]||"",ot=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+et+e+ot}var Jt=!1;function _(e,t){if(!e||Jt)return"";Jt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var P=function(){throw Error()};if(Object.defineProperty(P.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(P,[])}catch(G){var B=G}Reflect.construct(e,[],P)}else{try{P.call()}catch(G){B=G}e.call(P.prototype)}}else{try{throw Error()}catch(G){B=G}(P=e())&&typeof P.catch=="function"&&P.catch(function(){})}}catch(G){if(G&&B&&typeof G.stack=="string")return[G.stack,B.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),c=r[0],i=r[1];if(c&&i){var h=c.split(`
`),R=i.split(`
`);for(n=s=0;s<h.length&&!h[s].includes("DetermineComponentFrameRoot");)s++;for(;n<R.length&&!R[n].includes("DetermineComponentFrameRoot");)n++;if(s===h.length||n===R.length)for(s=h.length-1,n=R.length-1;1<=s&&0<=n&&h[s]!==R[n];)n--;for(;1<=s&&0<=n;s--,n--)if(h[s]!==R[n]){if(s!==1||n!==1)do if(s--,n--,0>n||h[s]!==R[n]){var W=`
`+h[s].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=s&&0<=n);break}}}finally{Jt=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?ke(l):""}function me(e,t){switch(e.tag){case 26:case 27:case 5:return ke(e.type);case 16:return ke("Lazy");case 13:return e.child!==t&&t!==null?ke("Suspense Fallback"):ke("Suspense");case 19:return ke("SuspenseList");case 0:case 15:return _(e.type,!1);case 11:return _(e.type.render,!1);case 1:return _(e.type,!0);case 31:return ke("Activity");default:return""}}function De(e){try{var t="",l=null;do t+=me(e,l),l=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Ne=Object.prototype.hasOwnProperty,tt=x.unstable_scheduleCallback,$e=x.unstable_cancelCallback,We=x.unstable_shouldYield,Re=x.unstable_requestPaint,st=x.unstable_now,Mr=x.unstable_getCurrentPriorityLevel,so=x.unstable_ImmediatePriority,no=x.unstable_UserBlockingPriority,rn=x.unstable_NormalPriority,wf=x.unstable_LowPriority,ro=x.unstable_IdlePriority,Af=x.log,Df=x.unstable_setDisableYieldValue,is=null,zt=null;function wa(e){if(typeof Af=="function"&&Df(e),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(is,e)}catch{}}var Tt=Math.clz32?Math.clz32:Ef,kf=Math.log,Cf=Math.LN2;function Ef(e){return e>>>=0,e===0?32:31-(kf(e)/Cf|0)|0}var cn=256,on=262144,dn=4194304;function Ia(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function un(e,t,l){var s=e.pendingLanes;if(s===0)return 0;var n=0,r=e.suspendedLanes,c=e.pingedLanes;e=e.warmLanes;var i=s&134217727;return i!==0?(s=i&~r,s!==0?n=Ia(s):(c&=i,c!==0?n=Ia(c):l||(l=i&~e,l!==0&&(n=Ia(l))))):(i=s&~r,i!==0?n=Ia(i):c!==0?n=Ia(c):l||(l=s&~e,l!==0&&(n=Ia(l)))),n===0?0:t!==0&&t!==n&&(t&r)===0&&(r=n&-n,l=t&-t,r>=l||r===32&&(l&4194048)!==0)?t:n}function os(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function zf(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function co(){var e=dn;return dn<<=1,(dn&62914560)===0&&(dn=4194304),e}function Or(e){for(var t=[],l=0;31>l;l++)t.push(e);return t}function ds(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Tf(e,t,l,s,n,r){var c=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var i=e.entanglements,h=e.expirationTimes,R=e.hiddenUpdates;for(l=c&~l;0<l;){var W=31-Tt(l),P=1<<W;i[W]=0,h[W]=-1;var B=R[W];if(B!==null)for(R[W]=null,W=0;W<B.length;W++){var G=B[W];G!==null&&(G.lane&=-536870913)}l&=~P}s!==0&&io(e,s,0),r!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=r&~(c&~t))}function io(e,t,l){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Tt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|l&261930}function oo(e,t){var l=e.entangledLanes|=t;for(e=e.entanglements;l;){var s=31-Tt(l),n=1<<s;n&t|e[s]&t&&(e[s]|=t),l&=~n}}function uo(e,t){var l=t&-t;return l=(l&42)!==0?1:Lr(l),(l&(e.suspendedLanes|t))!==0?0:l}function Lr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Rr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function xo(){var e=F.p;return e!==0?e:(e=window.event,e===void 0?32:Fx(e.type))}function fo(e,t){var l=F.p;try{return F.p=e,t()}finally{F.p=l}}var Aa=Math.random().toString(36).slice(2),pt="__reactFiber$"+Aa,St="__reactProps$"+Aa,jl="__reactContainer$"+Aa,Ur="__reactEvents$"+Aa,_f="__reactListeners$"+Aa,Mf="__reactHandles$"+Aa,mo="__reactResources$"+Aa,us="__reactMarker$"+Aa;function Hr(e){delete e[pt],delete e[St],delete e[Ur],delete e[_f],delete e[Mf]}function Nl(e){var t=e[pt];if(t)return t;for(var l=e.parentNode;l;){if(t=l[jl]||l[pt]){if(l=t.alternate,t.child!==null||l!==null&&l.child!==null)for(e=Lx(e);e!==null;){if(l=e[pt])return l;e=Lx(e)}return t}e=l,l=e.parentNode}return null}function Sl(e){if(e=e[pt]||e[jl]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function xs(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(m(33))}function wl(e){var t=e[mo];return t||(t=e[mo]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function xt(e){e[us]=!0}var po=new Set,ho={};function Pa(e,t){Al(e,t),Al(e+"Capture",t)}function Al(e,t){for(ho[e]=t,e=0;e<t.length;e++)po.add(t[e])}var Of=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yo={},vo={};function Lf(e){return Ne.call(vo,e)?!0:Ne.call(yo,e)?!1:Of.test(e)?vo[e]=!0:(yo[e]=!0,!1)}function xn(e,t,l){if(Lf(t))if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+l)}}function fn(e,t,l){if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+l)}}function na(e,t,l,s){if(s===null)e.removeAttribute(l);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(t,l,""+s)}}function qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Rf(e,t,l){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,r=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(c){l=""+c,r.call(this,c)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(c){l=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qr(e){if(!e._valueTracker){var t=bo(e)?"checked":"value";e._valueTracker=Rf(e,t,""+e[t])}}function go(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var l=t.getValue(),s="";return e&&(s=bo(e)?e.checked?"true":"false":e.value),e=s,e!==l?(t.setValue(e),!0):!1}function mn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Uf=/[\n"\\]/g;function $t(e){return e.replace(Uf,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function $r(e,t,l,s,n,r,c,i){e.name="",c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.type=c:e.removeAttribute("type"),t!=null?c==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+qt(t)):e.value!==""+qt(t)&&(e.value=""+qt(t)):c!=="submit"&&c!=="reset"||e.removeAttribute("value"),t!=null?Br(e,c,qt(t)):l!=null?Br(e,c,qt(l)):s!=null&&e.removeAttribute("value"),n==null&&r!=null&&(e.defaultChecked=!!r),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.name=""+qt(i):e.removeAttribute("name")}function jo(e,t,l,s,n,r,c,i){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||l!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){qr(e);return}l=l!=null?""+qt(l):"",t=t!=null?""+qt(t):l,i||t===e.value||(e.value=t),e.defaultValue=t}s=s??n,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=i?e.checked:!!s,e.defaultChecked=!!s,c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.name=c),qr(e)}function Br(e,t,l){t==="number"&&mn(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function Dl(e,t,l,s){if(e=e.options,t){t={};for(var n=0;n<l.length;n++)t["$"+l[n]]=!0;for(l=0;l<e.length;l++)n=t.hasOwnProperty("$"+e[l].value),e[l].selected!==n&&(e[l].selected=n),n&&s&&(e[l].defaultSelected=!0)}else{for(l=""+qt(l),t=null,n=0;n<e.length;n++){if(e[n].value===l){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function No(e,t,l){if(t!=null&&(t=""+qt(t),t!==e.value&&(e.value=t),l==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=l!=null?""+qt(l):""}function So(e,t,l,s){if(t==null){if(s!=null){if(l!=null)throw Error(m(92));if(Z(s)){if(1<s.length)throw Error(m(93));s=s[0]}l=s}l==null&&(l=""),t=l}l=qt(t),e.defaultValue=l,s=e.textContent,s===l&&s!==""&&s!==null&&(e.value=s),qr(e)}function kl(e,t){if(t){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=t;return}}e.textContent=t}var Hf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wo(e,t,l){var s=t.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,l):typeof l!="number"||l===0||Hf.has(t)?t==="float"?e.cssFloat=l:e[t]=(""+l).trim():e[t]=l+"px"}function Ao(e,t,l){if(t!=null&&typeof t!="object")throw Error(m(62));if(e=e.style,l!=null){for(var s in l)!l.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var n in t)s=t[n],t.hasOwnProperty(n)&&l[n]!==s&&wo(e,n,s)}else for(var r in t)t.hasOwnProperty(r)&&wo(e,r,t[r])}function Yr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$f=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pn(e){return $f.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ra(){}var Qr=null;function Gr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Cl=null,El=null;function Do(e){var t=Sl(e);if(t&&(e=t.stateNode)){var l=e[St]||null;e:switch(e=t.stateNode,t.type){case"input":if($r(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),t=l.name,l.type==="radio"&&t!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+$t(""+t)+'"][type="radio"]'),t=0;t<l.length;t++){var s=l[t];if(s!==e&&s.form===e.form){var n=s[St]||null;if(!n)throw Error(m(90));$r(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<l.length;t++)s=l[t],s.form===e.form&&go(s)}break e;case"textarea":No(e,l.value,l.defaultValue);break e;case"select":t=l.value,t!=null&&Dl(e,!!l.multiple,t,!1)}}}var Kr=!1;function ko(e,t,l){if(Kr)return e(t,l);Kr=!0;try{var s=e(t);return s}finally{if(Kr=!1,(Cl!==null||El!==null)&&(ar(),Cl&&(t=Cl,e=El,El=Cl=null,Do(t),e)))for(t=0;t<e.length;t++)Do(e[t])}}function fs(e,t){var l=e.stateNode;if(l===null)return null;var s=l[St]||null;if(s===null)return null;l=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(m(231,t,typeof l));return l}var ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vr=!1;if(ca)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){Vr=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{Vr=!1}var Da=null,Xr=null,hn=null;function Co(){if(hn)return hn;var e,t=Xr,l=t.length,s,n="value"in Da?Da.value:Da.textContent,r=n.length;for(e=0;e<l&&t[e]===n[e];e++);var c=l-e;for(s=1;s<=c&&t[l-s]===n[r-s];s++);return hn=n.slice(e,1<s?1-s:void 0)}function yn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vn(){return!0}function Eo(){return!1}function wt(e){function t(l,s,n,r,c){this._reactName=l,this._targetInst=n,this.type=s,this.nativeEvent=r,this.target=c,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(l=e[i],this[i]=l?l(r):r[i]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?vn:Eo,this.isPropagationStopped=Eo,this}return Q(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=vn)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=vn)},persist:function(){},isPersistent:vn}),t}var el={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bn=wt(el),ps=Q({},el,{view:0,detail:0}),Bf=wt(ps),Zr,Jr,hs,gn=Q({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hs&&(hs&&e.type==="mousemove"?(Zr=e.screenX-hs.screenX,Jr=e.screenY-hs.screenY):Jr=Zr=0,hs=e),Zr)},movementY:function(e){return"movementY"in e?e.movementY:Jr}}),zo=wt(gn),Yf=Q({},gn,{dataTransfer:0}),Qf=wt(Yf),Gf=Q({},ps,{relatedTarget:0}),Wr=wt(Gf),Kf=Q({},el,{animationName:0,elapsedTime:0,pseudoElement:0}),Vf=wt(Kf),Xf=Q({},el,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zf=wt(Xf),Jf=Q({},el,{data:0}),To=wt(Jf),Wf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ff={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},If={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=If[e])?!!t[e]:!1}function Fr(){return Pf}var em=Q({},ps,{key:function(e){if(e.key){var t=Wf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ff[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fr,charCode:function(e){return e.type==="keypress"?yn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tm=wt(em),am=Q({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_o=wt(am),lm=Q({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fr}),sm=wt(lm),nm=Q({},el,{propertyName:0,elapsedTime:0,pseudoElement:0}),rm=wt(nm),cm=Q({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),im=wt(cm),om=Q({},el,{newState:0,oldState:0}),dm=wt(om),um=[9,13,27,32],Ir=ca&&"CompositionEvent"in window,ys=null;ca&&"documentMode"in document&&(ys=document.documentMode);var xm=ca&&"TextEvent"in window&&!ys,Mo=ca&&(!Ir||ys&&8<ys&&11>=ys),Oo=" ",Lo=!1;function Ro(e,t){switch(e){case"keyup":return um.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zl=!1;function fm(e,t){switch(e){case"compositionend":return Uo(t);case"keypress":return t.which!==32?null:(Lo=!0,Oo);case"textInput":return e=t.data,e===Oo&&Lo?null:e;default:return null}}function mm(e,t){if(zl)return e==="compositionend"||!Ir&&Ro(e,t)?(e=Co(),hn=Xr=Da=null,zl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mo&&t.locale!=="ko"?null:t.data;default:return null}}var pm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ho(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pm[e.type]:t==="textarea"}function qo(e,t,l,s){Cl?El?El.push(s):El=[s]:Cl=s,t=or(t,"onChange"),0<t.length&&(l=new bn("onChange","change",null,l,s),e.push({event:l,listeners:t}))}var vs=null,bs=null;function hm(e){jx(e,0)}function jn(e){var t=xs(e);if(go(t))return e}function $o(e,t){if(e==="change")return t}var Bo=!1;if(ca){var Pr;if(ca){var ec="oninput"in document;if(!ec){var Yo=document.createElement("div");Yo.setAttribute("oninput","return;"),ec=typeof Yo.oninput=="function"}Pr=ec}else Pr=!1;Bo=Pr&&(!document.documentMode||9<document.documentMode)}function Qo(){vs&&(vs.detachEvent("onpropertychange",Go),bs=vs=null)}function Go(e){if(e.propertyName==="value"&&jn(bs)){var t=[];qo(t,bs,e,Gr(e)),ko(hm,t)}}function ym(e,t,l){e==="focusin"?(Qo(),vs=t,bs=l,vs.attachEvent("onpropertychange",Go)):e==="focusout"&&Qo()}function vm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jn(bs)}function bm(e,t){if(e==="click")return jn(t)}function gm(e,t){if(e==="input"||e==="change")return jn(t)}function jm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _t=typeof Object.is=="function"?Object.is:jm;function gs(e,t){if(_t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var l=Object.keys(e),s=Object.keys(t);if(l.length!==s.length)return!1;for(s=0;s<l.length;s++){var n=l[s];if(!Ne.call(t,n)||!_t(e[n],t[n]))return!1}return!0}function Ko(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vo(e,t){var l=Ko(e);e=0;for(var s;l;){if(l.nodeType===3){if(s=e+l.textContent.length,e<=t&&s>=t)return{node:l,offset:t-e};e=s}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ko(l)}}function Xo(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Xo(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Zo(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=mn(e.document);t instanceof e.HTMLIFrameElement;){try{var l=typeof t.contentWindow.location.href=="string"}catch{l=!1}if(l)e=t.contentWindow;else break;t=mn(e.document)}return t}function tc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Nm=ca&&"documentMode"in document&&11>=document.documentMode,Tl=null,ac=null,js=null,lc=!1;function Jo(e,t,l){var s=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;lc||Tl==null||Tl!==mn(s)||(s=Tl,"selectionStart"in s&&tc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),js&&gs(js,s)||(js=s,s=or(ac,"onSelect"),0<s.length&&(t=new bn("onSelect","select",null,t,l),e.push({event:t,listeners:s}),t.target=Tl)))}function tl(e,t){var l={};return l[e.toLowerCase()]=t.toLowerCase(),l["Webkit"+e]="webkit"+t,l["Moz"+e]="moz"+t,l}var _l={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionrun:tl("Transition","TransitionRun"),transitionstart:tl("Transition","TransitionStart"),transitioncancel:tl("Transition","TransitionCancel"),transitionend:tl("Transition","TransitionEnd")},sc={},Wo={};ca&&(Wo=document.createElement("div").style,"AnimationEvent"in window||(delete _l.animationend.animation,delete _l.animationiteration.animation,delete _l.animationstart.animation),"TransitionEvent"in window||delete _l.transitionend.transition);function al(e){if(sc[e])return sc[e];if(!_l[e])return e;var t=_l[e],l;for(l in t)if(t.hasOwnProperty(l)&&l in Wo)return sc[e]=t[l];return e}var Fo=al("animationend"),Io=al("animationiteration"),Po=al("animationstart"),Sm=al("transitionrun"),wm=al("transitionstart"),Am=al("transitioncancel"),ed=al("transitionend"),td=new Map,nc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nc.push("scrollEnd");function Wt(e,t){td.set(e,t),Pa(t,[e])}var Nn=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Bt=[],Ml=0,rc=0;function Sn(){for(var e=Ml,t=rc=Ml=0;t<e;){var l=Bt[t];Bt[t++]=null;var s=Bt[t];Bt[t++]=null;var n=Bt[t];Bt[t++]=null;var r=Bt[t];if(Bt[t++]=null,s!==null&&n!==null){var c=s.pending;c===null?n.next=n:(n.next=c.next,c.next=n),s.pending=n}r!==0&&ad(l,n,r)}}function wn(e,t,l,s){Bt[Ml++]=e,Bt[Ml++]=t,Bt[Ml++]=l,Bt[Ml++]=s,rc|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function cc(e,t,l,s){return wn(e,t,l,s),An(e)}function ll(e,t){return wn(e,null,null,t),An(e)}function ad(e,t,l){e.lanes|=l;var s=e.alternate;s!==null&&(s.lanes|=l);for(var n=!1,r=e.return;r!==null;)r.childLanes|=l,s=r.alternate,s!==null&&(s.childLanes|=l),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(n=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,n&&t!==null&&(n=31-Tt(l),e=r.hiddenUpdates,s=e[n],s===null?e[n]=[t]:s.push(t),t.lane=l|536870912),r):null}function An(e){if(50<Qs)throw Qs=0,hi=null,Error(m(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ol={};function Dm(e,t,l,s){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,t,l,s){return new Dm(e,t,l,s)}function ic(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ia(e,t){var l=e.alternate;return l===null?(l=Mt(e.tag,t,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=t,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,t=e.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function ld(e,t){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,t=l.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Dn(e,t,l,s,n,r){var c=0;if(s=e,typeof e=="function")ic(e)&&(c=1);else if(typeof e=="string")c=Tp(e,l,se.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ce:return e=Mt(31,l,t,n),e.elementType=ce,e.lanes=r,e;case X:return sl(l.children,n,r,t);case u:c=8,n|=24;break;case d:return e=Mt(12,l,t,n|2),e.elementType=d,e.lanes=r,e;case k:return e=Mt(13,l,t,n),e.elementType=k,e.lanes=r,e;case o:return e=Mt(19,l,t,n),e.elementType=o,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case p:c=10;break e;case O:c=9;break e;case D:c=11;break e;case T:c=14;break e;case V:c=16,s=null;break e}c=29,l=Error(m(130,e===null?"null":typeof e,"")),s=null}return t=Mt(c,l,t,n),t.elementType=e,t.type=s,t.lanes=r,t}function sl(e,t,l,s){return e=Mt(7,e,s,t),e.lanes=l,e}function oc(e,t,l){return e=Mt(6,e,null,t),e.lanes=l,e}function sd(e){var t=Mt(18,null,null,0);return t.stateNode=e,t}function dc(e,t,l){return t=Mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=l,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var nd=new WeakMap;function Yt(e,t){if(typeof e=="object"&&e!==null){var l=nd.get(e);return l!==void 0?l:(t={value:e,source:t,stack:De(t)},nd.set(e,t),t)}return{value:e,source:t,stack:De(t)}}var Ll=[],Rl=0,kn=null,Ns=0,Qt=[],Gt=0,ka=null,Pt=1,ea="";function oa(e,t){Ll[Rl++]=Ns,Ll[Rl++]=kn,kn=e,Ns=t}function rd(e,t,l){Qt[Gt++]=Pt,Qt[Gt++]=ea,Qt[Gt++]=ka,ka=e;var s=Pt;e=ea;var n=32-Tt(s)-1;s&=~(1<<n),l+=1;var r=32-Tt(t)+n;if(30<r){var c=n-n%5;r=(s&(1<<c)-1).toString(32),s>>=c,n-=c,Pt=1<<32-Tt(t)+n|l<<n|s,ea=r+e}else Pt=1<<r|l<<n|s,ea=e}function uc(e){e.return!==null&&(oa(e,1),rd(e,1,0))}function xc(e){for(;e===kn;)kn=Ll[--Rl],Ll[Rl]=null,Ns=Ll[--Rl],Ll[Rl]=null;for(;e===ka;)ka=Qt[--Gt],Qt[Gt]=null,ea=Qt[--Gt],Qt[Gt]=null,Pt=Qt[--Gt],Qt[Gt]=null}function cd(e,t){Qt[Gt++]=Pt,Qt[Gt++]=ea,Qt[Gt++]=ka,Pt=t.id,ea=t.overflow,ka=e}var ht=null,Xe=null,Me=!1,Ca=null,Kt=!1,fc=Error(m(519));function Ea(e){var t=Error(m(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ss(Yt(t,e)),fc}function id(e){var t=e.stateNode,l=e.type,s=e.memoizedProps;switch(t[pt]=e,t[St]=s,l){case"dialog":Ee("cancel",t),Ee("close",t);break;case"iframe":case"object":case"embed":Ee("load",t);break;case"video":case"audio":for(l=0;l<Ks.length;l++)Ee(Ks[l],t);break;case"source":Ee("error",t);break;case"img":case"image":case"link":Ee("error",t),Ee("load",t);break;case"details":Ee("toggle",t);break;case"input":Ee("invalid",t),jo(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Ee("invalid",t);break;case"textarea":Ee("invalid",t),So(t,s.value,s.defaultValue,s.children)}l=s.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||t.textContent===""+l||s.suppressHydrationWarning===!0||Ax(t.textContent,l)?(s.popover!=null&&(Ee("beforetoggle",t),Ee("toggle",t)),s.onScroll!=null&&Ee("scroll",t),s.onScrollEnd!=null&&Ee("scrollend",t),s.onClick!=null&&(t.onclick=ra),t=!0):t=!1,t||Ea(e,!0)}function od(e){for(ht=e.return;ht;)switch(ht.tag){case 5:case 31:case 13:Kt=!1;return;case 27:case 3:Kt=!0;return;default:ht=ht.return}}function Ul(e){if(e!==ht)return!1;if(!Me)return od(e),Me=!0,!1;var t=e.tag,l;if((l=t!==3&&t!==27)&&((l=t===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||Ti(e.type,e.memoizedProps)),l=!l),l&&Xe&&Ea(e),od(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(m(317));Xe=Ox(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(m(317));Xe=Ox(e)}else t===27?(t=Xe,Qa(e.type)?(e=Ri,Ri=null,Xe=e):Xe=t):Xe=ht?Xt(e.stateNode.nextSibling):null;return!0}function nl(){Xe=ht=null,Me=!1}function mc(){var e=Ca;return e!==null&&(Ct===null?Ct=e:Ct.push.apply(Ct,e),Ca=null),e}function Ss(e){Ca===null?Ca=[e]:Ca.push(e)}var pc=f(null),rl=null,da=null;function za(e,t,l){ee(pc,t._currentValue),t._currentValue=l}function ua(e){e._currentValue=pc.current,Y(pc)}function hc(e,t,l){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===l)break;e=e.return}}function yc(e,t,l,s){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var r=n.dependencies;if(r!==null){var c=n.child;r=r.firstContext;e:for(;r!==null;){var i=r;r=n;for(var h=0;h<t.length;h++)if(i.context===t[h]){r.lanes|=l,i=r.alternate,i!==null&&(i.lanes|=l),hc(r.return,l,e),s||(c=null);break e}r=i.next}}else if(n.tag===18){if(c=n.return,c===null)throw Error(m(341));c.lanes|=l,r=c.alternate,r!==null&&(r.lanes|=l),hc(c,l,e),c=null}else c=n.child;if(c!==null)c.return=n;else for(c=n;c!==null;){if(c===e){c=null;break}if(n=c.sibling,n!==null){n.return=c.return,c=n;break}c=c.return}n=c}}function Hl(e,t,l,s){e=null;for(var n=t,r=!1;n!==null;){if(!r){if((n.flags&524288)!==0)r=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var c=n.alternate;if(c===null)throw Error(m(387));if(c=c.memoizedProps,c!==null){var i=n.type;_t(n.pendingProps.value,c.value)||(e!==null?e.push(i):e=[i])}}else if(n===te.current){if(c=n.alternate,c===null)throw Error(m(387));c.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(Ws):e=[Ws])}n=n.return}e!==null&&yc(t,e,l,s),t.flags|=262144}function Cn(e){for(e=e.firstContext;e!==null;){if(!_t(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function cl(e){rl=e,da=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function yt(e){return dd(rl,e)}function En(e,t){return rl===null&&cl(e),dd(e,t)}function dd(e,t){var l=t._currentValue;if(t={context:t,memoizedValue:l,next:null},da===null){if(e===null)throw Error(m(308));da=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else da=da.next=t;return l}var km=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(l,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(l){return l()})}},Cm=x.unstable_scheduleCallback,Em=x.unstable_NormalPriority,nt={$$typeof:p,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vc(){return{controller:new km,data:new Map,refCount:0}}function ws(e){e.refCount--,e.refCount===0&&Cm(Em,function(){e.controller.abort()})}var As=null,bc=0,ql=0,$l=null;function zm(e,t){if(As===null){var l=As=[];bc=0,ql=Ni(),$l={status:"pending",value:void 0,then:function(s){l.push(s)}}}return bc++,t.then(ud,ud),t}function ud(){if(--bc===0&&As!==null){$l!==null&&($l.status="fulfilled");var e=As;As=null,ql=0,$l=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Tm(e,t){var l=[],s={status:"pending",value:null,reason:null,then:function(n){l.push(n)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var n=0;n<l.length;n++)(0,l[n])(t)},function(n){for(s.status="rejected",s.reason=n,n=0;n<l.length;n++)(0,l[n])(void 0)}),s}var xd=b.S;b.S=function(e,t){Ju=st(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&zm(e,t),xd!==null&&xd(e,t)};var il=f(null);function gc(){var e=il.current;return e!==null?e:Ke.pooledCache}function zn(e,t){t===null?ee(il,il.current):ee(il,t.pool)}function fd(){var e=gc();return e===null?null:{parent:nt._currentValue,pool:e}}var Bl=Error(m(460)),jc=Error(m(474)),Tn=Error(m(542)),_n={then:function(){}};function md(e){return e=e.status,e==="fulfilled"||e==="rejected"}function pd(e,t,l){switch(l=e[l],l===void 0?e.push(t):l!==t&&(t.then(ra,ra),t=l),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,yd(e),e;default:if(typeof t.status=="string")t.then(ra,ra);else{if(e=Ke,e!==null&&100<e.shellSuspendCounter)throw Error(m(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=s}},function(s){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,yd(e),e}throw dl=t,Bl}}function ol(e){try{var t=e._init;return t(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(dl=l,Bl):l}}var dl=null;function hd(){if(dl===null)throw Error(m(459));var e=dl;return dl=null,e}function yd(e){if(e===Bl||e===Tn)throw Error(m(483))}var Yl=null,Ds=0;function Mn(e){var t=Ds;return Ds+=1,Yl===null&&(Yl=[]),pd(Yl,e,t)}function ks(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function On(e,t){throw t.$$typeof===w?Error(m(525)):(e=Object.prototype.toString.call(t),Error(m(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function vd(e){function t(C,N){if(e){var L=C.deletions;L===null?(C.deletions=[N],C.flags|=16):L.push(N)}}function l(C,N){if(!e)return null;for(;N!==null;)t(C,N),N=N.sibling;return null}function s(C){for(var N=new Map;C!==null;)C.key!==null?N.set(C.key,C):N.set(C.index,C),C=C.sibling;return N}function n(C,N){return C=ia(C,N),C.index=0,C.sibling=null,C}function r(C,N,L){return C.index=L,e?(L=C.alternate,L!==null?(L=L.index,L<N?(C.flags|=67108866,N):L):(C.flags|=67108866,N)):(C.flags|=1048576,N)}function c(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function i(C,N,L,I){return N===null||N.tag!==6?(N=oc(L,C.mode,I),N.return=C,N):(N=n(N,L),N.return=C,N)}function h(C,N,L,I){var fe=L.type;return fe===X?W(C,N,L.props.children,I,L.key):N!==null&&(N.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===V&&ol(fe)===N.type)?(N=n(N,L.props),ks(N,L),N.return=C,N):(N=Dn(L.type,L.key,L.props,null,C.mode,I),ks(N,L),N.return=C,N)}function R(C,N,L,I){return N===null||N.tag!==4||N.stateNode.containerInfo!==L.containerInfo||N.stateNode.implementation!==L.implementation?(N=dc(L,C.mode,I),N.return=C,N):(N=n(N,L.children||[]),N.return=C,N)}function W(C,N,L,I,fe){return N===null||N.tag!==7?(N=sl(L,C.mode,I,fe),N.return=C,N):(N=n(N,L),N.return=C,N)}function P(C,N,L){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=oc(""+N,C.mode,L),N.return=C,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case A:return L=Dn(N.type,N.key,N.props,null,C.mode,L),ks(L,N),L.return=C,L;case U:return N=dc(N,C.mode,L),N.return=C,N;case V:return N=ol(N),P(C,N,L)}if(Z(N)||J(N))return N=sl(N,C.mode,L,null),N.return=C,N;if(typeof N.then=="function")return P(C,Mn(N),L);if(N.$$typeof===p)return P(C,En(C,N),L);On(C,N)}return null}function B(C,N,L,I){var fe=N!==null?N.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return fe!==null?null:i(C,N,""+L,I);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case A:return L.key===fe?h(C,N,L,I):null;case U:return L.key===fe?R(C,N,L,I):null;case V:return L=ol(L),B(C,N,L,I)}if(Z(L)||J(L))return fe!==null?null:W(C,N,L,I,null);if(typeof L.then=="function")return B(C,N,Mn(L),I);if(L.$$typeof===p)return B(C,N,En(C,L),I);On(C,L)}return null}function G(C,N,L,I,fe){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return C=C.get(L)||null,i(N,C,""+I,fe);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case A:return C=C.get(I.key===null?L:I.key)||null,h(N,C,I,fe);case U:return C=C.get(I.key===null?L:I.key)||null,R(N,C,I,fe);case V:return I=ol(I),G(C,N,L,I,fe)}if(Z(I)||J(I))return C=C.get(L)||null,W(N,C,I,fe,null);if(typeof I.then=="function")return G(C,N,L,Mn(I),fe);if(I.$$typeof===p)return G(C,N,L,En(N,I),fe);On(N,I)}return null}function oe(C,N,L,I){for(var fe=null,Oe=null,de=N,Ae=N=0,_e=null;de!==null&&Ae<L.length;Ae++){de.index>Ae?(_e=de,de=null):_e=de.sibling;var Le=B(C,de,L[Ae],I);if(Le===null){de===null&&(de=_e);break}e&&de&&Le.alternate===null&&t(C,de),N=r(Le,N,Ae),Oe===null?fe=Le:Oe.sibling=Le,Oe=Le,de=_e}if(Ae===L.length)return l(C,de),Me&&oa(C,Ae),fe;if(de===null){for(;Ae<L.length;Ae++)de=P(C,L[Ae],I),de!==null&&(N=r(de,N,Ae),Oe===null?fe=de:Oe.sibling=de,Oe=de);return Me&&oa(C,Ae),fe}for(de=s(de);Ae<L.length;Ae++)_e=G(de,C,Ae,L[Ae],I),_e!==null&&(e&&_e.alternate!==null&&de.delete(_e.key===null?Ae:_e.key),N=r(_e,N,Ae),Oe===null?fe=_e:Oe.sibling=_e,Oe=_e);return e&&de.forEach(function(Za){return t(C,Za)}),Me&&oa(C,Ae),fe}function he(C,N,L,I){if(L==null)throw Error(m(151));for(var fe=null,Oe=null,de=N,Ae=N=0,_e=null,Le=L.next();de!==null&&!Le.done;Ae++,Le=L.next()){de.index>Ae?(_e=de,de=null):_e=de.sibling;var Za=B(C,de,Le.value,I);if(Za===null){de===null&&(de=_e);break}e&&de&&Za.alternate===null&&t(C,de),N=r(Za,N,Ae),Oe===null?fe=Za:Oe.sibling=Za,Oe=Za,de=_e}if(Le.done)return l(C,de),Me&&oa(C,Ae),fe;if(de===null){for(;!Le.done;Ae++,Le=L.next())Le=P(C,Le.value,I),Le!==null&&(N=r(Le,N,Ae),Oe===null?fe=Le:Oe.sibling=Le,Oe=Le);return Me&&oa(C,Ae),fe}for(de=s(de);!Le.done;Ae++,Le=L.next())Le=G(de,C,Ae,Le.value,I),Le!==null&&(e&&Le.alternate!==null&&de.delete(Le.key===null?Ae:Le.key),N=r(Le,N,Ae),Oe===null?fe=Le:Oe.sibling=Le,Oe=Le);return e&&de.forEach(function(Yp){return t(C,Yp)}),Me&&oa(C,Ae),fe}function Qe(C,N,L,I){if(typeof L=="object"&&L!==null&&L.type===X&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case A:e:{for(var fe=L.key;N!==null;){if(N.key===fe){if(fe=L.type,fe===X){if(N.tag===7){l(C,N.sibling),I=n(N,L.props.children),I.return=C,C=I;break e}}else if(N.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===V&&ol(fe)===N.type){l(C,N.sibling),I=n(N,L.props),ks(I,L),I.return=C,C=I;break e}l(C,N);break}else t(C,N);N=N.sibling}L.type===X?(I=sl(L.props.children,C.mode,I,L.key),I.return=C,C=I):(I=Dn(L.type,L.key,L.props,null,C.mode,I),ks(I,L),I.return=C,C=I)}return c(C);case U:e:{for(fe=L.key;N!==null;){if(N.key===fe)if(N.tag===4&&N.stateNode.containerInfo===L.containerInfo&&N.stateNode.implementation===L.implementation){l(C,N.sibling),I=n(N,L.children||[]),I.return=C,C=I;break e}else{l(C,N);break}else t(C,N);N=N.sibling}I=dc(L,C.mode,I),I.return=C,C=I}return c(C);case V:return L=ol(L),Qe(C,N,L,I)}if(Z(L))return oe(C,N,L,I);if(J(L)){if(fe=J(L),typeof fe!="function")throw Error(m(150));return L=fe.call(L),he(C,N,L,I)}if(typeof L.then=="function")return Qe(C,N,Mn(L),I);if(L.$$typeof===p)return Qe(C,N,En(C,L),I);On(C,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,N!==null&&N.tag===6?(l(C,N.sibling),I=n(N,L),I.return=C,C=I):(l(C,N),I=oc(L,C.mode,I),I.return=C,C=I),c(C)):l(C,N)}return function(C,N,L,I){try{Ds=0;var fe=Qe(C,N,L,I);return Yl=null,fe}catch(de){if(de===Bl||de===Tn)throw de;var Oe=Mt(29,de,null,C.mode);return Oe.lanes=I,Oe.return=C,Oe}}}var ul=vd(!0),bd=vd(!1),Ta=!1;function Nc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _a(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ma(e,t,l){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ue&2)!==0){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,t=An(e),ad(e,null,l),t}return wn(e,s,t,l),An(e)}function Cs(e,t,l){if(t=t.updateQueue,t!==null&&(t=t.shared,(l&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,l|=s,t.lanes=l,oo(e,l)}}function wc(e,t){var l=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,l===s)){var n=null,r=null;if(l=l.firstBaseUpdate,l!==null){do{var c={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};r===null?n=r=c:r=r.next=c,l=l.next}while(l!==null);r===null?n=r=t:r=r.next=t}else n=r=t;l={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=t:e.next=t,l.lastBaseUpdate=t}var Ac=!1;function Es(){if(Ac){var e=$l;if(e!==null)throw e}}function zs(e,t,l,s){Ac=!1;var n=e.updateQueue;Ta=!1;var r=n.firstBaseUpdate,c=n.lastBaseUpdate,i=n.shared.pending;if(i!==null){n.shared.pending=null;var h=i,R=h.next;h.next=null,c===null?r=R:c.next=R,c=h;var W=e.alternate;W!==null&&(W=W.updateQueue,i=W.lastBaseUpdate,i!==c&&(i===null?W.firstBaseUpdate=R:i.next=R,W.lastBaseUpdate=h))}if(r!==null){var P=n.baseState;c=0,W=R=h=null,i=r;do{var B=i.lane&-536870913,G=B!==i.lane;if(G?(Te&B)===B:(s&B)===B){B!==0&&B===ql&&(Ac=!0),W!==null&&(W=W.next={lane:0,tag:i.tag,payload:i.payload,callback:null,next:null});e:{var oe=e,he=i;B=t;var Qe=l;switch(he.tag){case 1:if(oe=he.payload,typeof oe=="function"){P=oe.call(Qe,P,B);break e}P=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=he.payload,B=typeof oe=="function"?oe.call(Qe,P,B):oe,B==null)break e;P=Q({},P,B);break e;case 2:Ta=!0}}B=i.callback,B!==null&&(e.flags|=64,G&&(e.flags|=8192),G=n.callbacks,G===null?n.callbacks=[B]:G.push(B))}else G={lane:B,tag:i.tag,payload:i.payload,callback:i.callback,next:null},W===null?(R=W=G,h=P):W=W.next=G,c|=B;if(i=i.next,i===null){if(i=n.shared.pending,i===null)break;G=i,i=G.next,G.next=null,n.lastBaseUpdate=G,n.shared.pending=null}}while(!0);W===null&&(h=P),n.baseState=h,n.firstBaseUpdate=R,n.lastBaseUpdate=W,r===null&&(n.shared.lanes=0),Ha|=c,e.lanes=c,e.memoizedState=P}}function gd(e,t){if(typeof e!="function")throw Error(m(191,e));e.call(t)}function jd(e,t){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)gd(l[e],t)}var Ql=f(null),Ln=f(0);function Nd(e,t){e=ga,ee(Ln,e),ee(Ql,t),ga=e|t.baseLanes}function Dc(){ee(Ln,ga),ee(Ql,Ql.current)}function kc(){ga=Ln.current,Y(Ql),Y(Ln)}var Ot=f(null),Vt=null;function Oa(e){var t=e.alternate;ee(at,at.current&1),ee(Ot,e),Vt===null&&(t===null||Ql.current!==null||t.memoizedState!==null)&&(Vt=e)}function Cc(e){ee(at,at.current),ee(Ot,e),Vt===null&&(Vt=e)}function Sd(e){e.tag===22?(ee(at,at.current),ee(Ot,e),Vt===null&&(Vt=e)):La()}function La(){ee(at,at.current),ee(Ot,Ot.current)}function Lt(e){Y(Ot),Vt===e&&(Vt=null),Y(at)}var at=f(0);function Rn(e){for(var t=e;t!==null;){if(t.tag===13){var l=t.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Oi(l)||Li(l)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xa=0,Se=null,Be=null,rt=null,Un=!1,Gl=!1,xl=!1,Hn=0,Ts=0,Kl=null,_m=0;function Ie(){throw Error(m(321))}function Ec(e,t){if(t===null)return!1;for(var l=0;l<t.length&&l<e.length;l++)if(!_t(e[l],t[l]))return!1;return!0}function zc(e,t,l,s,n,r){return xa=r,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,b.H=e===null||e.memoizedState===null?ru:Kc,xl=!1,r=l(s,n),xl=!1,Gl&&(r=Ad(t,l,s,n)),wd(e),r}function wd(e){b.H=Os;var t=Be!==null&&Be.next!==null;if(xa=0,rt=Be=Se=null,Un=!1,Ts=0,Kl=null,t)throw Error(m(300));e===null||ct||(e=e.dependencies,e!==null&&Cn(e)&&(ct=!0))}function Ad(e,t,l,s){Se=e;var n=0;do{if(Gl&&(Kl=null),Ts=0,Gl=!1,25<=n)throw Error(m(301));if(n+=1,rt=Be=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}b.H=cu,r=t(l,s)}while(Gl);return r}function Mm(){var e=b.H,t=e.useState()[0];return t=typeof t.then=="function"?_s(t):t,e=e.useState()[0],(Be!==null?Be.memoizedState:null)!==e&&(Se.flags|=1024),t}function Tc(){var e=Hn!==0;return Hn=0,e}function _c(e,t,l){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l}function Mc(e){if(Un){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Un=!1}xa=0,rt=Be=Se=null,Gl=!1,Ts=Hn=0,Kl=null}function Nt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Se.memoizedState=rt=e:rt=rt.next=e,rt}function lt(){if(Be===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=rt===null?Se.memoizedState:rt.next;if(t!==null)rt=t,Be=e;else{if(e===null)throw Se.alternate===null?Error(m(467)):Error(m(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},rt===null?Se.memoizedState=rt=e:rt=rt.next=e}return rt}function qn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _s(e){var t=Ts;return Ts+=1,Kl===null&&(Kl=[]),e=pd(Kl,e,t),t=Se,(rt===null?t.memoizedState:rt.next)===null&&(t=t.alternate,b.H=t===null||t.memoizedState===null?ru:Kc),e}function $n(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return _s(e);if(e.$$typeof===p)return yt(e)}throw Error(m(438,String(e)))}function Oc(e){var t=null,l=Se.updateQueue;if(l!==null&&(t=l.memoCache),t==null){var s=Se.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),l===null&&(l=qn(),Se.updateQueue=l),l.memoCache=t,l=t.data[t.index],l===void 0)for(l=t.data[t.index]=Array(e),s=0;s<e;s++)l[s]=ie;return t.index++,l}function fa(e,t){return typeof t=="function"?t(e):t}function Bn(e){var t=lt();return Lc(t,Be,e)}function Lc(e,t,l){var s=e.queue;if(s===null)throw Error(m(311));s.lastRenderedReducer=l;var n=e.baseQueue,r=s.pending;if(r!==null){if(n!==null){var c=n.next;n.next=r.next,r.next=c}t.baseQueue=n=r,s.pending=null}if(r=e.baseState,n===null)e.memoizedState=r;else{t=n.next;var i=c=null,h=null,R=t,W=!1;do{var P=R.lane&-536870913;if(P!==R.lane?(Te&P)===P:(xa&P)===P){var B=R.revertLane;if(B===0)h!==null&&(h=h.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),P===ql&&(W=!0);else if((xa&B)===B){R=R.next,B===ql&&(W=!0);continue}else P={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},h===null?(i=h=P,c=r):h=h.next=P,Se.lanes|=B,Ha|=B;P=R.action,xl&&l(r,P),r=R.hasEagerState?R.eagerState:l(r,P)}else B={lane:P,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},h===null?(i=h=B,c=r):h=h.next=B,Se.lanes|=P,Ha|=P;R=R.next}while(R!==null&&R!==t);if(h===null?c=r:h.next=i,!_t(r,e.memoizedState)&&(ct=!0,W&&(l=$l,l!==null)))throw l;e.memoizedState=r,e.baseState=c,e.baseQueue=h,s.lastRenderedState=r}return n===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Rc(e){var t=lt(),l=t.queue;if(l===null)throw Error(m(311));l.lastRenderedReducer=e;var s=l.dispatch,n=l.pending,r=t.memoizedState;if(n!==null){l.pending=null;var c=n=n.next;do r=e(r,c.action),c=c.next;while(c!==n);_t(r,t.memoizedState)||(ct=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),l.lastRenderedState=r}return[r,s]}function Dd(e,t,l){var s=Se,n=lt(),r=Me;if(r){if(l===void 0)throw Error(m(407));l=l()}else l=t();var c=!_t((Be||n).memoizedState,l);if(c&&(n.memoizedState=l,ct=!0),n=n.queue,qc(Ed.bind(null,s,n,e),[e]),n.getSnapshot!==t||c||rt!==null&&rt.memoizedState.tag&1){if(s.flags|=2048,Vl(9,{destroy:void 0},Cd.bind(null,s,n,l,t),null),Ke===null)throw Error(m(349));r||(xa&127)!==0||kd(s,t,l)}return l}function kd(e,t,l){e.flags|=16384,e={getSnapshot:t,value:l},t=Se.updateQueue,t===null?(t=qn(),Se.updateQueue=t,t.stores=[e]):(l=t.stores,l===null?t.stores=[e]:l.push(e))}function Cd(e,t,l,s){t.value=l,t.getSnapshot=s,zd(t)&&Td(e)}function Ed(e,t,l){return l(function(){zd(t)&&Td(e)})}function zd(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!_t(e,l)}catch{return!0}}function Td(e){var t=ll(e,2);t!==null&&Et(t,e,2)}function Uc(e){var t=Nt();if(typeof e=="function"){var l=e;if(e=l(),xl){wa(!0);try{l()}finally{wa(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:e},t}function _d(e,t,l,s){return e.baseState=l,Lc(e,Be,typeof s=="function"?s:fa)}function Om(e,t,l,s,n){if(Gn(e))throw Error(m(485));if(e=t.action,e!==null){var r={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(c){r.listeners.push(c)}};b.T!==null?l(!0):r.isTransition=!1,s(r),l=t.pending,l===null?(r.next=t.pending=r,Md(t,r)):(r.next=l.next,t.pending=l.next=r)}}function Md(e,t){var l=t.action,s=t.payload,n=e.state;if(t.isTransition){var r=b.T,c={};b.T=c;try{var i=l(n,s),h=b.S;h!==null&&h(c,i),Od(e,t,i)}catch(R){Hc(e,t,R)}finally{r!==null&&c.types!==null&&(r.types=c.types),b.T=r}}else try{r=l(n,s),Od(e,t,r)}catch(R){Hc(e,t,R)}}function Od(e,t,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(s){Ld(e,t,s)},function(s){return Hc(e,t,s)}):Ld(e,t,l)}function Ld(e,t,l){t.status="fulfilled",t.value=l,Rd(t),e.state=l,t=e.pending,t!==null&&(l=t.next,l===t?e.pending=null:(l=l.next,t.next=l,Md(e,l)))}function Hc(e,t,l){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=l,Rd(t),t=t.next;while(t!==s)}e.action=null}function Rd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ud(e,t){return t}function Hd(e,t){if(Me){var l=Ke.formState;if(l!==null){e:{var s=Se;if(Me){if(Xe){t:{for(var n=Xe,r=Kt;n.nodeType!==8;){if(!r){n=null;break t}if(n=Xt(n.nextSibling),n===null){n=null;break t}}r=n.data,n=r==="F!"||r==="F"?n:null}if(n){Xe=Xt(n.nextSibling),s=n.data==="F!";break e}}Ea(s)}s=!1}s&&(t=l[0])}}return l=Nt(),l.memoizedState=l.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ud,lastRenderedState:t},l.queue=s,l=lu.bind(null,Se,s),s.dispatch=l,s=Uc(!1),r=Gc.bind(null,Se,!1,s.queue),s=Nt(),n={state:t,dispatch:null,action:e,pending:null},s.queue=n,l=Om.bind(null,Se,n,r,l),n.dispatch=l,s.memoizedState=e,[t,l,!1]}function qd(e){var t=lt();return $d(t,Be,e)}function $d(e,t,l){if(t=Lc(e,t,Ud)[0],e=Bn(fa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=_s(t)}catch(c){throw c===Bl?Tn:c}else s=t;t=lt();var n=t.queue,r=n.dispatch;return l!==t.memoizedState&&(Se.flags|=2048,Vl(9,{destroy:void 0},Lm.bind(null,n,l),null)),[s,r,e]}function Lm(e,t){e.action=t}function Bd(e){var t=lt(),l=Be;if(l!==null)return $d(t,l,e);lt(),t=t.memoizedState,l=lt();var s=l.queue.dispatch;return l.memoizedState=e,[t,s,!1]}function Vl(e,t,l,s){return e={tag:e,create:l,deps:s,inst:t,next:null},t=Se.updateQueue,t===null&&(t=qn(),Se.updateQueue=t),l=t.lastEffect,l===null?t.lastEffect=e.next=e:(s=l.next,l.next=e,e.next=s,t.lastEffect=e),e}function Yd(){return lt().memoizedState}function Yn(e,t,l,s){var n=Nt();Se.flags|=e,n.memoizedState=Vl(1|t,{destroy:void 0},l,s===void 0?null:s)}function Qn(e,t,l,s){var n=lt();s=s===void 0?null:s;var r=n.memoizedState.inst;Be!==null&&s!==null&&Ec(s,Be.memoizedState.deps)?n.memoizedState=Vl(t,r,l,s):(Se.flags|=e,n.memoizedState=Vl(1|t,r,l,s))}function Qd(e,t){Yn(8390656,8,e,t)}function qc(e,t){Qn(2048,8,e,t)}function Rm(e){Se.flags|=4;var t=Se.updateQueue;if(t===null)t=qn(),Se.updateQueue=t,t.events=[e];else{var l=t.events;l===null?t.events=[e]:l.push(e)}}function Gd(e){var t=lt().memoizedState;return Rm({ref:t,nextImpl:e}),function(){if((Ue&2)!==0)throw Error(m(440));return t.impl.apply(void 0,arguments)}}function Kd(e,t){return Qn(4,2,e,t)}function Vd(e,t){return Qn(4,4,e,t)}function Xd(e,t){if(typeof t=="function"){e=e();var l=t(e);return function(){typeof l=="function"?l():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zd(e,t,l){l=l!=null?l.concat([e]):null,Qn(4,4,Xd.bind(null,t,e),l)}function $c(){}function Jd(e,t){var l=lt();t=t===void 0?null:t;var s=l.memoizedState;return t!==null&&Ec(t,s[1])?s[0]:(l.memoizedState=[e,t],e)}function Wd(e,t){var l=lt();t=t===void 0?null:t;var s=l.memoizedState;if(t!==null&&Ec(t,s[1]))return s[0];if(s=e(),xl){wa(!0);try{e()}finally{wa(!1)}}return l.memoizedState=[s,t],s}function Bc(e,t,l){return l===void 0||(xa&1073741824)!==0&&(Te&261930)===0?e.memoizedState=t:(e.memoizedState=l,e=Fu(),Se.lanes|=e,Ha|=e,l)}function Fd(e,t,l,s){return _t(l,t)?l:Ql.current!==null?(e=Bc(e,l,s),_t(e,t)||(ct=!0),e):(xa&42)===0||(xa&1073741824)!==0&&(Te&261930)===0?(ct=!0,e.memoizedState=l):(e=Fu(),Se.lanes|=e,Ha|=e,t)}function Id(e,t,l,s,n){var r=F.p;F.p=r!==0&&8>r?r:8;var c=b.T,i={};b.T=i,Gc(e,!1,t,l);try{var h=n(),R=b.S;if(R!==null&&R(i,h),h!==null&&typeof h=="object"&&typeof h.then=="function"){var W=Tm(h,s);Ms(e,t,W,Ht(e))}else Ms(e,t,s,Ht(e))}catch(P){Ms(e,t,{then:function(){},status:"rejected",reason:P},Ht())}finally{F.p=r,c!==null&&i.types!==null&&(c.types=i.types),b.T=c}}function Um(){}function Yc(e,t,l,s){if(e.tag!==5)throw Error(m(476));var n=Pd(e).queue;Id(e,n,t,le,l===null?Um:function(){return eu(e),l(s)})}function Pd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:le},next:null};var l={};return t.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:l},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function eu(e){var t=Pd(e);t.next===null&&(t=e.alternate.memoizedState),Ms(e,t.next.queue,{},Ht())}function Qc(){return yt(Ws)}function tu(){return lt().memoizedState}function au(){return lt().memoizedState}function Hm(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var l=Ht();e=_a(l);var s=Ma(t,e,l);s!==null&&(Et(s,t,l),Cs(s,t,l)),t={cache:vc()},e.payload=t;return}t=t.return}}function qm(e,t,l){var s=Ht();l={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Gn(e)?su(t,l):(l=cc(e,t,l,s),l!==null&&(Et(l,e,s),nu(l,t,s)))}function lu(e,t,l){var s=Ht();Ms(e,t,l,s)}function Ms(e,t,l,s){var n={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Gn(e))su(t,n);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var c=t.lastRenderedState,i=r(c,l);if(n.hasEagerState=!0,n.eagerState=i,_t(i,c))return wn(e,t,n,0),Ke===null&&Sn(),!1}catch{}if(l=cc(e,t,n,s),l!==null)return Et(l,e,s),nu(l,t,s),!0}return!1}function Gc(e,t,l,s){if(s={lane:2,revertLane:Ni(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Gn(e)){if(t)throw Error(m(479))}else t=cc(e,l,s,2),t!==null&&Et(t,e,2)}function Gn(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function su(e,t){Gl=Un=!0;var l=e.pending;l===null?t.next=t:(t.next=l.next,l.next=t),e.pending=t}function nu(e,t,l){if((l&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,l|=s,t.lanes=l,oo(e,l)}}var Os={readContext:yt,use:$n,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useLayoutEffect:Ie,useInsertionEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useSyncExternalStore:Ie,useId:Ie,useHostTransitionStatus:Ie,useFormState:Ie,useActionState:Ie,useOptimistic:Ie,useMemoCache:Ie,useCacheRefresh:Ie};Os.useEffectEvent=Ie;var ru={readContext:yt,use:$n,useCallback:function(e,t){return Nt().memoizedState=[e,t===void 0?null:t],e},useContext:yt,useEffect:Qd,useImperativeHandle:function(e,t,l){l=l!=null?l.concat([e]):null,Yn(4194308,4,Xd.bind(null,t,e),l)},useLayoutEffect:function(e,t){return Yn(4194308,4,e,t)},useInsertionEffect:function(e,t){Yn(4,2,e,t)},useMemo:function(e,t){var l=Nt();t=t===void 0?null:t;var s=e();if(xl){wa(!0);try{e()}finally{wa(!1)}}return l.memoizedState=[s,t],s},useReducer:function(e,t,l){var s=Nt();if(l!==void 0){var n=l(t);if(xl){wa(!0);try{l(t)}finally{wa(!1)}}}else n=t;return s.memoizedState=s.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=qm.bind(null,Se,e),[s.memoizedState,e]},useRef:function(e){var t=Nt();return e={current:e},t.memoizedState=e},useState:function(e){e=Uc(e);var t=e.queue,l=lu.bind(null,Se,t);return t.dispatch=l,[e.memoizedState,l]},useDebugValue:$c,useDeferredValue:function(e,t){var l=Nt();return Bc(l,e,t)},useTransition:function(){var e=Uc(!1);return e=Id.bind(null,Se,e.queue,!0,!1),Nt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,l){var s=Se,n=Nt();if(Me){if(l===void 0)throw Error(m(407));l=l()}else{if(l=t(),Ke===null)throw Error(m(349));(Te&127)!==0||kd(s,t,l)}n.memoizedState=l;var r={value:l,getSnapshot:t};return n.queue=r,Qd(Ed.bind(null,s,r,e),[e]),s.flags|=2048,Vl(9,{destroy:void 0},Cd.bind(null,s,r,l,t),null),l},useId:function(){var e=Nt(),t=Ke.identifierPrefix;if(Me){var l=ea,s=Pt;l=(s&~(1<<32-Tt(s)-1)).toString(32)+l,t="_"+t+"R_"+l,l=Hn++,0<l&&(t+="H"+l.toString(32)),t+="_"}else l=_m++,t="_"+t+"r_"+l.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Qc,useFormState:Hd,useActionState:Hd,useOptimistic:function(e){var t=Nt();t.memoizedState=t.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=l,t=Gc.bind(null,Se,!0,l),l.dispatch=t,[e,t]},useMemoCache:Oc,useCacheRefresh:function(){return Nt().memoizedState=Hm.bind(null,Se)},useEffectEvent:function(e){var t=Nt(),l={impl:e};return t.memoizedState=l,function(){if((Ue&2)!==0)throw Error(m(440));return l.impl.apply(void 0,arguments)}}},Kc={readContext:yt,use:$n,useCallback:Jd,useContext:yt,useEffect:qc,useImperativeHandle:Zd,useInsertionEffect:Kd,useLayoutEffect:Vd,useMemo:Wd,useReducer:Bn,useRef:Yd,useState:function(){return Bn(fa)},useDebugValue:$c,useDeferredValue:function(e,t){var l=lt();return Fd(l,Be.memoizedState,e,t)},useTransition:function(){var e=Bn(fa)[0],t=lt().memoizedState;return[typeof e=="boolean"?e:_s(e),t]},useSyncExternalStore:Dd,useId:tu,useHostTransitionStatus:Qc,useFormState:qd,useActionState:qd,useOptimistic:function(e,t){var l=lt();return _d(l,Be,e,t)},useMemoCache:Oc,useCacheRefresh:au};Kc.useEffectEvent=Gd;var cu={readContext:yt,use:$n,useCallback:Jd,useContext:yt,useEffect:qc,useImperativeHandle:Zd,useInsertionEffect:Kd,useLayoutEffect:Vd,useMemo:Wd,useReducer:Rc,useRef:Yd,useState:function(){return Rc(fa)},useDebugValue:$c,useDeferredValue:function(e,t){var l=lt();return Be===null?Bc(l,e,t):Fd(l,Be.memoizedState,e,t)},useTransition:function(){var e=Rc(fa)[0],t=lt().memoizedState;return[typeof e=="boolean"?e:_s(e),t]},useSyncExternalStore:Dd,useId:tu,useHostTransitionStatus:Qc,useFormState:Bd,useActionState:Bd,useOptimistic:function(e,t){var l=lt();return Be!==null?_d(l,Be,e,t):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:Oc,useCacheRefresh:au};cu.useEffectEvent=Gd;function Vc(e,t,l,s){t=e.memoizedState,l=l(s,t),l=l==null?t:Q({},t,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Xc={enqueueSetState:function(e,t,l){e=e._reactInternals;var s=Ht(),n=_a(s);n.payload=t,l!=null&&(n.callback=l),t=Ma(e,n,s),t!==null&&(Et(t,e,s),Cs(t,e,s))},enqueueReplaceState:function(e,t,l){e=e._reactInternals;var s=Ht(),n=_a(s);n.tag=1,n.payload=t,l!=null&&(n.callback=l),t=Ma(e,n,s),t!==null&&(Et(t,e,s),Cs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var l=Ht(),s=_a(l);s.tag=2,t!=null&&(s.callback=t),t=Ma(e,s,l),t!==null&&(Et(t,e,l),Cs(t,e,l))}};function iu(e,t,l,s,n,r,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,r,c):t.prototype&&t.prototype.isPureReactComponent?!gs(l,s)||!gs(n,r):!0}function ou(e,t,l,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(l,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(l,s),t.state!==e&&Xc.enqueueReplaceState(t,t.state,null)}function fl(e,t){var l=t;if("ref"in t){l={};for(var s in t)s!=="ref"&&(l[s]=t[s])}if(e=e.defaultProps){l===t&&(l=Q({},l));for(var n in e)l[n]===void 0&&(l[n]=e[n])}return l}function du(e){Nn(e)}function uu(e){console.error(e)}function xu(e){Nn(e)}function Kn(e,t){try{var l=e.onUncaughtError;l(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function fu(e,t,l){try{var s=e.onCaughtError;s(l.value,{componentStack:l.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Zc(e,t,l){return l=_a(l),l.tag=3,l.payload={element:null},l.callback=function(){Kn(e,t)},l}function mu(e){return e=_a(e),e.tag=3,e}function pu(e,t,l,s){var n=l.type.getDerivedStateFromError;if(typeof n=="function"){var r=s.value;e.payload=function(){return n(r)},e.callback=function(){fu(t,l,s)}}var c=l.stateNode;c!==null&&typeof c.componentDidCatch=="function"&&(e.callback=function(){fu(t,l,s),typeof n!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})})}function $m(e,t,l,s,n){if(l.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=l.alternate,t!==null&&Hl(t,l,n,!0),l=Ot.current,l!==null){switch(l.tag){case 31:case 13:return Vt===null?lr():l.alternate===null&&Pe===0&&(Pe=3),l.flags&=-257,l.flags|=65536,l.lanes=n,s===_n?l.flags|=16384:(t=l.updateQueue,t===null?l.updateQueue=new Set([s]):t.add(s),bi(e,s,n)),!1;case 22:return l.flags|=65536,s===_n?l.flags|=16384:(t=l.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},l.updateQueue=t):(l=t.retryQueue,l===null?t.retryQueue=new Set([s]):l.add(s)),bi(e,s,n)),!1}throw Error(m(435,l.tag))}return bi(e,s,n),lr(),!1}if(Me)return t=Ot.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=n,s!==fc&&(e=Error(m(422),{cause:s}),Ss(Yt(e,l)))):(s!==fc&&(t=Error(m(423),{cause:s}),Ss(Yt(t,l))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,s=Yt(s,l),n=Zc(e.stateNode,s,n),wc(e,n),Pe!==4&&(Pe=2)),!1;var r=Error(m(520),{cause:s});if(r=Yt(r,l),Ys===null?Ys=[r]:Ys.push(r),Pe!==4&&(Pe=2),t===null)return!0;s=Yt(s,l),l=t;do{switch(l.tag){case 3:return l.flags|=65536,e=n&-n,l.lanes|=e,e=Zc(l.stateNode,s,e),wc(l,e),!1;case 1:if(t=l.type,r=l.stateNode,(l.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(qa===null||!qa.has(r))))return l.flags|=65536,n&=-n,l.lanes|=n,n=mu(n),pu(n,e,l,s),wc(l,n),!1}l=l.return}while(l!==null);return!1}var Jc=Error(m(461)),ct=!1;function vt(e,t,l,s){t.child=e===null?bd(t,null,l,s):ul(t,e.child,l,s)}function hu(e,t,l,s,n){l=l.render;var r=t.ref;if("ref"in s){var c={};for(var i in s)i!=="ref"&&(c[i]=s[i])}else c=s;return cl(t),s=zc(e,t,l,c,r,n),i=Tc(),e!==null&&!ct?(_c(e,t,n),ma(e,t,n)):(Me&&i&&uc(t),t.flags|=1,vt(e,t,s,n),t.child)}function yu(e,t,l,s,n){if(e===null){var r=l.type;return typeof r=="function"&&!ic(r)&&r.defaultProps===void 0&&l.compare===null?(t.tag=15,t.type=r,vu(e,t,r,s,n)):(e=Dn(l.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!li(e,n)){var c=r.memoizedProps;if(l=l.compare,l=l!==null?l:gs,l(c,s)&&e.ref===t.ref)return ma(e,t,n)}return t.flags|=1,e=ia(r,s),e.ref=t.ref,e.return=t,t.child=e}function vu(e,t,l,s,n){if(e!==null){var r=e.memoizedProps;if(gs(r,s)&&e.ref===t.ref)if(ct=!1,t.pendingProps=s=r,li(e,n))(e.flags&131072)!==0&&(ct=!0);else return t.lanes=e.lanes,ma(e,t,n)}return Wc(e,t,l,s,n)}function bu(e,t,l,s){var n=s.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|l:l,e!==null){for(s=t.child=e.child,n=0;s!==null;)n=n|s.lanes|s.childLanes,s=s.sibling;s=n&~r}else s=0,t.child=null;return gu(e,t,r,l,s)}if((l&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&zn(t,r!==null?r.cachePool:null),r!==null?Nd(t,r):Dc(),Sd(t);else return s=t.lanes=536870912,gu(e,t,r!==null?r.baseLanes|l:l,l,s)}else r!==null?(zn(t,r.cachePool),Nd(t,r),La(),t.memoizedState=null):(e!==null&&zn(t,null),Dc(),La());return vt(e,t,n,l),t.child}function Ls(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function gu(e,t,l,s,n){var r=gc();return r=r===null?null:{parent:nt._currentValue,pool:r},t.memoizedState={baseLanes:l,cachePool:r},e!==null&&zn(t,null),Dc(),Sd(t),e!==null&&Hl(e,t,s,!0),t.childLanes=n,null}function Vn(e,t){return t=Zn({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ju(e,t,l){return ul(t,e.child,null,l),e=Vn(t,t.pendingProps),e.flags|=2,Lt(t),t.memoizedState=null,e}function Bm(e,t,l){var s=t.pendingProps,n=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Me){if(s.mode==="hidden")return e=Vn(t,s),t.lanes=536870912,Ls(null,e);if(Cc(t),(e=Xe)?(e=Mx(e,Kt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ka!==null?{id:Pt,overflow:ea}:null,retryLane:536870912,hydrationErrors:null},l=sd(e),l.return=t,t.child=l,ht=t,Xe=null)):e=null,e===null)throw Ea(t);return t.lanes=536870912,null}return Vn(t,s)}var r=e.memoizedState;if(r!==null){var c=r.dehydrated;if(Cc(t),n)if(t.flags&256)t.flags&=-257,t=ju(e,t,l);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(m(558));else if(ct||Hl(e,t,l,!1),n=(l&e.childLanes)!==0,ct||n){if(s=Ke,s!==null&&(c=uo(s,l),c!==0&&c!==r.retryLane))throw r.retryLane=c,ll(e,c),Et(s,e,c),Jc;lr(),t=ju(e,t,l)}else e=r.treeContext,Xe=Xt(c.nextSibling),ht=t,Me=!0,Ca=null,Kt=!1,e!==null&&cd(t,e),t=Vn(t,s),t.flags|=4096;return t}return e=ia(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Xn(e,t){var l=t.ref;if(l===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(m(284));(e===null||e.ref!==l)&&(t.flags|=4194816)}}function Wc(e,t,l,s,n){return cl(t),l=zc(e,t,l,s,void 0,n),s=Tc(),e!==null&&!ct?(_c(e,t,n),ma(e,t,n)):(Me&&s&&uc(t),t.flags|=1,vt(e,t,l,n),t.child)}function Nu(e,t,l,s,n,r){return cl(t),t.updateQueue=null,l=Ad(t,s,l,n),wd(e),s=Tc(),e!==null&&!ct?(_c(e,t,r),ma(e,t,r)):(Me&&s&&uc(t),t.flags|=1,vt(e,t,l,r),t.child)}function Su(e,t,l,s,n){if(cl(t),t.stateNode===null){var r=Ol,c=l.contextType;typeof c=="object"&&c!==null&&(r=yt(c)),r=new l(s,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Xc,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=s,r.state=t.memoizedState,r.refs={},Nc(t),c=l.contextType,r.context=typeof c=="object"&&c!==null?yt(c):Ol,r.state=t.memoizedState,c=l.getDerivedStateFromProps,typeof c=="function"&&(Vc(t,l,c,s),r.state=t.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(c=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),c!==r.state&&Xc.enqueueReplaceState(r,r.state,null),zs(t,s,r,n),Es(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){r=t.stateNode;var i=t.memoizedProps,h=fl(l,i);r.props=h;var R=r.context,W=l.contextType;c=Ol,typeof W=="object"&&W!==null&&(c=yt(W));var P=l.getDerivedStateFromProps;W=typeof P=="function"||typeof r.getSnapshotBeforeUpdate=="function",i=t.pendingProps!==i,W||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(i||R!==c)&&ou(t,r,s,c),Ta=!1;var B=t.memoizedState;r.state=B,zs(t,s,r,n),Es(),R=t.memoizedState,i||B!==R||Ta?(typeof P=="function"&&(Vc(t,l,P,s),R=t.memoizedState),(h=Ta||iu(t,l,h,s,B,R,c))?(W||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=R),r.props=s,r.state=R,r.context=c,s=h):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{r=t.stateNode,Sc(e,t),c=t.memoizedProps,W=fl(l,c),r.props=W,P=t.pendingProps,B=r.context,R=l.contextType,h=Ol,typeof R=="object"&&R!==null&&(h=yt(R)),i=l.getDerivedStateFromProps,(R=typeof i=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(c!==P||B!==h)&&ou(t,r,s,h),Ta=!1,B=t.memoizedState,r.state=B,zs(t,s,r,n),Es();var G=t.memoizedState;c!==P||B!==G||Ta||e!==null&&e.dependencies!==null&&Cn(e.dependencies)?(typeof i=="function"&&(Vc(t,l,i,s),G=t.memoizedState),(W=Ta||iu(t,l,W,s,B,G,h)||e!==null&&e.dependencies!==null&&Cn(e.dependencies))?(R||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(s,G,h),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(s,G,h)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=G),r.props=s,r.state=G,r.context=h,s=W):(typeof r.componentDidUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),s=!1)}return r=s,Xn(e,t),s=(t.flags&128)!==0,r||s?(r=t.stateNode,l=s&&typeof l.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&s?(t.child=ul(t,e.child,null,n),t.child=ul(t,null,l,n)):vt(e,t,l,n),t.memoizedState=r.state,e=t.child):e=ma(e,t,n),e}function wu(e,t,l,s){return nl(),t.flags|=256,vt(e,t,l,s),t.child}var Fc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ic(e){return{baseLanes:e,cachePool:fd()}}function Pc(e,t,l){return e=e!==null?e.childLanes&~l:0,t&&(e|=Ut),e}function Au(e,t,l){var s=t.pendingProps,n=!1,r=(t.flags&128)!==0,c;if((c=r)||(c=e!==null&&e.memoizedState===null?!1:(at.current&2)!==0),c&&(n=!0,t.flags&=-129),c=(t.flags&32)!==0,t.flags&=-33,e===null){if(Me){if(n?Oa(t):La(),(e=Xe)?(e=Mx(e,Kt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ka!==null?{id:Pt,overflow:ea}:null,retryLane:536870912,hydrationErrors:null},l=sd(e),l.return=t,t.child=l,ht=t,Xe=null)):e=null,e===null)throw Ea(t);return Li(e)?t.lanes=32:t.lanes=536870912,null}var i=s.children;return s=s.fallback,n?(La(),n=t.mode,i=Zn({mode:"hidden",children:i},n),s=sl(s,n,l,null),i.return=t,s.return=t,i.sibling=s,t.child=i,s=t.child,s.memoizedState=Ic(l),s.childLanes=Pc(e,c,l),t.memoizedState=Fc,Ls(null,s)):(Oa(t),ei(t,i))}var h=e.memoizedState;if(h!==null&&(i=h.dehydrated,i!==null)){if(r)t.flags&256?(Oa(t),t.flags&=-257,t=ti(e,t,l)):t.memoizedState!==null?(La(),t.child=e.child,t.flags|=128,t=null):(La(),i=s.fallback,n=t.mode,s=Zn({mode:"visible",children:s.children},n),i=sl(i,n,l,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,ul(t,e.child,null,l),s=t.child,s.memoizedState=Ic(l),s.childLanes=Pc(e,c,l),t.memoizedState=Fc,t=Ls(null,s));else if(Oa(t),Li(i)){if(c=i.nextSibling&&i.nextSibling.dataset,c)var R=c.dgst;c=R,s=Error(m(419)),s.stack="",s.digest=c,Ss({value:s,source:null,stack:null}),t=ti(e,t,l)}else if(ct||Hl(e,t,l,!1),c=(l&e.childLanes)!==0,ct||c){if(c=Ke,c!==null&&(s=uo(c,l),s!==0&&s!==h.retryLane))throw h.retryLane=s,ll(e,s),Et(c,e,s),Jc;Oi(i)||lr(),t=ti(e,t,l)}else Oi(i)?(t.flags|=192,t.child=e.child,t=null):(e=h.treeContext,Xe=Xt(i.nextSibling),ht=t,Me=!0,Ca=null,Kt=!1,e!==null&&cd(t,e),t=ei(t,s.children),t.flags|=4096);return t}return n?(La(),i=s.fallback,n=t.mode,h=e.child,R=h.sibling,s=ia(h,{mode:"hidden",children:s.children}),s.subtreeFlags=h.subtreeFlags&65011712,R!==null?i=ia(R,i):(i=sl(i,n,l,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,Ls(null,s),s=t.child,i=e.child.memoizedState,i===null?i=Ic(l):(n=i.cachePool,n!==null?(h=nt._currentValue,n=n.parent!==h?{parent:h,pool:h}:n):n=fd(),i={baseLanes:i.baseLanes|l,cachePool:n}),s.memoizedState=i,s.childLanes=Pc(e,c,l),t.memoizedState=Fc,Ls(e.child,s)):(Oa(t),l=e.child,e=l.sibling,l=ia(l,{mode:"visible",children:s.children}),l.return=t,l.sibling=null,e!==null&&(c=t.deletions,c===null?(t.deletions=[e],t.flags|=16):c.push(e)),t.child=l,t.memoizedState=null,l)}function ei(e,t){return t=Zn({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Zn(e,t){return e=Mt(22,e,null,t),e.lanes=0,e}function ti(e,t,l){return ul(t,e.child,null,l),e=ei(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Du(e,t,l){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),hc(e.return,t,l)}function ai(e,t,l,s,n,r){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:l,tailMode:n,treeForkCount:r}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=s,c.tail=l,c.tailMode=n,c.treeForkCount=r)}function ku(e,t,l){var s=t.pendingProps,n=s.revealOrder,r=s.tail;s=s.children;var c=at.current,i=(c&2)!==0;if(i?(c=c&1|2,t.flags|=128):c&=1,ee(at,c),vt(e,t,s,l),s=Me?Ns:0,!i&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Du(e,l,t);else if(e.tag===19)Du(e,l,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(l=t.child,n=null;l!==null;)e=l.alternate,e!==null&&Rn(e)===null&&(n=l),l=l.sibling;l=n,l===null?(n=t.child,t.child=null):(n=l.sibling,l.sibling=null),ai(t,!1,n,l,r,s);break;case"backwards":case"unstable_legacy-backwards":for(l=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Rn(e)===null){t.child=n;break}e=n.sibling,n.sibling=l,l=n,n=e}ai(t,!0,l,null,r,s);break;case"together":ai(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function ma(e,t,l){if(e!==null&&(t.dependencies=e.dependencies),Ha|=t.lanes,(l&t.childLanes)===0)if(e!==null){if(Hl(e,t,l,!1),(l&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(m(153));if(t.child!==null){for(e=t.child,l=ia(e,e.pendingProps),t.child=l,l.return=t;e.sibling!==null;)e=e.sibling,l=l.sibling=ia(e,e.pendingProps),l.return=t;l.sibling=null}return t.child}function li(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Cn(e)))}function Ym(e,t,l){switch(t.tag){case 3:xe(t,t.stateNode.containerInfo),za(t,nt,e.memoizedState.cache),nl();break;case 27:case 5:ze(t);break;case 4:xe(t,t.stateNode.containerInfo);break;case 10:za(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Cc(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Oa(t),t.flags|=128,null):(l&t.child.childLanes)!==0?Au(e,t,l):(Oa(t),e=ma(e,t,l),e!==null?e.sibling:null);Oa(t);break;case 19:var n=(e.flags&128)!==0;if(s=(l&t.childLanes)!==0,s||(Hl(e,t,l,!1),s=(l&t.childLanes)!==0),n){if(s)return ku(e,t,l);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ee(at,at.current),s)break;return null;case 22:return t.lanes=0,bu(e,t,l,t.pendingProps);case 24:za(t,nt,e.memoizedState.cache)}return ma(e,t,l)}function Cu(e,t,l){if(e!==null)if(e.memoizedProps!==t.pendingProps)ct=!0;else{if(!li(e,l)&&(t.flags&128)===0)return ct=!1,Ym(e,t,l);ct=(e.flags&131072)!==0}else ct=!1,Me&&(t.flags&1048576)!==0&&rd(t,Ns,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=ol(t.elementType),t.type=e,typeof e=="function")ic(e)?(s=fl(e,s),t.tag=1,t=Su(null,t,e,s,l)):(t.tag=0,t=Wc(null,t,e,s,l));else{if(e!=null){var n=e.$$typeof;if(n===D){t.tag=11,t=hu(null,t,e,s,l);break e}else if(n===T){t.tag=14,t=yu(null,t,e,s,l);break e}}throw t=K(e)||e,Error(m(306,t,""))}}return t;case 0:return Wc(e,t,t.type,t.pendingProps,l);case 1:return s=t.type,n=fl(s,t.pendingProps),Su(e,t,s,n,l);case 3:e:{if(xe(t,t.stateNode.containerInfo),e===null)throw Error(m(387));s=t.pendingProps;var r=t.memoizedState;n=r.element,Sc(e,t),zs(t,s,null,l);var c=t.memoizedState;if(s=c.cache,za(t,nt,s),s!==r.cache&&yc(t,[nt],l,!0),Es(),s=c.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:c.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=wu(e,t,s,l);break e}else if(s!==n){n=Yt(Error(m(424)),t),Ss(n),t=wu(e,t,s,l);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Xe=Xt(e.firstChild),ht=t,Me=!0,Ca=null,Kt=!0,l=bd(t,null,s,l),t.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(nl(),s===n){t=ma(e,t,l);break e}vt(e,t,s,l)}t=t.child}return t;case 26:return Xn(e,t),e===null?(l=qx(t.type,null,t.pendingProps,null))?t.memoizedState=l:Me||(l=t.type,e=t.pendingProps,s=dr(pe.current).createElement(l),s[pt]=t,s[St]=e,bt(s,l,e),xt(s),t.stateNode=s):t.memoizedState=qx(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ze(t),e===null&&Me&&(s=t.stateNode=Rx(t.type,t.pendingProps,pe.current),ht=t,Kt=!0,n=Xe,Qa(t.type)?(Ri=n,Xe=Xt(s.firstChild)):Xe=n),vt(e,t,t.pendingProps.children,l),Xn(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Me&&((n=s=Xe)&&(s=vp(s,t.type,t.pendingProps,Kt),s!==null?(t.stateNode=s,ht=t,Xe=Xt(s.firstChild),Kt=!1,n=!0):n=!1),n||Ea(t)),ze(t),n=t.type,r=t.pendingProps,c=e!==null?e.memoizedProps:null,s=r.children,Ti(n,r)?s=null:c!==null&&Ti(n,c)&&(t.flags|=32),t.memoizedState!==null&&(n=zc(e,t,Mm,null,null,l),Ws._currentValue=n),Xn(e,t),vt(e,t,s,l),t.child;case 6:return e===null&&Me&&((e=l=Xe)&&(l=bp(l,t.pendingProps,Kt),l!==null?(t.stateNode=l,ht=t,Xe=null,e=!0):e=!1),e||Ea(t)),null;case 13:return Au(e,t,l);case 4:return xe(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ul(t,null,s,l):vt(e,t,s,l),t.child;case 11:return hu(e,t,t.type,t.pendingProps,l);case 7:return vt(e,t,t.pendingProps,l),t.child;case 8:return vt(e,t,t.pendingProps.children,l),t.child;case 12:return vt(e,t,t.pendingProps.children,l),t.child;case 10:return s=t.pendingProps,za(t,t.type,s.value),vt(e,t,s.children,l),t.child;case 9:return n=t.type._context,s=t.pendingProps.children,cl(t),n=yt(n),s=s(n),t.flags|=1,vt(e,t,s,l),t.child;case 14:return yu(e,t,t.type,t.pendingProps,l);case 15:return vu(e,t,t.type,t.pendingProps,l);case 19:return ku(e,t,l);case 31:return Bm(e,t,l);case 22:return bu(e,t,l,t.pendingProps);case 24:return cl(t),s=yt(nt),e===null?(n=gc(),n===null&&(n=Ke,r=vc(),n.pooledCache=r,r.refCount++,r!==null&&(n.pooledCacheLanes|=l),n=r),t.memoizedState={parent:s,cache:n},Nc(t),za(t,nt,n)):((e.lanes&l)!==0&&(Sc(e,t),zs(t,null,null,l),Es()),n=e.memoizedState,r=t.memoizedState,n.parent!==s?(n={parent:s,cache:s},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),za(t,nt,s)):(s=r.cache,za(t,nt,s),s!==n.cache&&yc(t,[nt],l,!0))),vt(e,t,t.pendingProps.children,l),t.child;case 29:throw t.pendingProps}throw Error(m(156,t.tag))}function pa(e){e.flags|=4}function si(e,t,l,s,n){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(n&335544128)===n)if(e.stateNode.complete)e.flags|=8192;else if(tx())e.flags|=8192;else throw dl=_n,jc}else e.flags&=-16777217}function Eu(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Gx(t))if(tx())e.flags|=8192;else throw dl=_n,jc}function Jn(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?co():536870912,e.lanes|=t,Wl|=t)}function Rs(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var l=null;t!==null;)t.alternate!==null&&(l=t),t=t.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var s=null;l!==null;)l.alternate!==null&&(s=l),l=l.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,l=0,s=0;if(t)for(var n=e.child;n!==null;)l|=n.lanes|n.childLanes,s|=n.subtreeFlags&65011712,s|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)l|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=l,t}function Qm(e,t,l){var s=t.pendingProps;switch(xc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return Ze(t),null;case 3:return l=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ua(nt),ye(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Ul(t)?pa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,mc())),Ze(t),null;case 26:var n=t.type,r=t.memoizedState;return e===null?(pa(t),r!==null?(Ze(t),Eu(t,r)):(Ze(t),si(t,n,null,s,l))):r?r!==e.memoizedState?(pa(t),Ze(t),Eu(t,r)):(Ze(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&pa(t),Ze(t),si(t,n,e,s,l)),null;case 27:if(ue(t),l=pe.current,n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&pa(t);else{if(!s){if(t.stateNode===null)throw Error(m(166));return Ze(t),null}e=se.current,Ul(t)?id(t):(e=Rx(n,s,l),t.stateNode=e,pa(t))}return Ze(t),null;case 5:if(ue(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&pa(t);else{if(!s){if(t.stateNode===null)throw Error(m(166));return Ze(t),null}if(r=se.current,Ul(t))id(t);else{var c=dr(pe.current);switch(r){case 1:r=c.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:r=c.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":r=c.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":r=c.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":r=c.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof s.is=="string"?c.createElement("select",{is:s.is}):c.createElement("select"),s.multiple?r.multiple=!0:s.size&&(r.size=s.size);break;default:r=typeof s.is=="string"?c.createElement(n,{is:s.is}):c.createElement(n)}}r[pt]=t,r[St]=s;e:for(c=t.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}t.stateNode=r;e:switch(bt(r,n,s),n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&pa(t)}}return Ze(t),si(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,l),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&pa(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(m(166));if(e=pe.current,Ul(t)){if(e=t.stateNode,l=t.memoizedProps,s=null,n=ht,n!==null)switch(n.tag){case 27:case 5:s=n.memoizedProps}e[pt]=t,e=!!(e.nodeValue===l||s!==null&&s.suppressHydrationWarning===!0||Ax(e.nodeValue,l)),e||Ea(t,!0)}else e=dr(e).createTextNode(s),e[pt]=t,t.stateNode=e}return Ze(t),null;case 31:if(l=t.memoizedState,e===null||e.memoizedState!==null){if(s=Ul(t),l!==null){if(e===null){if(!s)throw Error(m(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(m(557));e[pt]=t}else nl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ze(t),e=!1}else l=mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return t.flags&256?(Lt(t),t):(Lt(t),null);if((t.flags&128)!==0)throw Error(m(558))}return Ze(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=Ul(t),s!==null&&s.dehydrated!==null){if(e===null){if(!n)throw Error(m(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(m(317));n[pt]=t}else nl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ze(t),n=!1}else n=mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(Lt(t),t):(Lt(t),null)}return Lt(t),(t.flags&128)!==0?(t.lanes=l,t):(l=s!==null,e=e!==null&&e.memoizedState!==null,l&&(s=t.child,n=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(n=s.alternate.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==n&&(s.flags|=2048)),l!==e&&l&&(t.child.flags|=8192),Jn(t,t.updateQueue),Ze(t),null);case 4:return ye(),e===null&&Di(t.stateNode.containerInfo),Ze(t),null;case 10:return ua(t.type),Ze(t),null;case 19:if(Y(at),s=t.memoizedState,s===null)return Ze(t),null;if(n=(t.flags&128)!==0,r=s.rendering,r===null)if(n)Rs(s,!1);else{if(Pe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=Rn(e),r!==null){for(t.flags|=128,Rs(s,!1),e=r.updateQueue,t.updateQueue=e,Jn(t,e),t.subtreeFlags=0,e=l,l=t.child;l!==null;)ld(l,e),l=l.sibling;return ee(at,at.current&1|2),Me&&oa(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&st()>er&&(t.flags|=128,n=!0,Rs(s,!1),t.lanes=4194304)}else{if(!n)if(e=Rn(r),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Jn(t,e),Rs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!Me)return Ze(t),null}else 2*st()-s.renderingStartTime>er&&l!==536870912&&(t.flags|=128,n=!0,Rs(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(e=s.last,e!==null?e.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=st(),e.sibling=null,l=at.current,ee(at,n?l&1|2:l&1),Me&&oa(t,s.treeForkCount),e):(Ze(t),null);case 22:case 23:return Lt(t),kc(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(l&536870912)!==0&&(t.flags&128)===0&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),l=t.updateQueue,l!==null&&Jn(t,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==l&&(t.flags|=2048),e!==null&&Y(il),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ua(nt),Ze(t),null;case 25:return null;case 30:return null}throw Error(m(156,t.tag))}function Gm(e,t){switch(xc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ua(nt),ye(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ue(t),null;case 31:if(t.memoizedState!==null){if(Lt(t),t.alternate===null)throw Error(m(340));nl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Lt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(m(340));nl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Y(at),null;case 4:return ye(),null;case 10:return ua(t.type),null;case 22:case 23:return Lt(t),kc(),e!==null&&Y(il),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ua(nt),null;case 25:return null;default:return null}}function zu(e,t){switch(xc(t),t.tag){case 3:ua(nt),ye();break;case 26:case 27:case 5:ue(t);break;case 4:ye();break;case 31:t.memoizedState!==null&&Lt(t);break;case 13:Lt(t);break;case 19:Y(at);break;case 10:ua(t.type);break;case 22:case 23:Lt(t),kc(),e!==null&&Y(il);break;case 24:ua(nt)}}function Us(e,t){try{var l=t.updateQueue,s=l!==null?l.lastEffect:null;if(s!==null){var n=s.next;l=n;do{if((l.tag&e)===e){s=void 0;var r=l.create,c=l.inst;s=r(),c.destroy=s}l=l.next}while(l!==n)}}catch(i){qe(t,t.return,i)}}function Ra(e,t,l){try{var s=t.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var r=n.next;s=r;do{if((s.tag&e)===e){var c=s.inst,i=c.destroy;if(i!==void 0){c.destroy=void 0,n=t;var h=l,R=i;try{R()}catch(W){qe(n,h,W)}}}s=s.next}while(s!==r)}}catch(W){qe(t,t.return,W)}}function Tu(e){var t=e.updateQueue;if(t!==null){var l=e.stateNode;try{jd(t,l)}catch(s){qe(e,e.return,s)}}}function _u(e,t,l){l.props=fl(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(s){qe(e,t,s)}}function Hs(e,t){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof l=="function"?e.refCleanup=l(s):l.current=s}}catch(n){qe(e,t,n)}}function ta(e,t){var l=e.ref,s=e.refCleanup;if(l!==null)if(typeof s=="function")try{s()}catch(n){qe(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(n){qe(e,t,n)}else l.current=null}function Mu(e){var t=e.type,l=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":l.autoFocus&&s.focus();break e;case"img":l.src?s.src=l.src:l.srcSet&&(s.srcset=l.srcSet)}}catch(n){qe(e,e.return,n)}}function ni(e,t,l){try{var s=e.stateNode;xp(s,e.type,l,t),s[St]=t}catch(n){qe(e,e.return,n)}}function Ou(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Qa(e.type)||e.tag===4}function ri(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Qa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ci(e,t,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,t):(t=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,t.appendChild(e),l=l._reactRootContainer,l!=null||t.onclick!==null||(t.onclick=ra));else if(s!==4&&(s===27&&Qa(e.type)&&(l=e.stateNode,t=null),e=e.child,e!==null))for(ci(e,t,l),e=e.sibling;e!==null;)ci(e,t,l),e=e.sibling}function Wn(e,t,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?l.insertBefore(e,t):l.appendChild(e);else if(s!==4&&(s===27&&Qa(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Wn(e,t,l),e=e.sibling;e!==null;)Wn(e,t,l),e=e.sibling}function Lu(e){var t=e.stateNode,l=e.memoizedProps;try{for(var s=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);bt(t,s,l),t[pt]=e,t[St]=l}catch(r){qe(e,e.return,r)}}var ha=!1,it=!1,ii=!1,Ru=typeof WeakSet=="function"?WeakSet:Set,ft=null;function Km(e,t){if(e=e.containerInfo,Ei=yr,e=Zo(e),tc(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var s=l.getSelection&&l.getSelection();if(s&&s.rangeCount!==0){l=s.anchorNode;var n=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{l.nodeType,r.nodeType}catch{l=null;break e}var c=0,i=-1,h=-1,R=0,W=0,P=e,B=null;t:for(;;){for(var G;P!==l||n!==0&&P.nodeType!==3||(i=c+n),P!==r||s!==0&&P.nodeType!==3||(h=c+s),P.nodeType===3&&(c+=P.nodeValue.length),(G=P.firstChild)!==null;)B=P,P=G;for(;;){if(P===e)break t;if(B===l&&++R===n&&(i=c),B===r&&++W===s&&(h=c),(G=P.nextSibling)!==null)break;P=B,B=P.parentNode}P=G}l=i===-1||h===-1?null:{start:i,end:h}}else l=null}l=l||{start:0,end:0}}else l=null;for(zi={focusedElem:e,selectionRange:l},yr=!1,ft=t;ft!==null;)if(t=ft,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ft=e;else for(;ft!==null;){switch(t=ft,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)n=e[l],n.ref.impl=n.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,l=t,n=r.memoizedProps,r=r.memoizedState,s=l.stateNode;try{var oe=fl(l.type,n);e=s.getSnapshotBeforeUpdate(oe,r),s.__reactInternalSnapshotBeforeUpdate=e}catch(he){qe(l,l.return,he)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,l=e.nodeType,l===9)Mi(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Mi(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(m(163))}if(e=t.sibling,e!==null){e.return=t.return,ft=e;break}ft=t.return}}function Uu(e,t,l){var s=l.flags;switch(l.tag){case 0:case 11:case 15:va(e,l),s&4&&Us(5,l);break;case 1:if(va(e,l),s&4)if(e=l.stateNode,t===null)try{e.componentDidMount()}catch(c){qe(l,l.return,c)}else{var n=fl(l.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(c){qe(l,l.return,c)}}s&64&&Tu(l),s&512&&Hs(l,l.return);break;case 3:if(va(e,l),s&64&&(e=l.updateQueue,e!==null)){if(t=null,l.child!==null)switch(l.child.tag){case 27:case 5:t=l.child.stateNode;break;case 1:t=l.child.stateNode}try{jd(e,t)}catch(c){qe(l,l.return,c)}}break;case 27:t===null&&s&4&&Lu(l);case 26:case 5:va(e,l),t===null&&s&4&&Mu(l),s&512&&Hs(l,l.return);break;case 12:va(e,l);break;case 31:va(e,l),s&4&&$u(e,l);break;case 13:va(e,l),s&4&&Bu(e,l),s&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=ep.bind(null,l),gp(e,l))));break;case 22:if(s=l.memoizedState!==null||ha,!s){t=t!==null&&t.memoizedState!==null||it,n=ha;var r=it;ha=s,(it=t)&&!r?ba(e,l,(l.subtreeFlags&8772)!==0):va(e,l),ha=n,it=r}break;case 30:break;default:va(e,l)}}function Hu(e){var t=e.alternate;t!==null&&(e.alternate=null,Hu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Hr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Je=null,At=!1;function ya(e,t,l){for(l=l.child;l!==null;)qu(e,t,l),l=l.sibling}function qu(e,t,l){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(is,l)}catch{}switch(l.tag){case 26:it||ta(l,t),ya(e,t,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:it||ta(l,t);var s=Je,n=At;Qa(l.type)&&(Je=l.stateNode,At=!1),ya(e,t,l),Xs(l.stateNode),Je=s,At=n;break;case 5:it||ta(l,t);case 6:if(s=Je,n=At,Je=null,ya(e,t,l),Je=s,At=n,Je!==null)if(At)try{(Je.nodeType===9?Je.body:Je.nodeName==="HTML"?Je.ownerDocument.body:Je).removeChild(l.stateNode)}catch(r){qe(l,t,r)}else try{Je.removeChild(l.stateNode)}catch(r){qe(l,t,r)}break;case 18:Je!==null&&(At?(e=Je,Tx(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),ss(e)):Tx(Je,l.stateNode));break;case 4:s=Je,n=At,Je=l.stateNode.containerInfo,At=!0,ya(e,t,l),Je=s,At=n;break;case 0:case 11:case 14:case 15:Ra(2,l,t),it||Ra(4,l,t),ya(e,t,l);break;case 1:it||(ta(l,t),s=l.stateNode,typeof s.componentWillUnmount=="function"&&_u(l,t,s)),ya(e,t,l);break;case 21:ya(e,t,l);break;case 22:it=(s=it)||l.memoizedState!==null,ya(e,t,l),it=s;break;default:ya(e,t,l)}}function $u(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ss(e)}catch(l){qe(t,t.return,l)}}}function Bu(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ss(e)}catch(l){qe(t,t.return,l)}}function Vm(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ru),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ru),t;default:throw Error(m(435,e.tag))}}function Fn(e,t){var l=Vm(e);t.forEach(function(s){if(!l.has(s)){l.add(s);var n=tp.bind(null,e,s);s.then(n,n)}})}function Dt(e,t){var l=t.deletions;if(l!==null)for(var s=0;s<l.length;s++){var n=l[s],r=e,c=t,i=c;e:for(;i!==null;){switch(i.tag){case 27:if(Qa(i.type)){Je=i.stateNode,At=!1;break e}break;case 5:Je=i.stateNode,At=!1;break e;case 3:case 4:Je=i.stateNode.containerInfo,At=!0;break e}i=i.return}if(Je===null)throw Error(m(160));qu(r,c,n),Je=null,At=!1,r=n.alternate,r!==null&&(r.return=null),n.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Yu(t,e),t=t.sibling}var Ft=null;function Yu(e,t){var l=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Dt(t,e),kt(e),s&4&&(Ra(3,e,e.return),Us(3,e),Ra(5,e,e.return));break;case 1:Dt(t,e),kt(e),s&512&&(it||l===null||ta(l,l.return)),s&64&&ha&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?s:l.concat(s))));break;case 26:var n=Ft;if(Dt(t,e),kt(e),s&512&&(it||l===null||ta(l,l.return)),s&4){var r=l!==null?l.memoizedState:null;if(s=e.memoizedState,l===null)if(s===null)if(e.stateNode===null){e:{s=e.type,l=e.memoizedProps,n=n.ownerDocument||n;t:switch(s){case"title":r=n.getElementsByTagName("title")[0],(!r||r[us]||r[pt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=n.createElement(s),n.head.insertBefore(r,n.querySelector("head > title"))),bt(r,s,l),r[pt]=e,xt(r),s=r;break e;case"link":var c=Yx("link","href",n).get(s+(l.href||""));if(c){for(var i=0;i<c.length;i++)if(r=c[i],r.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&r.getAttribute("rel")===(l.rel==null?null:l.rel)&&r.getAttribute("title")===(l.title==null?null:l.title)&&r.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){c.splice(i,1);break t}}r=n.createElement(s),bt(r,s,l),n.head.appendChild(r);break;case"meta":if(c=Yx("meta","content",n).get(s+(l.content||""))){for(i=0;i<c.length;i++)if(r=c[i],r.getAttribute("content")===(l.content==null?null:""+l.content)&&r.getAttribute("name")===(l.name==null?null:l.name)&&r.getAttribute("property")===(l.property==null?null:l.property)&&r.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&r.getAttribute("charset")===(l.charSet==null?null:l.charSet)){c.splice(i,1);break t}}r=n.createElement(s),bt(r,s,l),n.head.appendChild(r);break;default:throw Error(m(468,s))}r[pt]=e,xt(r),s=r}e.stateNode=s}else Qx(n,e.type,e.stateNode);else e.stateNode=Bx(n,s,e.memoizedProps);else r!==s?(r===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):r.count--,s===null?Qx(n,e.type,e.stateNode):Bx(n,s,e.memoizedProps)):s===null&&e.stateNode!==null&&ni(e,e.memoizedProps,l.memoizedProps)}break;case 27:Dt(t,e),kt(e),s&512&&(it||l===null||ta(l,l.return)),l!==null&&s&4&&ni(e,e.memoizedProps,l.memoizedProps);break;case 5:if(Dt(t,e),kt(e),s&512&&(it||l===null||ta(l,l.return)),e.flags&32){n=e.stateNode;try{kl(n,"")}catch(oe){qe(e,e.return,oe)}}s&4&&e.stateNode!=null&&(n=e.memoizedProps,ni(e,n,l!==null?l.memoizedProps:n)),s&1024&&(ii=!0);break;case 6:if(Dt(t,e),kt(e),s&4){if(e.stateNode===null)throw Error(m(162));s=e.memoizedProps,l=e.stateNode;try{l.nodeValue=s}catch(oe){qe(e,e.return,oe)}}break;case 3:if(fr=null,n=Ft,Ft=ur(t.containerInfo),Dt(t,e),Ft=n,kt(e),s&4&&l!==null&&l.memoizedState.isDehydrated)try{ss(t.containerInfo)}catch(oe){qe(e,e.return,oe)}ii&&(ii=!1,Qu(e));break;case 4:s=Ft,Ft=ur(e.stateNode.containerInfo),Dt(t,e),kt(e),Ft=s;break;case 12:Dt(t,e),kt(e);break;case 31:Dt(t,e),kt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Fn(e,s)));break;case 13:Dt(t,e),kt(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Pn=st()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Fn(e,s)));break;case 22:n=e.memoizedState!==null;var h=l!==null&&l.memoizedState!==null,R=ha,W=it;if(ha=R||n,it=W||h,Dt(t,e),it=W,ha=R,kt(e),s&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(l===null||h||ha||it||ml(e)),l=null,t=e;;){if(t.tag===5||t.tag===26){if(l===null){h=l=t;try{if(r=h.stateNode,n)c=r.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{i=h.stateNode;var P=h.memoizedProps.style,B=P!=null&&P.hasOwnProperty("display")?P.display:null;i.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(oe){qe(h,h.return,oe)}}}else if(t.tag===6){if(l===null){h=t;try{h.stateNode.nodeValue=n?"":h.memoizedProps}catch(oe){qe(h,h.return,oe)}}}else if(t.tag===18){if(l===null){h=t;try{var G=h.stateNode;n?_x(G,!0):_x(h.stateNode,!1)}catch(oe){qe(h,h.return,oe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;l===t&&(l=null),t=t.return}l===t&&(l=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(l=s.retryQueue,l!==null&&(s.retryQueue=null,Fn(e,l))));break;case 19:Dt(t,e),kt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Fn(e,s)));break;case 30:break;case 21:break;default:Dt(t,e),kt(e)}}function kt(e){var t=e.flags;if(t&2){try{for(var l,s=e.return;s!==null;){if(Ou(s)){l=s;break}s=s.return}if(l==null)throw Error(m(160));switch(l.tag){case 27:var n=l.stateNode,r=ri(e);Wn(e,r,n);break;case 5:var c=l.stateNode;l.flags&32&&(kl(c,""),l.flags&=-33);var i=ri(e);Wn(e,i,c);break;case 3:case 4:var h=l.stateNode.containerInfo,R=ri(e);ci(e,R,h);break;default:throw Error(m(161))}}catch(W){qe(e,e.return,W)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Qu(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Qu(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function va(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Uu(e,t.alternate,t),t=t.sibling}function ml(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ra(4,t,t.return),ml(t);break;case 1:ta(t,t.return);var l=t.stateNode;typeof l.componentWillUnmount=="function"&&_u(t,t.return,l),ml(t);break;case 27:Xs(t.stateNode);case 26:case 5:ta(t,t.return),ml(t);break;case 22:t.memoizedState===null&&ml(t);break;case 30:ml(t);break;default:ml(t)}e=e.sibling}}function ba(e,t,l){for(l=l&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,n=e,r=t,c=r.flags;switch(r.tag){case 0:case 11:case 15:ba(n,r,l),Us(4,r);break;case 1:if(ba(n,r,l),s=r,n=s.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(R){qe(s,s.return,R)}if(s=r,n=s.updateQueue,n!==null){var i=s.stateNode;try{var h=n.shared.hiddenCallbacks;if(h!==null)for(n.shared.hiddenCallbacks=null,n=0;n<h.length;n++)gd(h[n],i)}catch(R){qe(s,s.return,R)}}l&&c&64&&Tu(r),Hs(r,r.return);break;case 27:Lu(r);case 26:case 5:ba(n,r,l),l&&s===null&&c&4&&Mu(r),Hs(r,r.return);break;case 12:ba(n,r,l);break;case 31:ba(n,r,l),l&&c&4&&$u(n,r);break;case 13:ba(n,r,l),l&&c&4&&Bu(n,r);break;case 22:r.memoizedState===null&&ba(n,r,l),Hs(r,r.return);break;case 30:break;default:ba(n,r,l)}t=t.sibling}}function oi(e,t){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&ws(l))}function di(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ws(e))}function It(e,t,l,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Gu(e,t,l,s),t=t.sibling}function Gu(e,t,l,s){var n=t.flags;switch(t.tag){case 0:case 11:case 15:It(e,t,l,s),n&2048&&Us(9,t);break;case 1:It(e,t,l,s);break;case 3:It(e,t,l,s),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ws(e)));break;case 12:if(n&2048){It(e,t,l,s),e=t.stateNode;try{var r=t.memoizedProps,c=r.id,i=r.onPostCommit;typeof i=="function"&&i(c,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(h){qe(t,t.return,h)}}else It(e,t,l,s);break;case 31:It(e,t,l,s);break;case 13:It(e,t,l,s);break;case 23:break;case 22:r=t.stateNode,c=t.alternate,t.memoizedState!==null?r._visibility&2?It(e,t,l,s):qs(e,t):r._visibility&2?It(e,t,l,s):(r._visibility|=2,Xl(e,t,l,s,(t.subtreeFlags&10256)!==0||!1)),n&2048&&oi(c,t);break;case 24:It(e,t,l,s),n&2048&&di(t.alternate,t);break;default:It(e,t,l,s)}}function Xl(e,t,l,s,n){for(n=n&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,c=t,i=l,h=s,R=c.flags;switch(c.tag){case 0:case 11:case 15:Xl(r,c,i,h,n),Us(8,c);break;case 23:break;case 22:var W=c.stateNode;c.memoizedState!==null?W._visibility&2?Xl(r,c,i,h,n):qs(r,c):(W._visibility|=2,Xl(r,c,i,h,n)),n&&R&2048&&oi(c.alternate,c);break;case 24:Xl(r,c,i,h,n),n&&R&2048&&di(c.alternate,c);break;default:Xl(r,c,i,h,n)}t=t.sibling}}function qs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var l=e,s=t,n=s.flags;switch(s.tag){case 22:qs(l,s),n&2048&&oi(s.alternate,s);break;case 24:qs(l,s),n&2048&&di(s.alternate,s);break;default:qs(l,s)}t=t.sibling}}var $s=8192;function Zl(e,t,l){if(e.subtreeFlags&$s)for(e=e.child;e!==null;)Ku(e,t,l),e=e.sibling}function Ku(e,t,l){switch(e.tag){case 26:Zl(e,t,l),e.flags&$s&&e.memoizedState!==null&&_p(l,Ft,e.memoizedState,e.memoizedProps);break;case 5:Zl(e,t,l);break;case 3:case 4:var s=Ft;Ft=ur(e.stateNode.containerInfo),Zl(e,t,l),Ft=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=$s,$s=16777216,Zl(e,t,l),$s=s):Zl(e,t,l));break;default:Zl(e,t,l)}}function Vu(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Bs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var s=t[l];ft=s,Zu(s,e)}Vu(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xu(e),e=e.sibling}function Xu(e){switch(e.tag){case 0:case 11:case 15:Bs(e),e.flags&2048&&Ra(9,e,e.return);break;case 3:Bs(e);break;case 12:Bs(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,In(e)):Bs(e);break;default:Bs(e)}}function In(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var s=t[l];ft=s,Zu(s,e)}Vu(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ra(8,t,t.return),In(t);break;case 22:l=t.stateNode,l._visibility&2&&(l._visibility&=-3,In(t));break;default:In(t)}e=e.sibling}}function Zu(e,t){for(;ft!==null;){var l=ft;switch(l.tag){case 0:case 11:case 15:Ra(8,l,t);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var s=l.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:ws(l.memoizedState.cache)}if(s=l.child,s!==null)s.return=l,ft=s;else e:for(l=e;ft!==null;){s=ft;var n=s.sibling,r=s.return;if(Hu(s),s===l){ft=null;break e}if(n!==null){n.return=r,ft=n;break e}ft=r}}}var Xm={getCacheForType:function(e){var t=yt(nt),l=t.data.get(e);return l===void 0&&(l=e(),t.data.set(e,l)),l},cacheSignal:function(){return yt(nt).controller.signal}},Zm=typeof WeakMap=="function"?WeakMap:Map,Ue=0,Ke=null,Ce=null,Te=0,He=0,Rt=null,Ua=!1,Jl=!1,ui=!1,ga=0,Pe=0,Ha=0,pl=0,xi=0,Ut=0,Wl=0,Ys=null,Ct=null,fi=!1,Pn=0,Ju=0,er=1/0,tr=null,qa=null,dt=0,$a=null,Fl=null,ja=0,mi=0,pi=null,Wu=null,Qs=0,hi=null;function Ht(){return(Ue&2)!==0&&Te!==0?Te&-Te:b.T!==null?Ni():xo()}function Fu(){if(Ut===0)if((Te&536870912)===0||Me){var e=on;on<<=1,(on&3932160)===0&&(on=262144),Ut=e}else Ut=536870912;return e=Ot.current,e!==null&&(e.flags|=32),Ut}function Et(e,t,l){(e===Ke&&(He===2||He===9)||e.cancelPendingCommit!==null)&&(Il(e,0),Ba(e,Te,Ut,!1)),ds(e,l),((Ue&2)===0||e!==Ke)&&(e===Ke&&((Ue&2)===0&&(pl|=l),Pe===4&&Ba(e,Te,Ut,!1)),aa(e))}function Iu(e,t,l){if((Ue&6)!==0)throw Error(m(327));var s=!l&&(t&127)===0&&(t&e.expiredLanes)===0||os(e,t),n=s?Fm(e,t):vi(e,t,!0),r=s;do{if(n===0){Jl&&!s&&Ba(e,t,0,!1);break}else{if(l=e.current.alternate,r&&!Jm(l)){n=vi(e,t,!1),r=!1;continue}if(n===2){if(r=t,e.errorRecoveryDisabledLanes&r)var c=0;else c=e.pendingLanes&-536870913,c=c!==0?c:c&536870912?536870912:0;if(c!==0){t=c;e:{var i=e;n=Ys;var h=i.current.memoizedState.isDehydrated;if(h&&(Il(i,c).flags|=256),c=vi(i,c,!1),c!==2){if(ui&&!h){i.errorRecoveryDisabledLanes|=r,pl|=r,n=4;break e}r=Ct,Ct=n,r!==null&&(Ct===null?Ct=r:Ct.push.apply(Ct,r))}n=c}if(r=!1,n!==2)continue}}if(n===1){Il(e,0),Ba(e,t,0,!0);break}e:{switch(s=e,r=n,r){case 0:case 1:throw Error(m(345));case 4:if((t&4194048)!==t)break;case 6:Ba(s,t,Ut,!Ua);break e;case 2:Ct=null;break;case 3:case 5:break;default:throw Error(m(329))}if((t&62914560)===t&&(n=Pn+300-st(),10<n)){if(Ba(s,t,Ut,!Ua),un(s,0,!0)!==0)break e;ja=t,s.timeoutHandle=Ex(Pu.bind(null,s,l,Ct,tr,fi,t,Ut,pl,Wl,Ua,r,"Throttled",-0,0),n);break e}Pu(s,l,Ct,tr,fi,t,Ut,pl,Wl,Ua,r,null,-0,0)}}break}while(!0);aa(e)}function Pu(e,t,l,s,n,r,c,i,h,R,W,P,B,G){if(e.timeoutHandle=-1,P=t.subtreeFlags,P&8192||(P&16785408)===16785408){P={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ra},Ku(t,r,P);var oe=(r&62914560)===r?Pn-st():(r&4194048)===r?Ju-st():0;if(oe=Mp(P,oe),oe!==null){ja=r,e.cancelPendingCommit=oe(cx.bind(null,e,t,r,l,s,n,c,i,h,W,P,null,B,G)),Ba(e,r,c,!R);return}}cx(e,t,r,l,s,n,c,i,h)}function Jm(e){for(var t=e;;){var l=t.tag;if((l===0||l===11||l===15)&&t.flags&16384&&(l=t.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var s=0;s<l.length;s++){var n=l[s],r=n.getSnapshot;n=n.value;try{if(!_t(r(),n))return!1}catch{return!1}}if(l=t.child,t.subtreeFlags&16384&&l!==null)l.return=t,t=l;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ba(e,t,l,s){t&=~xi,t&=~pl,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var n=t;0<n;){var r=31-Tt(n),c=1<<r;s[r]=-1,n&=~c}l!==0&&io(e,l,t)}function ar(){return(Ue&6)===0?(Gs(0),!1):!0}function yi(){if(Ce!==null){if(He===0)var e=Ce.return;else e=Ce,da=rl=null,Mc(e),Yl=null,Ds=0,e=Ce;for(;e!==null;)zu(e.alternate,e),e=e.return;Ce=null}}function Il(e,t){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,pp(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),ja=0,yi(),Ke=e,Ce=l=ia(e.current,null),Te=t,He=0,Rt=null,Ua=!1,Jl=os(e,t),ui=!1,Wl=Ut=xi=pl=Ha=Pe=0,Ct=Ys=null,fi=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var n=31-Tt(s),r=1<<n;t|=e[n],s&=~r}return ga=t,Sn(),l}function ex(e,t){Se=null,b.H=Os,t===Bl||t===Tn?(t=hd(),He=3):t===jc?(t=hd(),He=4):He=t===Jc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Rt=t,Ce===null&&(Pe=1,Kn(e,Yt(t,e.current)))}function tx(){var e=Ot.current;return e===null?!0:(Te&4194048)===Te?Vt===null:(Te&62914560)===Te||(Te&536870912)!==0?e===Vt:!1}function ax(){var e=b.H;return b.H=Os,e===null?Os:e}function lx(){var e=b.A;return b.A=Xm,e}function lr(){Pe=4,Ua||(Te&4194048)!==Te&&Ot.current!==null||(Jl=!0),(Ha&134217727)===0&&(pl&134217727)===0||Ke===null||Ba(Ke,Te,Ut,!1)}function vi(e,t,l){var s=Ue;Ue|=2;var n=ax(),r=lx();(Ke!==e||Te!==t)&&(tr=null,Il(e,t)),t=!1;var c=Pe;e:do try{if(He!==0&&Ce!==null){var i=Ce,h=Rt;switch(He){case 8:yi(),c=6;break e;case 3:case 2:case 9:case 6:Ot.current===null&&(t=!0);var R=He;if(He=0,Rt=null,Pl(e,i,h,R),l&&Jl){c=0;break e}break;default:R=He,He=0,Rt=null,Pl(e,i,h,R)}}Wm(),c=Pe;break}catch(W){ex(e,W)}while(!0);return t&&e.shellSuspendCounter++,da=rl=null,Ue=s,b.H=n,b.A=r,Ce===null&&(Ke=null,Te=0,Sn()),c}function Wm(){for(;Ce!==null;)sx(Ce)}function Fm(e,t){var l=Ue;Ue|=2;var s=ax(),n=lx();Ke!==e||Te!==t?(tr=null,er=st()+500,Il(e,t)):Jl=os(e,t);e:do try{if(He!==0&&Ce!==null){t=Ce;var r=Rt;t:switch(He){case 1:He=0,Rt=null,Pl(e,t,r,1);break;case 2:case 9:if(md(r)){He=0,Rt=null,nx(t);break}t=function(){He!==2&&He!==9||Ke!==e||(He=7),aa(e)},r.then(t,t);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:md(r)?(He=0,Rt=null,nx(t)):(He=0,Rt=null,Pl(e,t,r,7));break;case 5:var c=null;switch(Ce.tag){case 26:c=Ce.memoizedState;case 5:case 27:var i=Ce;if(c?Gx(c):i.stateNode.complete){He=0,Rt=null;var h=i.sibling;if(h!==null)Ce=h;else{var R=i.return;R!==null?(Ce=R,sr(R)):Ce=null}break t}}He=0,Rt=null,Pl(e,t,r,5);break;case 6:He=0,Rt=null,Pl(e,t,r,6);break;case 8:yi(),Pe=6;break e;default:throw Error(m(462))}}Im();break}catch(W){ex(e,W)}while(!0);return da=rl=null,b.H=s,b.A=n,Ue=l,Ce!==null?0:(Ke=null,Te=0,Sn(),Pe)}function Im(){for(;Ce!==null&&!We();)sx(Ce)}function sx(e){var t=Cu(e.alternate,e,ga);e.memoizedProps=e.pendingProps,t===null?sr(e):Ce=t}function nx(e){var t=e,l=t.alternate;switch(t.tag){case 15:case 0:t=Nu(l,t,t.pendingProps,t.type,void 0,Te);break;case 11:t=Nu(l,t,t.pendingProps,t.type.render,t.ref,Te);break;case 5:Mc(t);default:zu(l,t),t=Ce=ld(t,ga),t=Cu(l,t,ga)}e.memoizedProps=e.pendingProps,t===null?sr(e):Ce=t}function Pl(e,t,l,s){da=rl=null,Mc(t),Yl=null,Ds=0;var n=t.return;try{if($m(e,n,t,l,Te)){Pe=1,Kn(e,Yt(l,e.current)),Ce=null;return}}catch(r){if(n!==null)throw Ce=n,r;Pe=1,Kn(e,Yt(l,e.current)),Ce=null;return}t.flags&32768?(Me||s===1?e=!0:Jl||(Te&536870912)!==0?e=!1:(Ua=e=!0,(s===2||s===9||s===3||s===6)&&(s=Ot.current,s!==null&&s.tag===13&&(s.flags|=16384))),rx(t,e)):sr(t)}function sr(e){var t=e;do{if((t.flags&32768)!==0){rx(t,Ua);return}e=t.return;var l=Qm(t.alternate,t,ga);if(l!==null){Ce=l;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);Pe===0&&(Pe=5)}function rx(e,t){do{var l=Gm(e.alternate,e);if(l!==null){l.flags&=32767,Ce=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!t&&(e=e.sibling,e!==null)){Ce=e;return}Ce=e=l}while(e!==null);Pe=6,Ce=null}function cx(e,t,l,s,n,r,c,i,h){e.cancelPendingCommit=null;do nr();while(dt!==0);if((Ue&6)!==0)throw Error(m(327));if(t!==null){if(t===e.current)throw Error(m(177));if(r=t.lanes|t.childLanes,r|=rc,Tf(e,l,r,c,i,h),e===Ke&&(Ce=Ke=null,Te=0),Fl=t,$a=e,ja=l,mi=r,pi=n,Wu=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ap(rn,function(){return xx(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=b.T,b.T=null,n=F.p,F.p=2,c=Ue,Ue|=4;try{Km(e,t,l)}finally{Ue=c,F.p=n,b.T=s}}dt=1,ix(),ox(),dx()}}function ix(){if(dt===1){dt=0;var e=$a,t=Fl,l=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||l){l=b.T,b.T=null;var s=F.p;F.p=2;var n=Ue;Ue|=4;try{Yu(t,e);var r=zi,c=Zo(e.containerInfo),i=r.focusedElem,h=r.selectionRange;if(c!==i&&i&&i.ownerDocument&&Xo(i.ownerDocument.documentElement,i)){if(h!==null&&tc(i)){var R=h.start,W=h.end;if(W===void 0&&(W=R),"selectionStart"in i)i.selectionStart=R,i.selectionEnd=Math.min(W,i.value.length);else{var P=i.ownerDocument||document,B=P&&P.defaultView||window;if(B.getSelection){var G=B.getSelection(),oe=i.textContent.length,he=Math.min(h.start,oe),Qe=h.end===void 0?he:Math.min(h.end,oe);!G.extend&&he>Qe&&(c=Qe,Qe=he,he=c);var C=Vo(i,he),N=Vo(i,Qe);if(C&&N&&(G.rangeCount!==1||G.anchorNode!==C.node||G.anchorOffset!==C.offset||G.focusNode!==N.node||G.focusOffset!==N.offset)){var L=P.createRange();L.setStart(C.node,C.offset),G.removeAllRanges(),he>Qe?(G.addRange(L),G.extend(N.node,N.offset)):(L.setEnd(N.node,N.offset),G.addRange(L))}}}}for(P=[],G=i;G=G.parentNode;)G.nodeType===1&&P.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<P.length;i++){var I=P[i];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}yr=!!Ei,zi=Ei=null}finally{Ue=n,F.p=s,b.T=l}}e.current=t,dt=2}}function ox(){if(dt===2){dt=0;var e=$a,t=Fl,l=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||l){l=b.T,b.T=null;var s=F.p;F.p=2;var n=Ue;Ue|=4;try{Uu(e,t.alternate,t)}finally{Ue=n,F.p=s,b.T=l}}dt=3}}function dx(){if(dt===4||dt===3){dt=0,Re();var e=$a,t=Fl,l=ja,s=Wu;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?dt=5:(dt=0,Fl=$a=null,ux(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(qa=null),Rr(l),t=t.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(is,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=b.T,n=F.p,F.p=2,b.T=null;try{for(var r=e.onRecoverableError,c=0;c<s.length;c++){var i=s[c];r(i.value,{componentStack:i.stack})}}finally{b.T=t,F.p=n}}(ja&3)!==0&&nr(),aa(e),n=e.pendingLanes,(l&261930)!==0&&(n&42)!==0?e===hi?Qs++:(Qs=0,hi=e):Qs=0,Gs(0)}}function ux(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ws(t)))}function nr(){return ix(),ox(),dx(),xx()}function xx(){if(dt!==5)return!1;var e=$a,t=mi;mi=0;var l=Rr(ja),s=b.T,n=F.p;try{F.p=32>l?32:l,b.T=null,l=pi,pi=null;var r=$a,c=ja;if(dt=0,Fl=$a=null,ja=0,(Ue&6)!==0)throw Error(m(331));var i=Ue;if(Ue|=4,Xu(r.current),Gu(r,r.current,c,l),Ue=i,Gs(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(is,r)}catch{}return!0}finally{F.p=n,b.T=s,ux(e,t)}}function fx(e,t,l){t=Yt(l,t),t=Zc(e.stateNode,t,2),e=Ma(e,t,2),e!==null&&(ds(e,2),aa(e))}function qe(e,t,l){if(e.tag===3)fx(e,e,l);else for(;t!==null;){if(t.tag===3){fx(t,e,l);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(qa===null||!qa.has(s))){e=Yt(l,e),l=mu(2),s=Ma(t,l,2),s!==null&&(pu(l,s,t,e),ds(s,2),aa(s));break}}t=t.return}}function bi(e,t,l){var s=e.pingCache;if(s===null){s=e.pingCache=new Zm;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(l)||(ui=!0,n.add(l),e=Pm.bind(null,e,t,l),t.then(e,e))}function Pm(e,t,l){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,Ke===e&&(Te&l)===l&&(Pe===4||Pe===3&&(Te&62914560)===Te&&300>st()-Pn?(Ue&2)===0&&Il(e,0):xi|=l,Wl===Te&&(Wl=0)),aa(e)}function mx(e,t){t===0&&(t=co()),e=ll(e,t),e!==null&&(ds(e,t),aa(e))}function ep(e){var t=e.memoizedState,l=0;t!==null&&(l=t.retryLane),mx(e,l)}function tp(e,t){var l=0;switch(e.tag){case 31:case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(l=n.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(m(314))}s!==null&&s.delete(t),mx(e,l)}function ap(e,t){return tt(e,t)}var rr=null,es=null,gi=!1,cr=!1,ji=!1,Ya=0;function aa(e){e!==es&&e.next===null&&(es===null?rr=es=e:es=es.next=e),cr=!0,gi||(gi=!0,sp())}function Gs(e,t){if(!ji&&cr){ji=!0;do for(var l=!1,s=rr;s!==null;){if(e!==0){var n=s.pendingLanes;if(n===0)var r=0;else{var c=s.suspendedLanes,i=s.pingedLanes;r=(1<<31-Tt(42|e)+1)-1,r&=n&~(c&~i),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(l=!0,vx(s,r))}else r=Te,r=un(s,s===Ke?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(r&3)===0||os(s,r)||(l=!0,vx(s,r));s=s.next}while(l);ji=!1}}function lp(){px()}function px(){cr=gi=!1;var e=0;Ya!==0&&mp()&&(e=Ya);for(var t=st(),l=null,s=rr;s!==null;){var n=s.next,r=hx(s,t);r===0?(s.next=null,l===null?rr=n:l.next=n,n===null&&(es=l)):(l=s,(e!==0||(r&3)!==0)&&(cr=!0)),s=n}dt!==0&&dt!==5||Gs(e),Ya!==0&&(Ya=0)}function hx(e,t){for(var l=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var c=31-Tt(r),i=1<<c,h=n[c];h===-1?((i&l)===0||(i&s)!==0)&&(n[c]=zf(i,t)):h<=t&&(e.expiredLanes|=i),r&=~i}if(t=Ke,l=Te,l=un(e,e===t?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,l===0||e===t&&(He===2||He===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&$e(s),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||os(e,l)){if(t=l&-l,t===e.callbackPriority)return t;switch(s!==null&&$e(s),Rr(l)){case 2:case 8:l=no;break;case 32:l=rn;break;case 268435456:l=ro;break;default:l=rn}return s=yx.bind(null,e),l=tt(l,s),e.callbackPriority=t,e.callbackNode=l,t}return s!==null&&s!==null&&$e(s),e.callbackPriority=2,e.callbackNode=null,2}function yx(e,t){if(dt!==0&&dt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(nr()&&e.callbackNode!==l)return null;var s=Te;return s=un(e,e===Ke?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Iu(e,s,t),hx(e,st()),e.callbackNode!=null&&e.callbackNode===l?yx.bind(null,e):null)}function vx(e,t){if(nr())return null;Iu(e,t,!0)}function sp(){hp(function(){(Ue&6)!==0?tt(so,lp):px()})}function Ni(){if(Ya===0){var e=ql;e===0&&(e=cn,cn<<=1,(cn&261888)===0&&(cn=256)),Ya=e}return Ya}function bx(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:pn(""+e)}function gx(e,t){var l=t.ownerDocument.createElement("input");return l.name=t.name,l.value=t.value,e.id&&l.setAttribute("form",e.id),t.parentNode.insertBefore(l,t),e=new FormData(e),l.parentNode.removeChild(l),e}function np(e,t,l,s,n){if(t==="submit"&&l&&l.stateNode===n){var r=bx((n[St]||null).action),c=s.submitter;c&&(t=(t=c[St]||null)?bx(t.formAction):c.getAttribute("formAction"),t!==null&&(r=t,c=null));var i=new bn("action","action",null,s,n);e.push({event:i,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ya!==0){var h=c?gx(n,c):new FormData(n);Yc(l,{pending:!0,data:h,method:n.method,action:r},null,h)}}else typeof r=="function"&&(i.preventDefault(),h=c?gx(n,c):new FormData(n),Yc(l,{pending:!0,data:h,method:n.method,action:r},r,h))},currentTarget:n}]})}}for(var Si=0;Si<nc.length;Si++){var wi=nc[Si],rp=wi.toLowerCase(),cp=wi[0].toUpperCase()+wi.slice(1);Wt(rp,"on"+cp)}Wt(Fo,"onAnimationEnd"),Wt(Io,"onAnimationIteration"),Wt(Po,"onAnimationStart"),Wt("dblclick","onDoubleClick"),Wt("focusin","onFocus"),Wt("focusout","onBlur"),Wt(Sm,"onTransitionRun"),Wt(wm,"onTransitionStart"),Wt(Am,"onTransitionCancel"),Wt(ed,"onTransitionEnd"),Al("onMouseEnter",["mouseout","mouseover"]),Al("onMouseLeave",["mouseout","mouseover"]),Al("onPointerEnter",["pointerout","pointerover"]),Al("onPointerLeave",["pointerout","pointerover"]),Pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ip=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ks));function jx(e,t){t=(t&4)!==0;for(var l=0;l<e.length;l++){var s=e[l],n=s.event;s=s.listeners;e:{var r=void 0;if(t)for(var c=s.length-1;0<=c;c--){var i=s[c],h=i.instance,R=i.currentTarget;if(i=i.listener,h!==r&&n.isPropagationStopped())break e;r=i,n.currentTarget=R;try{r(n)}catch(W){Nn(W)}n.currentTarget=null,r=h}else for(c=0;c<s.length;c++){if(i=s[c],h=i.instance,R=i.currentTarget,i=i.listener,h!==r&&n.isPropagationStopped())break e;r=i,n.currentTarget=R;try{r(n)}catch(W){Nn(W)}n.currentTarget=null,r=h}}}}function Ee(e,t){var l=t[Ur];l===void 0&&(l=t[Ur]=new Set);var s=e+"__bubble";l.has(s)||(Nx(t,e,2,!1),l.add(s))}function Ai(e,t,l){var s=0;t&&(s|=4),Nx(l,e,s,t)}var ir="_reactListening"+Math.random().toString(36).slice(2);function Di(e){if(!e[ir]){e[ir]=!0,po.forEach(function(l){l!=="selectionchange"&&(ip.has(l)||Ai(l,!1,e),Ai(l,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ir]||(t[ir]=!0,Ai("selectionchange",!1,t))}}function Nx(e,t,l,s){switch(Fx(t)){case 2:var n=Rp;break;case 8:n=Up;break;default:n=Bi}l=n.bind(null,t,l,e),n=void 0,!Vr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,l,{capture:!0,passive:n}):e.addEventListener(t,l,!0):n!==void 0?e.addEventListener(t,l,{passive:n}):e.addEventListener(t,l,!1)}function ki(e,t,l,s,n){var r=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var c=s.tag;if(c===3||c===4){var i=s.stateNode.containerInfo;if(i===n)break;if(c===4)for(c=s.return;c!==null;){var h=c.tag;if((h===3||h===4)&&c.stateNode.containerInfo===n)return;c=c.return}for(;i!==null;){if(c=Nl(i),c===null)return;if(h=c.tag,h===5||h===6||h===26||h===27){s=r=c;continue e}i=i.parentNode}}s=s.return}ko(function(){var R=r,W=Gr(l),P=[];e:{var B=td.get(e);if(B!==void 0){var G=bn,oe=e;switch(e){case"keypress":if(yn(l)===0)break e;case"keydown":case"keyup":G=tm;break;case"focusin":oe="focus",G=Wr;break;case"focusout":oe="blur",G=Wr;break;case"beforeblur":case"afterblur":G=Wr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=zo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Qf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=sm;break;case Fo:case Io:case Po:G=Vf;break;case ed:G=rm;break;case"scroll":case"scrollend":G=Bf;break;case"wheel":G=im;break;case"copy":case"cut":case"paste":G=Zf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=_o;break;case"toggle":case"beforetoggle":G=dm}var he=(t&4)!==0,Qe=!he&&(e==="scroll"||e==="scrollend"),C=he?B!==null?B+"Capture":null:B;he=[];for(var N=R,L;N!==null;){var I=N;if(L=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||L===null||C===null||(I=fs(N,C),I!=null&&he.push(Vs(N,I,L))),Qe)break;N=N.return}0<he.length&&(B=new G(B,oe,null,l,W),P.push({event:B,listeners:he}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",B&&l!==Qr&&(oe=l.relatedTarget||l.fromElement)&&(Nl(oe)||oe[jl]))break e;if((G||B)&&(B=W.window===W?W:(B=W.ownerDocument)?B.defaultView||B.parentWindow:window,G?(oe=l.relatedTarget||l.toElement,G=R,oe=oe?Nl(oe):null,oe!==null&&(Qe=$(oe),he=oe.tag,oe!==Qe||he!==5&&he!==27&&he!==6)&&(oe=null)):(G=null,oe=R),G!==oe)){if(he=zo,I="onMouseLeave",C="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(he=_o,I="onPointerLeave",C="onPointerEnter",N="pointer"),Qe=G==null?B:xs(G),L=oe==null?B:xs(oe),B=new he(I,N+"leave",G,l,W),B.target=Qe,B.relatedTarget=L,I=null,Nl(W)===R&&(he=new he(C,N+"enter",oe,l,W),he.target=L,he.relatedTarget=Qe,I=he),Qe=I,G&&oe)t:{for(he=op,C=G,N=oe,L=0,I=C;I;I=he(I))L++;I=0;for(var fe=N;fe;fe=he(fe))I++;for(;0<L-I;)C=he(C),L--;for(;0<I-L;)N=he(N),I--;for(;L--;){if(C===N||N!==null&&C===N.alternate){he=C;break t}C=he(C),N=he(N)}he=null}else he=null;G!==null&&Sx(P,B,G,he,!1),oe!==null&&Qe!==null&&Sx(P,Qe,oe,he,!0)}}e:{if(B=R?xs(R):window,G=B.nodeName&&B.nodeName.toLowerCase(),G==="select"||G==="input"&&B.type==="file")var Oe=$o;else if(Ho(B))if(Bo)Oe=gm;else{Oe=vm;var de=ym}else G=B.nodeName,!G||G.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?R&&Yr(R.elementType)&&(Oe=$o):Oe=bm;if(Oe&&(Oe=Oe(e,R))){qo(P,Oe,l,W);break e}de&&de(e,B,R),e==="focusout"&&R&&B.type==="number"&&R.memoizedProps.value!=null&&Br(B,"number",B.value)}switch(de=R?xs(R):window,e){case"focusin":(Ho(de)||de.contentEditable==="true")&&(Tl=de,ac=R,js=null);break;case"focusout":js=ac=Tl=null;break;case"mousedown":lc=!0;break;case"contextmenu":case"mouseup":case"dragend":lc=!1,Jo(P,l,W);break;case"selectionchange":if(Nm)break;case"keydown":case"keyup":Jo(P,l,W)}var Ae;if(Ir)e:{switch(e){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else zl?Ro(e,l)&&(_e="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(_e="onCompositionStart");_e&&(Mo&&l.locale!=="ko"&&(zl||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&zl&&(Ae=Co()):(Da=W,Xr="value"in Da?Da.value:Da.textContent,zl=!0)),de=or(R,_e),0<de.length&&(_e=new To(_e,e,null,l,W),P.push({event:_e,listeners:de}),Ae?_e.data=Ae:(Ae=Uo(l),Ae!==null&&(_e.data=Ae)))),(Ae=xm?fm(e,l):mm(e,l))&&(_e=or(R,"onBeforeInput"),0<_e.length&&(de=new To("onBeforeInput","beforeinput",null,l,W),P.push({event:de,listeners:_e}),de.data=Ae)),np(P,e,R,l,W)}jx(P,t)})}function Vs(e,t,l){return{instance:e,listener:t,currentTarget:l}}function or(e,t){for(var l=t+"Capture",s=[];e!==null;){var n=e,r=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||r===null||(n=fs(e,l),n!=null&&s.unshift(Vs(e,n,r)),n=fs(e,t),n!=null&&s.push(Vs(e,n,r))),e.tag===3)return s;e=e.return}return[]}function op(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Sx(e,t,l,s,n){for(var r=t._reactName,c=[];l!==null&&l!==s;){var i=l,h=i.alternate,R=i.stateNode;if(i=i.tag,h!==null&&h===s)break;i!==5&&i!==26&&i!==27||R===null||(h=R,n?(R=fs(l,r),R!=null&&c.unshift(Vs(l,R,h))):n||(R=fs(l,r),R!=null&&c.push(Vs(l,R,h)))),l=l.return}c.length!==0&&e.push({event:t,listeners:c})}var dp=/\r\n?/g,up=/\u0000|\uFFFD/g;function wx(e){return(typeof e=="string"?e:""+e).replace(dp,`
`).replace(up,"")}function Ax(e,t){return t=wx(t),wx(e)===t}function Ye(e,t,l,s,n,r){switch(l){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||kl(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&kl(e,""+s);break;case"className":fn(e,"class",s);break;case"tabIndex":fn(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":fn(e,l,s);break;case"style":Ao(e,s,r);break;case"data":if(t!=="object"){fn(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||l!=="href")){e.removeAttribute(l);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=pn(""+s),e.setAttribute(l,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(l==="formAction"?(t!=="input"&&Ye(e,t,"name",n.name,n,null),Ye(e,t,"formEncType",n.formEncType,n,null),Ye(e,t,"formMethod",n.formMethod,n,null),Ye(e,t,"formTarget",n.formTarget,n,null)):(Ye(e,t,"encType",n.encType,n,null),Ye(e,t,"method",n.method,n,null),Ye(e,t,"target",n.target,n,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=pn(""+s),e.setAttribute(l,s);break;case"onClick":s!=null&&(e.onclick=ra);break;case"onScroll":s!=null&&Ee("scroll",e);break;case"onScrollEnd":s!=null&&Ee("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(m(61));if(l=s.__html,l!=null){if(n.children!=null)throw Error(m(60));e.innerHTML=l}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}l=pn(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""+s):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":s===!0?e.setAttribute(l,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,s):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(l,s):e.removeAttribute(l);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(l):e.setAttribute(l,s);break;case"popover":Ee("beforetoggle",e),Ee("toggle",e),xn(e,"popover",s);break;case"xlinkActuate":na(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":na(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":na(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":na(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":na(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":na(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":na(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":na(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":na(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":xn(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=qf.get(l)||l,xn(e,l,s))}}function Ci(e,t,l,s,n,r){switch(l){case"style":Ao(e,s,r);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(m(61));if(l=s.__html,l!=null){if(n.children!=null)throw Error(m(60));e.innerHTML=l}}break;case"children":typeof s=="string"?kl(e,s):(typeof s=="number"||typeof s=="bigint")&&kl(e,""+s);break;case"onScroll":s!=null&&Ee("scroll",e);break;case"onScrollEnd":s!=null&&Ee("scrollend",e);break;case"onClick":s!=null&&(e.onclick=ra);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ho.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(n=l.endsWith("Capture"),t=l.slice(2,n?l.length-7:void 0),r=e[St]||null,r=r!=null?r[l]:null,typeof r=="function"&&e.removeEventListener(t,r,n),typeof s=="function")){typeof r!="function"&&r!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(t,s,n);break e}l in e?e[l]=s:s===!0?e.setAttribute(l,""):xn(e,l,s)}}}function bt(e,t,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",e),Ee("load",e);var s=!1,n=!1,r;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];if(c!=null)switch(r){case"src":s=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(m(137,t));default:Ye(e,t,r,c,l,null)}}n&&Ye(e,t,"srcSet",l.srcSet,l,null),s&&Ye(e,t,"src",l.src,l,null);return;case"input":Ee("invalid",e);var i=r=c=n=null,h=null,R=null;for(s in l)if(l.hasOwnProperty(s)){var W=l[s];if(W!=null)switch(s){case"name":n=W;break;case"type":c=W;break;case"checked":h=W;break;case"defaultChecked":R=W;break;case"value":r=W;break;case"defaultValue":i=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(m(137,t));break;default:Ye(e,t,s,W,l,null)}}jo(e,r,i,h,R,c,n,!1);return;case"select":Ee("invalid",e),s=c=r=null;for(n in l)if(l.hasOwnProperty(n)&&(i=l[n],i!=null))switch(n){case"value":r=i;break;case"defaultValue":c=i;break;case"multiple":s=i;default:Ye(e,t,n,i,l,null)}t=r,l=c,e.multiple=!!s,t!=null?Dl(e,!!s,t,!1):l!=null&&Dl(e,!!s,l,!0);return;case"textarea":Ee("invalid",e),r=n=s=null;for(c in l)if(l.hasOwnProperty(c)&&(i=l[c],i!=null))switch(c){case"value":s=i;break;case"defaultValue":n=i;break;case"children":r=i;break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(m(91));break;default:Ye(e,t,c,i,l,null)}So(e,s,n,r);return;case"option":for(h in l)l.hasOwnProperty(h)&&(s=l[h],s!=null)&&(h==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":Ye(e,t,h,s,l,null));return;case"dialog":Ee("beforetoggle",e),Ee("toggle",e),Ee("cancel",e),Ee("close",e);break;case"iframe":case"object":Ee("load",e);break;case"video":case"audio":for(s=0;s<Ks.length;s++)Ee(Ks[s],e);break;case"image":Ee("error",e),Ee("load",e);break;case"details":Ee("toggle",e);break;case"embed":case"source":case"link":Ee("error",e),Ee("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in l)if(l.hasOwnProperty(R)&&(s=l[R],s!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(m(137,t));default:Ye(e,t,R,s,l,null)}return;default:if(Yr(t)){for(W in l)l.hasOwnProperty(W)&&(s=l[W],s!==void 0&&Ci(e,t,W,s,l,void 0));return}}for(i in l)l.hasOwnProperty(i)&&(s=l[i],s!=null&&Ye(e,t,i,s,l,null))}function xp(e,t,l,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,c=null,i=null,h=null,R=null,W=null;for(G in l){var P=l[G];if(l.hasOwnProperty(G)&&P!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":h=P;default:s.hasOwnProperty(G)||Ye(e,t,G,null,s,P)}}for(var B in s){var G=s[B];if(P=l[B],s.hasOwnProperty(B)&&(G!=null||P!=null))switch(B){case"type":r=G;break;case"name":n=G;break;case"checked":R=G;break;case"defaultChecked":W=G;break;case"value":c=G;break;case"defaultValue":i=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(m(137,t));break;default:G!==P&&Ye(e,t,B,G,s,P)}}$r(e,c,i,h,R,W,r,n);return;case"select":G=c=i=B=null;for(r in l)if(h=l[r],l.hasOwnProperty(r)&&h!=null)switch(r){case"value":break;case"multiple":G=h;default:s.hasOwnProperty(r)||Ye(e,t,r,null,s,h)}for(n in s)if(r=s[n],h=l[n],s.hasOwnProperty(n)&&(r!=null||h!=null))switch(n){case"value":B=r;break;case"defaultValue":i=r;break;case"multiple":c=r;default:r!==h&&Ye(e,t,n,r,s,h)}t=i,l=c,s=G,B!=null?Dl(e,!!l,B,!1):!!s!=!!l&&(t!=null?Dl(e,!!l,t,!0):Dl(e,!!l,l?[]:"",!1));return;case"textarea":G=B=null;for(i in l)if(n=l[i],l.hasOwnProperty(i)&&n!=null&&!s.hasOwnProperty(i))switch(i){case"value":break;case"children":break;default:Ye(e,t,i,null,s,n)}for(c in s)if(n=s[c],r=l[c],s.hasOwnProperty(c)&&(n!=null||r!=null))switch(c){case"value":B=n;break;case"defaultValue":G=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(m(91));break;default:n!==r&&Ye(e,t,c,n,s,r)}No(e,B,G);return;case"option":for(var oe in l)B=l[oe],l.hasOwnProperty(oe)&&B!=null&&!s.hasOwnProperty(oe)&&(oe==="selected"?e.selected=!1:Ye(e,t,oe,null,s,B));for(h in s)B=s[h],G=l[h],s.hasOwnProperty(h)&&B!==G&&(B!=null||G!=null)&&(h==="selected"?e.selected=B&&typeof B!="function"&&typeof B!="symbol":Ye(e,t,h,B,s,G));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var he in l)B=l[he],l.hasOwnProperty(he)&&B!=null&&!s.hasOwnProperty(he)&&Ye(e,t,he,null,s,B);for(R in s)if(B=s[R],G=l[R],s.hasOwnProperty(R)&&B!==G&&(B!=null||G!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(m(137,t));break;default:Ye(e,t,R,B,s,G)}return;default:if(Yr(t)){for(var Qe in l)B=l[Qe],l.hasOwnProperty(Qe)&&B!==void 0&&!s.hasOwnProperty(Qe)&&Ci(e,t,Qe,void 0,s,B);for(W in s)B=s[W],G=l[W],!s.hasOwnProperty(W)||B===G||B===void 0&&G===void 0||Ci(e,t,W,B,s,G);return}}for(var C in l)B=l[C],l.hasOwnProperty(C)&&B!=null&&!s.hasOwnProperty(C)&&Ye(e,t,C,null,s,B);for(P in s)B=s[P],G=l[P],!s.hasOwnProperty(P)||B===G||B==null&&G==null||Ye(e,t,P,B,s,G)}function Dx(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fp(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,l=performance.getEntriesByType("resource"),s=0;s<l.length;s++){var n=l[s],r=n.transferSize,c=n.initiatorType,i=n.duration;if(r&&i&&Dx(c)){for(c=0,i=n.responseEnd,s+=1;s<l.length;s++){var h=l[s],R=h.startTime;if(R>i)break;var W=h.transferSize,P=h.initiatorType;W&&Dx(P)&&(h=h.responseEnd,c+=W*(h<i?1:(i-R)/(h-R)))}if(--s,t+=8*(r+c)/(n.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ei=null,zi=null;function dr(e){return e.nodeType===9?e:e.ownerDocument}function kx(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cx(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ti(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _i=null;function mp(){var e=window.event;return e&&e.type==="popstate"?e===_i?!1:(_i=e,!0):(_i=null,!1)}var Ex=typeof setTimeout=="function"?setTimeout:void 0,pp=typeof clearTimeout=="function"?clearTimeout:void 0,zx=typeof Promise=="function"?Promise:void 0,hp=typeof queueMicrotask=="function"?queueMicrotask:typeof zx<"u"?function(e){return zx.resolve(null).then(e).catch(yp)}:Ex;function yp(e){setTimeout(function(){throw e})}function Qa(e){return e==="head"}function Tx(e,t){var l=t,s=0;do{var n=l.nextSibling;if(e.removeChild(l),n&&n.nodeType===8)if(l=n.data,l==="/$"||l==="/&"){if(s===0){e.removeChild(n),ss(t);return}s--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")s++;else if(l==="html")Xs(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,Xs(l);for(var r=l.firstChild;r;){var c=r.nextSibling,i=r.nodeName;r[us]||i==="SCRIPT"||i==="STYLE"||i==="LINK"&&r.rel.toLowerCase()==="stylesheet"||l.removeChild(r),r=c}}else l==="body"&&Xs(e.ownerDocument.body);l=n}while(l);ss(t)}function _x(e,t){var l=e;e=0;do{var s=l.nextSibling;if(l.nodeType===1?t?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(t?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),s&&s.nodeType===8)if(l=s.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=s}while(l)}function Mi(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var l=t;switch(t=t.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Mi(l),Hr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function vp(e,t,l,s){for(;e.nodeType===1;){var n=l;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[us])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Xt(e.nextSibling),e===null)break}return null}function bp(e,t,l){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=Xt(e.nextSibling),e===null))return null;return e}function Mx(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Xt(e.nextSibling),e===null))return null;return e}function Oi(e){return e.data==="$?"||e.data==="$~"}function Li(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function gp(e,t){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||l.readyState!=="loading")t();else{var s=function(){t(),l.removeEventListener("DOMContentLoaded",s)};l.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Xt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ri=null;function Ox(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(t===0)return Xt(e.nextSibling);t--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||t++}e=e.nextSibling}return null}function Lx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(t===0)return e;t--}else l!=="/$"&&l!=="/&"||t++}e=e.previousSibling}return null}function Rx(e,t,l){switch(t=dr(l),e){case"html":if(e=t.documentElement,!e)throw Error(m(452));return e;case"head":if(e=t.head,!e)throw Error(m(453));return e;case"body":if(e=t.body,!e)throw Error(m(454));return e;default:throw Error(m(451))}}function Xs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Hr(e)}var Zt=new Map,Ux=new Set;function ur(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Na=F.d;F.d={f:jp,r:Np,D:Sp,C:wp,L:Ap,m:Dp,X:Cp,S:kp,M:Ep};function jp(){var e=Na.f(),t=ar();return e||t}function Np(e){var t=Sl(e);t!==null&&t.tag===5&&t.type==="form"?eu(t):Na.r(e)}var ts=typeof document>"u"?null:document;function Hx(e,t,l){var s=ts;if(s&&typeof t=="string"&&t){var n=$t(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof l=="string"&&(n+='[crossorigin="'+l+'"]'),Ux.has(n)||(Ux.add(n),e={rel:e,crossOrigin:l,href:t},s.querySelector(n)===null&&(t=s.createElement("link"),bt(t,"link",e),xt(t),s.head.appendChild(t)))}}function Sp(e){Na.D(e),Hx("dns-prefetch",e,null)}function wp(e,t){Na.C(e,t),Hx("preconnect",e,t)}function Ap(e,t,l){Na.L(e,t,l);var s=ts;if(s&&e&&t){var n='link[rel="preload"][as="'+$t(t)+'"]';t==="image"&&l&&l.imageSrcSet?(n+='[imagesrcset="'+$t(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(n+='[imagesizes="'+$t(l.imageSizes)+'"]')):n+='[href="'+$t(e)+'"]';var r=n;switch(t){case"style":r=as(e);break;case"script":r=ls(e)}Zt.has(r)||(e=Q({rel:"preload",href:t==="image"&&l&&l.imageSrcSet?void 0:e,as:t},l),Zt.set(r,e),s.querySelector(n)!==null||t==="style"&&s.querySelector(Zs(r))||t==="script"&&s.querySelector(Js(r))||(t=s.createElement("link"),bt(t,"link",e),xt(t),s.head.appendChild(t)))}}function Dp(e,t){Na.m(e,t);var l=ts;if(l&&e){var s=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+$t(s)+'"][href="'+$t(e)+'"]',r=n;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=ls(e)}if(!Zt.has(r)&&(e=Q({rel:"modulepreload",href:e},t),Zt.set(r,e),l.querySelector(n)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Js(r)))return}s=l.createElement("link"),bt(s,"link",e),xt(s),l.head.appendChild(s)}}}function kp(e,t,l){Na.S(e,t,l);var s=ts;if(s&&e){var n=wl(s).hoistableStyles,r=as(e);t=t||"default";var c=n.get(r);if(!c){var i={loading:0,preload:null};if(c=s.querySelector(Zs(r)))i.loading=5;else{e=Q({rel:"stylesheet",href:e,"data-precedence":t},l),(l=Zt.get(r))&&Ui(e,l);var h=c=s.createElement("link");xt(h),bt(h,"link",e),h._p=new Promise(function(R,W){h.onload=R,h.onerror=W}),h.addEventListener("load",function(){i.loading|=1}),h.addEventListener("error",function(){i.loading|=2}),i.loading|=4,xr(c,t,s)}c={type:"stylesheet",instance:c,count:1,state:i},n.set(r,c)}}}function Cp(e,t){Na.X(e,t);var l=ts;if(l&&e){var s=wl(l).hoistableScripts,n=ls(e),r=s.get(n);r||(r=l.querySelector(Js(n)),r||(e=Q({src:e,async:!0},t),(t=Zt.get(n))&&Hi(e,t),r=l.createElement("script"),xt(r),bt(r,"link",e),l.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(n,r))}}function Ep(e,t){Na.M(e,t);var l=ts;if(l&&e){var s=wl(l).hoistableScripts,n=ls(e),r=s.get(n);r||(r=l.querySelector(Js(n)),r||(e=Q({src:e,async:!0,type:"module"},t),(t=Zt.get(n))&&Hi(e,t),r=l.createElement("script"),xt(r),bt(r,"link",e),l.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(n,r))}}function qx(e,t,l,s){var n=(n=pe.current)?ur(n):null;if(!n)throw Error(m(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(t=as(l.href),l=wl(n).hoistableStyles,s=l.get(t),s||(s={type:"style",instance:null,count:0,state:null},l.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=as(l.href);var r=wl(n).hoistableStyles,c=r.get(e);if(c||(n=n.ownerDocument||n,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,c),(r=n.querySelector(Zs(e)))&&!r._p&&(c.instance=r,c.state.loading=5),Zt.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Zt.set(e,l),r||zp(n,e,l,c.state))),t&&s===null)throw Error(m(528,""));return c}if(t&&s!==null)throw Error(m(529,""));return null;case"script":return t=l.async,l=l.src,typeof l=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ls(l),l=wl(n).hoistableScripts,s=l.get(t),s||(s={type:"script",instance:null,count:0,state:null},l.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(m(444,e))}}function as(e){return'href="'+$t(e)+'"'}function Zs(e){return'link[rel="stylesheet"]['+e+"]"}function $x(e){return Q({},e,{"data-precedence":e.precedence,precedence:null})}function zp(e,t,l,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),bt(t,"link",l),xt(t),e.head.appendChild(t))}function ls(e){return'[src="'+$t(e)+'"]'}function Js(e){return"script[async]"+e}function Bx(e,t,l){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+$t(l.href)+'"]');if(s)return t.instance=s,xt(s),s;var n=Q({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),xt(s),bt(s,"style",n),xr(s,l.precedence,e),t.instance=s;case"stylesheet":n=as(l.href);var r=e.querySelector(Zs(n));if(r)return t.state.loading|=4,t.instance=r,xt(r),r;s=$x(l),(n=Zt.get(n))&&Ui(s,n),r=(e.ownerDocument||e).createElement("link"),xt(r);var c=r;return c._p=new Promise(function(i,h){c.onload=i,c.onerror=h}),bt(r,"link",s),t.state.loading|=4,xr(r,l.precedence,e),t.instance=r;case"script":return r=ls(l.src),(n=e.querySelector(Js(r)))?(t.instance=n,xt(n),n):(s=l,(n=Zt.get(r))&&(s=Q({},l),Hi(s,n)),e=e.ownerDocument||e,n=e.createElement("script"),xt(n),bt(n,"link",s),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(m(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,xr(s,l.precedence,e));return t.instance}function xr(e,t,l){for(var s=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=s.length?s[s.length-1]:null,r=n,c=0;c<s.length;c++){var i=s[c];if(i.dataset.precedence===t)r=i;else if(r!==n)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=l.nodeType===9?l.head:l,t.insertBefore(e,t.firstChild))}function Ui(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Hi(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var fr=null;function Yx(e,t,l){if(fr===null){var s=new Map,n=fr=new Map;n.set(l,s)}else n=fr,s=n.get(l),s||(s=new Map,n.set(l,s));if(s.has(e))return s;for(s.set(e,null),l=l.getElementsByTagName(e),n=0;n<l.length;n++){var r=l[n];if(!(r[us]||r[pt]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var c=r.getAttribute(t)||"";c=e+c;var i=s.get(c);i?i.push(r):s.set(c,[r])}}return s}function Qx(e,t,l){e=e.ownerDocument||e,e.head.insertBefore(l,t==="title"?e.querySelector("head > title"):null)}function Tp(e,t,l){if(l===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Gx(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function _p(e,t,l,s){if(l.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var n=as(s.href),r=t.querySelector(Zs(n));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=mr.bind(e),t.then(e,e)),l.state.loading|=4,l.instance=r,xt(r);return}r=t.ownerDocument||t,s=$x(s),(n=Zt.get(n))&&Ui(s,n),r=r.createElement("link"),xt(r);var c=r;c._p=new Promise(function(i,h){c.onload=i,c.onerror=h}),bt(r,"link",s),l.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,t),(t=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=mr.bind(e),t.addEventListener("load",l),t.addEventListener("error",l))}}var qi=0;function Mp(e,t){return e.stylesheets&&e.count===0&&hr(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var s=setTimeout(function(){if(e.stylesheets&&hr(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&qi===0&&(qi=62500*fp());var n=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&hr(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>qi?50:800)+t);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(n)}}:null}function mr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var pr=null;function hr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,pr=new Map,t.forEach(Op,e),pr=null,mr.call(e))}function Op(e,t){if(!(t.state.loading&4)){var l=pr.get(e);if(l)var s=l.get(null);else{l=new Map,pr.set(e,l);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var c=n[r];(c.nodeName==="LINK"||c.getAttribute("media")!=="not all")&&(l.set(c.dataset.precedence,c),s=c)}s&&l.set(null,s)}n=t.instance,c=n.getAttribute("data-precedence"),r=l.get(c)||s,r===s&&l.set(null,n),l.set(c,n),this.count++,s=mr.bind(this),n.addEventListener("load",s),n.addEventListener("error",s),r?r.parentNode.insertBefore(n,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var Ws={$$typeof:p,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function Lp(e,t,l,s,n,r,c,i,h){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Or(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Or(0),this.hiddenUpdates=Or(null),this.identifierPrefix=s,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=c,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=h,this.incompleteTransitions=new Map}function Kx(e,t,l,s,n,r,c,i,h,R,W,P){return e=new Lp(e,t,l,c,h,R,W,P,i),t=1,r===!0&&(t|=24),r=Mt(3,null,null,t),e.current=r,r.stateNode=e,t=vc(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:s,isDehydrated:l,cache:t},Nc(r),e}function Vx(e){return e?(e=Ol,e):Ol}function Xx(e,t,l,s,n,r){n=Vx(n),s.context===null?s.context=n:s.pendingContext=n,s=_a(t),s.payload={element:l},r=r===void 0?null:r,r!==null&&(s.callback=r),l=Ma(e,s,t),l!==null&&(Et(l,e,t),Cs(l,e,t))}function Zx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<t?l:t}}function $i(e,t){Zx(e,t),(e=e.alternate)&&Zx(e,t)}function Jx(e){if(e.tag===13||e.tag===31){var t=ll(e,67108864);t!==null&&Et(t,e,67108864),$i(e,67108864)}}function Wx(e){if(e.tag===13||e.tag===31){var t=Ht();t=Lr(t);var l=ll(e,t);l!==null&&Et(l,e,t),$i(e,t)}}var yr=!0;function Rp(e,t,l,s){var n=b.T;b.T=null;var r=F.p;try{F.p=2,Bi(e,t,l,s)}finally{F.p=r,b.T=n}}function Up(e,t,l,s){var n=b.T;b.T=null;var r=F.p;try{F.p=8,Bi(e,t,l,s)}finally{F.p=r,b.T=n}}function Bi(e,t,l,s){if(yr){var n=Yi(s);if(n===null)ki(e,t,s,vr,l),Ix(e,s);else if(qp(n,e,t,l,s))s.stopPropagation();else if(Ix(e,s),t&4&&-1<Hp.indexOf(e)){for(;n!==null;){var r=Sl(n);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var c=Ia(r.pendingLanes);if(c!==0){var i=r;for(i.pendingLanes|=2,i.entangledLanes|=2;c;){var h=1<<31-Tt(c);i.entanglements[1]|=h,c&=~h}aa(r),(Ue&6)===0&&(er=st()+500,Gs(0))}}break;case 31:case 13:i=ll(r,2),i!==null&&Et(i,r,2),ar(),$i(r,2)}if(r=Yi(s),r===null&&ki(e,t,s,vr,l),r===n)break;n=r}n!==null&&s.stopPropagation()}else ki(e,t,s,null,l)}}function Yi(e){return e=Gr(e),Qi(e)}var vr=null;function Qi(e){if(vr=null,e=Nl(e),e!==null){var t=$(e);if(t===null)e=null;else{var l=t.tag;if(l===13){if(e=q(t),e!==null)return e;e=null}else if(l===31){if(e=ae(t),e!==null)return e;e=null}else if(l===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return vr=e,null}function Fx(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mr()){case so:return 2;case no:return 8;case rn:case wf:return 32;case ro:return 268435456;default:return 32}default:return 32}}var Gi=!1,Ga=null,Ka=null,Va=null,Fs=new Map,Is=new Map,Xa=[],Hp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ix(e,t){switch(e){case"focusin":case"focusout":Ga=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":Va=null;break;case"pointerover":case"pointerout":Fs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(t.pointerId)}}function Ps(e,t,l,s,n,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:l,eventSystemFlags:s,nativeEvent:r,targetContainers:[n]},t!==null&&(t=Sl(t),t!==null&&Jx(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function qp(e,t,l,s,n){switch(t){case"focusin":return Ga=Ps(Ga,e,t,l,s,n),!0;case"dragenter":return Ka=Ps(Ka,e,t,l,s,n),!0;case"mouseover":return Va=Ps(Va,e,t,l,s,n),!0;case"pointerover":var r=n.pointerId;return Fs.set(r,Ps(Fs.get(r)||null,e,t,l,s,n)),!0;case"gotpointercapture":return r=n.pointerId,Is.set(r,Ps(Is.get(r)||null,e,t,l,s,n)),!0}return!1}function Px(e){var t=Nl(e.target);if(t!==null){var l=$(t);if(l!==null){if(t=l.tag,t===13){if(t=q(l),t!==null){e.blockedOn=t,fo(e.priority,function(){Wx(l)});return}}else if(t===31){if(t=ae(l),t!==null){e.blockedOn=t,fo(e.priority,function(){Wx(l)});return}}else if(t===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function br(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var l=Yi(e.nativeEvent);if(l===null){l=e.nativeEvent;var s=new l.constructor(l.type,l);Qr=s,l.target.dispatchEvent(s),Qr=null}else return t=Sl(l),t!==null&&Jx(t),e.blockedOn=l,!1;t.shift()}return!0}function ef(e,t,l){br(e)&&l.delete(t)}function $p(){Gi=!1,Ga!==null&&br(Ga)&&(Ga=null),Ka!==null&&br(Ka)&&(Ka=null),Va!==null&&br(Va)&&(Va=null),Fs.forEach(ef),Is.forEach(ef)}function gr(e,t){e.blockedOn===t&&(e.blockedOn=null,Gi||(Gi=!0,x.unstable_scheduleCallback(x.unstable_NormalPriority,$p)))}var jr=null;function tf(e){jr!==e&&(jr=e,x.unstable_scheduleCallback(x.unstable_NormalPriority,function(){jr===e&&(jr=null);for(var t=0;t<e.length;t+=3){var l=e[t],s=e[t+1],n=e[t+2];if(typeof s!="function"){if(Qi(s||l)===null)continue;break}var r=Sl(l);r!==null&&(e.splice(t,3),t-=3,Yc(r,{pending:!0,data:n,method:l.method,action:s},s,n))}}))}function ss(e){function t(h){return gr(h,e)}Ga!==null&&gr(Ga,e),Ka!==null&&gr(Ka,e),Va!==null&&gr(Va,e),Fs.forEach(t),Is.forEach(t);for(var l=0;l<Xa.length;l++){var s=Xa[l];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Xa.length&&(l=Xa[0],l.blockedOn===null);)Px(l),l.blockedOn===null&&Xa.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(s=0;s<l.length;s+=3){var n=l[s],r=l[s+1],c=n[St]||null;if(typeof r=="function")c||tf(l);else if(c){var i=null;if(r&&r.hasAttribute("formAction")){if(n=r,c=r[St]||null)i=c.formAction;else if(Qi(n)!==null)continue}else i=c.action;typeof i=="function"?l[s+1]=i:(l.splice(s,3),s-=3),tf(l)}}}function af(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(c){return n=c})},focusReset:"manual",scroll:"manual"})}function t(){n!==null&&(n(),n=null),s||setTimeout(l,20)}function l(){if(!s&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(l,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),n!==null&&(n(),n=null)}}}function Ki(e){this._internalRoot=e}Nr.prototype.render=Ki.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(m(409));var l=t.current,s=Ht();Xx(l,s,e,t,null,null)},Nr.prototype.unmount=Ki.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xx(e.current,2,null,e,null,null),ar(),t[jl]=null}};function Nr(e){this._internalRoot=e}Nr.prototype.unstable_scheduleHydration=function(e){if(e){var t=xo();e={blockedOn:null,target:e,priority:t};for(var l=0;l<Xa.length&&t!==0&&t<Xa[l].priority;l++);Xa.splice(l,0,e),l===0&&Px(e)}};var lf=z.version;if(lf!=="19.2.3")throw Error(m(527,lf,"19.2.3"));F.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(m(188)):(e=Object.keys(e).join(","),Error(m(268,e)));return e=v(t),e=e!==null?M(e):null,e=e===null?null:e.stateNode,e};var Bp={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:b,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sr.isDisabled&&Sr.supportsFiber)try{is=Sr.inject(Bp),zt=Sr}catch{}}return tn.createRoot=function(e,t){if(!y(e))throw Error(m(299));var l=!1,s="",n=du,r=uu,c=xu;return t!=null&&(t.unstable_strictMode===!0&&(l=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=Kx(e,1,!1,null,null,l,s,null,n,r,c,af),e[jl]=t.current,Di(e),new Ki(t)},tn.hydrateRoot=function(e,t,l){if(!y(e))throw Error(m(299));var s=!1,n="",r=du,c=uu,i=xu,h=null;return l!=null&&(l.unstable_strictMode===!0&&(s=!0),l.identifierPrefix!==void 0&&(n=l.identifierPrefix),l.onUncaughtError!==void 0&&(r=l.onUncaughtError),l.onCaughtError!==void 0&&(c=l.onCaughtError),l.onRecoverableError!==void 0&&(i=l.onRecoverableError),l.formState!==void 0&&(h=l.formState)),t=Kx(e,1,!0,t,l??null,s,n,h,r,c,i,af),t.context=Vx(null),l=t.current,s=Ht(),s=Lr(s),n=_a(s),n.callback=null,Ma(l,n,s),l=s,t.current.lanes=l,ds(t,l),aa(t),e[jl]=t.current,Di(e),new Nr(t)},tn.version="19.2.3",tn}var mf;function Ip(){if(mf)return Zi.exports;mf=1;function x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x)}catch(z){console.error(z)}}return x(),Zi.exports=Fp(),Zi.exports}var Pp=Ip();const eh=x=>x.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),th=x=>x.replace(/^([A-Z])|[\s-_]+(\w)/g,(z,g,m)=>m?m.toUpperCase():g.toLowerCase()),pf=x=>{const z=th(x);return z.charAt(0).toUpperCase()+z.slice(1)},jf=(...x)=>x.filter((z,g,m)=>!!z&&z.trim()!==""&&m.indexOf(z)===g).join(" ").trim(),ah=x=>{for(const z in x)if(z.startsWith("aria-")||z==="role"||z==="title")return!0};var lh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const sh=j.forwardRef(({color:x="currentColor",size:z=24,strokeWidth:g=2,absoluteStrokeWidth:m,className:y="",children:$,iconNode:q,...ae},E)=>j.createElement("svg",{ref:E,...lh,width:z,height:z,stroke:x,strokeWidth:m?Number(g)*24/Number(z):g,className:jf("lucide",y),...!$&&!ah(ae)&&{"aria-hidden":"true"},...ae},[...q.map(([v,M])=>j.createElement(v,M)),...Array.isArray($)?$:[$]]));const be=(x,z)=>{const g=j.forwardRef(({className:m,...y},$)=>j.createElement(sh,{ref:$,iconNode:z,className:jf(`lucide-${eh(pf(x))}`,`lucide-${x}`,m),...y}));return g.displayName=pf(x),g};const nh=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],vl=be("activity",nh);const rh=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],wr=be("archive",rh);const ch=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ih=be("arrow-right",ch);const oh=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],dh=be("calculator",oh);const uh=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],sa=be("calendar",uh);const xh=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Ii=be("chart-no-axes-column",xh);const fh=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Pi=be("chart-pie",fh);const mh=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],gl=be("chevron-down",mh);const ph=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Cr=be("chevron-up",ph);const hh=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Er=be("circle-alert",hh);const yh=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],eo=be("circle-check-big",yh);const vh=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],bh=be("circle-minus",vh);const gh=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ns=be("clipboard-list",gh);const jh=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Nh=be("clipboard",jh);const Sh=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cs=be("clock",Sh);const wh=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ah=be("credit-card",wh);const Dh=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ut=be("dollar-sign",Dh);const kh=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ch=be("eye",kh);const Eh=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],an=be("file-text",Eh);const zh=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ln=be("funnel",zh);const Th=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],_h=be("info",Th);const Mh=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Oh=be("lock",Mh);const Lh=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Rh=be("log-out",Lh);const Uh=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],hf=be("map-pin",Uh);const Hh=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],yf=be("moon",Hh);const qh=[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],Ar=be("package-plus",qh);const $h=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],rs=be("package",$h);const Bh=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],Yh=be("piggy-bank",Bh);const Qh=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Fe=be("refresh-cw",Qh);const Gh=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],vf=be("rotate-ccw",Gh);const Kh=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],sn=be("save",Kh);const Vh=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],mt=be("search",Vh);const Xh=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Nf=be("settings",Xh);const Zh=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],la=be("shield",Zh);const Jh=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Dr=be("shopping-cart",Jh);const Wh=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],nn=be("square-check-big",Wh);const Fh=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],bf=be("sun",Fh);const Ih=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zr=be("trash-2",Ih);const Ph=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Wa=be("trending-up",Ph);const ey=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bl=be("triangle-alert",ey);const ty=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],to=be("truck",ty);const ay=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ly=be("user-plus",ay);const sy=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Fa=be("user",sy);const ny=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Tr=be("users",ny);const ry=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Ja=be("wallet",ry);const cy=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],iy=be("wifi-off",cy),je=async(x,z,g,m=null)=>{try{const y=new AbortController,$=setTimeout(()=>y.abort(),3e4),q=await fetch(x,{method:"POST",redirect:"follow",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:z,payload:g,token:m}),signal:y.signal});if(clearTimeout($),!q.ok)throw new Error(`HTTP error! status: ${q.status}`);const ae=await q.json();if(ae.error)throw new Error(ae.error);return ae}catch(y){throw console.error(`API Error [${z}]:`,y),y.name==="AbortError"?new Error(" GAS "):y.message.includes("Load failed")||y.message.includes("Failed to fetch")?new Error(" GAS Anyone CORS "):y}};function oy({onLogin:x,apiUrl:z}){const[g,m]=j.useState(!1),[y,$]=j.useState(""),[q,ae]=j.useState(""),[E,v]=j.useState(!1),M=async Q=>{Q.preventDefault(),v(!0);try{const A=await je(z,g?"register":"login",{username:y,password:q});console.log("Login API Result:",A),g?(alert(" ()"),m(!1)):x(A)}catch(w){alert(w.message)}finally{v(!1)}};return a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 bg-slate-50",children:a.jsxs("div",{className:"bg-white border border-slate-200 p-8 w-full max-w-md rounded-2xl shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("img",{src:"/inventory-system/logo.png",alt:"Logo",className:"h-20 w-auto object-contain"})}),a.jsx("p",{className:"text-slate-500",children:g?"":""})]}),a.jsxs("form",{onSubmit:M,className:"space-y-6",children:[a.jsx("div",{children:a.jsxs("div",{className:"relative",children:[a.jsx(Fa,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:20}),a.jsx("input",{required:!0,type:"text",placeholder:"",className:"input-field pl-10 bg-slate-50 border-slate-200 focus:bg-white transition-all",value:y,onChange:Q=>$(Q.target.value)})]})}),a.jsx("div",{children:a.jsxs("div",{className:"relative",children:[a.jsx(Oh,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:20}),a.jsx("input",{required:!0,type:"password",placeholder:"",className:"input-field pl-10 bg-slate-50 border-slate-200 focus:bg-white transition-all",value:q,onChange:Q=>ae(Q.target.value)})]})}),a.jsxs("button",{type:"submit",disabled:E,className:"btn-primary w-full flex justify-center items-center gap-2 py-3",children:[E?"...":g?"":""," ",a.jsx(ih,{size:18})]})]}),a.jsx("div",{className:"mt-6 text-center text-sm text-slate-500",children:a.jsx("button",{onClick:()=>m(!g),className:"hover:text-blue-400 transition-colors",children:g?"":""})})]})})}const ao={1L:75,1L:80,2L:155,1L:80,2L:155,:90,:20,:20,:20,:20,:18.3,:20,:16.7,:20,:18.3,:45,:70,:70,:70,:70,:55,471:30,1795:75,:27.5,:25,:25,:30,:30,:27.5,:25,:20,:10,:20,:20,:25,:20,:20,:20,:20,:10,:20,:20,:20,:20,:20,:16.7,:20,1L:70,2L:140,:50,:70,:50,:20,400:16.7,1000:25,1000:40,2000:40,2000:60,1000:60,2000:100,500:50,1000:60},gf=Object.keys(ao),kr={1L:20,1L:20,2L:12,1L:20,2L:12,:20,:70,:70,:70,:12,:24,:20,:108,:40,:40,:15,:4,:4,:4,:4,:16,471:30,1795:9,:60,:20,:24,:15,:15,:24,:25,:15,:15,:15,:15,:24,:24,:24,:24,:15,:15,:15,:15,:15,:15,:15,:24,:15},_r=(x,z)=>[...x].sort((g,m)=>{const y=String(g[z]||""),$=String(m[z]||""),q=gf.indexOf(y),ae=gf.indexOf($);return q===-1&&ae===-1?y.localeCompare($):q===-1?1:ae===-1?-1:q-ae}),Ge=(x=new Date)=>{const z=new Date(x);return`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}-${String(z.getDate()).padStart(2,"0")}`};function dy({user:x,apiUrl:z,logActivity:g}){const[m,y]=j.useState([]),[$,q]=j.useState({1e3:0,500:0,100:0,50:0,10:0,5:0,1:0}),[ae,E]=j.useState(5e3),[v,M]=j.useState({stall:0,cleaning:0,electricity:0,gas:0,parking:0,goods:0,bags:0,others:0,linePay:0,serviceFee:0}),[Q,w]=j.useState(""),[A,U]=j.useState("CASH"),[X,u]=j.useState(!1);j.useEffect(()=>{E(A==="CASH"?5e3:0)},[A]);const d=j.useCallback(async()=>{try{const S=await je(z,"getProducts",{},x.token);if(console.log("Sales Page - Raw Products Data:",S),Array.isArray(S)){const K=S.filter(b=>(Number(b.stock)||0)>0||(Number(b.originalStock)||0)>0),Z=_r(K,"name");console.log("Sales Page - Sorted Products (Stock or Original > 0):",Z),y(Z.map(b=>{const F=Number(b.price)||0,le=ao[b.name]!==void 0?ao[b.name]:null,re=`last_price_${b.id}`,ne=localStorage.getItem(re);let f=F;return le!==null&&(f=le),ne!==null&&(f=Number(ne)),{id:b.id,name:b.name,stock:Number(b.stock)||0,originalStock:Number(b.originalStock)||0,picked:0,original:0,returns:0,sold:0,price:f,subtotal:0}}))}else console.error("Sales Page - Data is not an array:",S)}catch(S){console.error("Fetch products failed",S),alert(": "+S.message)}},[z,x.token]);j.useEffect(()=>{(async()=>x?.token&&await d())()},[x.token,d]);const O=(S,K,Z)=>{let b=Number(Z);isNaN(b)&&(b=0),y(F=>F.map(le=>{if(le.id!==S)return le;let re=K==="picked"?b:le.picked||0,ne=K==="original"?b:le.original||0,f=K==="returns"?b:le.returns||0,Y=K==="price"?b:le.price||0;K==="price"&&localStorage.setItem(`last_price_${S}`,Y.toString()),re>le.stock&&(re=le.stock),re<0&&(re=0),ne>le.originalStock&&(ne=le.originalStock),ne<0&&(ne=0);const ee=re+ne;f>ee&&(f=ee),f<0&&(f=0);const se={...le,picked:re,original:ne,returns:f,price:Y};return se.sold=se.picked+se.original-se.returns,se.subtotal=se.sold*(se.price||0),se}))},p=S=>{const K=document.getElementById(S);K&&(K.focus(),K.select?.(),K.scrollIntoView({block:"nearest",behavior:"smooth"}))},D=(S,K,Z,b="input-")=>{if(!["Enter","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(S.key))return;S.key.startsWith("Arrow")&&S.preventDefault();const le=["picked","original","returns","price"],re=le.indexOf(Z);if(S.key==="Enter"){S.preventDefault();const f=["picked","original","returns","price"],Y=f.indexOf(Z);if(Y<f.length-1&&Y!==-1){const ee=f[Y+1];p(`${b}${K}-${ee}`)}else K<m.length-1?p(`${b}${K+1}-picked`):p("input-cash-1000");return}let ne=null;S.key==="ArrowUp"?K>0&&(ne=`${b}${K-1}-${Z}`):S.key==="ArrowDown"?K<m.length-1?ne=`${b}${K+1}-${Z}`:ne="input-cash-1000":S.key==="ArrowLeft"?re>0?ne=`${b}${K}-${le[re-1]}`:K>0&&(ne=`${b}${K-1}-price`):S.key==="ArrowRight"&&(re<le.length-1?ne=`${b}${K}-${le[re+1]}`:K<m.length-1?ne=`${b}${K+1}-picked`:ne="input-cash-1000"),ne&&p(ne)},k=(S,K={})=>{const{next:Z,prev:b,up:F,down:le,left:re,right:ne}=K;if(!["Enter","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(S.key))return;S.key.startsWith("Arrow")&&S.preventDefault();let Y=null;S.key==="Enter"?(S.preventDefault(),Y=Z):S.key==="ArrowDown"?Y=le||Z:S.key==="ArrowUp"?Y=F||b:S.key==="ArrowLeft"?Y=re||b:S.key==="ArrowRight"&&(Y=ne||Z),Y?p(Y):(S.key==="ArrowUp"||S.key==="ArrowLeft")&&m.length>0&&p(`input-${m.length-1}-price`)},o=m.reduce((S,K)=>S+(K.subtotal||0),0),V=Object.entries($).reduce((S,[K,Z])=>S+Number(K)*Z,0)-ae,ce=Number(v.stall)+Number(v.cleaning)+Number(v.electricity)+Number(v.gas)+Number(v.parking)+Number(v.goods)+Number(v.bags)+Number(v.others)+Number(v.linePay),ie=A==="CREDIT",H=ie?o:V+ce+Number(v.serviceFee)-o,J=async()=>{if(!Q.trim()){alert("");const K=document.getElementById("input-location");K&&K.focus();return}const S={salesRep:x.username,customer:Q,paymentMethod:A,salesData:m.map(K=>({productId:K.id,picked:K.picked,original:K.original,returns:K.returns,sold:K.sold,unitPrice:K.price})),cashData:{totalCash:A==="CREDIT"?0:V,reserve:ae},expenseData:{...v,finalTotal:H}};u(!0);try{await je(z,"saveSales",S,x.token),g&&g({actionType:"DATA_EDIT",page:"",details:JSON.stringify({customer:Q,paymentMethod:A,totalAmount:ie?o:H,productCount:m.filter(K=>K.sold>0).length})}),alert(" Google Sheet"),window.location.reload()}catch(K){alert(": "+K.message)}finally{u(!1)}};return a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 h-full overflow-y-auto xl:overflow-hidden",children:[X&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)]",children:"..."})]}),a.jsxs("div",{className:"xl:col-span-2 glass-panel p-6 overflow-hidden flex flex-col h-auto min-h-[60vh] xl:h-[calc(100vh-10rem)]",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[a.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-[var(--text-primary)]",children:[a.jsx(Fe,{size:20,className:"text-[var(--accent-blue)]"})," "]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-4 w-full md:w-auto",children:[a.jsxs("div",{className:"flex bg-[var(--bg-tertiary)] rounded-lg p-1 border border-[var(--border-primary)] self-start md:self-auto",children:[a.jsx("button",{onClick:()=>U("CASH"),className:`px-3 py-1 text-xs font-bold rounded-md transition-all ${A==="CASH"?"bg-emerald-500 text-white shadow-sm":"text-[var(--text-tertiary)] hover:text-[var(--text-secondary)]"}`,children:""}),a.jsx("button",{onClick:()=>U("CREDIT"),className:`px-3 py-1 text-xs font-bold rounded-md transition-all ${A==="CREDIT"?"bg-amber-500 text-white shadow-sm":"text-[var(--text-tertiary)] hover:text-[var(--text-secondary)]"}`,children:""})]}),a.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[a.jsx("label",{className:"text-sm text-[var(--text-secondary)] font-bold whitespace-nowrap",children:":"}),a.jsx("input",{id:"input-location",type:"text",className:"input-field py-1 px-3 w-full md:w-48",placeholder:"...",value:Q,onChange:S=>w(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),p("input-m-0-picked")||p("input-0-picked"))}})]})]})]}),a.jsxs("div",{className:"flex-1 overflow-auto",children:[a.jsx("div",{className:"md:hidden space-y-4",children:m.map((S,K)=>a.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-xl p-4 border border-[var(--border-primary)]",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsx("div",{className:"font-bold text-[var(--text-primary)] text-lg",children:S.name}),a.jsxs("div",{className:"text-xs font-mono bg-[var(--bg-tertiary)] px-2 py-1 rounded border border-[var(--border-primary)]",children:[a.jsx("span",{className:"text-[var(--text-tertiary)] mr-1",children:""}),a.jsx("span",{className:"text-blue-500 font-bold",children:S.stock}),a.jsx("span",{className:"text-[var(--text-tertiary)] mx-1",children:"/"}),a.jsx("span",{className:"text-orange-500 font-bold",children:S.originalStock||0})]})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] text-center font-bold",children:""}),a.jsx("input",{id:`input-m-${K}-picked`,type:"number",className:"input-field text-center p-2 text-base font-bold",value:S.picked||"",onChange:Z=>O(S.id,"picked",Z.target.value),onKeyDown:Z=>D(Z,K,"picked","input-m-")})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] text-center font-bold",children:""}),a.jsx("input",{id:`input-m-${K}-original`,type:"number",className:"input-field text-center p-2 text-base font-bold",value:S.original||"",onChange:Z=>O(S.id,"original",Z.target.value),onKeyDown:Z=>D(Z,K,"original","input-m-")})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] text-center font-bold",children:""}),a.jsx("input",{id:`input-m-${K}-returns`,type:"number",className:"input-field text-center p-2 text-base font-bold text-red-600",value:S.returns||"",onChange:Z=>O(S.id,"returns",Z.target.value),onKeyDown:Z=>D(Z,K,"returns","input-m-")})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] text-center font-bold",children:""}),a.jsx("input",{id:`input-m-${K}-price`,type:"number",className:"input-field text-center p-2 text-base font-bold",value:S.price,onChange:Z=>O(S.id,"price",Z.target.value),onKeyDown:Z=>D(Z,K,"price","input-m-")})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-[var(--border-primary)]",children:[a.jsxs("div",{className:"text-xs text-[var(--text-secondary)]",children:[": ",a.jsx("span",{className:"font-bold text-blue-500 text-sm ml-1",children:S.sold})]}),a.jsxs("div",{className:"text-sm font-bold text-rose-600 font-mono",children:[a.jsx("span",{className:"text-xs text-[var(--text-tertiary)] font-normal mr-1",children:""}),"$",S.subtotal?.toLocaleString()]})]})]},S.id))}),a.jsxs("table",{className:"hidden md:table w-full text-left border-collapse",children:[a.jsx("thead",{className:"sticky top-0 bg-[var(--bg-secondary)] z-10 text-[var(--text-secondary)] text-xs uppercase font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3",children:""}),a.jsx("th",{className:"p-3 w-20",children:""}),a.jsx("th",{className:"p-3 w-24",children:"(+)"}),a.jsx("th",{className:"p-3 w-24",children:"(+)"}),a.jsx("th",{className:"p-3 w-24",children:"(-)"}),a.jsx("th",{className:"p-3 w-20 text-center",children:""}),a.jsx("th",{className:"p-3 w-24",children:""}),a.jsx("th",{className:"p-3 w-28 text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:m.map((S,K)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-3 font-medium text-[var(--text-primary)]",children:S.name}),a.jsxs("td",{className:"p-3 text-[var(--text-secondary)] font-mono tracking-wider",children:[a.jsx("span",{className:"text-blue-500",children:S.stock}),a.jsx("span",{className:"text-[var(--text-tertiary)] mx-1",children:"/"}),a.jsx("span",{className:"text-orange-500",children:S.originalStock||0})]}),a.jsx("td",{className:"p-3",children:a.jsx("input",{id:`input-${K}-picked`,type:"number",className:"input-field text-center p-1",value:S.picked||"",onChange:Z=>O(S.id,"picked",Z.target.value),onKeyDown:Z=>D(Z,K,"picked")})}),a.jsx("td",{className:"p-3",children:a.jsx("input",{id:`input-${K}-original`,type:"number",className:"input-field text-center p-1",value:S.original||"",onChange:Z=>O(S.id,"original",Z.target.value),onKeyDown:Z=>D(Z,K,"original")})}),a.jsx("td",{className:"p-3",children:a.jsx("input",{id:`input-${K}-returns`,type:"number",className:"input-field text-center p-1 text-red-600",value:S.returns||"",onChange:Z=>O(S.id,"returns",Z.target.value),onKeyDown:Z=>D(Z,K,"returns")})}),a.jsx("td",{className:"p-3 text-center font-bold text-blue-500",children:S.sold}),a.jsx("td",{className:"p-3",children:a.jsx("input",{id:`input-${K}-price`,type:"number",className:"input-field text-center p-1 w-20",value:S.price,onChange:Z=>O(S.id,"price",Z.target.value),onKeyDown:Z=>D(Z,K,"price")})}),a.jsxs("td",{className:"p-3 text-right font-mono text-rose-600",children:["$",S.subtotal?.toLocaleString()]})]},S.id))})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-primary)] flex justify-between items-center bg-[var(--bg-secondary)] p-4 rounded-lg",children:[a.jsx("span",{className:"text-[var(--text-secondary)]",children:" ()"}),a.jsxs("span",{className:"text-2xl font-bold text-rose-600",children:["$",o.toLocaleString()]})]})]}),a.jsxs("div",{className:"flex flex-col h-auto xl:h-[calc(100vh-10rem)] gap-6",children:[a.jsxs("div",{className:`flex-1 xl:overflow-y-auto pr-0 xl:pr-2 space-y-6 transition-opacity ${ie?"opacity-50 pointer-events-none grayscale":""}`,children:[a.jsxs("div",{className:"glass-panel p-6 relative",children:[ie&&a.jsx("div",{className:"absolute inset-0 z-50 cursor-not-allowed"}),a.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2 text-[var(--text-primary)]",children:[a.jsx(dh,{size:20,className:"text-amber-500"})," "]}),a.jsxs("div",{className:"space-y-3",children:[[1e3,500,100,50,10,5,1].map((S,K,Z)=>{const b=`input-cash-${S}`,F=K<Z.length-1?`input-cash-${Z[K+1]}`:"input-reserve",le=K>0?`input-cash-${Z[K-1]}`:null;return a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"w-12 text-[var(--text-secondary)] font-mono text-right",children:S}),a.jsx("span",{className:"text-[var(--text-tertiary)]",children:"x"}),a.jsx("input",{id:b,type:"number",className:"input-field flex-1",placeholder:"0",value:$[S]||"",onChange:re=>q({...$,[S]:Number(re.target.value)}),onKeyDown:re=>k(re,{next:F,prev:le,right:F,left:le}),disabled:ie}),a.jsxs("span",{className:"w-20 text-right font-mono text-[var(--text-secondary)]",children:["$",(S*$[S]).toLocaleString()]})]},S)}),a.jsxs("div",{className:"border-t border-[var(--border-primary)] my-2 pt-2 flex items-center gap-4 text-red-500",children:[a.jsx("span",{className:"w-12 text-right",children:""}),a.jsx("span",{className:"text-[var(--text-tertiary)]",children:"-"}),a.jsx("input",{id:"input-reserve",type:"number",className:"input-field flex-1 border-red-900/50 focus:ring-red-500",value:ae,onChange:S=>E(Number(S.target.value)),onKeyDown:S=>k(S,{next:"input-expense-stall",prev:"input-cash-1",right:"input-expense-stall",left:"input-cash-1"}),disabled:ie})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-3 rounded flex justify-between items-center border border-[var(--border-primary)]",children:[a.jsx("span",{className:"text-[var(--text-secondary)]",children:""}),a.jsxs("span",{className:"text-xl font-bold text-amber-500",children:["$",(ie?0:V).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"glass-panel p-6 relative",children:[ie&&a.jsx("div",{className:"absolute inset-0 z-50 cursor-not-allowed"}),a.jsx("h2",{className:"text-lg font-bold mb-4 text-rose-500",children:""}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:["stall:","cleaning:","electricity:","gas:","parking:","goods:","bags:","others:"].map((S,K,Z)=>{const[b,F]=S.split(":"),le=`input-expense-${b}`,ne=`input-expense-${K<Z.length-1?Z[K+1].split(":")[0]:"linePay"}`,f=K>0?`input-expense-${Z[K-1].split(":")[0]}`:"input-reserve",Y=K>=2?Z[K-2].split(":")[0]:null,ee=K<Z.length-2?Z[K+2].split(":")[0]:"linePay";return a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1",children:F}),a.jsx("input",{id:le,type:"number",className:"input-field text-sm",value:v[b]||"",onChange:se=>M({...v,[b]:Number(se.target.value)}),onKeyDown:se=>k(se,{next:ne,prev:f,right:ne,left:f,up:Y?`input-expense-${Y}`:"input-reserve",down:ee.startsWith("input-")?ee:`input-expense-${ee}`}),disabled:ie})]},b)})}),a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1",children:"Line Pay ()"}),a.jsx("input",{id:"input-expense-linePay",type:"number",className:"input-field border-green-200 text-green-600",value:v.linePay||"",onChange:S=>M({...v,linePay:Number(S.target.value)}),onKeyDown:S=>k(S,{next:"input-expense-serviceFee",prev:"input-expense-others",right:"input-expense-serviceFee",left:"input-expense-others",up:"input-expense-bags"}),disabled:ie})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1",children:" ()"}),a.jsx("input",{id:"input-expense-serviceFee",type:"number",className:"input-field border-red-200 text-red-600",value:v.serviceFee||"",onChange:S=>M({...v,serviceFee:Number(S.target.value)}),disabled:ie,onKeyDown:S=>k(S,{next:"btn-save-data",prev:"input-expense-linePay",right:"btn-save-data",left:"input-expense-linePay",up:"input-expense-others"})})]})]})]})]}),a.jsxs("div",{className:"p-6 glass-panel shadow-lg border-t-4 border-t-blue-600 opacity-100 pointer-events-auto",children:[a.jsx("div",{className:"text-sm text-[var(--text-secondary)] mb-1 font-bold",children:" ()"}),a.jsxs("div",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-700 to-indigo-700",children:["$",(ie?o:H).toLocaleString()]}),a.jsxs("button",{id:"btn-save-data",onClick:J,className:"btn-primary w-full mt-6 flex justify-center items-center gap-2 py-4 text-lg",children:[a.jsx(sn,{size:20})," "]})]})]})]})}function uy({user:x,apiUrl:z,logActivity:g}){const[m,y]=j.useState([]),[$,q]=j.useState(!0),[ae,E]=j.useState(""),[v,M]=j.useState(!1),[Q,w]=j.useState(null),[A,U]=j.useState("SCRAP"),[X,u]=j.useState(""),[d,O]=j.useState(""),[p,D]=j.useState({}),[k,o]=j.useState({}),[T,V]=j.useState({}),[ce,ie]=j.useState(!1),H=j.useCallback(async()=>{q(!0);try{const te=await je(z,"getInventory",{},x.token);if(console.log("Inventory API Response:",te),Array.isArray(te)){const xe=te.filter(ze=>{const ue=Number(ze.quantity);return!isNaN(ue)&&ue>0});console.log("Filtered Inventory:",xe);const ye=_r(xe,"productName");console.log("Sorted Inventory:",ye),y(ye)}else console.error("Inventory data is not an array:",te),y([])}catch(te){console.error("Failed to fetch inventory:",te),alert(": "+te.message),y([])}finally{q(!1)}},[z,x.token]);j.useEffect(()=>{(async()=>{if(x?.token){await H();const xe=localStorage.getItem("safetyStocks");xe&&D(JSON.parse(xe));const ye=localStorage.getItem("customCaseSizes");ye&&V(JSON.parse(ye))}})()},[x.token,H]);const J=te=>{if(!te)return"-";const xe=new Date(te);return isNaN(xe.getTime())?String(te):xe.toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"})},S=te=>{w(te),u(""),O(""),M(!0)},K=async()=>{if(!X||Number(X)<=0){alert("");return}if(!d.trim()){alert("");return}ie(!0);try{await je(z,"adjustInventory",{batchId:Q.batchId,type:A,quantity:Number(X),note:d},x.token),g&&g({actionType:"DATA_EDIT",page:"",details:JSON.stringify({type:"ADJUSTMENT",product:Q.productName,adjustType:A,quantity:Number(X),note:d})}),alert(""),M(!1),H()}catch(te){alert(": "+te.message)}finally{ie(!1)}},Z=(te,xe)=>{const ye={...p,[te]:Number(xe)||0};D(ye),localStorage.setItem("safetyStocks",JSON.stringify(ye))},b=(te,xe)=>{o({...k,[te]:xe})},F=te=>{const xe=k[te];xe!==void 0&&Z(te,xe)},le=(te,xe)=>{const ye={...T,[te]:Number(xe)||0};V(ye),localStorage.setItem("customCaseSizes",JSON.stringify(ye))},re=te=>{const xe=document.getElementById(te);xe&&(xe.focus(),xe.select?.(),xe.scrollIntoView({block:"nearest",behavior:"smooth"}))},ne=(te,xe,ye,ze,ue=!1)=>{const et=ze[xe],ot=ue?"m-":"";if(te.key==="Enter"||te.key==="ArrowRight"){if(te.preventDefault(),ye==="case")re(`${ot}safety-input-${et.productName}-${et.batchId}`);else if(xe<ze.length-1){const ke=ze[xe+1];re(`${ot}case-input-${ke.productName}-${ke.batchId}`)}}else if(te.key==="ArrowLeft"){if(te.preventDefault(),ye==="safety")re(`${ot}case-input-${et.productName}-${et.batchId}`);else if(xe>0){const ke=ze[xe-1];re(`${ot}safety-input-${ke.productName}-${ke.batchId}`)}}else if(te.key==="ArrowDown"){if(te.preventDefault(),xe<ze.length-1){const ke=ze[xe+1];re(`${ot}${ye}-input-${ke.productName}-${ke.batchId}`)}}else if(te.key==="ArrowUp"&&(te.preventDefault(),xe>0)){const ke=ze[xe-1];re(`${ot}${ye}-input-${ke.productName}-${ke.batchId}`)}},f=m.filter(te=>{const xe=String(te.productName||"").toLowerCase(),ye=ae.toLowerCase();return xe.includes(ye)?!0:ye.length>6?String(te.batchId||"").toLowerCase().includes(ye):!1}),Y=f.filter(te=>te.type==="STOCK"),ee=f.filter(te=>te.type!=="STOCK"),se={};m.forEach(te=>{se[te.productName]||(se[te.productName]=0),se[te.productName]+=Number(te.quantity)});const ve=(te,xe,ye,ze)=>a.jsxs("div",{className:"hidden md:flex bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] p-6 flex-col shadow-sm",children:[a.jsxs("h3",{className:`text-lg font-bold mb-4 flex items-center gap-2 ${ze}`,children:[a.jsx(ye,{size:20})," ",xe]}),a.jsx("div",{className:"rounded-lg border border-[var(--border-primary)] overflow-hidden",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-sm uppercase",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-center",children:" / "}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:$?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-6 text-center text-[var(--text-secondary)]",children:"..."})}):te.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-6 text-center text-[var(--text-secondary)]",children:""})}):te.map((ue,et)=>{const ot=p[ue.productName]||0,ke=T[ue.productName],Jt=ke!==void 0&&ke!==0?ke:kr[ue.productName]||0,_=se[ue.productName]||0,me=ot>0&&_<=ot,De=ue.expiry?new Date(ue.expiry):null,Ne=new Date;Ne.setHours(0,0,0,0);const tt=new Date(Ne);tt.setDate(Ne.getDate()+3);const $e=De&&De>=Ne&&De<=tt,We=De&&De<Ne;return a.jsxs("tr",{className:`hover:bg-[var(--bg-hover)] transition-colors ${me?"bg-red-50/10":""} ${We?"bg-rose-50/10":$e?"bg-amber-50/10":""}`,children:[a.jsx("td",{className:"p-4 font-medium text-[var(--text-primary)]",children:a.jsxs("div",{className:"flex items-center gap-2",children:[me&&a.jsx(bl,{size:16,className:"text-red-400"}),ue.productName]})}),a.jsx("td",{className:"p-4 text-center",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"font-mono text-emerald-600 font-bold text-lg",children:ue.quantity}),Jt>0&&a.jsxs("span",{className:"text-blue-600 font-mono text-sm",children:["",(ue.quantity/Jt).toFixed(1)]})]})}),a.jsx("td",{className:"p-4 text-sm whitespace-nowrap",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:We?"text-rose-500 line-through":$e?"text-amber-500 font-bold":"text-[var(--text-secondary)]",children:J(ue.expiry)}),$e&&a.jsxs("span",{className:"text-[10px] bg-amber-100 text-amber-700 border border-amber-200 px-1.5 py-0.5 rounded self-start flex items-center gap-1 font-bold",children:[a.jsx(cs,{size:10})," "]}),We&&a.jsxs("span",{className:"text-[10px] bg-rose-100 text-rose-700 border border-rose-200 px-1.5 py-0.5 rounded self-start flex items-center gap-1 font-bold",children:[a.jsx(bl,{size:10})," "]})]})}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("input",{id:`case-input-${ue.productName}-${ue.batchId}`,type:"number",className:"input-field w-16 text-center text-xs p-1 border-blue-200/30",value:ke!==void 0?ke:kr[ue.productName]||"",onChange:Re=>le(ue.productName,Re.target.value),onKeyDown:Re=>ne(Re,et,"case",te),placeholder:""})}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("input",{id:`safety-input-${ue.productName}-${ue.batchId}`,type:"number",className:"input-field w-16 text-center text-xs p-1 border-amber-200/30",value:k[ue.productName]!==void 0?k[ue.productName]:p[ue.productName]||"",onChange:Re=>b(ue.productName,Re.target.value),onBlur:()=>F(ue.productName),onKeyDown:Re=>ne(Re,et,"safety",te),placeholder:""})}),a.jsx("td",{className:"p-4 text-center",children:a.jsxs("button",{onClick:()=>S(ue),className:"btn-secondary text-xs px-3 py-1 flex items-center gap-1 mx-auto",children:[a.jsx(zr,{size:14})," "]})})]},et)})})]})})]}),pe=(te,xe,ye,ze)=>a.jsxs("div",{className:"md:hidden flex flex-col gap-4",children:[a.jsxs("h3",{className:`text-lg font-bold flex items-center gap-2 ${ze} px-1`,children:[a.jsx(ye,{size:20})," ",xe]}),a.jsx("div",{className:"space-y-4",children:$?a.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)]",children:"..."}):te.length===0?a.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:""}):te.map((ue,et)=>{const ot=p[ue.productName]||0,ke=T[ue.productName],Jt=ke!==void 0&&ke!==0?ke:kr[ue.productName]||0,_=se[ue.productName]||0,me=ot>0&&_<=ot,De=ue.expiry?new Date(ue.expiry):null,Ne=new Date;Ne.setHours(0,0,0,0);const tt=new Date(Ne);tt.setDate(Ne.getDate()+3);const $e=De&&De>=Ne&&De<=tt,We=De&&De<Ne;return a.jsxs("div",{className:`bg-[var(--bg-secondary)] rounded-xl p-4 border shadow-sm ${me?"border-red-500/30 bg-red-500/5":"border-[var(--border-primary)]"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-3 border-b border-[var(--border-primary)] pb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[me&&a.jsx(bl,{size:18,className:"text-red-500"}),a.jsx("span",{className:"font-bold text-[var(--text-primary)] text-lg",children:ue.productName})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-2xl font-bold text-emerald-600 font-mono",children:ue.quantity}),Jt>0&&a.jsxs("div",{className:"text-xs text-blue-600 font-mono",children:["",(ue.quantity/Jt).toFixed(1)]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-2 rounded-lg",children:[a.jsx("span",{className:"text-[10px] text-[var(--text-tertiary)] uppercase font-bold block mb-1",children:""}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:`text-sm font-medium ${We?"text-rose-600 line-through":$e?"text-amber-600 font-bold":"text-slate-600"}`,children:J(ue.expiry)}),$e&&a.jsxs("span",{className:"text-[10px] text-amber-600 flex items-center gap-1 mt-0.5",children:[a.jsx(cs,{size:10})," "]}),We&&a.jsxs("span",{className:"text-[10px] text-rose-600 flex items-center gap-1 mt-0.5",children:[a.jsx(bl,{size:10})," "]})]})]}),a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-2 rounded-lg flex flex-col justify-between",children:[a.jsxs("div",{className:"flex items-center justify-between gap-1 mb-1",children:[a.jsx("span",{className:"text-[10px] text-[var(--text-tertiary)] uppercase font-bold",children:""}),a.jsx("input",{id:`m-case-input-${ue.productName}-${ue.batchId}`,type:"number",className:"w-12 text-center text-xs p-0.5 rounded border border-[var(--border-primary)] bg-[var(--bg-primary)] text-[var(--text-primary)]",value:ke!==void 0?ke:kr[ue.productName]||"",onChange:Re=>le(ue.productName,Re.target.value),onKeyDown:Re=>ne(Re,et,"case",te,!0)})]}),a.jsxs("div",{className:"flex items-center justify-between gap-1",children:[a.jsx("span",{className:"text-[10px] text-[var(--text-tertiary)] uppercase font-bold",children:""}),a.jsx("input",{id:`m-safety-input-${ue.productName}-${ue.batchId}`,type:"number",className:"w-12 text-center text-xs p-0.5 rounded border border-[var(--border-primary)] bg-[var(--bg-primary)] text-[var(--text-primary)]",value:k[ue.productName]!==void 0?k[ue.productName]:p[ue.productName]||"",onChange:Re=>b(ue.productName,Re.target.value),onBlur:()=>F(ue.productName),onKeyDown:Re=>ne(Re,et,"safety",te,!0)})]})]})]}),a.jsxs("button",{onClick:()=>S(ue),className:"w-full btn-secondary py-2 flex items-center justify-center gap-2 text-sm",children:[a.jsx(zr,{size:16})," "]})]},et)})})]});return a.jsxs("div",{className:"max-w-6xl mx-auto h-[calc(100vh-6rem)] flex flex-col p-4 gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-stretch md:items-center bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] shadow-sm gap-4",children:[a.jsxs("h2",{className:"text-xl md:text-2xl font-bold flex items-center gap-2 text-[var(--text-primary)]",children:[a.jsx(rs,{className:"text-blue-600"})," "]}),a.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[a.jsxs("div",{className:"relative flex-1 md:flex-none",children:[a.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full md:w-64",value:ae,onChange:te=>E(te.target.value)})]}),a.jsx("button",{onClick:H,className:"btn-secondary p-2 whitespace-nowrap",title:"",children:a.jsx(Fe,{size:20})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto flex flex-col gap-6 pb-6",children:[ve(Y,"",rs,"text-blue-600"),pe(Y,"",rs,"text-blue-600"),ve(ee,"/",Er,"text-orange-600"),pe(ee,"/",Er,"text-orange-600")]}),v&&a.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:[ce&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-lg font-bold text-slate-800",children:"..."})]}),a.jsxs("div",{className:"glass-panel p-6 w-96 max-w-[90vw]",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:""}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-[var(--text-secondary)] block mb-1",children:""}),a.jsxs("div",{className:"flex justify-between items-center p-2 bg-[var(--bg-tertiary)] rounded-lg border border-[var(--border-primary)]",children:[a.jsx("div",{className:"text-[var(--text-primary)] font-bold",children:Q?.productName}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-400",children:":"}),a.jsx("span",{className:"text-emerald-600 font-mono font-bold text-lg",children:Q?.quantity})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-slate-400 block mb-1",children:""}),a.jsxs("select",{className:"input-field w-full",value:A,onChange:te=>U(te.target.value),children:[a.jsx("option",{value:"SCRAP",children:""}),a.jsx("option",{value:"RETURN",children:""}),a.jsx("option",{value:"LOSS",children:""}),a.jsx("option",{value:"OTHER",children:""})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-slate-400 block mb-1",children:""}),a.jsx("input",{id:"adjustment-qty-input",type:"number",className:"input-field w-full",value:X,onChange:te=>u(te.target.value),onKeyDown:te=>{(te.key==="Enter"||te.key==="ArrowDown")&&(te.preventDefault(),document.getElementById("adjustment-note-input")?.focus())},placeholder:"",autoFocus:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-sm text-slate-400 block mb-1",children:[" ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("textarea",{id:"adjustment-note-input",className:"input-field w-full",rows:"3",value:d,onChange:te=>O(te.target.value),onKeyDown:te=>{te.key==="Enter"?(te.preventDefault(),K()):te.key==="ArrowUp"&&(te.preventDefault(),document.getElementById("adjustment-qty-input")?.focus())},placeholder:"..."})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:K,className:"btn-primary flex-1",children:""}),a.jsx("button",{onClick:()=>M(!1),className:"btn-secondary flex-1",children:""})]})]})]})]})]})}function xy({user:x,apiUrl:z,logActivity:g}){const m=new Date().getFullYear().toString(),[y,$]=j.useState([{id:Date.now(),vendor:"",productName:"",quantity:"",unitPrice:"",expiryYear:m,expiryMonth:"",expiryDay:""}]),[q,ae]=j.useState({vendors:[],vendorProductMap:{}}),[E,v]=j.useState(!1),[M,Q]=j.useState("CASH");j.useEffect(()=>{const p=async()=>{try{const D=await je(z,"getPurchaseSuggestions",{},x.token);D.vendors&&ae(D)}catch(D){console.error("Failed to fetch suggestions",D)}};x?.token&&p()},[x.token,z]);const w=p=>{if(p&&q.vendorProductMap[p])return q.vendorProductMap[p];const D=new Set;return Object.values(q.vendorProductMap||{}).forEach(k=>k.forEach(o=>D.add(o))),Array.from(D)},A=(p,D,k)=>{$(o=>o.map(T=>T.id===p?{...T,[D]:k}:T))},U=()=>{$(p=>[...p,{id:Date.now()+Math.random(),vendor:"",productName:"",quantity:"",unitPrice:"",expiryYear:m,expiryMonth:"",expiryDay:""}])},X=p=>{y.length>1&&$(D=>D.filter(k=>k.id!==p))},u=p=>{const D=document.getElementById(p);D&&(D.focus(),D.select?.(),D.scrollIntoView({block:"nearest",behavior:"smooth"}))},d=(p,D,k)=>{const T=p.target.id.includes("-m-")?"item-m-":"item-",V=["vendor","product","qty","price","year","month","day"],ce=V.indexOf(k);p.key==="Enter"||p.key==="ArrowRight"?(p.preventDefault(),ce<V.length-1?u(`${T}${D}-${V[ce+1]}`):D<y.length-1?u(`${T}${D+1}-vendor`):p.key==="Enter"&&(U(),setTimeout(()=>u(`${T}${D+1}-vendor`),50))):p.key==="ArrowLeft"?(p.preventDefault(),ce>0?u(`${T}${D}-${V[ce-1]}`):D>0&&u(`${T}${D-1}-day`)):p.key==="ArrowDown"?(p.preventDefault(),D<y.length-1&&u(`${T}${D+1}-${k}`)):p.key==="ArrowUp"&&(p.preventDefault(),D>0&&u(`${T}${D-1}-${k}`))},O=async p=>{p.preventDefault();for(let k=0;k<y.length;k++){const o=y[k];if(!o.vendor.trim()||!o.productName.trim()||!o.quantity||!o.unitPrice||!o.expiryYear||!o.expiryMonth||!o.expiryDay){alert(` ${k+1} 
`);return}}v(!0);const D=y.map(k=>{const o=k.expiryMonth.padStart(2,"0"),T=k.expiryDay.padStart(2,"0");return{vendor:k.vendor,productName:k.productName,quantity:Number(k.quantity),price:Number(k.unitPrice),expiry:`${k.expiryYear}-${o}-${T}`}});try{const k=await je(z,"addPurchase",{items:D,operator:x.username,paymentMethod:M},x.token);g&&g({actionType:"DATA_EDIT",page:"",details:JSON.stringify({vendorCount:new Set(D.map(o=>o.vendor)).size,productCount:D.length,totalPrice:D.reduce((o,T)=>o+T.quantity*T.price,0),paymentMethod:M})}),alert(` ${k.count} `),$([{id:Date.now(),vendor:"",productName:"",quantity:"",unitPrice:"",expiryYear:m,expiryMonth:"",expiryDay:""}]),Q("CASH")}catch(k){alert(": "+k.message)}finally{v(!1)}};return a.jsxs("div",{className:"max-w-[90rem] mx-auto p-4",children:[E&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)]",children:"..."})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold flex items-center gap-2 text-[var(--text-primary)]",children:""}),a.jsxs("div",{className:"flex bg-[var(--bg-tertiary)] p-1 rounded-lg border border-[var(--border-primary)]",children:[a.jsx("button",{onClick:()=>Q("CASH"),className:`px-4 py-2 rounded-md text-sm font-bold transition-all ${M==="CASH"?"bg-emerald-500 text-white shadow-sm":"text-[var(--text-tertiary)] hover:text-[var(--text-secondary)]"}`,children:""}),a.jsx("button",{onClick:()=>Q("CREDIT"),className:`px-4 py-2 rounded-md text-sm font-bold transition-all ${M==="CREDIT"?"bg-purple-600 text-white shadow-sm":"text-[var(--text-tertiary)] hover:text-[var(--text-secondary)]"}`,children:""})]})]}),a.jsxs("form",{onSubmit:O,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-2",children:[a.jsx("h3",{className:"text-sm font-semibold text-[var(--text-secondary)] uppercase tracking-wider",children:""}),a.jsxs("span",{className:"text-xs text-[var(--text-tertiary)]",children:[" ",y.length," "]})]}),a.jsx("datalist",{id:"vendors-list",children:q.vendors.map((p,D)=>a.jsx("option",{value:p},D))}),y.map((p,D)=>{const k=w(p.vendor);return a.jsxs("div",{className:"group relative p-0 md:p-4 bg-transparent md:bg-[var(--bg-tertiary)] rounded-none md:rounded-xl border-b md:border border-[var(--border-primary)] hover:md:shadow-lg transition-all duration-200 mb-6 md:mb-0",children:[a.jsxs("div",{className:"md:absolute md:-left-2 md:top-1/2 md:-translate-y-1/2 mb-2 md:mb-0 flex items-center gap-2 md:block",children:[a.jsx("div",{className:"w-5 h-5 rounded-full bg-emerald-500/10 border border-emerald-500/30 flex items-center justify-center",children:a.jsxs("span",{className:"text-[10px] font-bold text-emerald-600",children:[" ",D+1]})}),a.jsx("span",{className:"md:hidden text-sm font-bold text-[var(--text-secondary)]",children:""})]}),a.jsxs("div",{className:"md:hidden space-y-3 pb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{id:`item-m-${D}-vendor`,list:"vendors-list",className:"input-field flex-1 py-1.5 px-3",placeholder:"",value:p.vendor,onChange:o=>A(p.id,"vendor",o.target.value),onKeyDown:o=>d(o,D,"vendor")})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{id:`item-m-${D}-product`,list:`products-list-${D}`,className:"input-field flex-1 py-1.5 px-3",placeholder:"",value:p.productName,onChange:o=>A(p.id,"productName",o.target.value),onKeyDown:o=>d(o,D,"product")}),a.jsx("datalist",{id:`products-list-${D}`,children:k.map((o,T)=>a.jsx("option",{value:o},T))})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{id:`item-m-${D}-qty`,type:"number",className:"input-field flex-1 py-1.5 px-3",placeholder:"0",value:p.quantity,onChange:o=>A(p.id,"quantity",o.target.value),onKeyDown:o=>d(o,D,"qty")})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{id:`item-m-${D}-price`,type:"number",className:"input-field flex-1 py-1.5 px-3",placeholder:"0",value:p.unitPrice,onChange:o=>A(p.id,"unitPrice",o.target.value),onKeyDown:o=>d(o,D,"price")})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsxs("div",{className:"flex flex-1 gap-1 items-center",children:[a.jsx("input",{id:`item-m-${D}-year`,type:"number",className:"input-field flex-[2] py-1.5 px-1 text-center",placeholder:"YYYY",value:p.expiryYear,onChange:o=>A(p.id,"expiryYear",o.target.value),onKeyDown:o=>d(o,D,"year")}),a.jsx("span",{className:"text-slate-300",children:"/"}),a.jsx("input",{id:`item-m-${D}-month`,type:"number",className:"input-field flex-1 py-1.5 px-1 text-center",placeholder:"MM",value:p.expiryMonth,onChange:o=>A(p.id,"expiryMonth",o.target.value),onKeyDown:o=>d(o,D,"month")}),a.jsx("span",{className:"text-slate-300",children:"/"}),a.jsx("input",{id:`item-m-${D}-day`,type:"number",className:"input-field flex-1 py-1.5 px-1 text-center",placeholder:"DD",value:p.expiryDay,onChange:o=>A(p.id,"expiryDay",o.target.value),onKeyDown:o=>d(o,D,"day")}),y.length>1&&a.jsx("button",{type:"button",onClick:()=>X(p.id),className:"w-8 h-8 ml-1 rounded-lg bg-red-500/10 text-red-500 flex items-center justify-center border border-red-500/20",children:""})]})]})]}),a.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-12 gap-3 items-end",children:[a.jsxs("div",{className:"col-span-12 md:col-span-2",children:[a.jsx("label",{className:"text-xs font-semibold text-[var(--text-secondary)] mb-1.5 flex items-center gap-1 uppercase",children:""}),a.jsx("input",{id:`item-${D}-vendor`,list:"vendors-list",className:"input-field w-full",placeholder:"",value:p.vendor,onChange:o=>A(p.id,"vendor",o.target.value),onKeyDown:o=>d(o,D,"vendor"),autoFocus:D===y.length-1})]}),a.jsxs("div",{className:"col-span-12 md:col-span-3",children:[a.jsx("label",{className:"text-xs font-semibold text-[var(--text-secondary)] mb-1.5 flex items-center gap-1 uppercase",children:""}),a.jsx("input",{id:`item-${D}-product`,list:`products-list-${D}`,className:"input-field w-full",placeholder:"",value:p.productName,onChange:o=>A(p.id,"productName",o.target.value),onKeyDown:o=>d(o,D,"product")})]}),a.jsxs("div",{className:"col-span-6 md:col-span-2",children:[a.jsx("label",{className:"text-xs font-semibold text-[var(--text-secondary)] mb-1.5 flex items-center gap-1 uppercase",children:""}),a.jsx("input",{id:`item-${D}-qty`,type:"number",className:"input-field w-full text-center",placeholder:"0",value:p.quantity,onChange:o=>A(p.id,"quantity",o.target.value),onKeyDown:o=>d(o,D,"qty")})]}),a.jsxs("div",{className:"col-span-6 md:col-span-2",children:[a.jsx("label",{className:"text-xs font-semibold text-[var(--text-secondary)] mb-1.5 flex items-center gap-1 uppercase",children:""}),a.jsx("input",{id:`item-${D}-price`,type:"number",className:"input-field w-full text-center",placeholder:"0",value:p.unitPrice,onChange:o=>A(p.id,"unitPrice",o.target.value),onKeyDown:o=>d(o,D,"price")})]}),a.jsxs("div",{className:"col-span-12 md:col-span-3 grid grid-cols-[1fr_auto_1fr_auto_1fr_auto] gap-1 relative",children:[a.jsx("label",{className:"absolute -top-6 left-0 text-xs font-semibold text-[var(--text-secondary)] mb-1.5 flex items-center gap-1 uppercase",children:""}),a.jsx("input",{id:`item-${D}-year`,className:"input-field w-full text-center font-mono px-1",placeholder:"YYYY",value:p.expiryYear,onChange:o=>A(p.id,"expiryYear",o.target.value),onKeyDown:o=>d(o,D,"year")}),a.jsx("span",{className:"text-[var(--text-tertiary)] self-center",children:"/"}),a.jsx("input",{id:`item-${D}-month`,className:"input-field w-full text-center font-mono px-1",placeholder:"MM",value:p.expiryMonth,onChange:o=>A(p.id,"expiryMonth",o.target.value),onKeyDown:o=>d(o,D,"month")}),a.jsx("span",{className:"text-[var(--text-tertiary)] self-center",children:"/"}),a.jsx("input",{id:`item-${D}-day`,type:"number",className:"input-field w-full text-center font-mono px-1",placeholder:"DD",value:p.expiryDay,onChange:o=>A(p.id,"expiryDay",o.target.value),onKeyDown:o=>d(o,D,"day")}),y.length>1&&a.jsx("button",{type:"button",onClick:()=>X(p.id),className:"w-8 h-8 ml-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-all flex items-center justify-center self-center",title:"",children:""})]})]})]},p.id)})]}),a.jsxs("div",{className:"flex gap-4 mt-8 pt-6 border-t border-[var(--border-primary)]",children:[a.jsxs("button",{type:"button",onClick:U,className:"btn-secondary flex-1 py-4 text-base font-semibold flex items-center justify-center gap-2 hover:scale-105 transition-transform",children:[a.jsx("span",{className:"text-xl",children:""})," "]}),a.jsx("button",{type:"submit",disabled:E,className:"btn-primary flex-[2] py-4 text-lg font-bold shadow-lg shadow-emerald-100 hover:shadow-xl hover:shadow-emerald-200 hover:scale-105 transition-all flex items-center justify-center gap-2",children:E?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-spin",children:""})," ..."]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-xl",children:""})," "]})})]})]})]})]})}function fy({user:x,apiUrl:z}){const[g,m]=j.useState(Ge()),[y,$]=j.useState(Ge()),[q,ae]=j.useState(""),[E,v]=j.useState(""),[M,Q]=j.useState(!1),[w,A]=j.useState([]),[U,X]=j.useState([]),[u,d]=j.useState("SALES"),O=j.useCallback(async()=>{if(!(!g||!y)){Q(!0);try{const H={startDate:g,endDate:y},J=x.role==="BOSS"||x.permissions&&x.permissions.includes("finance"),S=[je(z,"getSalesHistory",H,x.token)];J&&S.push(je(z,"getExpenditures",H,x.token));const K=await Promise.all(S),Z=K[0],b=J?K[1]:[];let F=Array.isArray(Z)?Z:[];const le=q.trim().toLowerCase(),re=E.trim().toLowerCase();le&&(F=F.filter(f=>String(f.location||"").toLowerCase().includes(le))),re&&(F=F.filter(f=>String(f.salesRep||"").toLowerCase().includes(re))),A(F);let ne=Array.isArray(b)?b:[];le&&(ne=ne.filter(f=>String(f.customer||"").toLowerCase().includes(le)||String(f.note||"").toLowerCase().includes(le))),re&&(ne=ne.filter(f=>String(f.salesRep||"").toLowerCase().includes(re))),ne.forEach(f=>{const Y=Number(f.stall||0)+Number(f.cleaning||0)+Number(f.electricity||0)+Number(f.gas||0)+Number(f.parking||0)+Number(f.goods||0)+Number(f.bags||0)+Number(f.others||0)+Number(f.vehicleMaintenance||0)+Number(f.salary||0)+Number(f.linePay||0)+Number(f.serviceFee||0)+Number(f.reserve||0);f.rowTotal=Y,f.salaryAmount=Number(f.salary||0);const ee=Object.keys(f).find(ve=>{const pe=ve.toLowerCase().trim();return pe==="finaltotal"||pe.includes("")||pe.includes("")||pe.includes("")||pe.includes("")}),se=Number(ee?f[ee]:f.finalTotal||0);f.displayFinalTotal=se}),X(ne)}catch(H){console.error(H),alert(": "+H.message)}finally{Q(!1)}}},[g,y,q,E,x.token,z]);Sa.useEffect(()=>{O()},[O]);const p=H=>{H.preventDefault(),O()},D=w?.reduce((H,J)=>H+(Number(J.totalAmount)||0),0)||0,k=w?.reduce((H,J)=>H+(Number(J.soldQty)||0),0)||0,o=U?.reduce((H,J)=>H+(J.rowTotal||0)-(J.salaryAmount||0),0)||0,T=U?.reduce((H,J)=>H+(Number(J.displayFinalTotal)||0),0)||0,V=D-o+T,ce=w?.reduce((H,J)=>{const S=J.productName;return H[S]||(H[S]={name:J.productName,qty:0,amount:0}),H[S].qty+=J.soldQty,H[S].amount+=J.totalAmount,H},{}),ie=ce?Object.values(ce).sort((H,J)=>J.qty-H.qty):[];return a.jsx("div",{className:"max-w-[90rem] mx-auto p-4",children:a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-6 border-b border-[var(--border-primary)] pb-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(an,{className:"text-blue-600"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),w&&a.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2 md:gap-3 w-full md:w-auto",children:[a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-amber-500/10 border border-amber-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:"text-sm md:text-xl font-bold text-amber-700 text-center",children:["$",V.toLocaleString()]})]}),a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-emerald-500/10 border border-emerald-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:"text-sm md:text-xl font-bold text-emerald-700 text-center",children:["$",D.toLocaleString()]})]}),a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-rose-500/10 border border-rose-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:"text-sm md:text-xl font-bold text-rose-700 text-center",children:["$",o.toLocaleString()]})]}),a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-cyan-500/10 border border-cyan-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:"text-sm md:text-xl font-bold text-cyan-700 text-center",children:["$",T.toLocaleString()]})]}),a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-blue-500/10 border border-blue-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsx("p",{className:"text-sm md:text-xl font-bold text-blue-700 text-center",children:k.toLocaleString()})]}),a.jsxs("div",{className:"px-2 md:px-4 py-2 rounded-xl bg-purple-500/10 border border-purple-200/20 shadow-sm",children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsx("p",{className:"text-sm md:text-xl font-bold text-purple-700 text-center",children:w.length})]})]})]}),a.jsxs("form",{onSubmit:p,className:"md:hidden mb-6 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{type:"date",required:!0,className:"input-field flex-1 py-1.5 px-3",value:g,onChange:H=>m(H.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{type:"date",required:!0,className:"input-field flex-1 py-1.5 px-3",value:y,onChange:H=>$(H.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field flex-1 py-1.5 px-3",value:q,onChange:H=>ae(H.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsxs("div",{className:"flex flex-1 gap-2",children:[a.jsx("input",{type:"text",placeholder:"...",className:"input-field flex-1 py-1.5 px-3",value:E,onChange:H=>v(H.target.value)}),a.jsx("button",{type:"submit",disabled:M,className:"btn-primary px-4 py-1.5 flex items-center justify-center rounded-lg shadow-sm active:scale-95 transition-transform",children:a.jsx(mt,{size:18})})]})]})]}),a.jsx("form",{onSubmit:p,className:"hidden md:block mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)] shadow-sm",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 md:contents",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase px-1",children:""}),a.jsx("input",{type:"date",required:!0,className:"input-field w-full",value:g,onChange:H=>m(H.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase px-1",children:""}),a.jsx("input",{type:"date",required:!0,className:"input-field w-full",value:y,onChange:H=>$(H.target.value)})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase px-1",children:""}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full",value:q,onChange:H=>ae(H.target.value)})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"space-y-1 flex-1",children:[a.jsx("label",{className:"text-xs font-bold text-[var(--text-secondary)] uppercase px-1",children:""}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full",value:E,onChange:H=>v(H.target.value)})]}),a.jsxs("button",{type:"submit",disabled:M,className:"btn-primary py-2 px-6 flex items-center justify-center gap-2 self-end h-[42px] min-w-[100px]",children:[M?"...":a.jsx(mt,{size:18})," "]})]})]})}),w&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"rounded-xl border border-[var(--border-primary)] overflow-hidden",children:[a.jsx("div",{className:"px-4 py-3 bg-[var(--bg-tertiary)] border-b border-[var(--border-primary)]",children:a.jsxs("h3",{className:"font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(rs,{size:16,className:"text-blue-600"})," "]})}),a.jsx("div",{className:"overflow-x-auto max-h-60",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-secondary)]",children:ie.length>0?ie.map((H,J)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-4 text-[var(--text-primary)]",children:H.name}),a.jsx("td",{className:"p-4 text-right text-[var(--text-tertiary)]",children:H.qty}),a.jsxs("td",{className:"p-4 text-right text-emerald-600",children:["$",H.amount.toLocaleString()]})]},J)):a.jsx("tr",{children:a.jsx("td",{colSpan:"3",className:"p-8 text-center text-[var(--text-secondary)]",children:""})})})]})})]}),a.jsxs("div",{className:"rounded-xl border border-[var(--border-primary)] overflow-hidden flex flex-col h-[600px]",children:[a.jsxs("div",{className:"px-4 py-3 bg-[var(--bg-tertiary)] border-b border-[var(--border-primary)] flex gap-4",children:[a.jsxs("button",{onClick:()=>d("SALES"),className:`font-bold flex items-center gap-2 pb-2 border-b-2 transition-colors ${u==="SALES"?"text-blue-600 border-blue-600":"text-[var(--text-secondary)] border-transparent hover:text-[var(--text-primary)]"}`,children:[a.jsx(Wa,{size:16}),"  (",w.length,")"]}),a.jsxs("button",{onClick:()=>d("EXPENSES"),className:`font-bold flex items-center gap-2 pb-2 border-b-2 transition-colors ${u==="EXPENSES"?"text-rose-600 border-rose-600":"text-[var(--text-secondary)] border-transparent hover:text-[var(--text-primary)]"}`,children:[a.jsx(ut,{size:16}),"  (",U.length,")"]})]}),a.jsx("div",{className:"overflow-auto flex-1",children:u==="SALES"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:w.map((H,J)=>a.jsxs("div",{className:"p-4 space-y-3 bg-[var(--bg-secondary)] hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{className:"text-xs font-mono text-[var(--text-tertiary)]",children:new Date(H.date).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}),a.jsxs("div",{className:"text-emerald-600 font-bold font-mono text-lg",children:["$",H.totalAmount]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1 bg-blue-500/10 text-blue-700 px-2 py-0.5 rounded-md",children:[a.jsx(hf,{size:12})," ",a.jsx("span",{className:"font-medium",children:H.location})]}),a.jsxs("div",{className:"flex items-center gap-1 bg-[var(--bg-tertiary)] text-[var(--text-secondary)] px-2 py-0.5 rounded-md",children:[a.jsx(Fa,{size:12})," ",a.jsx("span",{children:H.salesRep})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-1 border-t border-[var(--border-primary)]",children:[a.jsx("div",{className:"font-bold text-[var(--text-primary)]",children:H.productName}),a.jsxs("div",{className:"text-[var(--text-secondary)]",children:[": ",a.jsx("span",{className:"font-bold text-[var(--text-primary)]",children:H.soldQty})]})]})]},J))}),a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 font-medium w-48",children:""}),a.jsx("th",{className:"p-3 font-medium w-32",children:""}),a.jsx("th",{className:"p-3 font-medium w-32",children:""}),a.jsx("th",{className:"p-3 font-medium",children:""}),a.jsx("th",{className:"p-3 font-medium text-right w-24",children:""}),a.jsx("th",{className:"p-3 font-medium text-right w-32",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] text-[var(--text-secondary)] bg-[var(--bg-secondary)]",children:w.map((H,J)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-3 text-[var(--text-tertiary)]",children:new Date(H.date).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}),a.jsx("td",{className:"p-3",children:H.location}),a.jsx("td",{className:"p-3",children:H.salesRep}),a.jsx("td",{className:"p-3 text-[var(--text-primary)]",children:H.productName}),a.jsx("td",{className:"p-3 text-right",children:H.soldQty}),a.jsxs("td",{className:"p-3 text-right",children:["$",H.totalAmount]})]},J))})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:U.map((H,J)=>{const S=[];return H.stall&&S.push(` $${H.stall}`),H.cleaning&&S.push(` $${H.cleaning}`),H.electricity&&S.push(` $${H.electricity}`),H.gas&&S.push(` $${H.gas}`),H.parking&&S.push(` $${H.parking}`),H.goods&&S.push(` $${H.goods}`),H.bags&&S.push(` $${H.bags}`),H.others&&S.push(` $${H.others}`),H.linePay&&S.push(`Line Pay $${H.linePay}`),H.serviceFee&&S.push(` $${H.serviceFee}`),H.reserve&&S.push(` $${H.reserve}`),H.vehicleMaintenance&&S.push(` $${H.vehicleMaintenance}`),H.salary&&S.push(` $${H.salary}`),a.jsxs("div",{className:"p-4 space-y-3 bg-[var(--bg-secondary)] hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{className:"text-xs font-mono text-[var(--text-tertiary)]",children:new Date(H.date).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsxs("div",{className:"text-emerald-600 font-bold font-mono text-lg",children:["$",Number(H.displayFinalTotal).toLocaleString()]}),a.jsxs("div",{className:"text-[10px] text-[var(--text-tertiary)] font-mono",children:[": $",Number(H.rowTotal).toLocaleString()]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1 bg-amber-500/10 text-amber-700 px-2 py-0.5 rounded-md",children:[a.jsx(hf,{size:12})," ",a.jsx("span",{className:"font-medium",children:H.customer||H.note||"-"})]}),a.jsxs("div",{className:"flex items-center gap-1 bg-[var(--bg-tertiary)] text-[var(--text-secondary)] px-2 py-0.5 rounded-md",children:[a.jsx(Fa,{size:12})," ",a.jsx("span",{children:H.salesRep})]})]}),a.jsxs("div",{className:"pt-2 border-t border-[var(--border-primary)]",children:[a.jsx("p",{className:"text-[10px] uppercase font-bold text-[var(--text-tertiary)] mb-1",children:""}),a.jsx("div",{className:"flex flex-wrap gap-1",children:S.map((K,Z)=>a.jsx("span",{className:"text-[10px] bg-[var(--bg-tertiary)] text-[var(--text-secondary)] px-1.5 py-0.5 rounded border border-[var(--border-primary)]",children:K},Z))})]})]},J)})}),a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 font-medium w-48",children:""}),a.jsx("th",{className:"p-3 font-medium w-32",children:"/"}),a.jsx("th",{className:"p-3 font-medium w-32",children:""}),a.jsx("th",{className:"p-3 font-medium",children:""}),a.jsx("th",{className:"p-3 font-medium text-right w-28",children:""}),a.jsx("th",{className:"p-3 font-medium text-right w-28 text-emerald-600",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] text-[var(--text-secondary)] bg-[var(--bg-secondary)]",children:U.map((H,J)=>{const S=[];return H.stall&&S.push(` $${H.stall}`),H.cleaning&&S.push(` $${H.cleaning}`),H.electricity&&S.push(` $${H.electricity}`),H.gas&&S.push(` $${H.gas}`),H.parking&&S.push(` $${H.parking}`),H.goods&&S.push(` $${H.goods}`),H.bags&&S.push(` $${H.bags}`),H.others&&S.push(` $${H.others}`),H.linePay&&S.push(`Line Pay $${H.linePay}`),H.serviceFee&&S.push(` $${H.serviceFee}`),H.reserve&&S.push(` $${H.reserve}`),H.vehicleMaintenance&&S.push(` $${H.vehicleMaintenance}`),H.salary&&S.push(` $${H.salary}`),a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-3 text-[var(--text-tertiary)]",children:new Date(H.date).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}),a.jsx("td",{className:"p-3 font-bold text-[var(--text-primary)]",children:H.customer||H.note||"-"}),a.jsx("td",{className:"p-3",children:H.salesRep}),a.jsx("td",{className:"p-3 text-xs text-[var(--text-tertiary)]",children:S.join(", ")}),a.jsxs("td",{className:"p-3 text-right font-mono text-rose-600",children:["$",(H.rowTotal||0).toLocaleString()]}),a.jsxs("td",{className:"p-3 text-right font-mono font-bold text-emerald-600",children:["$",(Number(H.displayFinalTotal)||0).toLocaleString()]})]},J)})})]})]})})]})]})]})})}function my({user:x,apiUrl:z}){const[g,m]=j.useState([]),[y,$]=j.useState(!1),[q,ae]=j.useState(""),[E,v]=j.useState(""),[M,Q]=j.useState(Ge()),[w,A]=j.useState(Ge()),U=Sa.useCallback(async()=>{$(!0);try{const d=await je(z,"getPurchaseHistory",{startDate:M,endDate:w},x.token);Array.isArray(d)&&m(d)}catch(d){console.error("Failed to fetch purchase history:",d)}finally{$(!1)}},[z,x.token,M,w]);j.useEffect(()=>{U()},[U]);const X=g.filter(d=>{const O=String(d.productName||"").toLowerCase(),p=String(d.vendorName||d.vendor||"").toLowerCase(),D=q.toLowerCase(),k=E.toLowerCase();return O.includes(D)&&p.includes(k)}),u=X.reduce((d,O)=>d+(Number(O.totalPrice)||0),0);return a.jsx("div",{className:"max-w-[90rem] mx-auto p-4",children:a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("div",{className:"flex flex-row justify-between items-center mb-6 gap-2 md:gap-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(to,{className:"text-[var(--accent-blue)] w-6 h-6 md:w-auto md:h-auto"}),a.jsx("span",{className:"whitespace-nowrap",children:""})]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-xs md:text-sm mt-1 hidden md:block",children:""})]}),a.jsxs("div",{className:"px-3 md:px-5 py-2 md:py-3 rounded-xl border border-[var(--border-primary)] bg-[var(--bg-secondary)] flex items-center gap-2 md:gap-3",children:[a.jsx("div",{className:"p-1.5 md:p-2 rounded-full bg-[var(--bg-tertiary)] text-emerald-500",children:a.jsx(ut,{size:16,className:"md:w-5 md:h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] md:text-xs text-[var(--text-secondary)] uppercase font-bold whitespace-nowrap",children:""}),a.jsxs("p",{className:"text-base md:text-xl font-bold text-emerald-500",children:["$",u.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"md:hidden mb-6 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{type:"date",className:"input-field flex-1 py-1.5 px-3",value:M,onChange:d=>Q(d.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("input",{type:"date",className:"input-field flex-1 py-1.5 px-3",value:w,onChange:d=>A(d.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("div",{className:"relative flex-1",children:a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full py-1.5 px-3",value:E,onChange:d=>v(d.target.value)})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] whitespace-nowrap w-[70px]",children:":"}),a.jsx("div",{className:"relative flex-1",children:a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full py-1.5 px-3",value:q,onChange:d=>ae(d.target.value)})})]}),a.jsxs("button",{onClick:U,disabled:y,className:"btn-secondary w-full py-2 flex items-center justify-center gap-2 mt-2",children:[y?a.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-slate-500 border-t-transparent rounded-full"}):a.jsx(Fe,{size:18}),""]})]}),a.jsx("div",{className:"hidden md:block mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[a.jsxs("div",{className:"flex-1 space-y-1.5 w-full",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:q,onChange:d=>ae(d.target.value)})]})]}),a.jsxs("div",{className:"flex-1 space-y-1.5 w-full",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:E,onChange:d=>v(d.target.value)})]})]}),a.jsxs("div",{className:"w-full md:w-40 space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full text-sm",value:M,onChange:d=>Q(d.target.value)})]}),a.jsxs("div",{className:"w-full md:w-40 space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full text-sm",value:w,onChange:d=>A(d.target.value)})]}),a.jsxs("button",{onClick:U,disabled:y,className:"btn-secondary h-[42px] flex items-center gap-2 whitespace-nowrap px-6",children:[a.jsx(Fe,{size:18,className:y?"animate-spin":""})," "]})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:y?a.jsx("div",{className:"text-center py-10 text-[var(--text-secondary)]",children:"..."}):X.length>0?X.map((d,O)=>a.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-xl p-4 border border-[var(--border-primary)] shadow-sm space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-[var(--text-secondary)]",children:[a.jsx(sa,{size:14,className:"text-[var(--accent-blue)]"}),a.jsx("span",{className:"font-medium text-[var(--text-primary)]",children:d.date?new Date(d.date).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}):"-"}),a.jsx("span",{className:"text-xs text-[var(--text-tertiary)]",children:d.date?new Date(d.date).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"}):""})]}),a.jsxs("div",{className:"text-lg font-bold text-emerald-600 font-mono",children:["$",(Number(d.totalPrice)||0).toLocaleString()]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-y-3 gap-x-2 text-sm",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-xs text-[var(--text-tertiary)] block mb-0.5",children:""}),a.jsx("span",{className:"font-medium text-[var(--text-primary)]",children:d.vendorName||d.vendor||"-"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-xs text-[var(--text-tertiary)] block mb-0.5",children:""}),a.jsx("span",{className:"font-bold text-[var(--text-primary)] text-base",children:d.productName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-[var(--text-tertiary)] block mb-0.5",children:""}),a.jsx("span",{className:"font-mono text-blue-500 font-bold",children:d.quantity})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-[var(--text-tertiary)] block mb-0.5",children:""}),a.jsxs("span",{className:"font-mono text-[var(--text-secondary)]",children:["$",(Number(d.unitPrice)||0).toLocaleString()]})]})]}),a.jsxs("div",{className:"pt-2 border-t border-[var(--border-primary)] flex justify-between items-center text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1 text-[var(--text-tertiary)] bg-[var(--bg-tertiary)] px-2 py-1 rounded",children:[a.jsx("span",{children:":"}),a.jsx("span",{className:"font-mono text-[var(--text-secondary)]",children:d.expiry?new Date(d.expiry).toLocaleDateString("zh-TW"):"-"})]}),a.jsxs("div",{className:"flex items-center gap-1 text-[var(--text-tertiary)]",children:[a.jsx(Fa,{size:12}),a.jsx("span",{children:d.operator||"-"})]})]})]},O)):a.jsx("div",{className:"text-center py-10 text-[var(--text-secondary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:""})}),a.jsx("div",{className:"hidden md:block rounded-xl border border-[var(--border-primary)] overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase tracking-wider sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:y?a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"p-20 text-center text-[var(--text-secondary)]",children:"..."})}):X.length>0?X.map((d,O)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2 text-[var(--text-secondary)]",children:[a.jsx(sa,{size:14,className:"text-[var(--text-tertiary)] group-hover:text-[var(--accent-blue)] transition-colors"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium text-[var(--text-secondary)]",children:d.date?new Date(d.date).toLocaleDateString("zh-TW"):"-"}),a.jsx("span",{className:"text-xs text-[var(--text-tertiary)]",children:d.date?new Date(d.date).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"}):""})]})]})}),a.jsx("td",{className:"p-4 text-[var(--text-secondary)]",children:d.vendorName||d.vendor||"-"}),a.jsx("td",{className:"p-4 font-medium text-[var(--text-primary)]",children:d.productName}),a.jsx("td",{className:"p-4 text-right font-mono text-blue-500",children:d.quantity}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:["$",(Number(d.unitPrice)||0).toLocaleString()]}),a.jsxs("td",{className:"p-4 text-right font-mono font-bold text-emerald-500",children:["$",(Number(d.totalPrice)||0).toLocaleString()]}),a.jsx("td",{className:"p-4 text-[var(--text-tertiary)] text-xs",children:d.expiry?new Date(d.expiry).toLocaleDateString("zh-TW"):"-"}),a.jsx("td",{className:"p-4 text-[var(--text-tertiary)]",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Fa,{size:12})," ",d.operator||"-"]})})]},O)):a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"p-20 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(ln,{size:32,className:"text-[var(--text-secondary)]"}),a.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]})})})})]})})})]})})}function py({user:x,apiUrl:z}){const[g,m]=j.useState([]),[y,$]=j.useState(!1),[q,ae]=j.useState(""),[E,v]=j.useState("ALL"),[M,Q]=j.useState(Ge()),[w,A]=j.useState(Ge()),U=Sa.useCallback(async()=>{$(!0);try{const u=await je(z,"getAdjustmentHistory",{startDate:M,endDate:w,productName:q},x.token);Array.isArray(u)&&m(u)}catch(u){console.error("Failed to fetch adjustment history:",u)}finally{$(!1)}},[z,x.token,M,w,q]);j.useEffect(()=>{U()},[U]);const X=g.filter(u=>{const d=String(u.productName||"").toLowerCase().includes(q.toLowerCase()),O=E==="ALL"||u.type===E;return d&&O});return a.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-6 animate-in fade-in duration-500",children:a.jsxs("div",{className:"glass-panel p-4 md:p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-6 pb-6 border-b border-[var(--border-primary)] gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-500/10 flex items-center justify-center shrink-0",children:a.jsx(ns,{className:"text-blue-500",size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[var(--text-primary)]",children:""}),a.jsx("p",{className:"text-[var(--text-tertiary)] text-xs mt-0.5",children:""})]})]}),a.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[a.jsxs("div",{className:"flex-1 md:flex-none glass-panel px-4 py-2 bg-[var(--bg-secondary)] border-[var(--border-primary)] flex flex-col items-center justify-center",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] uppercase font-bold tracking-wider",children:""}),a.jsx("p",{className:"text-xl font-bold text-blue-500",children:X.length})]}),a.jsxs("button",{onClick:U,disabled:y,className:"btn-secondary h-[46px] px-6 flex items-center justify-center gap-2 whitespace-nowrap",children:[a.jsx(Fe,{size:18,className:y?"animate-spin":""}),a.jsx("span",{children:""})]})]})]}),a.jsx("div",{className:"mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:16}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-9 w-full h-10",value:q,onChange:u=>ae(u.target.value)})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsxs("select",{value:E,onChange:u=>v(u.target.value),className:"input-field w-full h-10 px-2",children:[a.jsx("option",{value:"ALL",children:""}),a.jsx("option",{value:"SCRAP",children:""}),a.jsx("option",{value:"RETURN",children:""}),a.jsx("option",{value:"LOSS",children:""}),a.jsx("option",{value:"OTHER",children:""})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10",value:M,onChange:u=>Q(u.target.value)})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10",value:w,onChange:u=>A(u.target.value)})]})]})}),a.jsx("div",{className:"hidden md:block rounded-xl border border-[var(--border-primary)] overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-tertiary)] text-[10px] uppercase tracking-wider sticky top-0 font-bold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3",children:"/"}),a.jsx("th",{className:"px-4 py-3",children:""}),a.jsx("th",{className:"px-4 py-3",children:""}),a.jsx("th",{className:"px-4 py-3 text-right",children:""}),a.jsx("th",{className:"px-4 py-3",children:"/"}),a.jsx("th",{className:"px-4 py-3",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:y?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-20 text-center text-[var(--text-tertiary)]",children:"..."})}):X.length>0?X.map((u,d)=>{const O={SCRAP:"",RETURN:"",LOSS:"",OTHER:""};return a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-[var(--text-secondary)] font-medium",children:[a.jsx(sa,{size:12,className:"text-[var(--text-tertiary)]"}),a.jsx("span",{children:u.date?new Date(u.date).toLocaleDateString("zh-TW"):"-"})]}),a.jsx("span",{className:"text-[11px] text-[var(--text-tertiary)] font-mono ml-4.5",children:u.date?new Date(u.date).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"}):""})]})}),a.jsx("td",{className:"px-4 py-3 font-bold text-[var(--text-primary)]",children:u.productName}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${u.type==="SCRAP"?"bg-rose-50 text-rose-600 border border-rose-100":u.type==="RETURN"?"bg-blue-50 text-blue-600 border border-blue-100":u.type==="LOSS"?"bg-amber-50 text-amber-600 border border-amber-100":"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] border border-[var(--border-primary)]"}`,children:O[u.type]||u.type})}),a.jsxs("td",{className:"px-4 py-3 text-right font-mono font-bold text-rose-500",children:["-",u.quantity]}),a.jsx("td",{className:"px-4 py-3 text-[var(--text-secondary)] text-xs max-w-xs truncate",title:u.note,children:u.note||"-"}),a.jsx("td",{className:"px-4 py-3 text-[var(--text-tertiary)] text-xs font-medium",children:u.operator||"-"})]},d)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-20 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(ln,{size:32,className:"text-[var(--text-tertiary)] opacity-30"}),a.jsx("p",{className:"text-[var(--text-secondary)] font-medium",children:""})]})})})})]})})}),a.jsx("div",{className:"md:hidden space-y-3",children:y?a.jsx("div",{className:"text-center py-10 text-[var(--text-tertiary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:"..."}):X.length>0?X.map((u,d)=>{const O={SCRAP:"",RETURN:"",LOSS:"",OTHER:""};return a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] p-3 shadow-sm flex flex-col gap-2",children:[a.jsxs("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:[a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsxs("span",{className:"text-[var(--text-tertiary)] text-[10px] font-mono flex items-center gap-1",children:[a.jsx(sa,{size:10}),u.date?new Date(u.date).toLocaleDateString("zh-TW"):"-",a.jsx("span",{className:"ml-1",children:u.date?new Date(u.date).toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"}):""})]}),a.jsx("span",{className:`self-start px-2 py-0.5 rounded text-[10px] font-bold mt-1 ${u.type==="SCRAP"?"bg-rose-50 text-rose-600 border border-rose-100":u.type==="RETURN"?"bg-blue-50 text-blue-600 border border-blue-100":u.type==="LOSS"?"bg-amber-50 text-amber-600 border border-amber-100":"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] border border-[var(--border-primary)]"}`,children:O[u.type]||u.type})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase tracking-tighter",children:""}),a.jsxs("div",{className:"font-mono font-bold text-rose-500 text-base",children:["-",u.quantity]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-bold text-[var(--text-primary)]",children:u.productName}),a.jsxs("div",{className:"flex justify-between items-end gap-3",children:[a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-2 rounded-lg flex-1 min-w-0",children:[a.jsx("span",{className:"text-[9px] text-[var(--text-tertiary)] font-bold uppercase block mb-0.5 tracking-wider",children:"/"}),a.jsx("p",{className:"text-xs text-[var(--text-secondary)] truncate",children:u.note||"-"})]}),a.jsxs("div",{className:"text-right shrink-0",children:[a.jsx("span",{className:"text-[9px] text-[var(--text-tertiary)] font-bold uppercase block mb-0.5 tracking-wider",children:""}),a.jsx("span",{className:"text-xs font-bold text-[var(--text-secondary)]",children:u.operator||"-"})]})]})]})]},d)}):a.jsxs("div",{className:"text-center py-10 text-[var(--text-tertiary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:[a.jsx(ln,{size:24,className:"mx-auto mb-2 opacity-30"}),a.jsx("p",{className:"text-sm font-medium",children:""})]})})]})})}function hy({user:x,apiUrl:z}){const[g,m]=j.useState([]),[y,$]=j.useState(!1),[q,ae]=j.useState(""),E=async()=>{$(!0);try{const w=await je(z,"getInventoryValuation",{},x.token);if(console.log("Inventory Valuation Data:",w),Array.isArray(w)){const A=_r(w,"name");m(A)}else console.error("Valuation data is not an array:",w),m([])}catch(w){console.error("Failed to fetch valuation:",w),alert(": "+w.message)}finally{$(!1)}};j.useEffect(()=>{x?.token&&E()},[x.token,z]);const v=g.filter(w=>String(w.name||"").toLowerCase().includes(q.toLowerCase())),M=v.reduce((w,A)=>w+(Number(A.totalValue)||0),0),Q=v.reduce((w,A)=>w+(Number(A.totalQty)||0),0);return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(ut,{className:"text-amber-500"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),a.jsxs("div",{className:"flex w-full md:w-auto gap-3",children:[a.jsxs("div",{className:"flex-1 bg-[var(--bg-secondary)] px-3 py-3 border border-[var(--border-primary)] rounded-xl shadow-sm text-center",children:[a.jsx("p",{className:"text-xs text-[var(--text-secondary)] uppercase font-bold",children:""}),a.jsxs("p",{className:"text-xl md:text-2xl font-bold text-amber-500 flex justify-center items-baseline gap-1",children:[a.jsx("span",{className:"text-sm opacity-50",children:"$"}),M.toLocaleString()]})]}),a.jsxs("div",{className:"flex-1 bg-[var(--bg-secondary)] px-3 py-3 border border-[var(--border-primary)] rounded-xl shadow-sm text-center",children:[a.jsx("p",{className:"text-xs text-[var(--text-secondary)] uppercase font-bold",children:""}),a.jsx("p",{className:"text-xl md:text-2xl font-bold text-blue-500",children:Q.toLocaleString()})]})]})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] flex gap-4 items-center shadow-sm",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full bg-[var(--bg-primary)]",value:q,onChange:w=>ae(w.target.value)})]}),a.jsxs("button",{onClick:E,disabled:y,className:"btn-secondary h-[42px] px-4 flex items-center gap-2",children:[a.jsx(Fe,{size:18,className:y?"animate-spin":""})," "]})]}),a.jsx("div",{className:"hidden md:block bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] overflow-hidden shadow-sm",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase tracking-wider sticky top-0 font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:y?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-secondary)]",children:"..."})}):v.length>0?v.map((w,A)=>{const U=Number(w.totalQty)||0,X=Number(w.totalValue)||0,u=U>0?X/U:0,d=M>0?X/M*100:0;return a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-4 font-medium text-[var(--text-primary)]",children:w.name}),a.jsx("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:U.toLocaleString()}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:["$",u.toFixed(2)]}),a.jsxs("td",{className:"p-4 text-right font-mono font-bold text-amber-500",children:["$",X.toLocaleString()]}),a.jsx("td",{className:"p-4 text-right w-24",children:a.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[a.jsxs("span",{className:"text-xs text-[var(--text-secondary)] w-8",children:[d.toFixed(1),"%"]}),a.jsx("div",{className:"w-12 h-1.5 bg-[var(--bg-tertiary)] rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-amber-500",style:{width:`${Math.min(d,100)}%`}})})]})})]},A)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(Wa,{size:32,className:"text-[var(--text-secondary)]"}),a.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]})})})})]})})}),a.jsx("div",{className:"md:hidden space-y-4",children:y?a.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)]",children:"..."}):v.length>0?v.map((w,A)=>{const U=Number(w.totalQty)||0,X=Number(w.totalValue)||0,u=U>0?X/U:0,d=M>0?X/M*100:0;return a.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] p-4 shadow-sm flex flex-col gap-3",children:[a.jsxs("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:[a.jsx("h3",{className:"font-bold text-[var(--text-primary)] text-lg",children:w.name}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)]",children:""}),a.jsxs("div",{className:"font-bold text-amber-500 text-lg font-mono",children:["$",X.toLocaleString()]})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-sm",children:[a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-2 rounded-lg",children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)] mb-1",children:""}),a.jsx("div",{className:"font-mono font-bold text-[var(--text-primary)]",children:U.toLocaleString()})]}),a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-2 rounded-lg",children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)] mb-1",children:""}),a.jsxs("div",{className:"font-mono text-[var(--text-secondary)]",children:["$",u.toFixed(0)]})]}),a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-2 rounded-lg",children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)] mb-1",children:""}),a.jsxs("div",{className:"font-mono text-[var(--text-secondary)]",children:[d.toFixed(1),"%"]})]})]}),a.jsx("div",{className:"w-full h-1.5 bg-[var(--bg-tertiary)] rounded-full overflow-hidden mt-1",children:a.jsx("div",{className:"h-full bg-amber-500 transition-all duration-500",style:{width:`${Math.min(d,100)}%`}})})]},A)}):a.jsxs("div",{className:"text-center py-8 text-[var(--text-secondary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:[a.jsx(Wa,{size:24,className:"mx-auto mb-2 text-[var(--text-tertiary)]"}),a.jsx("p",{children:""})]})})]})}function yy({user:x,apiUrl:z,logActivity:g}){const[m,y]=j.useState([]),[$,q]=j.useState({}),[ae,E]=j.useState(!0),[v,M]=j.useState(!1),[Q,w]=j.useState(""),[A,U]=j.useState(!1),X=j.useCallback(J=>`${J.id}-${J.batchId||"no-batch"}`,[]),u=j.useCallback(async()=>{E(!0);try{const J=await je(z,"getInventory",{},x.token);if(Array.isArray(J)){const S=_r(J,"productName");y(S);const K={};S.forEach(Z=>{Z.type==="STOCK"&&(K[X(Z)]={physicalQty:"",reason:"",accountability:""})}),q(K)}}catch(J){console.error("Failed to fetch inventory for stocktake:",J),alert("")}finally{E(!1)}},[z,x.token,X]);j.useEffect(()=>{x?.token&&u()},[x.token,u]);const d=(J,S,K)=>{q(Z=>({...Z,[J]:{...Z[J],[S]:K}}))},O=J=>{const S=document.getElementById(J);S&&(S.focus(),S.select?.(),S.scrollIntoView({block:"nearest",behavior:"smooth"}))},p=(J,S,K,Z,b=!1)=>{const F=Z[S],le=X(F),re=$[le]||{},ne=D(F.quantity,re.physicalQty),f=re.physicalQty!==""&&ne!==0,Y=["qty","reason","acc"],ee=Y.indexOf(K),se=b?"m-":"";J.key==="ArrowRight"||J.key==="Enter"&&!J.shiftKey?(J.preventDefault(),K==="qty"&&!f?S<Z.length-1&&O(`${se}qty-${X(Z[S+1])}`):ee<Y.length-1?O(`${se}${Y[ee+1]}-${le}`):S<Z.length-1&&O(`${se}qty-${X(Z[S+1])}`)):J.key==="ArrowLeft"?(J.preventDefault(),ee>0&&O(`${se}${Y[ee-1]}-${le}`)):J.key==="ArrowDown"?(J.preventDefault(),S<Z.length-1&&O(`${se}${K}-${X(Z[S+1])}`)):J.key==="ArrowUp"&&(J.preventDefault(),S>0&&O(`${se}${K}-${X(Z[S-1])}`))},D=(J,S)=>S===""||S===void 0?0:Number(S)-Number(J),k=()=>m.filter(J=>{if(J.type!=="STOCK")return!1;const S=$[X(J)];return S&&S.physicalQty!==""}).map(J=>{const S=$[X(J)],K=D(J.quantity,S.physicalQty);return{productId:J.id,productName:J.productName,bookQty:Number(J.quantity),physicalQty:Number(S.physicalQty),diff:K,reason:S.reason,accountability:S.accountability,batchId:J.batchId||""}}),o=async()=>{const J=m.filter(Z=>{if(Z.type!=="STOCK"||Number(Z.quantity)===0)return!1;const b=X(Z),F=$[b];return!F||F.physicalQty===""||F.physicalQty===void 0});if(J.length>0){alert(` ${J.length} 
`);const Z=X(J[0]);O(`qty-${Z}`);return}const S=k();S.length===0&&m.some(Z=>Z.type==="STOCK");const K=S.find(Z=>Z.diff!==0&&(!Z.reason||!Z.accountability));if(K){alert(`${K.productName}`);const Z=X(K);$[Z].reason?document.getElementById(`acc-${Z}`)?.focus():document.getElementById(`reason-${Z}`)?.focus();return}if(confirm(` ${S.length} `)){M(!0);try{await je(z,"saveStocktake",{date:Ge(),items:S,operator:x.username},x.token),g&&g({actionType:"DATA_EDIT",page:"",details:JSON.stringify({itemCount:S.length,hasDifferences:S.some(Z=>Z.diff!==0),totalDiff:S.reduce((Z,b)=>Z+Math.abs(b.diff),0)})}),alert(""),q({}),await u()}catch(Z){console.error("Stocktake submit failed:",Z),alert(": "+Z.message)}finally{M(!1)}}},T=m.filter(J=>!J||!A&&(Number(J.quantity)||0)===0?!1:String(J.productName||"").toLowerCase().includes(Q.toLowerCase())),V=T.filter(J=>J.type==="STOCK"),ce=T.filter(J=>J.type!=="STOCK"),ie=(J,S,K,Z,b)=>a.jsxs("div",{className:"hidden md:flex bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] p-6 flex-col shadow-sm",children:[a.jsxs("h3",{className:`text-lg font-bold mb-4 flex items-center gap-2 ${Z}`,children:[a.jsx(K,{size:20})," ",S,!b&&a.jsx("span",{className:"text-xs text-[var(--text-secondary)] font-normal ml-2",children:""})]}),a.jsx("div",{className:"rounded-lg border border-[var(--border-primary)] overflow-hidden",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),b&&a.jsxs(a.Fragment,{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4",children:""})]})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:ae?a.jsx("tr",{children:a.jsx("td",{colSpan:b?"6":"2",className:"p-6 text-center text-[var(--text-secondary)]",children:"..."})}):J.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:b?"6":"2",className:"p-6 text-center text-[var(--text-secondary)]",children:""})}):J.map((F,le)=>{if(!F)return null;const re=X(F),ne=$[re]||{physicalQty:"",reason:"",accountability:x.username||""},f=D(F.quantity,ne.physicalQty),Y=!b&&Number(F.quantity)>0;return a.jsxs("tr",{className:`hover:bg-[var(--bg-hover)] transition-colors ${b&&f!==0&&ne.physicalQty!==""?"bg-amber-500/10":Y?"bg-orange-500/10 border-l-4 border-orange-500":""}`,children:[a.jsx("td",{className:`p-4 font-medium ${Y?"text-orange-600 font-bold":"text-[var(--text-primary)]"}`,children:F.productName||""}),a.jsx("td",{className:`p-4 text-right font-mono ${Y?"text-orange-500 font-bold text-lg":"text-[var(--text-secondary)]"}`,children:F.quantity}),b&&a.jsxs(a.Fragment,{children:[a.jsx("td",{className:"p-4",children:a.jsx("input",{id:`qty-${re}`,type:"number",className:`input-field w-full text-right font-mono ${f!==0&&ne.physicalQty!==""?"border-red-500 text-red-500":""}`,placeholder:"0",value:ne.physicalQty,onChange:ee=>d(re,"physicalQty",ee.target.value),onKeyDown:ee=>p(ee,le,"qty",J),onWheel:ee=>ee.target.blur()})}),a.jsx("td",{className:"p-4 text-center",children:a.jsxs("span",{className:`inline-flex items-center gap-1 font-mono font-bold ${ne.physicalQty===""||f===0?"text-green-500":"text-red-500 underline"}`,children:[ne.physicalQty!==""?f>0?`+${f}`:f:0,ne.physicalQty!==""&&f!==0&&a.jsx(bl,{size:12})]})}),a.jsx("td",{className:"p-4",children:a.jsx("input",{id:`reason-${re}`,type:"text",disabled:ne.physicalQty===""||f===0,className:`input-field w-full text-xs transition-all ${ne.physicalQty!==""&&f!==0?"":"bg-[var(--bg-tertiary)] cursor-not-allowed opacity-50"}`,placeholder:f!==0&&ne.physicalQty!==""?"...":"-",value:ne.reason,onChange:ee=>d(re,"reason",ee.target.value),onKeyDown:ee=>p(ee,le,"reason",J)})}),a.jsx("td",{className:"p-4",children:a.jsx("input",{id:`acc-${re}`,type:"text",disabled:ne.physicalQty===""||f===0,className:`input-field w-full text-xs transition-all ${ne.physicalQty!==""&&f!==0?"":"bg-[var(--bg-tertiary)] cursor-not-allowed opacity-50"}`,placeholder:f!==0&&ne.physicalQty!==""?"...":"-",value:ne.accountability,onChange:ee=>d(re,"accountability",ee.target.value),onKeyDown:ee=>p(ee,le,"acc",J)})})]})]},re)})})]})})]}),H=(J,S,K,Z,b)=>a.jsxs("div",{className:"md:hidden flex flex-col gap-4",children:[a.jsxs("h3",{className:`text-lg font-bold flex items-center gap-2 ${Z} px-1`,children:[a.jsx(K,{size:20})," ",S,!b&&a.jsx("span",{className:"text-xs text-slate-500 font-normal ml-2",children:""})]}),a.jsx("div",{className:"space-y-4",children:ae?a.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)]",children:"..."}):J.length===0?a.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:""}):J.map((F,le)=>{if(!F)return null;const re=X(F),ne=$[re]||{physicalQty:"",reason:"",accountability:x.username||""},f=D(F.quantity,ne.physicalQty),Y=ne.physicalQty!==""&&f!==0,ee=!b&&Number(F.quantity)>0;return a.jsxs("div",{className:`bg-[var(--bg-secondary)] rounded-xl p-4 border shadow-sm space-y-3 ${b&&Y?"border-amber-500/30 bg-amber-500/5":ee?"border-orange-500/30 bg-orange-500/5":"border-[var(--border-primary)]"}`,children:[a.jsxs("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:[a.jsx("span",{className:`font-bold text-lg ${ee?"text-orange-600":"text-[var(--text-primary)]"}`,children:F.productName||""}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("span",{className:"text-xs text-[var(--text-secondary)]",children:""}),a.jsx("span",{className:`font-mono text-lg font-bold ${ee?"text-orange-500":"text-[var(--text-secondary)]"}`,children:F.quantity})]})]}),b&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)] min-w-[70px]",children:":"}),a.jsx("input",{id:`m-qty-${re}`,type:"number",className:`input-field flex-1 text-right font-mono py-2 ${Y?"border-red-500 text-red-500":""}`,placeholder:"",value:ne.physicalQty,onChange:se=>d(re,"physicalQty",se.target.value),onKeyDown:se=>p(se,le,"qty",J,!0)}),a.jsx("div",{className:"w-12 text-right",children:a.jsx("span",{className:`font-mono font-bold ${ne.physicalQty===""||!Y?"text-slate-300":"text-red-500"}`,children:ne.physicalQty!==""?f>0?`+${f}`:f:"-"})})]}),Y&&a.jsxs("div",{className:"bg-[var(--bg-tertiary)] p-3 rounded-lg border border-amber-500/20 space-y-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-xs font-bold text-[var(--text-secondary)]",children:""}),a.jsx("input",{id:`m-reason-${re}`,type:"text",className:"input-field w-full text-sm",placeholder:"...",value:ne.reason,onChange:se=>d(re,"reason",se.target.value),onKeyDown:se=>p(se,le,"reason",J,!0)})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),a.jsx("input",{id:`m-acc-${re}`,type:"text",className:"input-field w-full text-sm",placeholder:"",value:ne.accountability,onChange:se=>d(re,"accountability",se.target.value),onKeyDown:se=>p(se,le,"acc",J,!0)})]})]})]})]},re)})})]});return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)] relative",children:[v&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)]",children:"..."})]}),a.jsxs("div",{className:"hidden md:flex flex-col gap-6 shrink-0",children:[a.jsxs("div",{className:"flex justify-between items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(nn,{className:"text-blue-600"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:u,className:"btn-secondary h-[42px] px-4",title:"",children:a.jsx(vf,{size:18})}),a.jsx("button",{onClick:o,disabled:v,className:"btn-primary h-[42px] px-6 flex items-center gap-2",children:v?"...":a.jsxs(a.Fragment,{children:[a.jsx(sn,{size:18})," "]})})]})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] flex gap-4 items-center",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:Q,onChange:J=>w(J.target.value)})]}),a.jsx("div",{className:"flex items-center gap-3 bg-[var(--bg-primary)] p-2 px-4 rounded-xl border border-[var(--border-primary)] shadow-sm shrink-0",children:a.jsxs("label",{className:"text-sm font-bold text-[var(--text-secondary)] flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500",checked:A,onChange:J=>U(J.target.checked)})," 0 "]})})]})]}),a.jsxs("div",{className:"md:hidden flex flex-col gap-3 shrink-0",children:[a.jsxs("h1",{className:"text-xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(nn,{className:"text-blue-600"})," "]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:Q,onChange:J=>w(J.target.value)})]}),a.jsx("button",{onClick:u,className:"btn-secondary px-3 flex items-center justify-center shrink-0",title:"",children:a.jsx(vf,{size:20})})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 bg-[var(--bg-secondary)] px-3 py-2 rounded-xl border border-[var(--border-primary)] shadow-sm",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500",checked:A,onChange:J=>U(J.target.checked)}),a.jsx("span",{className:"text-xs font-bold text-[var(--text-secondary)]",children:" 0 "})]}),a.jsx("button",{onClick:o,disabled:v,className:"btn-primary flex-1 py-2 flex items-center justify-center gap-2 text-sm",children:v?"...":a.jsxs(a.Fragment,{children:[a.jsx(sn,{size:16})," "]})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto flex flex-col gap-6 pb-6 w-full",children:[ie(V,"",rs,"text-blue-600",!0),H(V,"",rs,"text-blue-600",!0),ie(ce,"/",Er,"text-orange-600",!1),H(ce,"/",Er,"text-orange-600",!1)]})]})}function vy({user:x,apiUrl:z}){const[g,m]=j.useState([]),[y,$]=j.useState(!1),[q,ae]=j.useState(""),[E,v]=j.useState(!0),[M,Q]=j.useState(Ge()),[w,A]=j.useState(Ge()),U=Sa.useCallback(async()=>{$(!0);try{const p=await je(z,"getStocktakeHistory",{startDate:M,endDate:w,productName:q,diffOnly:E},x.token);Array.isArray(p)&&m(p)}catch(p){console.error("Failed to fetch stocktake history:",p)}finally{$(!1)}},[z,x.token,M,w,q,E]);j.useEffect(()=>{U()},[U]),j.useEffect(()=>{const p=()=>{if(document.hidden)return;const D=Ge();if(M===w&&M!==D){const k=new Date;k.setDate(k.getDate()-1);const o=`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}-${String(k.getDate()).padStart(2,"0")}`;M===o&&(console.log("Detected stale date (yesterday), auto-updating to today:",D),Q(D),A(D))}};return window.addEventListener("focus",p),document.addEventListener("visibilitychange",p),()=>{window.removeEventListener("focus",p),document.removeEventListener("visibilitychange",p)}},[M,w]);const X=g.filter(p=>String(p.productName||"").toLowerCase().includes(q.toLowerCase())),u=X.length,d=X.filter(p=>p.diff!==0).length,O=X.filter(p=>p.diff===0).length;return a.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-6 animate-in fade-in duration-500",children:a.jsxs("div",{className:"glass-panel p-4 md:p-6 text-[var(--text-primary)]",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-6 border-b border-[var(--border-primary)] pb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-500/10 flex items-center justify-center shrink-0",children:a.jsx(ns,{className:"text-blue-500",size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[var(--text-primary)]",children:""}),a.jsx("p",{className:"text-[var(--text-tertiary)] text-xs mt-0.5",children:""})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full md:w-auto md:flex md:gap-3",children:[a.jsxs("div",{className:"px-3 py-2 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)] flex flex-col items-center justify-center min-w-[80px]",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] uppercase font-bold tracking-wider",children:""}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)]",children:u})]}),a.jsxs("div",{className:"px-3 py-2 rounded-xl bg-rose-50 border border-rose-100 flex flex-col items-center justify-center min-w-[80px]",children:[a.jsx("p",{className:"text-[10px] text-rose-500 uppercase font-bold tracking-wider",children:""}),a.jsx("p",{className:"text-lg font-bold text-rose-600",children:d})]}),a.jsxs("div",{className:"px-3 py-2 rounded-xl bg-emerald-50 border border-emerald-100 flex flex-col items-center justify-center min-w-[80px]",children:[a.jsx("p",{className:"text-[10px] text-emerald-500 uppercase font-bold tracking-wider",children:""}),a.jsx("p",{className:"text-lg font-bold text-emerald-600",children:O})]})]})]}),a.jsx("div",{className:"mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 gap-4 items-end",children:[a.jsxs("div",{className:"md:col-span-2 lg:col-span-4 space-y-1.5 w-full",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:16}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full h-10",value:q,onChange:p=>ae(p.target.value)})]})]}),a.jsxs("div",{className:"md:col-span-1 lg:col-span-2 space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10",value:M,onChange:p=>Q(p.target.value)})]}),a.jsxs("div",{className:"md:col-span-1 lg:col-span-2 space-y-1.5",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase px-1 tracking-wider",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10",value:w,onChange:p=>A(p.target.value)})]}),a.jsxs("div",{className:"md:col-span-2 lg:col-span-3 flex items-center gap-2",children:[a.jsxs("label",{className:"flex-1 flex items-center gap-2 px-3 py-2 rounded-xl bg-[var(--bg-primary)] border border-[var(--border-primary)] cursor-pointer hover:bg-[var(--bg-hover)] transition-colors h-10",children:[a.jsx("input",{type:"checkbox",checked:E,onChange:p=>v(p.target.checked),className:"w-4 h-4 rounded border-[var(--border-primary)] text-blue-500 focus:ring-blue-500"}),a.jsx("span",{className:"text-[11px] text-[var(--text-secondary)] font-bold whitespace-nowrap",children:""})]}),a.jsxs("button",{onClick:U,disabled:y,className:"btn-secondary h-10 px-4 flex items-center gap-2 whitespace-nowrap",children:[a.jsx(Fe,{size:16,className:y?"animate-spin":""})," "]})]})]})}),a.jsx("div",{className:"hidden md:block rounded-xl border border-[var(--border-primary)] overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-tertiary)] text-[10px] uppercase tracking-wider sticky top-0 font-bold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3",children:""}),a.jsx("th",{className:"px-4 py-3",children:""}),a.jsx("th",{className:"px-4 py-3 text-right",children:"/"}),a.jsx("th",{className:"px-4 py-3 text-center",children:""}),a.jsx("th",{className:"px-4 py-3",children:"/"}),a.jsx("th",{className:"px-4 py-3",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:y?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-20 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(Fe,{className:"animate-spin text-blue-500"}),a.jsx("span",{className:"text-[var(--text-tertiary)] text-sm",children:"..."})]})})}):X.length>0?X.map((p,D)=>a.jsxs("tr",{className:`hover:bg-[var(--bg-hover)] transition-colors group ${p.diff!==0?"bg-amber-50/30":""}`,children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-1.5 text-[var(--text-tertiary)] font-mono text-[11px]",children:[a.jsx(sa,{size:10}),p.date]})}),a.jsx("td",{className:"px-4 py-3 font-bold text-[var(--text-primary)]",children:p.productName}),a.jsx("td",{className:"px-4 py-3 text-right",children:a.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[a.jsxs("span",{className:"text-[10px] text-[var(--text-tertiary)] font-mono",children:[": ",p.bookQty]}),a.jsxs("span",{className:"text-sm text-blue-600 font-bold font-mono",children:[": ",p.physicalQty]})]})}),a.jsx("td",{className:"px-4 py-3 text-center",children:p.diff===0?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-600 text-[10px] font-bold border border-emerald-100",children:[a.jsx(eo,{size:10})," 0"]}):a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold border ${p.diff>0?"bg-blue-50 text-blue-600 border-blue-100":"bg-rose-50 text-rose-600 border-rose-100"}`,children:[a.jsx(bl,{size:10}),p.diff>0?`+${p.diff}`:p.diff]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex flex-col gap-0.5 max-w-[150px]",children:[a.jsx("p",{className:"text-[11px] text-[var(--text-secondary)] truncate",title:p.reason,children:p.reason||"-"}),a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold",children:p.accountability||"-"})]})}),a.jsx("td",{className:"px-4 py-3 text-[var(--text-tertiary)] text-xs font-medium",children:p.operator||"-"})]},D)):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-20 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(ln,{size:32,className:"text-[var(--text-tertiary)] opacity-30"}),a.jsx("p",{className:"text-[var(--text-secondary)] font-medium",children:""})]})})})})]})})}),a.jsx("div",{className:"md:hidden space-y-3",children:y?a.jsx("div",{className:"text-center py-10 text-[var(--text-tertiary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:"..."}):X.length>0?X.map((p,D)=>a.jsxs("div",{className:`bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] p-3 shadow-sm flex flex-col gap-2 ${p.diff!==0?"bg-amber-50/20":""}`,children:[a.jsxs("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:[a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[var(--text-tertiary)] font-mono uppercase tracking-wider",children:[a.jsx(sa,{size:10}),p.date]}),a.jsx("h3",{className:"font-bold text-[var(--text-primary)] text-base",children:p.productName})]}),a.jsx("div",{className:"text-right",children:a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold border ${p.diff===0?"bg-emerald-50 text-emerald-600 border-emerald-100":p.diff>0?"bg-blue-50 text-blue-600 border-blue-100":"bg-rose-50 text-rose-600 border-rose-100"}`,children:[p.diff===0?a.jsx(eo,{size:10}):a.jsx(bl,{size:10}),p.diff>0?`+${p.diff}`:p.diff]})})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center bg-[var(--bg-secondary)] p-2 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[9px] text-[var(--text-tertiary)] font-bold uppercase tracking-wider",children:""}),a.jsx("div",{className:"font-mono font-medium text-[var(--text-secondary)]",children:p.bookQty})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[9px] text-[var(--text-tertiary)] font-bold uppercase tracking-wider",children:""}),a.jsx("div",{className:"font-mono font-bold text-blue-600 tracking-tighter",children:p.physicalQty})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[9px] text-[var(--text-tertiary)] font-bold uppercase tracking-wider",children:""}),a.jsx("div",{className:`font-mono font-bold ${p.diff===0?"text-emerald-600":"text-rose-600"}`,children:p.diff})]})]}),(p.reason||p.accountability)&&a.jsxs("div",{className:"text-xs bg-[var(--bg-secondary)] p-2 rounded-lg text-[var(--text-secondary)] space-y-1 border border-[var(--border-primary)]",children:[p.reason&&a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)] font-bold mr-2 uppercase text-[9px]",children:":"}),p.reason]}),p.accountability&&a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)] font-bold mr-2 uppercase text-[9px]",children:":"}),p.accountability]})]}),a.jsx("div",{className:"flex justify-between items-center text-[10px] text-[var(--text-tertiary)] pt-1",children:a.jsxs("span",{className:"flex items-center gap-1 font-medium",children:[": ",a.jsx("span",{className:"text-[var(--text-secondary)] font-bold",children:p.operator||"-"})]})})]},D)):a.jsxs("div",{className:"text-center py-10 text-[var(--text-tertiary)] bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:[a.jsx(ln,{size:24,className:"mx-auto mb-2 opacity-30"}),a.jsx("p",{className:"text-sm font-medium",children:""})]})})]})})}function by({user:x,apiUrl:z}){const[g,m]=j.useState([]),[y,$]=j.useState(!1),[q,ae]=j.useState(Ge()),[E,v]=j.useState(Ge()),[M,Q]=j.useState(""),[w,A]=j.useState(""),[U,X]=j.useState(new Set),u=Sa.useCallback(async()=>{$(!0);try{const o={};q&&(o.startDate=q),E&&(o.endDate=E);const T=await je(z,"getReceivables",o,x.token);if(Array.isArray(T)){const V=T.sort((ce,ie)=>new Date(ie.date)-new Date(ce.date));m(V)}}catch(o){console.error("Failed to fetch data:",o),alert(": "+o.message)}finally{$(!1)}},[z,x.token,q,E]);j.useEffect(()=>{u()},[u]);const d=async o=>{if(confirm("")){$(!0);try{await je(z,"markAsPaid",{recordId:o},x.token),alert(""),u()}catch(T){console.error("Failed to mark as paid:",T),alert(": "+T.message)}finally{$(!1)}}},O=o=>{const T=new Set(U);T.has(o)?T.delete(o):T.add(o),X(T)},p=o=>[o.salesRep,o.salesPerson,o.operator,o.Operator,o.buyer].find(ce=>ce&&String(ce).toLowerCase()!=="unknown")||"-",D=g.filter(o=>{const T=String(o.clientName||o.customer||o.location||"").toLowerCase(),V=String(p(o)).toLowerCase(),ce=!M||T.includes(M.toLowerCase()),ie=!w||V.includes(w.toLowerCase());return ce&&ie}),k=D.reduce((o,T)=>o+(Number(T.amount)||Number(T.total)||0),0);return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-row justify-between items-center gap-4",children:[a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2 truncate",children:[a.jsx(Ja,{className:"text-emerald-500 w-6 h-6 shrink-0"}),a.jsx("span",{className:"truncate",children:""})]})}),a.jsxs("div",{className:"glass-panel px-3 py-2 border-[var(--border-primary)] bg-[var(--bg-secondary)] shrink-0 flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase tracking-wider",children:""}),a.jsxs("p",{className:"text-lg md:text-xl font-bold text-emerald-500",children:["$",k.toLocaleString()]})]})]}),a.jsx("div",{className:"mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)]",value:q,onChange:o=>ae(o.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)]",value:E,onChange:o=>v(o.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:"/"}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full h-10",value:M,onChange:o=>Q(o.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full h-10",value:w,onChange:o=>A(o.target.value)})]}),a.jsxs("button",{onClick:u,className:"btn-secondary h-10 px-6 flex items-center gap-2 justify-center w-full md:w-auto",children:[a.jsx(Fe,{size:18})," "]})]})}),a.jsx("div",{className:"hidden md:block rounded-xl border border-[var(--border-primary)] overflow-hidden",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-10"}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:y?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-10 text-center text-[var(--text-secondary)]",children:"..."})}):D.length>0?D.map((o,T)=>a.jsxs(Sa.Fragment,{children:[a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)] transition-colors cursor-pointer",onClick:()=>O(T),children:[a.jsx("td",{className:"p-4 text-[var(--text-tertiary)]",children:U.has(T)?a.jsx(Cr,{size:16}):a.jsx(gl,{size:16})}),a.jsx("td",{className:"p-4 text-[var(--text-secondary)]",children:(()=>{const V=o.serverTimestamp||o.timestamp||o.date,ce=new Date(V);return isNaN(ce.getTime())?"-":ce.toLocaleDateString("zh-TW")})()}),a.jsx("td",{className:"p-4 font-medium text-[var(--text-primary)]",children:o.clientName||o.customer||o.location||"-"}),a.jsxs("td",{className:"p-4 text-right font-mono font-bold text-emerald-500",children:["$",(Number(o.amount)||Number(o.total)||0).toLocaleString()]}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${o.status==="PAID"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-rose-50 text-rose-600 border border-rose-100"}`,children:o.status==="PAID"?"":""})}),a.jsx("td",{className:"p-4 text-center",onClick:V=>V.stopPropagation(),children:o.status!=="PAID"&&a.jsx("button",{onClick:()=>d(o.id),className:"btn-primary text-xs py-1 px-3",children:""})})]}),U.has(T)&&a.jsx("tr",{className:"bg-[var(--bg-secondary)]/50",children:a.jsx("td",{colSpan:"6",className:"p-4 pl-12",children:a.jsx("div",{className:"bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-lg overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] border-b border-[var(--border-primary)]",children:[a.jsx("th",{className:"py-2 px-4 text-left font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-left font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-right font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-center font-medium",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:(o.items||o.products||o.salesData||[]).length>0?(o.items||o.products||o.salesData||[]).map((V,ce)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)]",children:[a.jsx("td",{className:"py-3 px-4 text-[var(--text-secondary)]",children:p(o)}),a.jsx("td",{className:"py-3 px-4 text-[var(--text-primary)] font-medium",children:V.productName||V.name||"-"}),a.jsxs("td",{className:"py-3 px-4 text-right text-[var(--text-secondary)] font-mono",children:["$",(Number(V.price)||Number(V.unitPrice)||0).toLocaleString()]}),a.jsx("td",{className:"py-3 px-4 text-center text-[var(--text-secondary)] font-mono",children:V.qty||V.soldQty||1})]},ce)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"py-4 text-center text-[var(--text-secondary)] italic",children:""})})})]})})})})]},T)):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-10 text-center text-[var(--text-secondary)]",children:""})})})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:y?a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:"..."}):D.length>0?D.map((o,T)=>a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] p-4 shadow-sm",onClick:()=>O(T),children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)] mb-1",children:(()=>{const V=o.serverTimestamp||o.timestamp||o.date,ce=new Date(V);return isNaN(ce.getTime())?"-":ce.toLocaleDateString("zh-TW")})()}),a.jsx("div",{className:"font-bold text-[var(--text-primary)] text-lg",children:o.clientName||o.customer||o.location||""}),a.jsxs("div",{className:"text-xs text-[var(--text-secondary)] mt-1",children:[": ",p(o)]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-xl font-black font-mono text-emerald-500",children:["$",(Number(o.amount)||Number(o.total)||0).toLocaleString()]}),a.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded-full text-[10px] font-bold ${o.status==="PAID"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-rose-50 text-rose-600 border border-rose-100"}`,children:o.status==="PAID"?"":""})]})]}),a.jsxs("div",{className:"pt-3 border-t border-[var(--border-primary)] flex items-center justify-between",children:[a.jsxs("button",{className:"text-[var(--text-tertiary)] flex items-center gap-1 text-xs",children:[U.has(T)?a.jsx(Cr,{size:14}):a.jsx(gl,{size:14}),""]}),o.status!=="PAID"&&a.jsx("button",{onClick:V=>{V.stopPropagation(),d(o.id)},className:"btn-primary text-xs py-1.5 px-4",children:""})]}),U.has(T)&&a.jsxs("div",{className:"mt-3 bg-[var(--bg-secondary)] rounded-lg p-3 text-sm space-y-2 animate-in fade-in slide-in-from-top-2 duration-200",children:[(o.items||o.products||o.salesData||[]).map((V,ce)=>a.jsxs("div",{className:"flex justify-between items-center border-b border-[var(--border-primary)] last:border-0 pb-2 last:pb-0",children:[a.jsx("span",{className:"text-[var(--text-primary)]",children:V.productName||V.name}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"text-[var(--text-primary)] font-mono",children:["$",(Number(V.price)||0).toLocaleString()," x ",V.qty||1]})})]},ce)),!o.items&&!o.products&&!o.salesData&&a.jsx("div",{className:"text-[var(--text-tertiary)] text-center py-2 italic",children:""})]})]},T)):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:""})})]})}function gy({user:x,apiUrl:z}){const[g,m]=j.useState([]),[y,$]=j.useState(!1),[q,ae]=j.useState(Ge()),[E,v]=j.useState(Ge()),[M,Q]=j.useState(""),[w,A]=j.useState(""),[U,X]=j.useState(new Set),u=Sa.useCallback(async()=>{$(!0);try{const o={};q&&(o.startDate=q),E&&(o.endDate=E);const T=await je(z,"getPayables",o,x.token);if(Array.isArray(T)){const V=T.sort((ce,ie)=>new Date(ie.date)-new Date(ce.date));m(V)}}catch(o){console.error("Failed to fetch payables:",o)}finally{$(!1)}},[z,x.token,q,E]);j.useEffect(()=>{u()},[u]);const d=async o=>{if(confirm("")){$(!0);try{await je(z,"markPayableAsPaid",{recordId:o},x.token),alert(""),u()}catch(T){console.error("Failed to mark as paid:",T),alert(": "+T.message)}finally{$(!1)}}},O=o=>{const T=new Set(U);T.has(o)?T.delete(o):T.add(o),X(T)},p=o=>o.operator||o.Operator||o.buyer||o.salesRep||o.salesPerson||"-",D=g.filter(o=>{const T=String(o.vendorName||o.vendor||"").toLowerCase(),V=String(p(o)).toLowerCase(),ce=!M||T.includes(M.toLowerCase()),ie=!w||V.includes(w.toLowerCase());return ce&&ie}),k=D.reduce((o,T)=>o+(Number(T.amount)||Number(T.total)||0),0);return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-row justify-between items-center gap-4",children:[a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2 truncate",children:[a.jsx(Ja,{className:"text-rose-600 w-6 h-6 shrink-0"}),a.jsx("span",{className:"truncate",children:""})]})}),a.jsxs("div",{className:"glass-panel px-3 py-2 border-[var(--border-primary)] bg-[var(--bg-secondary)] shrink-0 flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase tracking-wider",children:""}),a.jsxs("p",{className:"text-lg md:text-xl font-bold text-rose-500",children:["$",k.toLocaleString()]})]})]}),a.jsx("div",{className:"mb-6 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)]",value:q,onChange:o=>ae(o.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)]",value:E,onChange:o=>v(o.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full h-10",value:M,onChange:o=>Q(o.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase px-1",children:""}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field w-full h-10",value:w,onChange:o=>A(o.target.value)})]}),a.jsxs("button",{onClick:u,className:"btn-secondary h-10 px-6 flex items-center gap-2 justify-center w-full md:w-auto",children:[a.jsx(Fe,{size:18})," "]})]})}),a.jsx("div",{className:"hidden md:block rounded-xl border border-[var(--border-primary)] overflow-hidden",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-10"}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:y?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-10 text-center text-[var(--text-secondary)]",children:"..."})}):D.length>0?D.map((o,T)=>a.jsxs(Sa.Fragment,{children:[a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)] transition-colors cursor-pointer",onClick:()=>O(T),children:[a.jsx("td",{className:"p-4 text-[var(--text-tertiary)]",children:U.has(T)?a.jsx(Cr,{size:16}):a.jsx(gl,{size:16})}),a.jsx("td",{className:"p-4 text-[var(--text-secondary)] text-center",children:(()=>{const V=o.serverTimestamp||o.timestamp||o.date,ce=new Date(V);return isNaN(ce.getTime())?"-":ce.toLocaleDateString("zh-TW")})()}),a.jsx("td",{className:"p-4 font-medium text-[var(--text-primary)]",children:o.vendorName||o.vendor||"-"}),a.jsxs("td",{className:"p-4 text-right font-mono font-bold text-rose-500",children:["$",(Number(o.amount)||Number(o.total)||0).toLocaleString()]}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${o.status==="PAID"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-rose-50 text-rose-600 border border-rose-100"}`,children:o.status==="PAID"?"":""})}),a.jsx("td",{className:"p-4 text-center",onClick:V=>V.stopPropagation(),children:o.status!=="PAID"&&a.jsx("button",{onClick:()=>d(o.id),className:"btn-primary text-xs py-1 px-3",children:""})})]}),U.has(T)&&a.jsx("tr",{className:"bg-[var(--bg-secondary)]/50",children:a.jsx("td",{colSpan:"6",className:"p-4 pl-12",children:a.jsx("div",{className:"bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-lg overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] border-b border-[var(--border-primary)]",children:[a.jsx("th",{className:"py-2 px-4 text-left font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-left font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-right font-medium",children:""}),a.jsx("th",{className:"py-2 px-4 text-center font-medium",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:(o.items||o.products||[]).length>0?(o.items||o.products||[]).map((V,ce)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)]",children:[a.jsx("td",{className:"py-3 px-4 text-[var(--text-secondary)]",children:p(o)}),a.jsx("td",{className:"py-3 px-4 text-[var(--text-primary)] font-medium",children:V.productName||V.name||"-"}),a.jsxs("td",{className:"py-3 px-4 text-right text-[var(--text-secondary)] font-mono",children:["$",(Number(V.price)||Number(V.unitPrice)||0).toLocaleString()]}),a.jsx("td",{className:"py-3 px-4 text-center text-[var(--text-secondary)] font-mono",children:V.qty||V.quantity||1})]},ce)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"py-4 text-center text-[var(--text-secondary)] italic",children:""})})})]})})})})]},T)):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-10 text-center text-[var(--text-secondary)]",children:""})})})]})}),a.jsx("div",{className:"md:hidden space-y-4",children:y?a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:"..."}):D.length>0?D.map((o,T)=>a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] p-4 shadow-sm",onClick:()=>O(T),children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-[var(--text-tertiary)] mb-1",children:(()=>{const V=o.serverTimestamp||o.timestamp||o.date,ce=new Date(V);return isNaN(ce.getTime())?"-":ce.toLocaleDateString("zh-TW")})()}),a.jsx("div",{className:"font-bold text-[var(--text-primary)] text-lg",children:o.vendorName||o.vendor||""}),a.jsxs("div",{className:"text-xs text-[var(--text-secondary)] mt-1",children:[": ",p(o)]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-xl font-black font-mono text-rose-500",children:["$",(Number(o.amount)||Number(o.total)||0).toLocaleString()]}),a.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded-full text-[10px] font-bold ${o.status==="PAID"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-rose-50 text-rose-600 border border-rose-100"}`,children:o.status==="PAID"?"":""})]})]}),a.jsxs("div",{className:"pt-3 border-t border-[var(--border-primary)] flex items-center justify-between",children:[a.jsxs("button",{className:"text-[var(--text-tertiary)] flex items-center gap-1 text-xs",children:[U.has(T)?a.jsx(Cr,{size:14}):a.jsx(gl,{size:14}),""]}),o.status!=="PAID"&&a.jsx("button",{onClick:V=>{V.stopPropagation(),d(o.id)},className:"btn-primary text-xs py-1.5 px-4",children:""})]}),U.has(T)&&a.jsxs("div",{className:"mt-3 bg-[var(--bg-secondary)] rounded-lg p-3 text-sm space-y-2 animate-in fade-in slide-in-from-top-2 duration-200",children:[(o.items||o.products||[]).map((V,ce)=>a.jsxs("div",{className:"flex justify-between items-center border-b border-[var(--border-primary)] last:border-0 pb-2 last:pb-0",children:[a.jsx("span",{className:"text-[var(--text-primary)]",children:V.productName||V.name}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"text-[var(--text-primary)] font-mono",children:["$",(Number(V.price)||0).toLocaleString()," x ",V.qty||1]})})]},ce)),!o.items&&!o.products&&a.jsx("div",{className:"text-[var(--text-tertiary)] text-center py-2 italic",children:""})]})]},T)):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:""})})]})}function jy({user:x,apiUrl:z}){const[g,m]=j.useState([]),[y,$]=j.useState({}),[q,ae]=j.useState(!1),[E,v]=j.useState(Ge()),[M,Q]=j.useState(Ge()),[w,A]=j.useState(""),U=async()=>{ae(!0);try{const u=await je(z,"getProducts",{},x.token),d={};Array.isArray(u)&&(u.forEach(p=>{d[p.id]=p.name}),$(d));const O=await je(z,"getSalesRanking",{startDate:E,endDate:M},x.token);Array.isArray(O)?m(O):m([])}catch(u){console.error("Failed to fetch sales ranking:",u),alert("")}finally{ae(!1)}};j.useEffect(()=>{x?.token&&U()},[x.token,z]);const X=g.filter(u=>{const d=y[u.productName]||u.productName;return String(d||"").toLowerCase().includes(w.toLowerCase())});return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)]",children:[a.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Ii,{className:"text-[var(--accent-blue)]"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),a.jsx("button",{onClick:U,disabled:q,className:"btn-secondary p-2 rounded-xl",children:a.jsx(Fe,{size:20,className:q?"animate-spin":""})})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] shrink-0 grid grid-cols-1 md:grid-cols-3 gap-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"date",className:"input-field flex-1 text-sm bg-[var(--bg-tertiary)]",value:E,onChange:u=>v(u.target.value)}),a.jsx("span",{className:"text-[var(--text-secondary)] font-bold hidden md:inline",children:""}),a.jsx("input",{type:"date",className:"input-field flex-1 text-sm bg-[var(--bg-tertiary)]",value:M,onChange:u=>Q(u.target.value)})]}),a.jsxs("div",{className:"relative",children:[a.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full bg-[var(--bg-tertiary)]",value:w,onChange:u=>A(u.target.value)})]}),a.jsxs("button",{onClick:U,className:"btn-primary flex items-center justify-center gap-2 h-[42px]",children:[a.jsx(mt,{size:18})," "]})]}),a.jsx("div",{className:"bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] overflow-hidden flex-1 flex flex-col shadow-sm",children:a.jsxs("div",{className:"overflow-y-auto flex-1",children:[a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-10 font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-16 text-center",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:q?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-tertiary)]",children:"..."})}):X.length>0?X.map((u,d)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-4 text-center font-mono",children:d<3?a.jsx("span",{className:`w-6 h-6 rounded-full inline-flex items-center justify-center text-[10px] font-bold shadow-sm ${d===0?"bg-amber-100 text-amber-700 border border-amber-200":d===1?"bg-slate-100 text-slate-600 border border-slate-200":"bg-orange-100 text-orange-700 border border-orange-200"}`,children:d+1}):d+1}),a.jsx("td",{className:"p-4 font-bold text-[var(--text-primary)]",children:y[u.productName]||u.productName}),a.jsx("td",{className:"p-4 text-right font-mono text-emerald-500",children:u.totalQty.toLocaleString()}),a.jsxs("td",{className:"p-4 text-right font-mono text-blue-500",children:["$",u.totalAmount.toLocaleString()]}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:["$",(u.totalAmount/u.totalQty).toFixed(1)]})]},d)):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-secondary)]",children:""})})})]}),a.jsx("div",{className:"md:hidden divide-y divide-slate-100",children:q?a.jsx("div",{className:"p-10 text-center text-slate-500",children:"..."}):X.length>0?X.map((u,d)=>a.jsxs("div",{className:"p-4 bg-[var(--bg-secondary)] active:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("div",{className:"flex justify-between items-start mb-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold shrink-0 shadow-sm ${d===0?"bg-amber-100 text-amber-700":d===1?"bg-slate-100 text-slate-600":d===2?"bg-orange-100 text-orange-700":"bg-slate-50 text-slate-400 border border-slate-100"}`,children:d+1}),a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)]",children:y[u.productName]||u.productName})]})}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 pl-9",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:""}),a.jsx("p",{className:"text-xs font-mono font-bold text-emerald-600",children:u.totalQty.toLocaleString()})]}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:""}),a.jsxs("p",{className:"text-xs font-mono font-bold text-blue-600",children:["$",u.totalAmount.toLocaleString()]})]}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:""}),a.jsxs("p",{className:"text-xs font-mono font-bold text-slate-500",children:["$",(u.totalAmount/u.totalQty).toFixed(1)]})]})]})]},d)):a.jsx("div",{className:"p-10 text-center text-slate-500",children:""})})]})})]})}function Ny({user:x,apiUrl:z}){const[g,m]=j.useState([]),[y,$]=j.useState(!1),[q,ae]=j.useState(Ge()),[E,v]=j.useState(Ge()),[M,Q]=j.useState(""),w=async()=>{$(!0);try{const U=await je(z,"getCustomerRanking",{startDate:q,endDate:E},x.token);Array.isArray(U)?m(U):m([])}catch(U){console.error("Failed to fetch customer ranking:",U),alert("")}finally{$(!1)}};j.useEffect(()=>{x?.token&&w()},[x.token,z]);const A=g.filter(U=>String(U.customerName||"").toLowerCase().includes(M.toLowerCase()));return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)]",children:[a.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Tr,{className:"text-purple-600"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),a.jsx("button",{onClick:w,disabled:y,className:"btn-secondary p-2 rounded-xl",children:a.jsx(Fe,{size:20,className:y?"animate-spin":""})})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] shrink-0 grid grid-cols-1 md:grid-cols-3 gap-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:q,onChange:U=>ae(U.target.value)}),a.jsx("span",{className:"text-[var(--text-secondary)] font-bold hidden md:inline",children:""}),a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:E,onChange:U=>v(U.target.value)})]}),a.jsxs("div",{className:"relative",children:[a.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:M,onChange:U=>Q(U.target.value)})]}),a.jsxs("button",{onClick:w,className:"btn-primary flex items-center justify-center gap-2 h-[42px]",children:[a.jsx(mt,{size:18})," "]})]}),a.jsx("div",{className:"bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] overflow-hidden flex-1 flex flex-col shadow-sm",children:a.jsxs("div",{className:"overflow-y-auto flex-1",children:[a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-10 font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-16 text-center",children:""}),a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:y?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-secondary)]",children:"..."})}):A.length>0?A.map((U,X)=>{const u=g.reduce((O,p)=>O+p.totalAmount,0),d=U.totalAmount/u*100;return a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-4 text-center font-mono text-[var(--text-secondary)]",children:X+1}),a.jsx("td",{className:"p-4 font-bold text-[var(--text-primary)]",children:U.customerName}),a.jsx("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:U.transactionCount.toLocaleString()}),a.jsxs("td",{className:"p-4 text-right font-mono text-purple-700 font-bold",children:["$",U.totalAmount.toLocaleString()]}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsxs("span",{className:"text-xs text-[var(--text-tertiary)]",children:[d.toFixed(1),"%"]}),a.jsx("div",{className:"w-16 h-1.5 bg-[var(--bg-tertiary)] rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-500",style:{width:`${d}%`}})})]})})]},X)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-slate-500",children:""})})})]}),a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:y?a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:"..."}):A.length>0?A.map((U,X)=>{const u=g.reduce((O,p)=>O+p.totalAmount,0),d=U.totalAmount/u*100;return a.jsxs("div",{className:"p-4 bg-[var(--bg-secondary)] active:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-[var(--bg-tertiary)] border border-[var(--border-primary)] flex items-center justify-center text-[10px] font-bold text-[var(--text-tertiary)] shrink-0 shadow-sm",children:X+1}),a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)]",children:U.customerName})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsxs("span",{className:"text-xs font-mono font-bold text-purple-700",children:["$",U.totalAmount.toLocaleString()]}),a.jsxs("span",{className:"text-[10px] text-[var(--text-tertiary)] font-bold",children:[d.toFixed(1),"%"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between pl-9 mt-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsx("span",{className:"text-xs font-mono text-[var(--text-secondary)]",children:U.transactionCount.toLocaleString()})]}),a.jsx("div",{className:"w-24 h-1 bg-[var(--bg-tertiary)] rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-500",style:{width:`${d}%`}})})]})]},X)}):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:""})})]})})]})}function Sy({user:x,apiUrl:z}){const[g,m]=j.useState([]),[y,$]=j.useState({}),[q,ae]=j.useState(!1),[E,v]=j.useState(Ge()),[M,Q]=j.useState(Ge()),[w,A]=j.useState(""),U=async()=>{ae(!0);try{const D=await je(z,"getProducts",{},x.token),k={};Array.isArray(D)&&(D.forEach(T=>{k[T.id]=T.name}),$(k));const o=await je(z,"getProfitAnalysis",{startDate:E,endDate:M},x.token);Array.isArray(o)?m(o):m([])}catch(D){console.error("Failed to fetch profit analysis:",D),alert("")}finally{ae(!1)}};j.useEffect(()=>{x?.token&&U()},[x.token,z]);const X=g.filter(D=>{const k=y[D.productName]||D.productName;return String(k||"").toLowerCase().includes(w.toLowerCase())}),u=X.reduce((D,k)=>D+k.revenue,0),d=X.reduce((D,k)=>D+k.cost,0),O=u-d,p=u>0?O/u*100:0;return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)]",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(Wa,{className:"text-emerald-600"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:""})]}),a.jsxs("div",{className:"flex gap-2 md:gap-4",children:[a.jsxs("div",{className:"bg-emerald-50/10 px-3 py-1.5 md:px-4 md:py-2 border border-emerald-200/20 rounded-xl shadow-sm flex-1",children:[a.jsx("p",{className:"text-[8px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:"text-sm md:text-xl font-bold text-emerald-600 text-center",children:["$",O.toLocaleString()]})]}),a.jsxs("div",{className:"bg-blue-50/10 px-3 py-1.5 md:px-4 md:py-2 border border-blue-200/20 rounded-xl shadow-sm flex-1",children:[a.jsx("p",{className:"text-[8px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center",children:""}),a.jsxs("p",{className:"text-sm md:text-xl font-bold text-blue-600 text-center",children:[p.toFixed(1),"%"]})]})]})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] shrink-0 grid grid-cols-1 md:grid-cols-3 gap-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:E,onChange:D=>v(D.target.value)}),a.jsx("span",{className:"text-[var(--text-secondary)] font-bold hidden md:inline",children:""}),a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:M,onChange:D=>Q(D.target.value)})]}),a.jsxs("div",{className:"relative",children:[a.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:w,onChange:D=>A(D.target.value)})]}),a.jsxs("button",{onClick:U,className:"btn-primary flex items-center justify-center gap-2 h-[42px]",children:[a.jsx(Fe,{size:18,className:q?"animate-spin":""})," "]})]}),a.jsx("div",{className:"bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] overflow-hidden flex-1 flex flex-col shadow-sm",children:a.jsxs("div",{className:"overflow-y-auto flex-1",children:[a.jsxs("table",{className:"hidden md:table w-full text-left text-sm border-collapse",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-10 font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 whitespace-nowrap",children:""}),a.jsx("th",{className:"p-4 text-right whitespace-nowrap",children:""}),a.jsx("th",{className:"p-4 text-right whitespace-nowrap",children:""}),a.jsx("th",{className:"p-4 text-right whitespace-nowrap",children:""}),a.jsx("th",{className:"p-4 text-right whitespace-nowrap",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:q?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-secondary)]",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(Fe,{className:"animate-spin text-emerald-500"}),a.jsx("span",{children:"..."})]})})}):X.length>0?X.map((D,k)=>{const o=D.revenue-D.cost,T=D.revenue>0?o/D.revenue*100:0,V=y[D.productName]||D.productName;return a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors group",children:[a.jsx("td",{className:"p-4 font-bold text-[var(--text-primary)]",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:V}),y[D.productName]&&a.jsxs("span",{className:"text-[10px] text-[var(--text-tertiary)] font-normal mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:["ID: ",D.productName.substring(0,8),"..."]})]})}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)]",children:["$",Math.round(D.revenue).toLocaleString()]}),a.jsxs("td",{className:"p-4 text-right font-mono text-rose-600/80",children:["$",Math.round(D.cost).toLocaleString()]}),a.jsxs("td",{className:`p-4 text-right font-mono font-bold ${o>=0?"text-emerald-700":"text-rose-600"}`,children:[o<0?"-":"","$",Math.abs(Math.round(o)).toLocaleString()]}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold min-w-[50px] text-center ${T>=30?"bg-emerald-100 text-emerald-700 border border-emerald-200":T>=10?"bg-blue-100 text-blue-700 border border-blue-200":"bg-rose-100 text-rose-700 border border-rose-200"}`,children:[T.toFixed(1),"%"]})})]},k)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-slate-500",children:""})})})]}),a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:q?a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)] italic",children:"..."}):X.length>0?X.map((D,k)=>{const o=D.revenue-D.cost,T=D.revenue>0?o/D.revenue*100:0,V=y[D.productName]||D.productName;return a.jsxs("div",{className:"p-4 bg-[var(--bg-secondary)] active:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)] max-w-[65%] leading-tight",children:V}),a.jsxs("span",{className:`inline-block px-2 py-0.5 rounded text-[10px] font-bold ${T>=30?"bg-emerald-100 text-emerald-700":T>=10?"bg-blue-100 text-blue-700":"bg-rose-100 text-rose-700"}`,children:[T.toFixed(1),"%"]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:"text-xs font-mono font-bold text-[var(--text-secondary)]",children:["$",Math.round(D.revenue).toLocaleString()]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:"text-xs font-mono font-bold text-rose-500/80",children:["$",Math.round(D.cost).toLocaleString()]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:`text-xs font-mono font-bold ${o>=0?"text-emerald-600":"text-rose-600"}`,children:["$",Math.abs(Math.round(o)).toLocaleString()]})]})]})]},k)}):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:""})})]})})]})}function wy({user:x,apiUrl:z}){const[g,m]=j.useState([]),[y,$]=j.useState({}),[q,ae]=j.useState(!1),[E,v]=j.useState(Ge()),[M,Q]=j.useState(Ge()),[w,A]=j.useState(""),U=async()=>{ae(!0);try{const u=await je(z,"getProducts",{},x.token),d={};Array.isArray(u)&&(u.forEach(p=>{d[p.id]=p.name}),$(d));const O=await je(z,"getTurnoverRate",{startDate:E,endDate:M},x.token);Array.isArray(O)?m(O):m([])}catch(u){console.error("Failed to fetch turnover rate:",u),alert("")}finally{ae(!1)}};j.useEffect(()=>{x?.token&&U()},[x.token,z]);const X=g.filter(u=>{const d=y[u.productName]||u.productName;return String(d||"").toLowerCase().includes(w.toLowerCase())});return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)]",children:[a.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(vl,{className:"text-orange-600"})," "]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:" =  / "})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600 bg-blue-50 px-3 py-1.5 rounded-lg border border-blue-200 shadow-sm font-bold",children:[a.jsx(_h,{size:14}),a.jsx("span",{children:""})]})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl border border-[var(--border-primary)] shrink-0 grid grid-cols-1 md:grid-cols-3 gap-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:E,onChange:u=>v(u.target.value)}),a.jsx("span",{className:"text-[var(--text-secondary)] font-bold hidden md:inline",children:""}),a.jsx("input",{type:"date",className:"input-field flex-1 text-sm",value:M,onChange:u=>Q(u.target.value)})]}),a.jsxs("div",{className:"relative",children:[a.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full",value:w,onChange:u=>A(u.target.value)})]}),a.jsxs("button",{onClick:U,className:"btn-primary flex items-center justify-center gap-2 h-[42px]",children:[a.jsx(Fe,{size:18})," "]})]}),a.jsx("div",{className:"bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)] overflow-hidden flex-1 flex flex-col shadow-sm",children:a.jsxs("div",{className:"overflow-y-auto flex-1",children:[a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-10 font-bold border-b border-[var(--border-primary)]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:""}),a.jsx("th",{className:"p-4 text-right",children:" (COGS)"}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:q?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-[var(--text-secondary)]",children:"..."})}):X.length>0?X.map((u,d)=>{const O=u.avgInventory>0?u.cogs/u.avgInventory:0;return a.jsxs("tr",{className:"hover:bg-[var(--bg-hover)] transition-colors",children:[a.jsx("td",{className:"p-4 font-bold text-[var(--text-primary)]",children:y[u.productName]||u.productName}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-secondary)] font-bold",children:["$",u.cogs.toLocaleString()]}),a.jsxs("td",{className:"p-4 text-right font-mono text-[var(--text-tertiary)]",children:["$",u.avgInventory.toLocaleString()]}),a.jsxs("td",{className:"p-4 text-right font-mono text-orange-600 font-bold",children:[O.toFixed(2)," "]}),a.jsx("td",{className:"p-4 text-center",children:O>=4?a.jsx("span",{className:"px-2 py-1 rounded text-[10px] font-bold bg-emerald-100 text-emerald-700 border border-emerald-200 uppercase",children:""}):O>=1?a.jsx("span",{className:"px-2 py-1 rounded text-[10px] font-bold bg-blue-100 text-blue-700 border border-blue-200 uppercase",children:""}):a.jsx("span",{className:"px-2 py-1 rounded text-[10px] font-bold bg-rose-100 text-rose-700 border border-rose-200 uppercase",children:""})})]},d)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-20 text-center text-slate-500",children:""})})})]}),a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:q?a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:"..."}):X.length>0?X.map((u,d)=>{const O=u.avgInventory>0?u.cogs/u.avgInventory:0;return a.jsxs("div",{className:"p-4 bg-[var(--bg-secondary)] active:bg-[var(--bg-hover)] transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)] leading-tight max-w-[70%]",children:y[u.productName]||u.productName}),O>=4?a.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-bold bg-emerald-100 text-emerald-700 border border-emerald-200",children:""}):O>=1?a.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-bold bg-blue-100 text-blue-700 border border-blue-200",children:""}):a.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-bold bg-rose-100 text-rose-700 border border-rose-200",children:""})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:"text-[11px] font-mono font-bold text-[var(--text-secondary)]",children:["$",u.cogs.toLocaleString()]})]}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:"text-[11px] font-mono font-bold text-[var(--text-tertiary)]",children:["$",u.avgInventory.toLocaleString()]})]}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("p",{className:"text-[11px] font-mono font-extrabold text-orange-600",children:[O.toFixed(2)," "]})]})]})]},d)}):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:""})})]})})]})}function Ay({user:x,apiUrl:z}){const[g,m]=j.useState([]),[y,$]=j.useState(!1),[q,ae]=j.useState(Ge()),[E,v]=j.useState(Ge()),[M,Q]=j.useState(""),w=async()=>{$(!0);try{const d=await je(z,"getExpenditures",{startDate:q,endDate:E},x.token);Array.isArray(d)?m(d):m([])}catch(d){console.error("Failed to fetch expenditures:",d)}finally{$(!1)}};j.useEffect(()=>{x?.token&&w()},[x.token,z]);const A=g.filter(d=>`${d.customer||""} ${d.salesRep||""} ${d.note||""}`.toLowerCase().includes(M.toLowerCase())),U=A.reduce((d,O)=>(d.stall+=Number(O.stall||0),d.cleaning+=Number(O.cleaning||0),d.electricity+=Number(O.electricity||0),d.gas+=Number(O.gas||0),d.parking+=Number(O.parking||0),d.goods+=Number(O.goods||0),d.bags+=Number(O.bags||0),d.others+=Number(O.others||0),d.serviceFee+=Number(O.serviceFee||0),d.linePay+=Number(O.linePay||0),d.finalTotal+=Number(O.finalTotal||0),d.vehicleMaintenance+=Number(O.vehicleMaintenance||0),d.salary+=Number(O.salary||0),d.reserve+=Number(O.reserve||0),d),{stall:0,cleaning:0,electricity:0,gas:0,parking:0,goods:0,bags:0,others:0,serviceFee:0,linePay:0,finalTotal:0,vehicleMaintenance:0,salary:0,reserve:0}),X=U.stall+U.cleaning+U.electricity+U.gas+U.parking+U.bags+U.others+U.vehicleMaintenance+U.salary+U.serviceFee,u=[{key:"stall",label:"",color:"text-[var(--accent-blue)]"},{key:"cleaning",label:"",color:"text-indigo-600"},{key:"electricity",label:"",color:"text-amber-500"},{key:"gas",label:"",color:"text-orange-600"},{key:"parking",label:"",color:"text-[var(--text-secondary)]"},{key:"bags",label:"",color:"text-teal-600"},{key:"serviceFee",label:"",color:"text-rose-600"},{key:"others",label:"",color:"text-purple-600"},{key:"vehicleMaintenance",label:"",color:"text-indigo-600"},{key:"salary",label:"",color:"text-amber-500"}];return a.jsxs("div",{className:"max-w-7xl mx-auto p-3 md:p-4 space-y-3 md:space-y-4 flex flex-col h-full animate-in fade-in duration-500",children:[a.jsx("div",{className:"flex justify-between items-start gap-4 shrink-0",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ut,{className:"text-rose-500 shrink-0"}),a.jsx("h1",{className:"text-2xl font-bold text-[var(--text-primary)] whitespace-nowrap",children:""})]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1 pl-8 md:pl-0 truncate",children:"(Cost Calculation) "})]})}),a.jsxs("div",{className:"grid grid-cols-4 gap-2 shrink-0",children:[a.jsxs("div",{className:"glass-panel px-1 py-1.5 md:px-4 bg-[var(--bg-secondary)] border-[var(--border-primary)] flex flex-col justify-center items-center",children:[a.jsx("p",{className:"text-[9px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center leading-tight",children:""}),a.jsxs("p",{className:"text-xs md:text-xl font-bold text-rose-500 text-center text-nowrap mt-0.5 md:mt-1",children:["$",X.toLocaleString()]})]}),a.jsxs("div",{className:"glass-panel px-1 py-1.5 md:px-4 bg-[var(--bg-secondary)] border-[var(--border-primary)] flex flex-col justify-center items-center",children:[a.jsx("p",{className:"text-[9px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center leading-tight",children:""}),a.jsxs("p",{className:"text-xs md:text-xl font-bold text-emerald-500 text-center text-nowrap mt-0.5 md:mt-1",children:["$",U.goods.toLocaleString()]})]}),a.jsxs("div",{className:"glass-panel px-1 py-1.5 md:px-4 bg-[var(--bg-secondary)] border-[var(--border-primary)] flex flex-col justify-center items-center",children:[a.jsx("p",{className:"text-[9px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center leading-tight",children:""}),a.jsxs("p",{className:"text-xs md:text-xl font-bold text-emerald-500 text-center text-nowrap mt-0.5 md:mt-1",children:["$",U.reserve.toLocaleString()]})]}),a.jsxs("div",{className:"glass-panel px-1 py-1.5 md:px-4 bg-[var(--bg-secondary)] border-[var(--border-primary)] flex flex-col justify-center items-center",children:[a.jsx("p",{className:"text-[9px] md:text-[10px] text-[var(--text-secondary)] uppercase font-bold text-center leading-tight",children:"Line Pay"}),a.jsxs("p",{className:"text-xs md:text-xl font-bold text-[var(--text-primary)] text-center text-nowrap mt-0.5 md:mt-1",children:["$",U.linePay.toLocaleString()]})]})]}),a.jsxs("div",{className:"p-3 shrink-0 grid grid-cols-1 md:grid-cols-3 gap-3 bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-primary)]",children:[a.jsxs("div",{className:"grid grid-cols-2 md:flex md:flex-row md:items-center gap-2 w-full",children:[a.jsx("div",{className:"space-y-1 w-full md:w-auto md:flex-1",children:a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)] text-[var(--text-primary)] text-xs md:text-sm",value:q,onChange:d=>ae(d.target.value)})}),a.jsx("span",{className:"text-[var(--text-tertiary)] font-bold text-center md:text-left self-center hidden md:block",children:""}),a.jsx("div",{className:"space-y-1 w-full md:w-auto md:flex-1",children:a.jsx("input",{type:"date",className:"input-field w-full h-10 appearance-none bg-[var(--bg-primary)] text-[var(--text-primary)] text-xs md:text-sm",value:E,onChange:d=>v(d.target.value)})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)]",size:18}),a.jsx("input",{type:"text",placeholder:"...",className:"input-field pl-10 w-full h-10 text-[var(--text-primary)] bg-[var(--bg-primary)]",value:M,onChange:d=>Q(d.target.value)})]}),a.jsxs("button",{onClick:w,className:"btn-primary w-full md:w-auto h-10 flex items-center justify-center gap-2",children:[a.jsx(Fe,{size:18,className:y?"animate-spin":""})," "]})]}),a.jsx("div",{className:"grid grid-cols-5 md:grid-cols-10 gap-1.5 md:gap-2 shrink-0",children:u.map(d=>a.jsxs("div",{className:"p-1 px-0.5 md:p-2 bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-lg shadow-sm flex flex-col justify-center items-center h-12 md:h-14",children:[a.jsx("p",{className:"text-[9px] md:text-[10px] text-[var(--text-secondary)] font-bold uppercase truncate w-full text-center leading-tight",children:d.label}),a.jsxs("p",{className:`text-[10px] md:text-sm font-bold ${d.color} mt-0.5`,children:["$",U[d.key].toLocaleString()]})]},d.key))}),a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-xl shadow-sm p-0 flex-1 border border-[var(--border-primary)] relative overflow-hidden",children:[a.jsx("div",{className:"hidden md:block h-full overflow-y-auto overflow-x-hidden custom-scrollbar",children:a.jsxs("table",{className:"w-full text-left text-[10px] md:text-sm border-separate border-spacing-0",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-30",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-3 border-b border-[var(--border-primary)] bg-[var(--bg-secondary)] whitespace-nowrap",children:"//"}),a.jsx("th",{className:"px-2 py-3 text-right border-b border-[var(--border-primary)]",children:""}),a.jsx("th",{className:"px-2 py-3 text-right border-b border-[var(--border-primary)]",children:""}),a.jsx("th",{className:"px-2 py-3 text-right border-b border-[var(--border-primary)]",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:y?a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"p-20 text-center text-[var(--text-secondary)] font-medium",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(Fe,{className:"animate-spin text-rose-500"}),a.jsx("span",{children:"..."})]})})}):A.length>0?A.map((d,O)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)] transition-colors group",children:[a.jsx("td",{className:"px-2 py-4 bg-[var(--bg-primary)] border-b border-[var(--border-primary)] group-hover:bg-[var(--bg-secondary)] transition-colors",children:a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsxs("div",{className:"text-[var(--text-secondary)] font-mono text-xs flex items-center gap-1.5 mb-1",children:[a.jsx(cs,{size:12,className:"text-[var(--text-tertiary)]"}),(()=>{const p=d.date||d.serverTimestamp;if(!p)return"";const D=new Date(p);return isNaN(D.getTime())?String(p):D.toLocaleString("zh-TW",{hour12:!1})})()]}),a.jsxs("div",{className:"pl-5 flex flex-col gap-0.5",children:[a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)]",children:d.customer||d.note||""}),a.jsxs("div",{className:"text-[10px] text-[var(--text-secondary)] font-medium",children:[": ",d.salesRep||"-"]})]})]})}),a.jsx("td",{className:"px-2 py-4 text-right align-top",children:a.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-[11px] content-start",children:[a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(d.stall||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(d.cleaning||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(d.electricity||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(d.gas||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(d.parking||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(d.goods||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(d.bags||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-[var(--text-primary)] font-medium",children:["$",Number(d.others||0).toLocaleString()]})]})]})}),a.jsx("td",{className:"px-2 py-4 text-right align-top",children:a.jsxs("div",{className:"flex flex-col gap-1.5 items-end",children:[a.jsxs("div",{className:"flex justify-between w-28 bg-[var(--bg-secondary)] px-2 py-0.5 rounded border border-emerald-100",children:[a.jsx("span",{className:"text-[9px] text-emerald-500/70 uppercase font-bold",children:"LP "}),a.jsxs("span",{className:"text-[11px] font-bold text-emerald-500",children:["+$",Number(d.linePay||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between w-28 bg-rose-50 px-2 py-0.5 rounded border border-rose-100",children:[a.jsx("span",{className:"text-[9px] text-rose-600/70 uppercase font-bold",children:""}),a.jsxs("span",{className:"text-[11px] font-bold text-rose-700",children:["-$",Number(d.serviceFee||0).toLocaleString()]})]})]})}),a.jsx("td",{className:"px-2 py-4 text-right align-top",children:a.jsxs("div",{className:"flex flex-col gap-1 text-xs items-end",children:[a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-indigo-600 font-bold",children:["$",Number(d.vehicleMaintenance||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-amber-500 font-bold",children:["$",Number(d.salary||0).toLocaleString()]})]}),a.jsxs("span",{className:"text-[var(--text-secondary)]",children:[": ",a.jsxs("span",{className:"text-purple-600 font-bold",children:["$",Number(d.reserve||0).toLocaleString()]})]})]})})]},O)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"p-20 text-center text-[var(--text-secondary)] font-medium",children:""})})})]})}),a.jsx("div",{className:"md:hidden h-full overflow-y-auto p-3 space-y-3 custom-scrollbar",children:y?a.jsxs("div",{className:"p-10 text-center text-[var(--text-secondary)] font-medium flex flex-col items-center gap-2",children:[a.jsx(Fe,{className:"animate-spin text-rose-500"}),a.jsx("span",{children:"..."})]}):A.length>0?A.map((d,O)=>a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] p-3 shadow-sm text-xs space-y-3",children:[a.jsx("div",{className:"flex justify-between items-start border-b border-[var(--border-primary)] pb-2",children:a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsx("div",{className:"font-bold text-[var(--text-primary)] text-sm",children:d.customer||d.note||""}),a.jsxs("div",{className:"text-[var(--text-secondary)] font-medium text-[10px]",children:[": ",d.salesRep||"-"]}),a.jsxs("div",{className:"text-[var(--text-tertiary)] font-mono text-[9px] flex items-center gap-1 mt-1",children:[a.jsx(cs,{size:10}),(()=>{const p=d.date||d.serverTimestamp,D=new Date(p);return isNaN(D.getTime())?String(p):D.toLocaleString("zh-TW",{hour12:!1})})()]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("div",{className:"space-y-0.5 text-[var(--text-secondary)]",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(d.stall||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(d.cleaning||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(d.electricity||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(d.gas||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(d.parking||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(d.goods||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(d.bags||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-medium text-[var(--text-primary)]",children:["$",Number(d.others||0).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between items-center text-emerald-500 bg-[var(--bg-secondary)] px-1.5 py-0.5 rounded",children:[a.jsx("span",{children:"LP"})," ",a.jsxs("span",{className:"font-bold",children:["+$",Number(d.linePay||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center text-rose-500 bg-[var(--bg-secondary)] px-1.5 py-0.5 rounded",children:[a.jsx("span",{children:""})," ",a.jsxs("span",{className:"font-bold",children:["-$",Number(d.serviceFee||0).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-bold uppercase",children:""}),a.jsxs("div",{className:"space-y-0.5 text-[var(--text-secondary)]",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-indigo-600",children:""})," ",a.jsxs("span",{className:"font-bold text-indigo-600",children:["$",Number(d.vehicleMaintenance||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-amber-500",children:""})," ",a.jsxs("span",{className:"font-bold text-amber-500",children:["$",Number(d.salary||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-600",children:""})," ",a.jsxs("span",{className:"font-bold text-purple-600",children:["$",Number(d.reserve||0).toLocaleString()]})]})]})]})]})]})]},O)):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)] font-medium",children:""})})]})]})}function Dy({user:x,apiUrl:z}){const[g,m]=j.useState(!1),[y,$]=j.useState(Ge().substring(0,8)+"01"),[q,ae]=j.useState(Ge()),[E,v]=j.useState({revenue:0,cogs:0,grossProfit:0,expenses:{},totalExpenses:0,netIncome:0}),M=async()=>{m(!0);try{const[A,U]=await Promise.all([je(z,"getProfitAnalysis",{startDate:y,endDate:q},x.token),je(z,"getExpenditures",{startDate:y,endDate:q},x.token)]);let X=0,u=0;Array.isArray(A)&&A.forEach(p=>{X+=Number(p.revenue||0),u+=Number(p.cost||0)});let d=0;const O={stall:0,cleaning:0,electricity:0,gas:0,parking:0,bags:0,serviceFee:0,others:0,vehicleMaintenance:0,salary:0};Array.isArray(U)&&U.forEach(p=>{O.stall+=Number(p.stall||0),O.cleaning+=Number(p.cleaning||0),O.electricity+=Number(p.electricity||0),O.gas+=Number(p.gas||0),O.parking+=Number(p.parking||0),O.bags+=Number(p.bags||0),O.serviceFee+=Number(p.serviceFee||0),O.others+=Number(p.others||0),O.vehicleMaintenance+=Number(p.vehicleMaintenance||0),O.salary+=Number(p.salary||0)}),Object.values(O).forEach(p=>d+=p),v({revenue:X,cogs:u,grossProfit:X-u,expenses:O,totalExpenses:d,netIncome:X-u-d})}catch(A){console.error("Failed to fetch income statement data:",A),alert("")}finally{m(!1)}};j.useEffect(()=>{x?.token&&M()},[x.token,z]);const Q=A=>`$${Math.round(A).toLocaleString()}`,w=(A,U)=>U===0?"0%":`${(A/U*100).toFixed(1)}%`;return a.jsxs("div",{className:"max-w-4xl mx-auto p-2 md:p-6 space-y-2 md:space-y-6 flex flex-col h-[calc(100dvh-6rem)] overflow-hidden",children:[a.jsxs("div",{className:"flex justify-between items-center shrink-0 gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pi,{className:"text-emerald-500 shrink-0 w-5 h-5 md:w-6 md:h-6"}),a.jsx("h1",{className:"text-lg md:text-2xl font-bold text-[var(--text-primary)] whitespace-nowrap",children:""})]}),a.jsxs("div",{className:"hidden md:block",children:[a.jsx("div",{className:"text-[var(--text-tertiary)] text-sm font-medium mt-0.5 inline ml-2",children:"(Income Statement)"}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1 truncate",children:""})]})]}),a.jsx("button",{onClick:M,className:"btn-secondary p-1.5 md:p-2 rounded-lg md:rounded-xl shrink-0",children:a.jsx(Fe,{size:16,className:`md:w-5 md:h-5 ${g?"animate-spin":""}`})})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] p-2 md:p-4 rounded-xl border border-[var(--border-primary)] shrink-0 flex flex-col md:flex-row md:items-center gap-2 md:gap-4 shadow-sm",children:[a.jsx("div",{className:"hidden md:block",children:a.jsx(sa,{size:18,className:"text-[var(--text-tertiary)]"})}),a.jsxs("div",{className:"grid grid-cols-2 md:flex md:flex-row md:items-center gap-2 flex-1 w-full",children:[a.jsx("div",{className:"w-full md:w-auto md:flex-1",children:a.jsx("input",{type:"date",className:"input-field w-full h-8 md:h-10 appearance-none bg-[var(--bg-primary)] text-xs md:text-sm",value:y,onChange:A=>$(A.target.value)})}),a.jsx("span",{className:"text-[var(--text-secondary)] font-bold text-center md:text-left self-center hidden md:block",children:""}),a.jsx("div",{className:"w-full md:w-auto md:flex-1",children:a.jsx("input",{type:"date",className:"input-field w-full h-8 md:h-10 appearance-none bg-[var(--bg-primary)] text-xs md:text-sm",value:q,onChange:A=>ae(A.target.value)})})]}),a.jsx("button",{onClick:M,className:"btn-primary h-8 md:h-10 px-6 w-full md:w-auto text-xs md:text-sm",children:""})]}),a.jsx("div",{className:"bg-[var(--bg-primary)] rounded-xl border border-[var(--border-primary)] overflow-hidden flex-1 flex flex-col shadow-sm min-h-0",children:a.jsx("div",{className:"flex-1 p-3 md:p-8",children:a.jsxs("div",{className:"space-y-4 md:space-y-6 max-w-2xl mx-auto font-mono text-sm md:text-base",children:[a.jsxs("div",{className:"space-y-1 md:space-y-2",children:[a.jsx("h3",{className:"text-emerald-500 font-bold text-base md:text-lg border-b border-[var(--border-primary)] pb-1 md:pb-2 mb-2 md:mb-4",children:" (Revenue)"}),a.jsxs("div",{className:"flex justify-between items-center text-xs md:text-base",children:[a.jsx("span",{className:"text-[var(--text-secondary)]",children:""}),a.jsx("span",{className:"text-[var(--text-primary)] font-bold",children:Q(E.revenue)})]}),a.jsxs("div",{className:"flex justify-between items-center text-rose-600 text-xs md:text-base",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(bh,{size:12,className:"md:w-3.5 md:h-3.5"})," "]}),a.jsxs("span",{children:["- ",Q(E.cogs)]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-1 md:pt-2 border-t border-[var(--border-primary)] text-xs md:text-base",children:[a.jsx("span",{className:"text-emerald-500 font-bold",children:" (Gross Profit)"}),a.jsx("span",{className:"text-emerald-500 font-bold",children:Q(E.grossProfit)})]}),a.jsxs("div",{className:"text-right text-[10px] md:text-xs text-[var(--text-secondary)]",children:[": ",w(E.grossProfit,E.revenue)]})]}),a.jsxs("div",{className:"space-y-1 md:space-y-2 mt-2 md:mt-8",children:[a.jsx("h3",{className:"text-amber-500 font-bold text-base md:text-lg border-b border-amber-200 pb-1 md:pb-2 mb-2 md:mb-4 whitespace-nowrap",children:" (Operating Expenses)"}),a.jsx("div",{className:"grid grid-cols-3 md:grid-cols-1 gap-2 md:gap-0",children:Object.entries(E.expenses).map(([A,U])=>{const X={stall:"",cleaning:"",electricity:"",gas:"",parking:"",bags:"",serviceFee:"",others:"",vehicleMaintenance:"",salary:""};return U===0?null:a.jsxs("div",{className:"flex flex-col md:flex-row justify-center md:justify-between items-center md:items-center text-[var(--text-secondary)] text-[10px] md:text-sm bg-[var(--bg-secondary)] md:bg-transparent p-1 md:p-0 rounded md:rounded-none",children:[a.jsx("span",{className:"font-medium",children:X[A]}),a.jsx("span",{className:"text-[var(--text-primary)] font-bold md:font-normal",children:Q(U)})]},A)})}),a.jsxs("div",{className:"flex justify-between items-center pt-1 md:pt-2 border-t border-[var(--border-primary)] text-amber-500 mt-1 text-xs md:text-base",children:[a.jsx("span",{className:"font-bold",children:""}),a.jsxs("span",{className:"font-bold",children:["- ",Q(E.totalExpenses)]})]})]}),a.jsxs("div",{className:"mt-2 md:mt-8 pt-2 md:pt-4 border-t-2 border-[var(--border-primary)]",children:[a.jsxs("div",{className:"flex justify-between items-center text-base md:text-xl",children:[a.jsx("span",{className:"text-[var(--text-primary)] font-bold",children:" (Net Income)"}),a.jsx("span",{className:`font-bold ${E.netIncome>=0?"text-emerald-500":"text-rose-600"}`,children:Q(E.netIncome)})]}),a.jsxs("div",{className:"text-right text-[10px] md:text-sm text-[var(--text-secondary)] mt-0.5 md:mt-1",children:[": ",w(E.netIncome,E.revenue)]})]})]})})})]})}function ky({user:x,apiUrl:z}){const[g,m]=j.useState(!1),[y,$]=j.useState({stall:0,cleaning:0,electricity:0,gas:0,parking:0,goods:0,bags:0,others:0,linePay:0,serviceFee:0,vehicleMaintenance:0,salary:0,reserve:0}),[q,ae]=j.useState(""),E=async()=>{if(!q.trim()){alert("");const u=document.getElementById("input-expense-note");u&&(u.focus(),u.scrollIntoView({behavior:"smooth",block:"center"}));return}const U=Number(y.stall)+Number(y.cleaning)+Number(y.electricity)+Number(y.gas)+Number(y.parking)+Number(y.goods)+Number(y.bags)+Number(y.others)+Number(y.serviceFee)+Number(y.vehicleMaintenance)+Number(y.salary)+Number(y.reserve)+Number(y.linePay),X={note:q,salesRep:x.username,...y,finalTotal:U};m(!0);try{await je(z,"saveExpenditure",X,x.token),alert(" Expenditures "),$({stall:0,cleaning:0,electricity:0,gas:0,parking:0,goods:0,bags:0,others:0,linePay:0,serviceFee:0,vehicleMaintenance:0,salary:0,reserve:0}),ae("")}catch(u){alert(": "+u.message)}finally{m(!1)}},v=A=>{const U=document.getElementById(A);U&&(U.focus(),U.select?.(),U.scrollIntoView({block:"nearest",behavior:"smooth"}))},M=(A,U)=>{const X=["note","stall","cleaning","electricity","gas","parking","goods","bags","others","linePay","serviceFee","vehicleMaintenance","salary","reserve"],u=X.indexOf(U);A.key==="Enter"||A.key==="ArrowRight"?(A.preventDefault(),u<X.length-1?v(`input-expense-${X[u+1]}`):A.key==="Enter"&&E()):A.key==="ArrowLeft"?(A.preventDefault(),u>0&&v(`input-expense-${X[u-1]}`)):A.key==="ArrowDown"?(A.preventDefault(),["stall","cleaning","electricity","gas","parking","goods"].includes(U)?v(`input-expense-${{stall:"electricity",cleaning:"gas",electricity:"parking",gas:"goods",parking:"bags",goods:"others"}[U]}`):u<X.length-1&&v(`input-expense-${X[u+1]}`)):A.key==="ArrowUp"&&(A.preventDefault(),["electricity","gas","parking","goods","bags","others"].includes(U)?v(`input-expense-${{electricity:"stall",gas:"cleaning",parking:"electricity",goods:"gas",bags:"parking",others:"goods"}[U]}`):u>0&&v(`input-expense-${X[u-1]}`))},w=Number(y.stall)+Number(y.cleaning)+Number(y.electricity)+Number(y.gas)+Number(y.parking)+Number(y.goods)+Number(y.bags)+Number(y.others)+Number(y.serviceFee)+Number(y.vehicleMaintenance)+Number(y.salary)+Number(y.reserve)+Number(y.linePay);return a.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-6 space-y-6 animate-in fade-in duration-500 relative",children:[g&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-rose-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-lg font-bold text-[var(--text-primary)]",children:"..."})]}),a.jsxs("div",{className:"flex flex-row justify-between items-center gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2 truncate",children:[a.jsx("div",{className:"p-1.5 md:p-2 bg-rose-100 rounded-lg shrink-0",children:a.jsx(ut,{className:"text-rose-600 w-5 h-5 md:w-6 md:h-6"})}),""]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-xs md:text-sm mt-1 truncate",children:""})]}),a.jsxs("div",{className:"bg-rose-50 px-3 md:px-6 py-2 md:py-3 border border-rose-200 rounded-xl shadow-sm shrink-0 flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase tracking-wider",children:""}),a.jsxs("p",{className:"text-lg md:text-2xl font-black text-rose-600",children:["$",w.toLocaleString()]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4 text-[var(--accent-blue)] font-bold",children:[a.jsx(Nh,{size:18}),a.jsx("span",{children:""})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] font-bold block mb-2",children:" /  *"}),a.jsx("input",{id:"input-expense-note",type:"text",className:"input-field w-full text-lg py-3 bg-[var(--bg-primary)]",placeholder:"1/7 ...",value:q,onChange:A=>ae(A.target.value),onKeyDown:A=>M(A,"note")})]})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6 text-emerald-500 font-bold",children:[a.jsx(Nf,{size:18}),a.jsx("span",{children:""})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:[{key:"stall",label:"",next:"cleaning"},{key:"cleaning",label:"",next:"electricity",prev:"stall"},{key:"electricity",label:"",next:"gas",prev:"cleaning"},{key:"gas",label:"",next:"parking",prev:"electricity"},{key:"parking",label:"",next:"goods",prev:"gas"},{key:"goods",label:"",next:"bags",prev:"parking"},{key:"bags",label:"",next:"others",prev:"goods"},{key:"others",label:"",next:"linePay",prev:"bags"}].map(A=>a.jsxs("div",{className:"flex items-center justify-between gap-4 p-2 hover:bg-[var(--bg-secondary)] rounded-lg transition-colors border-b border-[var(--border-primary)] last:border-0",children:[a.jsx("label",{className:"text-sm text-[var(--text-secondary)] font-medium whitespace-nowrap",children:A.label}),a.jsx("input",{id:`input-expense-${A.key}`,type:"number",className:"input-field text-right w-32 bg-[var(--bg-primary)]",value:y[A.key]||"",onChange:U=>$({...y,[A.key]:Number(U.target.value)}),onKeyDown:U=>M(U,A.key),onWheel:U=>U.target.blur()})]},A.key))})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"glass-panel p-6 border-[var(--border-primary)]",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6 text-amber-500 font-bold",children:[a.jsx(Ah,{size:18}),a.jsx("span",{children:""})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1",children:"Line Pay "}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"input-expense-linePay",type:"number",className:"input-field w-full pl-8 border-[var(--border-primary)] text-emerald-500 bg-[var(--bg-secondary)]",value:y.linePay||"",onChange:A=>$({...y,linePay:Number(A.target.value)}),onKeyDown:A=>M(A,"linePay"),onWheel:A=>A.target.blur()}),a.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-emerald-500 font-bold",children:"+"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-1",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"input-expense-serviceFee",type:"number",className:"input-field w-full pl-8 border-rose-200 text-rose-700 bg-rose-50",value:y.serviceFee||"",onChange:A=>$({...y,serviceFee:Number(A.target.value)}),onKeyDown:A=>M(A,"serviceFee"),onWheel:A=>A.target.blur()}),a.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-rose-600 font-bold",children:"-"})]})]})]})]}),a.jsxs("div",{className:"glass-panel p-6 border-indigo-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6 text-indigo-600 font-bold",children:[a.jsx(to,{size:18}),a.jsx("span",{children:""})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"text-xs text-[var(--text-secondary)] flex items-center gap-2 font-bold",children:[a.jsx(to,{size:14})," "]}),a.jsx("input",{id:"input-expense-vehicleMaintenance",type:"number",className:"input-field w-28 text-right bg-[var(--bg-primary)]",value:y.vehicleMaintenance||"",onChange:A=>$({...y,vehicleMaintenance:Number(A.target.value)}),onKeyDown:A=>M(A,"vehicleMaintenance"),onWheel:A=>A.target.blur()})]}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"text-xs text-[var(--text-secondary)] flex items-center gap-2 font-bold",children:[a.jsx(Tr,{size:14})," "]}),a.jsx("input",{id:"input-expense-salary",type:"number",className:"input-field w-28 text-right bg-[var(--bg-primary)]",value:y.salary||"",onChange:A=>$({...y,salary:Number(A.target.value)}),onKeyDown:A=>M(A,"salary"),onWheel:A=>A.target.blur()})]}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"text-xs text-[var(--text-secondary)] flex items-center gap-2 font-bold",children:[a.jsx(Yh,{size:14})," "]}),a.jsx("input",{id:"input-expense-reserve",type:"number",className:"input-field w-28 text-right bg-[var(--bg-primary)]",value:y.reserve||"",onChange:A=>$({...y,reserve:Number(A.target.value)}),onKeyDown:A=>M(A,"reserve"),onWheel:A=>A.target.blur()})]})]})]}),a.jsxs("button",{onClick:E,className:"btn-primary w-full py-4 text-lg font-black shadow-lg shadow-blue-100 hover:shadow-xl hover:shadow-blue-200 transition-all flex justify-center items-center gap-3 active:scale-95",children:[a.jsx(sn,{size:22})," "]}),a.jsx("p",{className:"text-center text-[var(--text-secondary)] text-[10px] uppercase font-bold tracking-tighter",children:"Data will be saved to Expenditures Sheet"})]})]})]})}function Cy({user:x,apiUrl:z}){const[g,m]=j.useState([]),[y,$]=j.useState(!1),[q,ae]=j.useState(!1),[E,v]=j.useState(""),[M,Q]=j.useState({username:"",password:"",role:"VIEWER"}),[w,A]=j.useState(null),U=[{group:"",items:[{key:"sales_entry",label:""},{key:"sales_report",label:""}]},{group:"",items:[{key:"purchase_entry",label:""},{key:"purchase_history",label:""}]},{group:"",items:[{key:"inventory_adjust",label:""},{key:"inventory_stocktake",label:""},{key:"inventory_valuation",label:""},{key:"inventory_adjust_history",label:""},{key:"inventory_stocktake_history",label:""}]},{group:"",items:[{key:"finance_expenditure",label:""}]},{group:"",items:[{key:"finance_receivable",label:""},{key:"finance_payable",label:""},{key:"finance_income",label:""},{key:"finance_cost",label:""},{key:"finance_payroll",label:""}]},{group:"",items:[{key:"analytics_sales",label:""},{key:"analytics_customer",label:""},{key:"analytics_profit",label:""},{key:"analytics_turnover",label:""}]},{group:"",items:[{key:"system_config",label:""}]}],X=async()=>{if(!M.username||!M.password){alert("");return}ae(!0),v(" ...");try{await je(z,"addUser",M,x.token),Q({username:"",password:"",role:"VIEWER"}),await d(),alert("")}catch(k){alert(": "+k.message)}finally{ae(!1)}},u=async k=>{if(window.confirm(` ${k}?`)){ae(!0),v(" ...");try{await je(z,"deleteUser",{username:k},x.token),await d(),alert("")}catch(o){alert(": "+o.message)}finally{ae(!1)}}},d=async()=>{$(!0);try{const k=await je(z,"getUsers",{},x.token);if(Array.isArray(k)){const o=k.map(T=>{let V=T.permissions;if(typeof V=="string")try{V=JSON.parse(V)}catch(ce){console.error(`Failed to parse permissions for ${T.username}`,ce),V=[]}return{...T,permissions:Array.isArray(V)?V:[]}});m(o)}else console.warn("Backend returned non-array for users")}catch(k){console.error("Failed to fetch users:",k),alert("")}finally{$(!1)}};j.useEffect(()=>{x?.token&&d()},[x.token,z]);const O=async()=>{if(w){ae(!0),v(" ...");try{await je(z,"updateUserPermissions",{username:w.username,permissions:w.permissions},x.token),A(null),await d(),alert("")}catch(k){console.error(k),alert(": "+k.message)}finally{ae(!1)}}},p=k=>{if(!w)return;const o=w.permissions||[];o.includes(k)?A({...w,permissions:o.filter(T=>T!==k)}):A({...w,permissions:[...o,k]})},D=k=>{if(!w)return;const o=w.permissions||[],T=k.map(ce=>ce.key);if(T.every(ce=>o.includes(ce)))A({...w,permissions:o.filter(ce=>!T.includes(ce))});else{const ce=o.filter(ie=>!T.includes(ie));A({...w,permissions:[...ce,...T]})}};return a.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-6 space-y-6 flex flex-col h-[calc(100vh-6rem)]",children:[q&&a.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-[2px] z-[60] flex items-center justify-center animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] p-6 rounded-2xl shadow-xl flex flex-col items-center gap-4 min-w-[200px]",children:[a.jsx(Fe,{className:"animate-spin text-[var(--accent-blue)]",size:32}),a.jsx("span",{className:"text-[var(--text-primary)] font-bold text-base",children:E})]})}),a.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("h1",{className:"text-lg md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(la,{className:"text-rose-500",size:20})," "]}),a.jsx("p",{className:"text-[10px] md:text-sm text-[var(--text-tertiary)] font-medium",children:"(Permission Control)"})]}),a.jsx("button",{onClick:d,className:"btn-secondary p-2 rounded-xl",children:a.jsx(Fe,{size:18,className:y?"animate-spin":""})})]}),a.jsxs("div",{className:"glass-panel p-4 md:p-6 border-l-4 border-l-emerald-500 shrink-0",children:[a.jsxs("h3",{className:"font-bold text-base md:text-lg mb-3 flex items-center gap-2 text-[var(--text-primary)]",children:[a.jsx(ly,{size:18,className:"text-emerald-500"})," "]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end relative",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] uppercase font-bold px-1",children:" (Username)"}),a.jsx("input",{id:"input-new-username",type:"text",className:"input-field w-full",value:M.username,onChange:k=>Q({...M,username:k.target.value}),onKeyDown:k=>{(k.key==="Enter"||k.key==="ArrowRight")&&(k.preventDefault(),document.getElementById("input-new-password")?.focus())},placeholder:""})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] uppercase font-bold px-1",children:" (Password)"}),a.jsx("input",{id:"input-new-password",type:"password",className:"input-field w-full",value:M.password,onChange:k=>Q({...M,password:k.target.value}),onKeyDown:k=>{k.key==="Enter"||k.key==="ArrowRight"?(k.preventDefault(),document.getElementById("input-new-role")?.focus()):k.key==="ArrowLeft"&&(k.preventDefault(),document.getElementById("input-new-username")?.focus())},placeholder:""})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] uppercase font-bold px-1",children:" (Role)"}),a.jsxs("select",{id:"input-new-role",className:"input-field w-full",value:M.role,onChange:k=>Q({...M,role:k.target.value}),onKeyDown:k=>{k.key==="Enter"||k.key==="ArrowRight"?(k.preventDefault(),document.getElementById("btn-add-user")?.focus()):k.key==="ArrowLeft"&&(k.preventDefault(),document.getElementById("input-new-password")?.focus())},children:[a.jsx("option",{value:"BOSS",children:" (BOSS)"}),a.jsx("option",{value:"ADMIN",children:" (ADMIN)"}),a.jsx("option",{value:"EMPLOYEE",children:" (EMPLOYEE)"}),a.jsx("option",{value:"VIEWER",children:" (VIEWER)"})]})]}),a.jsxs("button",{id:"btn-add-user",onClick:X,onKeyDown:k=>{k.key==="ArrowLeft"&&(k.preventDefault(),document.getElementById("input-new-role")?.focus())},className:"btn-primary flex justify-center items-center gap-2",disabled:y,children:[a.jsx(sn,{size:18})," "]})]})]}),a.jsx("div",{className:"glass-panel p-0 overflow-hidden flex-1 flex flex-col",children:a.jsxs("div",{className:"overflow-y-auto flex-1",children:[a.jsxs("table",{className:"hidden md:table w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-xs uppercase sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:" (Username)"}),a.jsx("th",{className:"p-4",children:" (Role)"}),a.jsx("th",{className:"p-4 text-center",children:" (Status)"}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)] bg-[var(--bg-primary)]",children:g.length>0?g.map((k,o)=>a.jsxs("tr",{className:"hover:bg-[var(--bg-secondary)] transition-colors",children:[a.jsx("td",{className:"p-4 text-[var(--text-primary)] font-bold",children:k.username}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold border ${k.role==="BOSS"?"bg-amber-500/10 text-amber-500 border-amber-500/20":k.role==="ADMIN"?"bg-rose-500/10 text-rose-500 border-rose-500/20":k.role==="EMPLOYEE"?"bg-blue-500/10 text-blue-500 border-blue-500/20":(k.role==="VIEWER","bg-slate-500/10 text-[var(--text-secondary)] border-slate-500/20")}`,children:k.role})}),a.jsx("td",{className:"p-4 text-center",children:k.status==="ACTIVE"?a.jsxs("span",{className:"flex items-center justify-center gap-2 text-emerald-500 font-bold text-xs",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.3)]"})," ACTIVE"]}):a.jsxs("span",{className:"flex items-center justify-center gap-2 text-[var(--text-secondary)] font-bold text-xs",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-500"})," ",k.status||"UNKNOWN"]})}),a.jsx("td",{className:"p-4 text-center flex items-center justify-center gap-2",children:k.username!=="admin"&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{let T=Array.isArray(k.permissions)?[...k.permissions]:[];const V={sales:["sales_entry","sales_report"],purchase:["purchase_entry","purchase_history"],inventory:["inventory_adjust","inventory_stocktake","inventory_valuation","inventory_adjust_history","inventory_stocktake_history"],finance:["finance_expenditure","finance_receivable","finance_payable","finance_income","finance_cost"],analytics:["analytics_sales","analytics_customer","analytics_profit","analytics_turnover"],system:["system_config"],inventory_history:["inventory_adjust_history","inventory_stocktake_history"]};Object.keys(V).forEach(ce=>{T.includes(ce)&&(T=T.filter(ie=>ie!==ce),V[ce].forEach(ie=>{T.includes(ie)||T.push(ie)}))}),A({username:k.username,permissions:T})},className:"p-2 text-[var(--text-tertiary)] hover:text-[var(--accent-blue)] transition-colors",title:"",children:a.jsx(la,{size:16})}),a.jsx("button",{onClick:()=>u(k.username),className:"p-2 text-[var(--text-tertiary)] hover:text-rose-400 transition-colors",title:"",children:a.jsx(zr,{size:16})})]})})]},o)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"p-20 text-center text-[var(--text-secondary)]",children:y?"...":""})})})]}),a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-primary)]",children:g.length>0?g.map((k,o)=>a.jsx("div",{className:"p-6 bg-[var(--bg-primary)] hover:bg-[var(--bg-secondary)] transition-colors border-b border-[var(--border-primary)] last:border-0 shadow-sm",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-lg font-extrabold text-[var(--text-primary)] leading-tight",children:k.username}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`px-2.5 py-0.5 rounded text-[11px] font-bold border ${k.role==="BOSS"?"bg-amber-500/10 text-amber-500 border-amber-500/20":k.role==="ADMIN"?"bg-rose-500/10 text-rose-500 border-rose-500/20":k.role==="EMPLOYEE"?"bg-blue-500/10 text-blue-500 border-blue-500/20":"bg-slate-500/10 text-[var(--text-secondary)] border-slate-500/20"}`,children:k.role}),k.status==="ACTIVE"?a.jsxs("span",{className:"flex items-center gap-1.5 text-emerald-500 font-bold text-[11px]",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," ACTIVE"]}):a.jsxs("span",{className:"flex items-center gap-1.5 text-[var(--text-tertiary)] font-bold text-[11px]",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-300"})," ",k.status||"OFF"]})]})]}),k.username!=="admin"&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{let T=Array.isArray(k.permissions)?[...k.permissions]:[];const V={sales:["sales_entry","sales_report"],purchase:["purchase_entry","purchase_history"],inventory:["inventory_adjust","inventory_stocktake","inventory_valuation","inventory_adjust_history","inventory_stocktake_history"],finance:["finance_expenditure","finance_receivable","finance_payable","finance_income","finance_cost"],analytics:["analytics_sales","analytics_customer","analytics_profit","analytics_turnover"],system:["system_config"],inventory_history:["inventory_adjust_history","inventory_stocktake_history"]};Object.keys(V).forEach(ce=>{T.includes(ce)&&(T=T.filter(ie=>ie!==ce),V[ce].forEach(ie=>{T.includes(ie)||T.push(ie)}))}),A({username:k.username,permissions:T})},className:"w-12 h-12 flex items-center justify-center text-[var(--accent-blue)] bg-[var(--bg-secondary)] rounded-xl active:scale-90 transition-transform shadow-sm",children:a.jsx(la,{size:22})}),a.jsx("button",{onClick:()=>u(k.username),className:"w-12 h-12 flex items-center justify-center text-rose-500 bg-[var(--bg-secondary)] rounded-xl active:scale-90 transition-transform shadow-sm",children:a.jsx(zr,{size:22})})]})]})},o)):a.jsx("div",{className:"p-10 text-center text-[var(--text-secondary)]",children:y?"...":""})})]})}),w&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-2xl w-full max-w-md overflow-hidden shadow-2xl animate-in fade-in zoom-in duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-[var(--border-primary)] bg-[var(--bg-secondary)]",children:[a.jsxs("h3",{className:"text-xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(la,{className:"text-[var(--accent-blue)]"}),"  (",w.username,")"]}),a.jsx("p",{className:"text-[var(--text-secondary)] text-sm mt-1",children:" (BOSS )"})]}),a.jsx("div",{className:"p-6 space-y-6 max-h-[65vh] overflow-y-auto custom-scrollbar",children:U.map(k=>{const o=k.items.map(V=>V.key),T=o.every(V=>w.permissions?.includes(V));return o.some(V=>w.permissions?.includes(V)),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-1 cursor-pointer group/title",onClick:()=>D(k.items),children:[a.jsx("h4",{className:"text-xs font-bold text-[var(--text-tertiary)] uppercase tracking-widest flex items-center gap-2 group-hover/title:text-[var(--accent-blue)] transition-colors",children:k.group}),a.jsx("span",{className:"text-[10px] text-[var(--accent-blue)] font-bold opacity-0 group-hover/title:opacity-100 transition-opacity",children:T?"":""})]}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:k.items.map((V,ce)=>{const ie=`perm-item-${V.key}`,H=J=>{if(!["Enter"," ","ArrowDown","ArrowUp","ArrowRight","ArrowLeft"].includes(J.key))return;J.preventDefault();const K=[];U.forEach(b=>{b.items.forEach(F=>K.push(F.key))});const Z=K.indexOf(V.key);if(J.key==="Enter"||J.key===" "){if(p(V.key),Z<K.length-1){const b=K[Z+1];document.getElementById(`perm-item-${b}`)?.focus()}}else if(J.key==="ArrowDown"||J.key==="ArrowRight"){if(Z<K.length-1){const b=K[Z+1];document.getElementById(`perm-item-${b}`)?.focus()}}else if((J.key==="ArrowUp"||J.key==="ArrowLeft")&&Z>0){const b=K[Z-1];document.getElementById(`perm-item-${b}`)?.focus()}};return a.jsxs("label",{id:ie,tabIndex:"0",onKeyDown:H,className:`flex items-center gap-3 p-3 rounded-xl border transition-all cursor-pointer group outline-none ring-offset-2 focus:ring-2 focus:ring-[var(--accent-blue)]/50 ${w.permissions?.includes(V.key)?"bg-[var(--bg-secondary)] border-[var(--border-primary)] shadow-sm":"bg-[var(--bg-secondary)] border-[var(--border-primary)] hover:bg-[var(--bg-hover)]"}`,children:[a.jsx("div",{className:`w-5 h-5 rounded-lg border flex items-center justify-center transition-all ${w.permissions?.includes(V.key)?"bg-[var(--accent-blue)] border-[var(--accent-blue)] text-white scale-110":"bg-[var(--bg-primary)] border-[var(--border-primary)] group-hover:border-[var(--accent-blue)]/50"}`,children:w.permissions?.includes(V.key)&&a.jsx(nn,{size:12,fill:"currentColor"})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:w.permissions?.includes(V.key),onChange:()=>p(V.key)}),a.jsx("span",{className:`text-sm transition-colors ${w.permissions?.includes(V.key)?"text-[var(--text-primary)] font-bold":"text-[var(--text-secondary)]"}`,children:V.label})]},V.key)})})]},k.group)})}),a.jsxs("div",{className:"p-6 border-t border-[var(--border-primary)] flex justify-end gap-3 bg-[var(--bg-secondary)]",children:[a.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 rounded-lg text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-black/5 transition-colors",children:""}),a.jsx("button",{onClick:O,className:"btn-primary px-6 py-2",children:""})]})]})})]})}function Ey({user:x,apiUrl:z}){const[g,m]=j.useState(new Date().getFullYear()),[y,$]=j.useState(new Date().getMonth()+1),[q,ae]=j.useState(x.username),[E,v]=j.useState([]),[M,Q]=j.useState(!1),[w,A]=j.useState(null),[U,X]=j.useState(null),[u,d]=j.useState("LEAVE"),[O,p]=j.useState(""),[D,k]=j.useState(""),[o,T]=j.useState(!1),[V,ce]=j.useState({baseSalary:0,attendanceBonus:0,insurance:0,monthlyOffDays:8,bonusTiers:"[]"}),[ie,H]=j.useState(!1),[J,S]=j.useState(!1),[K,Z]=j.useState({profile:{joinedDate:"",birthday:"",identityId:"",contact:"",note:""},seniorityText:"",estimatedLeaveDays:0}),[b,F]=j.useState({joinedDate:"",birthday:"",identityId:"",contact:"",note:""}),le={baseSalary:j.useRef(null),attendanceBonus:j.useRef(null),monthlyOffDays:j.useRef(null),insurance:j.useRef(null),bonusTiers:j.useRef(null)},re={editValue:j.useRef(null),editNote:j.useRef(null)};j.useEffect(()=>{x.role==="BOSS"&&je(z,"getUsers",{},x.token).then(me=>v(me)).catch(me=>console.error(me))},[x.role,x.token,z]);const ne=j.useCallback(async()=>{Q(!0);try{const _=await je(z,"getPayrollData",{year:g,month:y,targetUser:q},x.token);_&&!_.error?(A(_),_.config&&ce({..._.config,bonusTiers:JSON.stringify(_.config.bonusTiers||[])})):console.error(_?.error)}catch(_){console.error(_),alert(": "+_.message)}finally{Q(!1)}},[g,y,q,x.token]),f=j.useCallback(async()=>{try{const _=await je(z,"getEmployeeProfile",{targetUser:q},x.token);_&&!_.error&&(Z(_),F(_.profile))}catch(_){console.error(_)}},[q,x.token,z]),Y=async()=>{if(!w||!w.summary){alert("");return}const _=` ${q} 

: $${(w.summary.finalSalary||0).toLocaleString()}
: ${g}${y}`;if(confirm(_)){H(!0);try{await je(z,"savePayrollToExpenditure",{targetUser:q,year:g,month:y,finalSalary:w.summary.finalSalary},x.token),alert("")}catch(me){console.error("Save payroll failed:",me),alert(": "+me.message)}finally{H(!1)}}};j.useEffect(()=>{ne(),f()},[ne,f]);const ee=async()=>{if(U){H(!0);try{await je(z,"saveDailyRecord",{date:U.date,username:q,type:u,value:u==="WORK"||u==="LEAVE"||u==="SPECIAL_LEAVE"||u==="SICK_LEAVE"?1:Number(O),note:D},x.token),X(null),ne()}catch(_){alert(": "+_.message)}finally{H(!1)}}},se=async()=>{H(!0);try{await je(z,"saveEmployeeProfile",{username:q,...b},x.token),S(!1),f()}catch(_){alert(": "+_.message)}finally{H(!1)}},ve=async()=>{let _=[];try{_=JSON.parse(V.bonusTiers)}catch{alert(" (JSON Error)");return}H(!0);try{await je(z,"savePayrollSettings",{targetUser:q,baseSalary:Number(V.baseSalary),attendanceBonus:Number(V.attendanceBonus),insurance:Number(V.insurance),monthlyOffDays:Number(V.monthlyOffDays),bonusTiers:_},x.token),T(!1),ne()}catch(me){alert(": "+me.message)}finally{H(!1)}},pe=(_,me)=>{const De=["baseSalary","attendanceBonus","monthlyOffDays","insurance","bonusTiers"],Ne=De.indexOf(me);if(!(me==="bonusTiers")&&(_.key==="ArrowUp"||_.key==="ArrowDown")&&_.preventDefault(),_.key==="Enter"){if(me==="bonusTiers"&&!_.ctrlKey)return;_.preventDefault();const Re=De[Ne+1];Re&&le[Re].current&&(le[Re].current.focus(),le[Re].current.select?.());return}const We={baseSalary:{ArrowRight:"attendanceBonus",ArrowDown:"monthlyOffDays"},attendanceBonus:{ArrowLeft:"baseSalary",ArrowDown:"insurance"},monthlyOffDays:{ArrowRight:"insurance",ArrowUp:"baseSalary",ArrowDown:"bonusTiers"},insurance:{ArrowLeft:"monthlyOffDays",ArrowUp:"attendanceBonus",ArrowDown:"bonusTiers"},bonusTiers:{}}[me]?.[_.key];We&&le[We].current&&(_.preventDefault(),le[We].current.focus(),le[We].current.select?.())},te=(_,me)=>{if(_.key==="Enter"&&(_.preventDefault(),me==="editType"?u==="LOSS"?re.editValue.current?.focus():re.editNote.current?.focus():me==="editValue"?re.editNote.current?.focus():me==="editNote"&&ee()),me==="editType"&&(_.key==="ArrowLeft"||_.key==="ArrowRight")){_.preventDefault();const De=["WORK","LEAVE","SPECIAL_LEAVE","SICK_LEAVE","LOSS"];let Ne=De.indexOf(u);_.key==="ArrowLeft"&&(Ne=(Ne-1+De.length)%De.length),_.key==="ArrowRight"&&(Ne=(Ne+1)%De.length),d(De[Ne])}},ye=((_,me)=>{const De=new Date(_,me,0).getDate();return Array.from({length:De},(Ne,tt)=>{const $e=new Date(_,me-1,tt+1),We=$e.getTimezoneOffset()*6e4;return{date:new Date($e.getTime()-We).toISOString().split("T")[0],day:tt+1,weekday:["","","","","","",""][$e.getDay()]}})})(g,y),ze=w?.summary||{};let ue=0,et=0,ot=0,ke=0;ye.forEach(_=>{const me=_.date,De=w?.dailyData?.[me]||0,Ne=w?.dailyRecords?.[me]||{};De>0?ue++:Ne.isLeave?et++:Ne.isSpecialLeave?ot++:Ne.isSickLeave?ke++:et++});const Jt=_=>{if(!_)return"";try{if(_ instanceof Date)return`${_.getMonth()+1}${_.getDate()}`;const me=String(_),De=new Date(me);if(!isNaN(De.getTime()))return`${De.getMonth()+1}${De.getDate()}`;const Ne=me.match(/(\d{1,2})[/-](\d{1,2})/);return Ne?`${Ne[1]}${Ne[2]}`:me.replace(/[/.-]/g,"")+""}catch(me){return console.error("Format err",me),String(_)}};return a.jsxs("div",{className:"p-2 md:p-8 space-y-4 md:space-y-6 max-w-7xl mx-auto pb-24",children:[a.jsxs("div",{className:"md:hidden space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center px-1 mb-6",children:[a.jsxs("h1",{className:"text-xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(ut,{className:"text-[var(--accent-blue)]",size:24})," "]}),a.jsx("button",{onClick:ne,className:"btn-secondary py-1 px-3 text-xs h-7 rounded-full border-[var(--border-primary)] text-[var(--text-secondary)]",children:""})]}),a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg border border-[var(--border-primary)] shadow-sm h-10 px-1 flex items-center gap-1 w-full max-w-[340px] justify-center",children:[a.jsx("select",{value:g,onChange:_=>m(Number(_.target.value)),className:"bg-transparent text-sm font-medium text-[var(--text-primary)] h-8 pl-2 pr-1 outline-none text-center",children:[2025,2026,2027].map(_=>a.jsxs("option",{value:_,children:[_,""]},_))}),a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsx("select",{value:y,onChange:_=>$(Number(_.target.value)),className:"bg-transparent text-sm font-bold text-[var(--accent-blue)] h-8 px-1 outline-none text-center w-16",children:Array.from({length:12},(_,me)=>me+1).map(_=>a.jsxs("option",{value:_,children:[_,""]},_))}),x.role==="BOSS"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsxs("select",{value:q,onChange:_=>ae(_.target.value),className:"bg-transparent text-sm font-medium text-[var(--text-primary)] h-8 pl-1 pr-2 outline-none text-center min-w-[5rem]",children:[E.map(_=>a.jsx("option",{value:_.username,children:_.username},_.userid)),!E.some(_=>_.username===q)&&a.jsx("option",{value:q,children:q})]})]})]})}),x.role==="BOSS"&&a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg border border-[var(--border-primary)] shadow-sm h-10 px-1 flex items-center gap-1 w-full max-w-[340px] justify-center",children:[a.jsxs("button",{onClick:()=>T(!0),className:"h-8 px-2 text-xs font-medium text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] rounded-md flex items-center gap-1",children:[a.jsx(Fa,{size:14})," "]}),a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsxs("button",{onClick:()=>S(!0),className:"h-8 px-2 text-xs font-medium text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] rounded-md flex items-center gap-1",children:[a.jsx(sa,{size:14})," "]}),a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsxs("button",{onClick:Y,disabled:ie||!w,className:"h-8 px-2 text-xs font-medium text-[var(--accent-blue)] hover:bg-[var(--bg-secondary)] rounded-md flex items-center gap-1 disabled:opacity-50",children:[a.jsx(ut,{size:14})," "]})]})}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-2 px-1 text-[10px]",children:[a.jsxs("span",{className:"bg-[var(--bg-secondary)] text-[var(--accent-blue)] px-2 py-0.5 rounded border border-[var(--border-primary)]",children:[": ",K.profile.joinedDate||"-"]}),a.jsxs("span",{className:"bg-[var(--bg-secondary)] text-indigo-500 px-2 py-0.5 rounded border border-[var(--border-primary)]",children:[": ",K.seniorityText]}),a.jsxs("span",{className:"bg-[var(--bg-secondary)] text-emerald-500 px-2 py-0.5 rounded border border-[var(--border-primary)]",children:[": ",K.estimatedLeaveDays-(w?.totalSpecialLeaveUsed||0),""]})]})]}),a.jsxs("div",{className:"hidden md:flex glass-panel p-6 flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[var(--accent-blue)] to-indigo-500 flex items-center gap-3",children:[a.jsx(ut,{})," "]}),a.jsx("p",{className:"text-[var(--text-tertiary)] text-sm mt-1",children:""})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("select",{value:g,onChange:_=>m(Number(_.target.value)),className:"input-field w-24",children:[2025,2026,2027].map(_=>a.jsxs("option",{value:_,children:[_,""]},_))}),a.jsx("select",{value:y,onChange:_=>$(Number(_.target.value)),className:"input-field w-20",children:Array.from({length:12},(_,me)=>me+1).map(_=>a.jsxs("option",{value:_,children:[_,""]},_))}),x.role==="BOSS"&&a.jsxs("select",{value:q,onChange:_=>ae(_.target.value),className:"input-field w-32",children:[E.map(_=>a.jsx("option",{value:_.username,children:_.username},_.userid)),!E.some(_=>_.username===q)&&a.jsx("option",{value:q,children:q})]}),x.role==="BOSS"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>T(!0),className:"btn-secondary flex items-center gap-2",children:[a.jsx(Fa,{size:16})," "]}),a.jsxs("button",{onClick:()=>S(!0),className:"btn-secondary flex items-center gap-2 border-[var(--border-primary)] text-emerald-500 hover:bg-[var(--bg-secondary)]",children:[a.jsx(sa,{size:16})," "]}),a.jsxs("button",{onClick:Y,disabled:ie||!w,className:"btn-secondary flex items-center gap-2 border-[var(--border-primary)] text-blue-700 hover:bg-[var(--bg-secondary)] disabled:opacity-50",children:[a.jsx(ut,{size:16})," ",ie?"...":""]})]}),a.jsx("button",{onClick:ne,className:"btn-primary",children:""})]})]}),a.jsxs("div",{className:"hidden md:flex flex-wrap gap-4 px-2",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-[var(--bg-secondary)] text-[var(--accent-blue)] px-3 py-1.5 rounded-full text-sm font-medium border border-[var(--border-primary)]",children:[a.jsx(sa,{size:14})," : ",K.profile.joinedDate||""]}),a.jsxs("div",{className:"flex items-center gap-2 bg-[var(--bg-secondary)] text-indigo-500 px-3 py-1.5 rounded-full text-sm font-medium border border-[var(--border-primary)]",children:[a.jsx(Fa,{size:14})," : ",K.seniorityText]}),a.jsxs("div",{className:"flex items-center gap-2 bg-[var(--bg-secondary)] text-emerald-500 px-3 py-1.5 rounded-full text-sm font-medium border border-[var(--border-primary)]",children:[a.jsx(eo,{size:14})," :  ",K.estimatedLeaveDays,"  /  ",w?.totalSpecialLeaveUsed||0,"  /  ",K.estimatedLeaveDays-(w?.totalSpecialLeaveUsed||0)," "]})]}),x.role==="BOSS"&&w?.isBirthdayMonth&&a.jsx("div",{className:"px-1 md:px-2",children:a.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-rose-50 border border-pink-100 rounded-xl p-3 md:p-4 flex items-center gap-3 md:gap-4 animate-bounce-subtle",children:[a.jsx("div",{className:"bg-[var(--bg-primary)] p-1.5 md:p-2 rounded-full shadow-sm text-lg md:text-2xl",children:""}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-rose-700 font-bold text-sm md:text-base",children:[" ",K.profile.birthday?`(${Jt(K.profile.birthday)})`:"",""]}),a.jsx("p",{className:"text-rose-600/80 text-xs md:text-sm",children:""})]})]})}),a.jsxs("div",{className:"grid grid-cols-4 gap-2 px-1 md:hidden",children:[a.jsx(jt,{title:"",amount:w?.config?.baseSalary,color:"text-[var(--text-primary)]",isMobile:!0}),a.jsx(jt,{title:"",amount:0,color:"text-indigo-600",isMobile:!0}),a.jsx(jt,{title:"",amount:ze.insurance,isDeduction:!0,color:"text-red-600",isMobile:!0,hoverContent:a.jsx("div",{className:"flex flex-col items-end",children:a.jsxs("p",{className:"text-xs font-bold text-emerald-500 font-mono",children:["$",(ze.bonus||0).toLocaleString()]})})}),a.jsx(jt,{title:"",amount:ze.finalSalary,color:"text-[var(--accent-blue)]",isMobile:!0,className:"bg-[var(--bg-secondary)]/50 border-blue-100"})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-2 px-1 mt-2 md:hidden",children:[a.jsx(jt,{title:"",amount:ze.attendanceBonus,color:"text-yellow-600",isMobile:!0,hoverContent:a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] leading-none mb-0.5",children:""}),a.jsxs("p",{className:"text-xs font-bold text-emerald-500",children:[ue," "]})]})}),a.jsx(jt,{title:"",amount:et,isCurrency:!1,suffix:"",color:"text-[var(--text-secondary)]",isMobile:!0,hoverContent:a.jsxs("div",{className:"flex flex-col items-end gap-1",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] leading-none",children:""}),a.jsxs("p",{className:`text-xs font-bold ${(ze.leaveCompensation||0)>=0?"text-[var(--accent-blue)]":"text-red-600"}`,children:["$",(ze.leaveCompensation||0).toLocaleString()]})]})}),a.jsx(jt,{title:"",amount:ot,isCurrency:!1,suffix:"",color:"text-emerald-500",isMobile:!0}),a.jsx(jt,{title:"",amount:ke,isCurrency:!1,suffix:"",color:"text-amber-500",isMobile:!0,hoverContent:a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] leading-none",children:""}),a.jsxs("p",{className:"text-xs font-bold text-red-600",children:["-$",(ke*500).toLocaleString()]})]})})]}),a.jsxs("div",{className:"hidden md:grid grid-cols-2 lg:grid-cols-4 gap-4 px-2",children:[a.jsx(jt,{title:"",amount:w?.config?.baseSalary,color:"text-[var(--text-primary)]"}),a.jsx(jt,{title:"",amount:0,subtext:`: $${(ze.sales||0).toLocaleString()}`,color:"text-indigo-600"}),a.jsx(jt,{title:" ()",amount:ze.insurance,isDeduction:!0,color:"text-red-600",hoverContent:a.jsx("div",{className:"flex flex-col items-end",children:a.jsxs("p",{className:"text-sm font-bold text-emerald-500 font-mono",children:["$",(ze.bonus||0).toLocaleString()]})})}),a.jsx(jt,{title:"",amount:ze.finalSalary,color:"text-[var(--accent-blue)]",subtext:"/"})]}),a.jsxs("div",{className:"hidden md:grid grid-cols-2 lg:grid-cols-4 gap-4 mt-4 px-2",children:[a.jsx(jt,{title:"",amount:ze.attendanceBonus,color:"text-yellow-600",hoverContent:a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-medium leading-none mb-1",children:""}),a.jsxs("p",{className:"text-sm font-bold text-emerald-500 font-mono",children:[ue," "]})]})}),a.jsx(jt,{title:"",amount:et,isCurrency:!1,suffix:" ",color:"text-[var(--text-secondary)]",hoverContent:a.jsxs("div",{className:"flex flex-col items-end gap-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-medium leading-none mb-1",children:""}),a.jsxs("p",{className:"text-sm font-bold text-emerald-500 font-mono",children:[w?.config?.monthlyOffDays||0," "]})]}),a.jsxs("div",{className:"w-full border-t border-emerald-100 pt-1 mt-0.5",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-medium leading-none mb-1",children:""}),a.jsxs("p",{className:`text-sm font-bold font-mono ${(ze.leaveCompensation||0)>=0?"text-[var(--accent-blue)]":"text-red-600"}`,children:[(ze.leaveCompensation||0)>=0?"+":"-","$",Math.abs(ze.leaveCompensation||0).toLocaleString()]})]})]})}),a.jsx(jt,{title:"",amount:ot,isCurrency:!1,suffix:" ",color:"text-emerald-500"}),a.jsx(jt,{title:"",amount:ke,isCurrency:!1,suffix:" ",color:"text-amber-500",hoverContent:a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("p",{className:"text-[10px] text-[var(--text-tertiary)] font-medium leading-none mb-1",children:""}),a.jsxs("p",{className:"text-sm font-bold text-red-600 font-mono",children:["-$",(ke*500).toLocaleString()]})]})})]}),a.jsx("div",{className:"px-1 md:px-2 mt-2 md:mt-4",children:a.jsxs("div",{className:"bg-[var(--bg-primary)] p-3 rounded-lg border border-red-100 flex justify-between items-center shadow-sm",children:[a.jsx("span",{className:"text-sm text-red-600 font-bold",children:"/"}),a.jsxs("span",{className:"text-lg font-bold text-red-600",children:["-$",(ze.loss||0).toLocaleString()]})]})}),a.jsx("div",{className:"hidden md:block glass-panel overflow-hidden",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{className:"bg-[var(--bg-secondary)] text-[var(--text-secondary)] text-sm",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 w-32",children:""}),a.jsx("th",{className:"p-4 w-24 text-center",children:""}),a.jsx("th",{className:"p-4 text-right",children:""}),a.jsx("th",{className:"p-4 text-center",children:""}),a.jsx("th",{className:"p-4 text-right",children:"/"}),a.jsx("th",{className:"p-4 text-center",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-primary)]",children:ye.map(_=>{const me=_.date,De=w?.dailyData?.[me]||0,Ne=w?.dailyRecords?.[me]||{},tt=De>0;let $e="",We="text-yellow-500 bg-yellow-500/10 px-2 rounded font-medium";tt?($e=" ()",We="text-green-400 font-bold"):Ne.isLeave?($e="",We="text-yellow-500 bg-yellow-500/10 px-2 rounded font-medium"):Ne.isSpecialLeave?($e="",We="text-emerald-500 bg-emerald-500/10 px-2 rounded font-medium"):Ne.isSickLeave&&($e="",We="text-amber-500 bg-amber-500/10 px-2 rounded font-medium");const Re=_.weekday===""||_.weekday==="";return a.jsxs("tr",{className:`hover:bg-[var(--bg-secondary)] transition-colors ${Re?"bg-[var(--bg-secondary)]/50":""}`,children:[a.jsx("td",{className:"p-4 font-mono text-[var(--text-secondary)]",children:me}),a.jsx("td",{className:`p-4 text-center ${_.weekday===""?"text-red-600":"text-[var(--text-secondary)]"}`,children:_.weekday}),a.jsx("td",{className:"p-4 text-right font-mono text-emerald-500",children:Math.abs(De)>.01?`$${De.toLocaleString()}`:"-"}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("span",{className:`text-sm ${We}`,children:$e})}),a.jsxs("td",{className:"p-4 text-right font-mono text-red-600",children:[Math.abs(Ne.loss||0)>.01?`-$${Math.abs(Ne.loss).toLocaleString()}`:"",Ne.note&&a.jsx("span",{className:"block text-xs text-[var(--text-secondary)]",children:Ne.note})]}),a.jsx("td",{className:"p-4 text-center",children:x.role==="BOSS"&&a.jsx("button",{onClick:()=>{X(_),d("LEAVE")},className:"text-xs btn-ghost text-blue-400 hover:text-blue-300",children:""})})]},me)})})]})}),a.jsx("div",{className:"md:hidden space-y-2",children:ye.map(_=>{const me=_.date,De=me.split("-"),Ne=`${De[1]}/${De[2]}`,tt=w?.dailyData?.[me]||0,$e=w?.dailyRecords?.[me]||{},We=tt>0;let Re="",st="bg-yellow-100 text-yellow-700";We?(Re="",st="bg-green-100 text-green-700"):$e.isLeave?(Re="",st="bg-yellow-100 text-yellow-700"):$e.isSpecialLeave?(Re="",st="bg-emerald-100 text-emerald-500"):$e.isSickLeave&&(Re="",st="bg-amber-100 text-amber-700");const Mr=_.weekday===""||_.weekday==="";return a.jsxs("div",{className:`bg-[var(--bg-primary)] rounded-lg border border-[var(--border-primary)] p-2 flex items-center shadow-sm text-xs ${Mr?"bg-[var(--bg-secondary)]/50":""}`,children:[a.jsxs("div",{className:"w-14 items-center flex flex-col justify-center border-r border-[var(--border-primary)] pr-2 mr-2",children:[a.jsx("span",{className:`font-bold text-sm ${_.weekday===""?"text-rose-500":"text-[var(--text-primary)]"}`,children:Ne}),a.jsxs("span",{className:`text-[10px] ${_.weekday===""?"text-rose-400":"text-[var(--text-tertiary)]"}`,children:["",_.weekday]})]}),a.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-1 items-center",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-[9px] text-[var(--text-tertiary)] mb-0.5",children:""}),a.jsx("p",{className:`font-bold ${tt>0?"text-emerald-500":"text-slate-300"}`,children:tt>0?`$${tt.toLocaleString()}`:"-"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-[9px] text-[var(--text-tertiary)] mb-0.5",children:""}),a.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold ${st}`,children:Re})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-[9px] text-[var(--text-tertiary)] mb-0.5",children:""}),a.jsx("p",{className:`font-bold ${$e.loss?"text-red-500":"text-slate-300"}`,children:$e.loss?`-$${Number($e.loss).toLocaleString()}`:"-"})]})]}),a.jsx("div",{className:"pl-2 ml-1 border-l border-[var(--border-primary)]",children:x.role==="BOSS"&&a.jsx("button",{onClick:()=>{X(_),d("LEAVE")},className:"w-8 h-8 flex items-center justify-center rounded-full bg-[var(--bg-secondary)] text-[var(--text-tertiary)] hover:bg-[var(--bg-secondary)] hover:text-blue-500",children:a.jsx("span",{className:"text-[10px]",children:""})})})]},me)})}),U&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"glass-panel w-full max-w-md p-6 animate-fadeIn",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4",children:[U.date," (",U.weekday,") "]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[var(--text-tertiary)] mb-2",children:" ()"}),a.jsx("div",{className:"flex bg-[var(--bg-secondary)] rounded p-1 border border-[var(--border-primary)] outline-none focus-within:ring-2 focus-within:ring-blue-500/20",tabIndex:"0",onKeyDown:_=>te(_,"editType"),children:[{id:"WORK",label:"",color:"bg-blue-600"},{id:"LEAVE",label:"",color:"bg-yellow-600"},{id:"SPECIAL_LEAVE",label:"",color:"bg-emerald-600"},{id:"SICK_LEAVE",label:"",color:"bg-amber-600"},{id:"LOSS",label:"/",color:"bg-red-600"}].map(_=>a.jsx("button",{className:`flex-1 py-2 rounded text-xs transition-all ${u===_.id?`${_.color} text-white shadow-sm`:"text-[var(--text-secondary)] hover:bg-slate-100"}`,onClick:()=>d(_.id),children:_.label},_.id))})]}),u==="LOSS"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[var(--text-tertiary)] mb-1",children:" ()"}),a.jsx("input",{type:"number",className:"input-field w-full",placeholder:"-100",ref:re.editValue,value:O,onChange:_=>p(_.target.value),onKeyDown:_=>te(_,"editValue")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[var(--text-tertiary)] mb-1",children:""}),a.jsx("input",{type:"text",className:"input-field w-full",placeholder:"...",ref:re.editNote,value:D,onChange:_=>k(_.target.value),onKeyDown:_=>te(_,"editNote")})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:()=>X(null),className:"btn-secondary flex-1",disabled:ie,children:""}),a.jsx("button",{onClick:ee,className:"btn-primary flex-1",disabled:ie,children:ie?"...":""})]}),ie&&a.jsx("div",{className:"absolute inset-0 bg-[var(--bg-primary)]/60 backdrop-blur-[2px] z-10 flex items-center justify-center rounded-lg",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-sm font-medium text-[var(--accent-blue)]",children:"..."})]})})]})}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"glass-panel w-full max-w-lg p-6 animate-fadeIn max-h-[90vh] overflow-y-auto",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4",children:[" - ",q]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("input",{type:"number",className:"input-field w-full",ref:le.baseSalary,value:V.baseSalary,onChange:_=>ce({...V,baseSalary:_.target.value}),onKeyDown:_=>pe(_,"baseSalary")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("input",{type:"number",className:"input-field w-full",ref:le.attendanceBonus,value:V.attendanceBonus,onChange:_=>ce({...V,attendanceBonus:_.target.value}),onKeyDown:_=>pe(_,"attendanceBonus")})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("input",{type:"number",className:"input-field w-full",ref:le.monthlyOffDays,value:V.monthlyOffDays,onChange:_=>ce({...V,monthlyOffDays:_.target.value}),onKeyDown:_=>pe(_,"monthlyOffDays")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:" ()"}),a.jsx("input",{type:"number",className:"input-field w-full",ref:le.insurance,value:V.insurance,onChange:_=>ce({...V,insurance:_.target.value}),onKeyDown:_=>pe(_,"insurance")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:" (JSON)"}),a.jsx("textarea",{className:"input-field w-full font-mono text-xs h-32",ref:le.bonusTiers,value:V.bonusTiers,onChange:_=>ce({...V,bonusTiers:_.target.value}),onKeyDown:_=>pe(_,"bonusTiers"),placeholder:'[{"threshold": 50000, "bonus": 1000}]'}),a.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:': `[{"threshold": , "bonus":  }]` ( Enter )'})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:()=>T(!1),className:"btn-secondary flex-1",disabled:ie,children:""}),a.jsx("button",{onClick:ve,className:"btn-primary flex-1",disabled:ie,children:ie?"...":""})]}),ie&&a.jsx("div",{className:"absolute inset-0 bg-[var(--bg-primary)]/60 backdrop-blur-[2px] z-10 flex items-center justify-center rounded-lg text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),a.jsxs("span",{className:"text-sm font-medium text-[var(--accent-blue)] font-bold",children:["",a.jsx("br",{}),a.jsx("span",{className:"text-[10px] opacity-70",children:""})]})]})})]})}),J&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"glass-panel w-full max-w-lg p-6 animate-fadeIn",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold",children:[" - ",q]}),a.jsx("p",{className:"text-sm text-[var(--text-tertiary)] mt-1",children:""})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"block text-xs text-[var(--text-tertiary)] uppercase font-bold tracking-wider",children:""}),a.jsx("span",{className:"text-lg font-bold text-[var(--accent-blue)]",children:K.seniorityText})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("input",{type:"date",className:"input-field w-full",value:b.joinedDate,onChange:_=>F({...b,joinedDate:_.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:" (/)"}),a.jsx("input",{type:"text",placeholder:"05/20",className:"input-field w-full",value:b.birthday,onChange:_=>F({...b,birthday:_.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"/"}),a.jsx("input",{type:"text",className:"input-field w-full",placeholder:"A123456789",value:b.identityId,onChange:_=>F({...b,identityId:_.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("input",{type:"text",className:"input-field w-full",placeholder:"0912-345-678",value:b.contact,onChange:_=>F({...b,contact:_.target.value})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:""}),a.jsx("textarea",{className:"input-field w-full h-24",placeholder:"...",value:b.note,onChange:_=>F({...b,note:_.target.value})})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)] border border-emerald-100 rounded-lg p-3 flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-emerald-800 font-medium",children:""}),a.jsxs("span",{className:"text-xl font-bold text-emerald-500 font-mono",children:[K.estimatedLeaveDays," "]})]})]}),a.jsxs("div",{className:"flex gap-3 mt-8",children:[a.jsx("button",{onClick:()=>S(!1),className:"btn-secondary flex-1",disabled:ie,children:""}),a.jsx("button",{onClick:se,className:"btn-primary flex-1",disabled:ie,children:ie?"...":""})]})]})})]})}function jt({title:x,amount:z,subtext:g,color:m,isDeduction:y,isCurrency:$=!0,suffix:q="",hiddenAmount:ae,hiddenTitle:E="",hoverContent:v,isMobile:M,className:Q=""}){const[w,A]=j.useState(!1),U=()=>{(M||"ontouchstart"in window)&&A(!w)};return a.jsxs("div",{onClick:U,className:`
                relative overflow-hidden transition-all cursor-default border border-[var(--border-primary)] bg-[var(--bg-primary)]
                ${M?"h-16 p-2 rounded-lg flex flex-col justify-center items-center text-center shadow-sm":"h-28 p-4 rounded-xl flex flex-col justify-between glass-panel hover:border-blue-500"}
                ${Q}
            `,onMouseEnter:()=>!M&&A(!0),onMouseLeave:()=>!M&&A(!1),children:[a.jsx("div",{className:`flex justify-between items-start z-10 w-full ${M?"justify-center":""}`,children:a.jsx("span",{className:`${M?"text-[10px]":"text-sm"} text-[var(--text-secondary)] font-bold`,children:x})}),a.jsxs("div",{className:`z-10 w-full ${M?"mt-1":""}`,children:[a.jsxs("span",{className:`${M?"text-xs":"text-2xl"} font-bold tracking-tight ${m}`,children:[y&&"-",$&&"$",(z||0).toLocaleString(),q]}),!M&&g&&a.jsx("p",{className:"text-xs text-[var(--text-secondary)] mt-1",children:g})]}),(ae!==void 0||v)&&a.jsx("div",{className:`absolute top-0 right-0 p-1 md:p-2 transition-all duration-300 ${w?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,children:a.jsx("div",{className:"bg-[var(--bg-primary)]/95 backdrop-blur shadow-sm border border-emerald-100 rounded px-1.5 py-0.5 text-right",children:v||a.jsxs(a.Fragment,{children:[E&&a.jsx("p",{className:"text-[8px] md:text-xs text-[var(--text-tertiary)] font-medium",children:E}),a.jsxs("p",{className:"text-xs md:text-sm font-bold text-emerald-500 font-mono",children:[$&&"$",(ae||0).toLocaleString()]})]})})}),!M&&a.jsx("div",{className:`absolute -right-2 -bottom-2 w-16 h-16 rounded-full opacity-5 ${m?.replace("text-","bg-")||"bg-slate-400"}`})]})}function zy({user:x,apiUrl:z}){const[g,m]=j.useState([]),[y,$]=j.useState(!1),[q,ae]=j.useState({startDate:Ge(new Date(Date.now()-10080*60*1e3)),endDate:Ge(new Date),username:"",actionType:""}),[E,v]=j.useState(null),M=[{value:"",label:""},{value:"LOGIN",label:""},{value:"LOGOUT",label:""},{value:"PAGE_VIEW",label:""},{value:"DATA_EDIT",label:""},{value:"ERROR",label:""}],Q=async()=>{$(!0);try{const O=await je(z,"getActivityLogs",q,x.token);m(Array.isArray(O)?O:[])}catch(O){console.error("Failed to fetch activity logs:",O),alert("")}finally{$(!1)}};j.useEffect(()=>{Q()},[]);const w=O=>new Date(O).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),A={sales:"",inventory:"",purchase:"",report:"",purchaseHistory:"",adjustHistory:"",valuation:"",stocktake:"",stocktakeHistory:"",receivable:"",payable:"",salesRanking:"",customerRanking:"",profitAnalysis:"",turnoverRate:"",costCalculation:"",expenditureManagement:"",incomeStatement:"",permissionControl:"",payroll:"",activityLog:""},U=O=>A[O]||O||"-",X=O=>{if(!O)return"-";try{const p=JSON.parse(O),D={action:"",page:"",customer:"",totalAmount:"",paymentMethod:"",productCount:"",type:"",product:"",quantity:"",adjustType:"",vendorCount:"",totalPrice:"",itemCount:"",hasDifferences:"",totalDiff:"",note:"",recordId:"ID",vendor:"",targetUser:"",role:"",period:"",date:"",value:""};return Object.entries(p).map(([k,o])=>{const T=D[k]||k,V=typeof o=="object"?JSON.stringify(o):String(o);return`${T}: ${V}`}).join(`
`)}catch{return O}},u=O=>{const p=M.find(D=>D.value===O);return p?p.label:O},d=O=>{switch(O){case"LOGIN":return"bg-emerald-50 text-emerald-600 border-emerald-200";case"LOGOUT":return"bg-rose-50 text-rose-600 border-rose-200";case"PAGE_VIEW":return"bg-blue-50 text-blue-600 border-blue-200";case"DATA_EDIT":return"bg-amber-50 text-amber-600 border-amber-200";case"ERROR":return"bg-rose-100 text-rose-700 border-rose-300";default:return"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] border-[var(--border-primary)]"}};return a.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 h-[calc(100vh-6rem)] flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-lg md:text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2",children:[a.jsx(vl,{className:"text-[var(--accent-blue)]",size:24}),""]}),a.jsx("p",{className:"text-xs md:text-sm text-[var(--text-secondary)] mt-1",children:""})]}),a.jsx("button",{onClick:Q,className:"btn-secondary p-2 rounded-xl",disabled:y,children:a.jsx(Fe,{size:18,className:y?"animate-spin":""})})]}),a.jsx("div",{className:"glass-panel p-4 shrink-0",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] font-bold block mb-1",children:""}),a.jsx("input",{type:"date",value:q.startDate,onChange:O=>ae({...q,startDate:O.target.value}),className:"input-field w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] font-bold block mb-1",children:""}),a.jsx("input",{type:"date",value:q.endDate,onChange:O=>ae({...q,endDate:O.target.value}),className:"input-field w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] font-bold block mb-1",children:""}),a.jsx("select",{value:q.actionType,onChange:O=>ae({...q,actionType:O.target.value}),className:"input-field w-full",children:M.map(O=>a.jsx("option",{value:O.value,children:O.label},O.value))})]}),(x.role==="BOSS"||x.role==="ADMIN")&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[var(--text-secondary)] font-bold block mb-1",children:""}),a.jsx("input",{type:"text",value:q.username,onChange:O=>ae({...q,username:O.target.value}),placeholder:"",className:"input-field w-full"})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("button",{onClick:Q,className:"btn-primary w-full flex items-center justify-center gap-2",disabled:y,children:[a.jsx(mt,{size:16}),""]})})]})}),a.jsxs("div",{className:"glass-panel flex-1 overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-[var(--border-primary)]",children:a.jsxs("div",{className:"text-sm text-[var(--text-secondary)]",children:[" ",a.jsx("span",{className:"font-bold text-[var(--accent-blue)]",children:g.length})," "]})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:y?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx(Fe,{className:"animate-spin text-[var(--accent-blue)]",size:32})}):g.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[var(--text-tertiary)]",children:[a.jsx(vl,{size:48,className:"mb-2"}),a.jsx("p",{children:""})]}):a.jsx("div",{className:"divide-y divide-[var(--border-primary)]",children:g.map((O,p)=>a.jsxs("div",{className:"p-4 hover:bg-[var(--bg-secondary)] transition-colors cursor-pointer",onClick:()=>v(E===p?null:p),children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold border ${d(O.actionType)}`,children:u(O.actionType)}),a.jsx("span",{className:"text-sm font-bold text-[var(--text-primary)]",children:O.username}),a.jsx("span",{className:"text-xs text-[var(--text-secondary)]",children:w(O.timestamp)})]}),a.jsxs("div",{className:"text-sm text-[var(--text-secondary)]",children:[": ",a.jsx("span",{className:"font-medium text-[var(--text-primary)]",children:U(O.page)})]})]}),a.jsx("button",{className:"text-[var(--text-tertiary)] hover:text-[var(--text-secondary)]",children:a.jsx(Ch,{size:16})})]}),E===p&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-[var(--border-primary)] space-y-2 text-xs",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)]",children:":"}),a.jsx("span",{className:"ml-2 font-medium text-[var(--text-secondary)]",children:O.screenResolution||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)]",children:"IP :"}),a.jsx("span",{className:"ml-2 font-medium text-[var(--text-secondary)]",children:O.ipAddress||"-"})]})]}),O.details&&a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)]",children:":"}),a.jsx("pre",{className:"mt-1 p-2 bg-[var(--bg-tertiary)] text-[var(--text-secondary)] rounded text-xs overflow-x-auto whitespace-pre-wrap border border-[var(--border-primary)]",children:X(O.details)})]}),O.userAgent&&a.jsxs("div",{children:[a.jsx("span",{className:"text-[var(--text-tertiary)]",children:"User Agent:"}),a.jsx("div",{className:"mt-1 p-2 bg-[var(--bg-tertiary)] text-[var(--text-secondary)] rounded text-xs break-all border border-[var(--border-primary)]",children:O.userAgent})]})]})]},p))})})]})]})}const Sf=j.createContext({theme:"light",actualTheme:"light",setTheme:()=>{},autoSchedule:{lightStart:"06:00",darkStart:"18:00",enabled:!1},setAutoSchedule:()=>{}}),Ty=()=>j.useContext(Sf),_y=({children:x})=>{const[z,g]=j.useState(()=>localStorage.getItem("theme")||"light"),[m,y]=j.useState(()=>{const M=localStorage.getItem("themeSchedule");return M?JSON.parse(M):{lightStart:"06:00",darkStart:"18:00",enabled:!1}}),[$,q]=j.useState("light"),ae=()=>{if(z==="auto"&&m.enabled){const M=new Date,Q=`${String(M.getHours()).padStart(2,"0")}:${String(M.getMinutes()).padStart(2,"0")}`,w=m.lightStart,A=m.darkStart;return Q>=w&&Q<A?"light":"dark"}return z==="auto"?"light":z},E=M=>{g(M),localStorage.setItem("theme",M)},v=M=>{y(M),localStorage.setItem("themeSchedule",JSON.stringify(M))};return j.useEffect(()=>{const M=ae();q(M),document.documentElement.setAttribute("data-theme",M)},[z,m]),j.useEffect(()=>{if(z!=="auto"||!m.enabled)return;const M=setInterval(()=>{const Q=ae();Q!==$&&(q(Q),document.documentElement.setAttribute("data-theme",Q))},6e4);return()=>clearInterval(M)},[z,m,$]),a.jsx(Sf.Provider,{value:{theme:z,actualTheme:$,setTheme:E,autoSchedule:m,setAutoSchedule:v},children:x})};function My(){const{theme:x,actualTheme:z,setTheme:g,autoSchedule:m,setAutoSchedule:y}=Ty(),[$,q]=j.useState(!1),ae=[{value:"light",label:"",icon:bf},{value:"dark",label:"",icon:yf},{value:"auto",label:"",icon:cs}],E=(v,M)=>{y({...m,[v]:M})};return a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 rounded-lg p-1",children:[ae.map(({value:v,label:M,icon:Q})=>a.jsxs("button",{onClick:()=>g(v),className:`px-3 py-1.5 rounded-md text-xs font-medium transition-all flex items-center gap-1.5 ${x===v?"bg-white dark:bg-slate-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,title:M,children:[a.jsx(Q,{size:14}),a.jsx("span",{className:"hidden md:inline",children:M})]},v)),x==="auto"&&a.jsx("button",{onClick:()=>q(!$),className:"p-1.5 rounded-md text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-700 transition-all",title:"",children:a.jsx(Nf,{size:14})})]}),$&&x==="auto"&&a.jsxs("div",{className:"absolute top-full right-0 mt-2 w-72 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-xl p-4 z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[a.jsx(cs,{size:16}),""]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:""}),a.jsx("input",{type:"checkbox",checked:m.enabled,onChange:v=>E("enabled",v.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 block mb-1",children:[a.jsx(bf,{size:12,className:"inline mr-1"}),""]}),a.jsx("input",{type:"time",value:m.lightStart,onChange:v=>E("lightStart",v.target.value),disabled:!m.enabled,className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 disabled:opacity-50 disabled:cursor-not-allowed"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 block mb-1",children:[a.jsx(yf,{size:12,className:"inline mr-1"}),""]}),a.jsx("input",{type:"time",value:m.darkStart,onChange:v=>E("darkStart",v.target.value),disabled:!m.enabled,className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 disabled:opacity-50 disabled:cursor-not-allowed"})]}),a.jsx("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-700",children:a.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[": ",a.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:z==="light"?"":""})]})})]}),a.jsx("button",{onClick:()=>q(!1),className:"mt-3 w-full px-3 py-2 text-xs font-medium text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-all",children:""})]})]})}class Oy{constructor(z={}){this.idleTimeout=z.idleTimeout||1800*1e3,this.onLogout=z.onLogout||(()=>{}),this.onIdle=z.onIdle||(()=>{}),this.onOnline=z.onOnline||(()=>{}),this.onOffline=z.onOffline||(()=>{}),this.idleTimer=null,this.lastActivity=Date.now(),this.isOnline=navigator.onLine,this.init()}init(){this.setupActivityListeners(),this.setupNetworkListeners(),this.resetIdleTimer()}setupActivityListeners(){["mousedown","mousemove","keypress","scroll","touchstart","click"].forEach(g=>{document.addEventListener(g,()=>this.handleActivity(),!0)})}handleActivity(){this.lastActivity=Date.now(),this.resetIdleTimer()}resetIdleTimer(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=setTimeout(()=>{this.handleIdle()},this.idleTimeout)}handleIdle(){console.log("",this.idleTimeout/1e3/60,""),this.onIdle(),this.logout("IDLE_TIMEOUT")}setupNetworkListeners(){window.addEventListener("online",()=>{console.log(""),this.isOnline=!0,this.onOnline()}),window.addEventListener("offline",()=>{console.log(""),this.isOnline=!1,this.onOffline()})}setupBeforeUnloadListener(){window.addEventListener("beforeunload",z=>{})}logout(z="MANUAL"){console.log(":",z),this.cleanup(),this.onLogout(z)}cleanup(){this.idleTimer&&clearTimeout(this.idleTimer)}destroy(){this.cleanup()}checkOnlineStatus(){return this.isOnline}getIdleTime(){return Date.now()-this.lastActivity}keepAlive(){this.handleActivity()}}const Ly=({user:x,apiUrl:z,enabled:g=!0})=>{const m=j.useRef([]),y=j.useRef(null),$=async(E,v={})=>{if(!g||!x?.token)return;let M=E,Q=v;if(typeof E=="object"&&E!==null&&(M=E.actionType,Q={...E},typeof Q.details=="string"))try{const A=JSON.parse(Q.details);Object.assign(Q,A),delete Q.details}catch{}const w={username:x.username,actionType:M||"UNKNOWN",page:Q.page||window.location.pathname,details:JSON.stringify(Q),timestamp:new Date().toISOString(),userAgent:navigator.userAgent,screenResolution:`${window.screen.width}x${window.screen.height}`};m.current.push(w),m.current.length>=10?ae():q()},q=()=>{y.current||(y.current=setTimeout(()=>{ae()},5e3))},ae=async()=>{if(m.current.length===0)return;const E=[...m.current];m.current=[],y.current&&(clearTimeout(y.current),y.current=null);try{await je(z,"logActivity",{logs:E},x.token)}catch(v){console.error("Failed to log activity:",v),m.current=[...E,...m.current]}};return j.useEffect(()=>{const E=()=>{if(m.current.length>0){const v=JSON.stringify({action:"logActivity",payload:{logs:m.current},token:x?.token});navigator.sendBeacon(z,v)}};return window.addEventListener("beforeunload",E),()=>{window.removeEventListener("beforeunload",E),ae()}},[x?.token,z]),{logActivity:$,flushLogs:ae,logLogin:()=>$("LOGIN",{timestamp:new Date().toISOString()}),logLogout:E=>$("LOGOUT",{reason:E}),logPageView:E=>$("PAGE_VIEW",{page:E}),logDataEdit:(E,v)=>$("DATA_EDIT",{action:E,data:v}),logError:E=>$("ERROR",{error:E.message,stack:E.stack})}},Ve="https://script.google.com/macros/s/AKfycbzIoBBRytN2Qja-AUSILlXwdAnbwnU6nfil9403HYHXJH_KrvDy3lC9rQ_U8dlP9AIt/exec";console.log("---  ---");console.log("Base URL:","/inventory-system/");Ve.includes("YOUR_SCRIPT_ID")?(console.error("  VITE_GAS_API_URL "),console.log(" GitHub Settings -> Secrets ")):console.log(" API URL :",Ve);console.log("------------------");const hl=({label:x,icon:z,active:g,children:m,id:y,openDropdown:$,setOpenDropdown:q})=>{const ae=$===y;return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:E=>{E.stopPropagation(),q(ae?null:y)},className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-all duration-200 ${g?"bg-blue-50 text-blue-600 border border-blue-200 shadow-sm":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)] hover:text-[var(--text-primary)]"}`,children:[a.jsx(z,{size:18}),a.jsx("span",{className:"font-medium",children:x}),a.jsx(gl,{size:14,className:`transition-transform duration-300 ${ae?"rotate-180":""}`})]}),ae&&a.jsx("div",{className:"absolute top-full left-0 mt-2 w-48 bg-[var(--bg-secondary)] backdrop-blur-xl border border-[var(--border-primary)] rounded-xl shadow-2xl py-2 z-[100] animate-in fade-in slide-in-from-top-2 duration-200",onClick:E=>E.stopPropagation(),children:a.jsx("div",{className:"flex flex-col gap-1 px-1",children:m})})]})},we=({label:x,onClick:z,active:g,icon:m})=>a.jsxs("button",{onClick:z,className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-all flex items-center gap-2 ${g?"text-blue-600 bg-blue-50 font-bold":"text-slate-500 hover:text-slate-900 hover:bg-slate-100"}`,children:[m&&a.jsx(m,{size:14}),x]}),yl=({label:x,icon:z,children:g})=>{const[m,y]=j.useState(!1);return a.jsxs("div",{className:"border-b border-slate-100 last:border-0 border-l-4 border-l-transparent hover:border-l-blue-200 transition-all",children:[a.jsxs("button",{onClick:$=>{$.stopPropagation(),y(!m)},className:"w-full flex items-center justify-between p-3 text-slate-700 font-medium active:bg-slate-50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[z&&a.jsx(z,{size:18,className:"text-slate-400"}),a.jsx("span",{children:x})]}),a.jsx(gl,{size:16,className:`text-slate-400 transition-transform duration-300 ${m?"rotate-180":""}`})]}),a.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${m?"grid-rows-[1fr] opacity-100 pb-2":"grid-rows-[0fr] opacity-0"}`,children:a.jsx("div",{className:"overflow-hidden bg-slate-50/50 rounded-lg mx-2 border border-slate-100/50",children:g})})]})};function Ry(){const[x,z]=j.useState(null),[g,m]=j.useState("sales"),[y,$]=j.useState(null),[q,ae]=j.useState(!1),[E,v]=j.useState(!1),[M,Q]=j.useState(null),{logActivity:w,logLogin:A,logLogout:U,logPageView:X}=Ly({user:x,apiUrl:Ve,enabled:!!x});j.useEffect(()=>{if(x){const k=new Oy({idleTimeout:18e5,onLogout:o=>{console.log("Session timeout:",o),U(o),D(),o==="IDLE_TIMEOUT"&&alert(",")},onOffline:()=>{v(!0)},onOnline:()=>{v(!1)}});return Q(k),()=>k.destroy()}},[x]),j.useEffect(()=>{const k=sessionStorage.getItem("inventory_user");if(k){const T=JSON.parse(k);T&&typeof T.permissions>"u"?(console.warn("Detected stale user data (no permissions). Clearing session."),sessionStorage.removeItem("inventory_user"),z(null)):z(T)}const o=()=>{$(null),ae(!1)};return window.addEventListener("click",o),()=>window.removeEventListener("click",o)},[]),j.useEffect(()=>{x&&g&&X(g)},[g,x]);const u=k=>{if(!x)return!1;if(x.role==="BOSS")return!0;let o=x.permissions;if(typeof o>"u"||o===null)o=[];else if(typeof o=="string")try{o=JSON.parse(o)}catch(T){console.error("Failed to parse permissions string:",T),o=[]}switch(Array.isArray(o)||(o=[]),k){case"sales":return o.includes("sales_entry")||o.includes("sales");case"report":return o.includes("sales_report")||o.includes("sales");case"purchase":return o.includes("purchase_entry")||o.includes("purchase");case"purchaseHistory":return o.includes("purchase_history")||o.includes("purchase");case"inventory":return o.includes("inventory_adjust");case"stocktake":return o.includes("inventory_stocktake");case"valuation":return o.includes("inventory_valuation");case"adjustHistory":return o.includes("inventory_adjust_history")||o.includes("inventory_history");case"stocktakeHistory":return o.includes("inventory_stocktake_history")||o.includes("inventory_history");case"expenditureManagement":return o.includes("finance_expenditure")||o.includes("finance");case"receivable":return o.includes("finance_receivable")||o.includes("finance");case"payable":return o.includes("finance_payable")||o.includes("finance");case"incomeStatement":return o.includes("finance_income")||o.includes("finance");case"costCalculation":return o.includes("finance_cost")||o.includes("finance");case"payroll":return o.includes("finance_payroll")||o.includes("finance");case"salesRanking":return o.includes("analytics_sales")||o.includes("analytics");case"customerRanking":return o.includes("analytics_customer")||o.includes("analytics");case"profitAnalysis":return o.includes("analytics_profit")||o.includes("analytics");case"turnoverRate":return o.includes("analytics_turnover")||o.includes("analytics");case"permissionControl":return o.includes("system_config")||o.includes("system");case"activityLog":return o.includes("system_activity_logs")||o.includes("system")||x.role==="BOSS"||x.role==="ADMIN";default:return!0}},d=k=>{u(k)?(m(k),$(null),ae(!1)):console.warn(`Access denied for page: ${k}`)},O=k=>{z(k),sessionStorage.setItem("inventory_user",JSON.stringify(k))},p=Sa.useRef(x);j.useEffect(()=>{!p.current&&x&&setTimeout(()=>{A&&A()},500),p.current=x},[x,A]);const D=()=>{U&&U("MANUAL"),z(null),sessionStorage.removeItem("inventory_user"),M&&M.destroy()};return Ve.includes("YOUR_SCRIPT_ID")?a.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-red-50 text-red-900",children:[a.jsx(la,{size:64,className:"mb-4 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold mb-2",children:""}),a.jsx("p",{className:"text-center max-w-md mb-6",children:" `VITE_GAS_API_URL`  GitHub Secrets  Actions "}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-red-200 font-mono text-xs w-full max-w-lg",children:[a.jsx("p",{className:"font-bold mb-2",children:""}),a.jsxs("p",{children:["GAS_API_URL: ",String(Ve)]}),a.jsxs("p",{children:["Base URL: ","/inventory-system/"]})]})]}):x?a.jsxs("div",{className:"min-h-screen flex flex-col",children:[E&&a.jsxs("div",{className:"bg-yellow-500 text-white text-center py-2 text-sm font-medium flex items-center justify-center gap-2",children:[a.jsx(iy,{size:16}),","]}),a.jsxs("header",{className:"h-16 border-b border-[var(--border-primary)] bg-[var(--bg-secondary)] backdrop-blur-md flex justify-between items-center px-6 sticky top-0 z-[60]",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("img",{src:"/inventory-system/logo.png",alt:"Logo",className:"h-10 w-auto object-contain"})}),a.jsxs("div",{className:"md:hidden relative",onClick:k=>k.stopPropagation(),children:[a.jsxs("button",{onClick:()=>ae(!q),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-all ${q?"bg-blue-50 border-blue-200 text-blue-600 ring-2 ring-blue-100":"bg-[var(--bg-secondary)] border-[var(--border-primary)] text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:[a.jsx("span",{className:"font-bold text-sm",children:""}),a.jsx(gl,{size:16,className:`transition-transform duration-300 ${q?"rotate-180":""}`})]}),q&&a.jsx("div",{className:"fixed top-16 left-0 right-0 mx-auto mt-2 w-[90%] max-w-md bg-[var(--bg-secondary)] backdrop-blur-xl border border-[var(--border-primary)] rounded-2xl shadow-2xl overflow-y-auto max-h-[80vh] animate-in fade-in slide-in-from-top-4 duration-200 z-[100]",children:a.jsxs("div",{className:"p-2 flex flex-col",children:[(x.role==="BOSS"||u("sales")||u("report"))&&a.jsxs(yl,{label:"",icon:Dr,children:[u("sales")&&a.jsx(we,{label:"",icon:Dr,onClick:()=>d("sales"),active:g==="sales"}),u("report")&&a.jsx(we,{label:"",icon:an,onClick:()=>d("report"),active:g==="report"})]}),(x.role==="BOSS"||u("purchase")||u("purchaseHistory"))&&a.jsxs(yl,{label:"",icon:Ar,children:[u("purchase")&&a.jsx(we,{label:"",icon:Ar,onClick:()=>d("purchase"),active:g==="purchase"}),u("purchaseHistory")&&a.jsx(we,{label:"",icon:ns,onClick:()=>d("purchaseHistory"),active:g==="purchaseHistory"})]}),(x.role==="BOSS"||u("inventory")||u("stocktake")||u("valuation")||u("adjustHistory")||u("stocktakeHistory"))&&a.jsxs(yl,{label:"",icon:wr,children:[u("inventory")&&a.jsx(we,{label:"",icon:wr,onClick:()=>d("inventory"),active:g==="inventory"}),u("stocktake")&&a.jsx(we,{label:"",icon:nn,onClick:()=>d("stocktake"),active:g==="stocktake"}),u("valuation")&&a.jsx(we,{label:"",icon:ut,onClick:()=>d("valuation"),active:g==="valuation"}),u("adjustHistory")&&a.jsx(we,{label:"",icon:an,onClick:()=>d("adjustHistory"),active:g==="adjustHistory"}),u("stocktakeHistory")&&a.jsx(we,{label:"",icon:ns,onClick:()=>d("stocktakeHistory"),active:g==="stocktakeHistory"})]}),(x.role==="BOSS"||u("expenditureManagement"))&&a.jsx(yl,{label:"",icon:ut,children:a.jsx(we,{label:"",icon:ut,onClick:()=>d("expenditureManagement"),active:g==="expenditureManagement"})}),(x.role==="BOSS"||u("receivable")||u("payable")||u("incomeStatement")||u("costCalculation")||u("payroll"))&&a.jsxs(yl,{label:"",icon:Ja,children:[u("receivable")&&a.jsx(we,{label:"",icon:Ja,onClick:()=>d("receivable"),active:g==="receivable"}),u("payable")&&a.jsx(we,{label:"",icon:Ja,onClick:()=>d("payable"),active:g==="payable"}),u("incomeStatement")&&a.jsx(we,{label:"",icon:Pi,onClick:()=>d("incomeStatement"),active:g==="incomeStatement"}),u("costCalculation")&&a.jsx(we,{label:"",icon:ut,onClick:()=>d("costCalculation"),active:g==="costCalculation"}),u("payroll")&&a.jsx(we,{label:"",icon:ut,onClick:()=>d("payroll"),active:g==="payroll"})]}),(x.role==="BOSS"||u("salesRanking")||u("customerRanking")||u("profitAnalysis")||u("turnoverRate"))&&a.jsxs(yl,{label:"",icon:Wa,children:[u("salesRanking")&&a.jsx(we,{label:"",icon:Ii,onClick:()=>d("salesRanking"),active:g==="salesRanking"}),u("customerRanking")&&a.jsx(we,{label:"",icon:Tr,onClick:()=>d("customerRanking"),active:g==="customerRanking"}),u("profitAnalysis")&&a.jsx(we,{label:"",icon:Wa,onClick:()=>d("profitAnalysis"),active:g==="profitAnalysis"}),u("turnoverRate")&&a.jsx(we,{label:"",icon:vl,onClick:()=>d("turnoverRate"),active:g==="turnoverRate"})]}),(x.role==="BOSS"||u("permissionControl")||u("activityLog"))&&a.jsxs(yl,{label:"",icon:la,children:[u("permissionControl")&&a.jsx(we,{label:"",icon:la,onClick:()=>d("permissionControl"),active:g==="permissionControl"}),u("activityLog")&&a.jsx(we,{label:"",icon:vl,onClick:()=>d("activityLog"),active:g==="activityLog"})]})]})})]}),a.jsxs("nav",{className:"hidden md:flex gap-1",children:[(x.role==="BOSS"||u("sales")||u("report"))&&a.jsxs(hl,{id:"sales",label:"",icon:Dr,openDropdown:y,setOpenDropdown:$,active:["sales","report"].includes(g),children:[u("sales")&&a.jsx(we,{label:"",icon:Dr,onClick:()=>d("sales"),active:g==="sales"}),u("report")&&a.jsx(we,{label:"",icon:an,onClick:()=>d("report"),active:g==="report"})]}),(x.role==="BOSS"||u("purchase")||u("purchaseHistory"))&&a.jsxs(hl,{id:"purchase",label:"",icon:Ar,openDropdown:y,setOpenDropdown:$,active:["purchase","purchaseHistory"].includes(g),children:[u("purchase")&&a.jsx(we,{label:"",icon:Ar,onClick:()=>d("purchase"),active:g==="purchase"}),u("purchaseHistory")&&a.jsx(we,{label:"",icon:ns,onClick:()=>d("purchaseHistory"),active:g==="purchaseHistory"})]}),(x.role==="BOSS"||u("inventory")||u("stocktake")||u("valuation")||u("adjustHistory")||u("stocktakeHistory"))&&a.jsxs(hl,{id:"inventory",label:"",icon:wr,openDropdown:y,setOpenDropdown:$,active:["inventory","stocktake","valuation","adjustHistory","stocktakeHistory"].includes(g),children:[u("inventory")&&a.jsx(we,{label:"",icon:wr,onClick:()=>d("inventory"),active:g==="inventory"}),u("stocktake")&&a.jsx(we,{label:"",icon:nn,onClick:()=>d("stocktake"),active:g==="stocktake"}),u("valuation")&&a.jsx(we,{label:"",icon:ut,onClick:()=>d("valuation"),active:g==="valuation"}),a.jsx("div",{className:"my-1 border-t border-slate-100"}),u("adjustHistory")&&a.jsx(we,{label:"",icon:an,onClick:()=>d("adjustHistory"),active:g==="adjustHistory"}),u("stocktakeHistory")&&a.jsx(we,{label:"",icon:ns,onClick:()=>d("stocktakeHistory"),active:g==="stocktakeHistory"})]}),(x.role==="BOSS"||u("expenditureManagement"))&&a.jsx(hl,{id:"expenditure",label:"",icon:ut,openDropdown:y,setOpenDropdown:$,active:g==="expenditureManagement",children:a.jsx(we,{label:"",icon:ut,onClick:()=>d("expenditureManagement"),active:g==="expenditureManagement"})}),(x.role==="BOSS"||u("receivable")||u("payable")||u("incomeStatement")||u("costCalculation")||u("payroll"))&&a.jsxs(hl,{id:"accounting",label:"",icon:Ja,openDropdown:y,setOpenDropdown:$,active:["receivable","payable","incomeStatement","costCalculation","payroll"].includes(g),children:[u("receivable")&&a.jsx(we,{label:"",icon:Ja,onClick:()=>d("receivable"),active:g==="receivable"}),u("payable")&&a.jsx(we,{label:"",icon:Ja,onClick:()=>d("payable"),active:g==="payable"}),u("incomeStatement")&&a.jsx(we,{label:"",icon:Pi,onClick:()=>d("incomeStatement"),active:g==="incomeStatement"}),a.jsx("div",{className:"my-1 border-t border-slate-100"}),u("costCalculation")&&a.jsx(we,{label:"",icon:ut,onClick:()=>d("costCalculation"),active:g==="costCalculation"}),u("payroll")&&a.jsx(we,{label:"",icon:ut,onClick:()=>d("payroll"),active:g==="payroll"})]}),(x.role==="BOSS"||u("salesRanking")||u("customerRanking")||u("profitAnalysis")||u("turnoverRate"))&&a.jsxs(hl,{id:"analytics",label:"",icon:Wa,openDropdown:y,setOpenDropdown:$,active:["salesRanking","customerRanking","profitAnalysis","turnoverRate"].includes(g),children:[u("salesRanking")&&a.jsx(we,{label:"",icon:Ii,onClick:()=>d("salesRanking"),active:g==="salesRanking"}),u("customerRanking")&&a.jsx(we,{label:"",icon:Tr,onClick:()=>d("customerRanking"),active:g==="customerRanking"}),u("profitAnalysis")&&a.jsx(we,{label:"",icon:Wa,onClick:()=>d("profitAnalysis"),active:g==="profitAnalysis"}),u("turnoverRate")&&a.jsx(we,{label:"",icon:vl,onClick:()=>d("turnoverRate"),active:g==="turnoverRate"})]}),(x.role==="BOSS"||u("permissionControl")||u("activityLog"))&&a.jsxs(hl,{id:"system",label:"",icon:la,openDropdown:y,setOpenDropdown:$,active:["permissionControl","activityLog"].includes(g),children:[u("permissionControl")&&a.jsx(we,{label:"",icon:la,onClick:()=>d("permissionControl"),active:g==="permissionControl"}),u("activityLog")&&a.jsx(we,{label:"",icon:vl,onClick:()=>d("activityLog"),active:g==="activityLog"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(My,{}),a.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[a.jsx("span",{className:"text-xs font-bold text-blue-600 dark:text-blue-400 leading-none",children:x.username}),a.jsx("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase font-bold tracking-tighter",children:x.role})]}),a.jsx("button",{onClick:D,className:"w-10 h-10 rounded-xl flex items-center justify-center text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all border border-transparent hover:border-red-100 dark:hover:border-red-800",title:"",children:a.jsx(Rh,{size:20})})]})]}),a.jsx("main",{className:"flex-1 p-4 md:p-6 overflow-hidden",children:u(g)?a.jsxs(a.Fragment,{children:[g==="sales"&&a.jsx(dy,{user:x,apiUrl:Ve,logActivity:w}),g==="inventory"&&a.jsx(uy,{user:x,apiUrl:Ve,logActivity:w}),g==="purchase"&&a.jsx(xy,{user:x,apiUrl:Ve,logActivity:w}),g==="report"&&a.jsx(fy,{user:x,apiUrl:Ve,logActivity:w}),g==="purchaseHistory"&&a.jsx(my,{user:x,apiUrl:Ve,logActivity:w}),g==="adjustHistory"&&a.jsx(py,{user:x,apiUrl:Ve,logActivity:w}),g==="valuation"&&a.jsx(hy,{user:x,apiUrl:Ve,logActivity:w}),g==="stocktake"&&a.jsx(yy,{user:x,apiUrl:Ve,logActivity:w}),g==="stocktakeHistory"&&a.jsx(vy,{user:x,apiUrl:Ve,logActivity:w}),g==="receivable"&&a.jsx(by,{user:x,apiUrl:Ve,logActivity:w}),g==="payable"&&a.jsx(gy,{user:x,apiUrl:Ve,logActivity:w}),g==="salesRanking"&&a.jsx(jy,{user:x,apiUrl:Ve,logActivity:w}),g==="customerRanking"&&a.jsx(Ny,{user:x,apiUrl:Ve,logActivity:w}),g==="profitAnalysis"&&a.jsx(Sy,{user:x,apiUrl:Ve,logActivity:w}),g==="turnoverRate"&&a.jsx(wy,{user:x,apiUrl:Ve,logActivity:w}),g==="costCalculation"&&a.jsx(Ay,{user:x,apiUrl:Ve,logActivity:w}),g==="expenditureManagement"&&a.jsx(ky,{user:x,apiUrl:Ve,logActivity:w}),g==="incomeStatement"&&a.jsx(Dy,{user:x,apiUrl:Ve,logActivity:w}),g==="permissionControl"&&a.jsx(Cy,{user:x,apiUrl:Ve,logActivity:w}),g==="payroll"&&a.jsx(Ey,{user:x,apiUrl:Ve,logActivity:w}),g==="activityLog"&&a.jsx(zy,{user:x,apiUrl:Ve})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[a.jsx(la,{size:64,className:"mb-4 text-slate-200"}),a.jsx("h2",{className:"text-xl font-bold text-slate-800",children:""}),a.jsx("p",{className:"mt-2",children:""}),a.jsx("button",{onClick:()=>m("sales"),className:"mt-6 px-4 py-2 bg-white hover:bg-slate-50 text-blue-600 rounded-lg transition-colors border border-slate-200 shadow-sm",children:""})]})})]}):a.jsx(oy,{onLogin:O,apiUrl:Ve})}function Uy(){return a.jsx(_y,{children:a.jsx(Ry,{})})}Pp.createRoot(document.getElementById("root")).render(a.jsx(j.StrictMode,{children:a.jsx(Uy,{})}));
